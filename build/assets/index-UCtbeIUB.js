(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var S0={exports:{}},du={};var M1;function PS(){if(M1)return du;M1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:c}}return du.Fragment=e,du.jsx=t,du.jsxs=t,du}var O1;function LS(){return O1||(O1=1,S0.exports=PS()),S0.exports}var r=LS(),T0={exports:{}},ft={};var P1;function zS(){if(P1)return ft;P1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),j=Symbol.iterator;function I(C){return C===null||typeof C!="object"?null:(C=j&&C[j]||C["@@iterator"],typeof C=="function"?C:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,L={};function se(C,J,te){this.props=C,this.context=J,this.refs=L,this.updater=te||B}se.prototype.isReactComponent={},se.prototype.setState=function(C,J){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,J,"setState")},se.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function W(){}W.prototype=se.prototype;function re(C,J,te){this.props=C,this.context=J,this.refs=L,this.updater=te||B}var me=re.prototype=new W;me.constructor=re,O(me,se.prototype),me.isPureReactComponent=!0;var xe=Array.isArray;function Te(){}var D={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function A(C,J,te){var ge=te.ref;return{$$typeof:s,type:C,key:J,ref:ge!==void 0?ge:null,props:te}}function z(C,J){return A(C.type,J,C.props)}function $(C){return typeof C=="object"&&C!==null&&C.$$typeof===s}function q(C){var J={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(te){return J[te]})}var k=/\/+/g;function ue(C,J){return typeof C=="object"&&C!==null&&C.key!=null?q(""+C.key):J.toString(36)}function _e(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Te,Te):(C.status="pending",C.then(function(J){C.status==="pending"&&(C.status="fulfilled",C.value=J)},function(J){C.status==="pending"&&(C.status="rejected",C.reason=J)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function P(C,J,te,ge,Ie){var De=typeof C;(De==="undefined"||De==="boolean")&&(C=null);var Ce=!1;if(C===null)Ce=!0;else switch(De){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(C.$$typeof){case s:case e:Ce=!0;break;case b:return Ce=C._init,P(Ce(C._payload),J,te,ge,Ie)}}if(Ce)return Ie=Ie(C),Ce=ge===""?"."+ue(C,0):ge,xe(Ie)?(te="",Ce!=null&&(te=Ce.replace(k,"$&/")+"/"),P(Ie,J,te,"",function(H){return H})):Ie!=null&&($(Ie)&&(Ie=z(Ie,te+(Ie.key==null||C&&C.key===Ie.key?"":(""+Ie.key).replace(k,"$&/")+"/")+Ce)),J.push(Ie)),1;Ce=0;var qe=ge===""?".":ge+":";if(xe(C))for(var be=0;be<C.length;be++)ge=C[be],De=qe+ue(ge,be),Ce+=P(ge,J,te,De,Ie);else if(be=I(C),typeof be=="function")for(C=be.call(C),be=0;!(ge=C.next()).done;)ge=ge.value,De=qe+ue(ge,be++),Ce+=P(ge,J,te,De,Ie);else if(De==="object"){if(typeof C.then=="function")return P(_e(C),J,te,ge,Ie);throw J=String(C),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function M(C,J,te){if(C==null)return C;var ge=[],Ie=0;return P(C,ge,"","",function(De){return J.call(te,De,Ie++)}),ge}function F(C){if(C._status===-1){var J=C._result;J=J(),J.then(function(te){(C._status===0||C._status===-1)&&(C._status=1,C._result=te)},function(te){(C._status===0||C._status===-1)&&(C._status=2,C._result=te)}),C._status===-1&&(C._status=0,C._result=J)}if(C._status===1)return C._result.default;throw C._result}var Q=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},de={map:M,forEach:function(C,J,te){M(C,function(){J.apply(this,arguments)},te)},count:function(C){var J=0;return M(C,function(){J++}),J},toArray:function(C){return M(C,function(J){return J})||[]},only:function(C){if(!$(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return ft.Activity=v,ft.Children=de,ft.Component=se,ft.Fragment=t,ft.Profiler=o,ft.PureComponent=re,ft.StrictMode=a,ft.Suspense=p,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ft.__COMPILER_RUNTIME={__proto__:null,c:function(C){return D.H.useMemoCache(C)}},ft.cache=function(C){return function(){return C.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(C,J,te){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ge=O({},C.props),Ie=C.key;if(J!=null)for(De in J.key!==void 0&&(Ie=""+J.key),J)!T.call(J,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&J.ref===void 0||(ge[De]=J[De]);var De=arguments.length-2;if(De===1)ge.children=te;else if(1<De){for(var Ce=Array(De),qe=0;qe<De;qe++)Ce[qe]=arguments[qe+2];ge.children=Ce}return A(C.type,Ie,ge)},ft.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},ft.createElement=function(C,J,te){var ge,Ie={},De=null;if(J!=null)for(ge in J.key!==void 0&&(De=""+J.key),J)T.call(J,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ie[ge]=J[ge]);var Ce=arguments.length-2;if(Ce===1)Ie.children=te;else if(1<Ce){for(var qe=Array(Ce),be=0;be<Ce;be++)qe[be]=arguments[be+2];Ie.children=qe}if(C&&C.defaultProps)for(ge in Ce=C.defaultProps,Ce)Ie[ge]===void 0&&(Ie[ge]=Ce[ge]);return A(C,De,Ie)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(C){return{$$typeof:m,render:C}},ft.isValidElement=$,ft.lazy=function(C){return{$$typeof:b,_payload:{_status:-1,_result:C},_init:F}},ft.memo=function(C,J){return{$$typeof:g,type:C,compare:J===void 0?null:J}},ft.startTransition=function(C){var J=D.T,te={};D.T=te;try{var ge=C(),Ie=D.S;Ie!==null&&Ie(te,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(Te,Q)}catch(De){Q(De)}finally{J!==null&&te.types!==null&&(J.types=te.types),D.T=J}},ft.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ft.use=function(C){return D.H.use(C)},ft.useActionState=function(C,J,te){return D.H.useActionState(C,J,te)},ft.useCallback=function(C,J){return D.H.useCallback(C,J)},ft.useContext=function(C){return D.H.useContext(C)},ft.useDebugValue=function(){},ft.useDeferredValue=function(C,J){return D.H.useDeferredValue(C,J)},ft.useEffect=function(C,J){return D.H.useEffect(C,J)},ft.useEffectEvent=function(C){return D.H.useEffectEvent(C)},ft.useId=function(){return D.H.useId()},ft.useImperativeHandle=function(C,J,te){return D.H.useImperativeHandle(C,J,te)},ft.useInsertionEffect=function(C,J){return D.H.useInsertionEffect(C,J)},ft.useLayoutEffect=function(C,J){return D.H.useLayoutEffect(C,J)},ft.useMemo=function(C,J){return D.H.useMemo(C,J)},ft.useOptimistic=function(C,J){return D.H.useOptimistic(C,J)},ft.useReducer=function(C,J,te){return D.H.useReducer(C,J,te)},ft.useRef=function(C){return D.H.useRef(C)},ft.useState=function(C){return D.H.useState(C)},ft.useSyncExternalStore=function(C,J,te){return D.H.useSyncExternalStore(C,J,te)},ft.useTransition=function(){return D.H.useTransition()},ft.version="19.2.3",ft}var L1;function Yf(){return L1||(L1=1,T0.exports=zS()),T0.exports}var N=Yf(),k0={exports:{}},hu={},A0={exports:{}},C0={};var z1;function VS(){return z1||(z1=1,(function(s){function e(P,M){var F=P.length;P.push(M);e:for(;0<F;){var Q=F-1>>>1,de=P[Q];if(0<o(de,M))P[Q]=M,P[F]=de,F=Q;else break e}}function t(P){return P.length===0?null:P[0]}function a(P){if(P.length===0)return null;var M=P[0],F=P.pop();if(F!==M){P[0]=F;e:for(var Q=0,de=P.length,C=de>>>1;Q<C;){var J=2*(Q+1)-1,te=P[J],ge=J+1,Ie=P[ge];if(0>o(te,F))ge<de&&0>o(Ie,te)?(P[Q]=Ie,P[ge]=F,Q=ge):(P[Q]=te,P[J]=F,Q=J);else if(ge<de&&0>o(Ie,F))P[Q]=Ie,P[ge]=F,Q=ge;else break e}}return M}function o(P,M){var F=P.sortIndex-M.sortIndex;return F!==0?F:P.id-M.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var p=[],g=[],b=1,v=null,j=3,I=!1,B=!1,O=!1,L=!1,se=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function me(P){for(var M=t(g);M!==null;){if(M.callback===null)a(g);else if(M.startTime<=P)a(g),M.sortIndex=M.expirationTime,e(p,M);else break;M=t(g)}}function xe(P){if(O=!1,me(P),!B)if(t(p)!==null)B=!0,Te||(Te=!0,q());else{var M=t(g);M!==null&&_e(xe,M.startTime-P)}}var Te=!1,D=-1,T=5,A=-1;function z(){return L?!0:!(s.unstable_now()-A<T)}function $(){if(L=!1,Te){var P=s.unstable_now();A=P;var M=!0;try{e:{B=!1,O&&(O=!1,W(D),D=-1),I=!0;var F=j;try{t:{for(me(P),v=t(p);v!==null&&!(v.expirationTime>P&&z());){var Q=v.callback;if(typeof Q=="function"){v.callback=null,j=v.priorityLevel;var de=Q(v.expirationTime<=P);if(P=s.unstable_now(),typeof de=="function"){v.callback=de,me(P),M=!0;break t}v===t(p)&&a(p),me(P)}else a(p);v=t(p)}if(v!==null)M=!0;else{var C=t(g);C!==null&&_e(xe,C.startTime-P),M=!1}}break e}finally{v=null,j=F,I=!1}M=void 0}}finally{M?q():Te=!1}}}var q;if(typeof re=="function")q=function(){re($)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,ue=k.port2;k.port1.onmessage=$,q=function(){ue.postMessage(null)}}else q=function(){se($,0)};function _e(P,M){D=se(function(){P(s.unstable_now())},M)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(P){switch(j){case 1:case 2:case 3:var M=3;break;default:M=j}var F=j;j=M;try{return P()}finally{j=F}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(P,M){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=j;j=P;try{return M()}finally{j=F}},s.unstable_scheduleCallback=function(P,M,F){var Q=s.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Q+F:Q):F=Q,P){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=F+de,P={id:b++,callback:M,priorityLevel:P,startTime:F,expirationTime:de,sortIndex:-1},F>Q?(P.sortIndex=F,e(g,P),t(p)===null&&P===t(g)&&(O?(W(D),D=-1):O=!0,_e(xe,F-Q))):(P.sortIndex=de,e(p,P),B||I||(B=!0,Te||(Te=!0,q()))),P},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(P){var M=j;return function(){var F=j;j=M;try{return P.apply(this,arguments)}finally{j=F}}}})(C0)),C0}var V1;function US(){return V1||(V1=1,A0.exports=VS()),A0.exports}var R0={exports:{}},jn={};var U1;function BS(){if(U1)return jn;U1=1;var s=Yf();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,g,b){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:v==null?null:""+v,children:p,containerInfo:g,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,jn.createPortal=function(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,b)},jn.flushSync=function(p){var g=d.T,b=a.p;try{if(d.T=null,a.p=2,p)return p()}finally{d.T=g,a.p=b,a.d.f()}},jn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},jn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},jn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var b=g.as,v=m(b,g.crossOrigin),j=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:j,fetchPriority:I}):b==="script"&&a.d.X(p,{crossOrigin:v,integrity:j,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},jn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=m(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},jn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,v=m(b,g.crossOrigin);a.d.L(p,b,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},jn.preloadModule=function(p,g){if(typeof p=="string")if(g){var b=m(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},jn.requestFormReset=function(p){a.d.r(p)},jn.unstable_batchedUpdates=function(p,g){return p(g)},jn.useFormState=function(p,g,b){return d.H.useFormState(p,g,b)},jn.useFormStatus=function(){return d.H.useHostTransitionStatus()},jn.version="19.2.3",jn}var B1;function vN(){if(B1)return R0.exports;B1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),R0.exports=BS(),R0.exports}var $1;function $S(){if($1)return hu;$1=1;var s=US(),e=Yf(),t=vN();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(a(188))}function g(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(a(188));return i!==n?null:n}for(var l=n,u=i;;){var f=l.return;if(f===null)break;var x=f.alternate;if(x===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===x.child){for(x=f.child;x;){if(x===l)return p(f),n;if(x===u)return p(f),i;x=x.sibling}throw Error(a(188))}if(l.return!==u.return)l=f,u=x;else{for(var w=!1,S=f.child;S;){if(S===l){w=!0,l=f,u=x;break}if(S===u){w=!0,u=f,l=x;break}S=S.sibling}if(!w){for(S=x.child;S;){if(S===l){w=!0,l=x,u=f;break}if(S===u){w=!0,u=x,l=f;break}S=S.sibling}if(!w)throw Error(a(189))}}if(l.alternate!==u)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,j=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),re=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=$&&n[$]||n["@@iterator"],typeof n=="function"?n:null)}var k=Symbol.for("react.client.reference");function ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===k?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case se:return"Profiler";case L:return"StrictMode";case xe:return"Suspense";case Te:return"SuspenseList";case A:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case B:return"Portal";case re:return n.displayName||"Context";case W:return(n._context.displayName||"Context")+".Consumer";case me:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return i=n.displayName||null,i!==null?i:ue(n.type)||"Memo";case T:i=n._payload,n=n._init;try{return ue(n(i))}catch{}}return null}var _e=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Q=[],de=-1;function C(n){return{current:n}}function J(n){0>de||(n.current=Q[de],Q[de]=null,de--)}function te(n,i){de++,Q[de]=n.current,n.current=i}var ge=C(null),Ie=C(null),De=C(null),Ce=C(null);function qe(n,i){switch(te(De,i),te(Ie,n),te(ge,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?n1(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=n1(i),n=r1(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ge),te(ge,n)}function be(){J(ge),J(Ie),J(De)}function H(n){n.memoizedState!==null&&te(Ce,n);var i=ge.current,l=r1(i,n.type);i!==l&&(te(Ie,n),te(ge,l))}function Me(n){Ie.current===n&&(J(ge),J(Ie)),Ce.current===n&&(J(Ce),ou._currentValue=F)}var Le,We;function Fe(n){if(Le===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Le=i&&i[1]||"",We=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+n+We}var Z=!1;function ve(n,i){if(!n||Z)return"";Z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(pe){var ce=pe}Reflect.construct(n,[],Ee)}else{try{Ee.call()}catch(pe){ce=pe}n.call(Ee.prototype)}}else{try{throw Error()}catch(pe){ce=pe}(Ee=n())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(pe){if(pe&&ce&&typeof pe.stack=="string")return[pe.stack,ce.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=u.DetermineComponentFrameRoot(),w=x[0],S=x[1];if(w&&S){var G=w.split(`
`),oe=S.split(`
`);for(f=u=0;u<G.length&&!G[u].includes("DetermineComponentFrameRoot");)u++;for(;f<oe.length&&!oe[f].includes("DetermineComponentFrameRoot");)f++;if(u===G.length||f===oe.length)for(u=G.length-1,f=oe.length-1;1<=u&&0<=f&&G[u]!==oe[f];)f--;for(;1<=u&&0<=f;u--,f--)if(G[u]!==oe[f]){if(u!==1||f!==1)do if(u--,f--,0>f||G[u]!==oe[f]){var ye=`
`+G[u].replace(" at new "," at ");return n.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",n.displayName)),ye}while(1<=u&&0<=f);break}}}finally{Z=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Fe(l):""}function et(n,i){switch(n.tag){case 26:case 27:case 5:return Fe(n.type);case 16:return Fe("Lazy");case 13:return n.child!==i&&i!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return ve(n.type,!1);case 11:return ve(n.type.render,!1);case 1:return ve(n.type,!0);case 31:return Fe("Activity");default:return""}}function bt(n){try{var i="",l=null;do i+=et(n,l),l=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var lt=Object.prototype.hasOwnProperty,mt=s.unstable_scheduleCallback,Pt=s.unstable_cancelCallback,Ws=s.unstable_shouldYield,Bn=s.unstable_requestPaint,is=s.unstable_now,sn=s.unstable_getCurrentPriorityLevel,Rs=s.unstable_ImmediatePriority,xn=s.unstable_UserBlockingPriority,Xt=s.unstable_NormalPriority,$n=s.unstable_LowPriority,ds=s.unstable_IdlePriority,Vs=s.log,sr=s.unstable_setDisableYieldValue,U=null,Ae=null;function Ve(n){if(typeof Vs=="function"&&sr(n),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(U,n)}catch{}}var ze=Math.clz32?Math.clz32:Is,nt=Math.log,pt=Math.LN2;function Is(n){return n>>>=0,n===0?32:31-(nt(n)/pt|0)|0}var Lt=256,K=262144,le=4194304;function V(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Y(n,i,l){var u=n.pendingLanes;if(u===0)return 0;var f=0,x=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~x,u!==0?f=V(u):(w&=S,w!==0?f=V(w):l||(l=S&~n,l!==0&&(f=V(l))))):(S=u&~x,S!==0?f=V(S):w!==0?f=V(w):l||(l=u&~n,l!==0&&(f=V(l)))),f===0?0:i!==0&&i!==f&&(i&x)===0&&(x=f&-f,l=i&-i,x>=l||x===32&&(l&4194048)!==0)?i:f}function Se(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ue(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ke(){var n=le;return le<<=1,(le&62914560)===0&&(le=4194304),n}function ht(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function Wt(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function yt(n,i,l,u,f,x){var w=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var S=n.entanglements,G=n.expirationTimes,oe=n.hiddenUpdates;for(l=w&~l;0<l;){var ye=31-ze(l),Ee=1<<ye;S[ye]=0,G[ye]=-1;var ce=oe[ye];if(ce!==null)for(oe[ye]=null,ye=0;ye<ce.length;ye++){var pe=ce[ye];pe!==null&&(pe.lane&=-536870913)}l&=~Ee}u!==0&&hs(n,u,0),x!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=x&~(w&~i))}function hs(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-ze(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|l&261930}function St(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var u=31-ze(l),f=1<<u;f&i|n[u]&i&&(n[u]|=i),l&=~f}}function os(n,i){var l=i&-i;return l=(l&42)!==0?1:ns(l),(l&(n.suspendedLanes|i))!==0?0:l}function ns(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function cn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nr(){var n=M.p;return n!==0?n:(n=window.event,n===void 0?32:T1(n.type))}function Us(n,i){var l=M.p;try{return M.p=n,i()}finally{M.p=l}}var ls=Math.random().toString(36).slice(2),It="__reactFiber$"+ls,Bt="__reactProps$"+ls,Bs="__reactContainer$"+ls,Ma="__reactEvents$"+ls,cl="__reactListeners$"+ls,sa="__reactHandles$"+ls,Ur="__reactResources$"+ls,bn="__reactMarker$"+ls;function Br(n){delete n[It],delete n[Bt],delete n[Ma],delete n[cl],delete n[sa]}function rr(n){var i=n[It];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Bs]||l[It]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=d1(n);n!==null;){if(l=n[It])return l;n=d1(n)}return i}n=l,l=n.parentNode}return null}function yn(n){if(n=n[It]||n[Bs]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function vn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function ar(n){var i=n[Ur];return i||(i=n[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _s(n){n[bn]=!0}var fo=new Set,mo={};function vr(n,i){wr(n,i),wr(n+"Capture",i)}function wr(n,i){for(mo[n]=i,n=0;n<i.length;n++)fo.add(i[n])}var po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fn={},go={};function xo(n){return lt.call(go,n)?!0:lt.call(Fn,n)?!1:po.test(n)?go[n]=!0:(Fn[n]=!0,!1)}function Oa(n,i,l){if(xo(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Rn(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function js(n,i,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+u)}}function $s(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function na(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function bo(n,i,l){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,x=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){l=""+w,x.call(this,w)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function $t(n){if(!n._valueTracker){var i=na(n)?"checked":"value";n._valueTracker=bo(n,i,""+n[i])}}function Pa(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return n&&(u=na(n)?n.checked?"true":"false":n.value),n=u,n!==l?(i.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ra=/[\n"\\]/g;function wn(n){return n.replace(ra,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function pi(n,i,l,u,f,x,w,S){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+$s(i)):n.value!==""+$s(i)&&(n.value=""+$s(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?yo(n,w,$s(i)):l!=null?yo(n,w,$s(l)):u!=null&&n.removeAttribute("value"),f==null&&x!=null&&(n.defaultChecked=!!x),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+$s(S):n.removeAttribute("name")}function ul(n,i,l,u,f,x,w,S){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.type=x),i!=null||l!=null){if(!(x!=="submit"&&x!=="reset"||i!=null)){$t(n);return}l=l!=null?""+$s(l):"",i=i!=null?""+$s(i):l,S||i===n.value||(n.value=i),n.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),$t(n)}function yo(n,i,l){i==="number"&&Nr(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function aa(n,i,l,u){if(n=n.options,i){i={};for(var f=0;f<l.length;f++)i["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=i.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&u&&(n[l].defaultSelected=!0)}else{for(l=""+$s(l),i=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function dl(n,i,l){if(i!=null&&(i=""+$s(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+$s(l):""}function ia(n,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(a(92));if(_e(u)){if(1<u.length)throw Error(a(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=$s(i),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u),$t(n)}function Nn(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var vo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gi(n,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,l):typeof l!="number"||l===0||vo.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function xi(n,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&l[f]!==u&&gi(n,f,u)}else for(var x in i)i.hasOwnProperty(x)&&gi(n,x,i[x])}function bi(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yi(n){return oa.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Hn(){}var la=null;function In(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ca=null,_r=null;function jr(n){var i=yn(n);if(i&&(n=i.stateNode)){var l=n[Bt]||null;e:switch(n=i.stateNode,i.type){case"input":if(pi(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wn(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==n&&u.form===n.form){var f=u[Bt]||null;if(!f)throw Error(a(90));pi(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===n.form&&Pa(u)}break e;case"textarea":dl(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&aa(n,!!l.multiple,i,!1)}}}var $r=!1;function ua(n,i,l){if($r)return n(i,l);$r=!0;try{var u=n(i);return u}finally{if($r=!1,(ca!==null||_r!==null)&&(xh(),ca&&(i=ca,n=_r,_r=ca=null,jr(i),n)))for(i=0;i<n.length;i++)jr(n[i])}}function ir(n,i){var l=n.stateNode;if(l===null)return null;var u=l[Bt]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=!1;if(qn)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){La=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch{La=!1}var Er=null,wo=null,za=null;function No(){if(za)return za;var n,i=wo,l=i.length,u,f="value"in Er?Er.value:Er.textContent,x=f.length;for(n=0;n<l&&i[n]===f[n];n++);var w=l-n;for(u=1;u<=w&&i[l-u]===f[x-u];u++);return za=f.slice(n,1<u?1-u:void 0)}function da(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function E(){return!0}function ee(){return!1}function Re(n){function i(l,u,f,x,w){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(l=n[S],this[S]=l?l(x):x[S]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?E:ee,this.isPropagationStopped=ee,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=E)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=E)},persist:function(){},isPersistent:E}),i}var $e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nt=Re($e),_t=v({},$e,{view:0,detail:0}),Es=Re(_t),zt,Gn,_n,Sr=v({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_n&&(_n&&n.type==="mousemove"?(zt=n.screenX-_n.screenX,Gn=n.screenY-_n.screenY):Gn=zt=0,_n=n),zt)},movementY:function(n){return"movementY"in n?n.movementY:Gn}}),Tc=Re(Sr),_o=v({},Sr,{dataTransfer:0}),Ed=Re(_o),Sd=v({},_t,{relatedTarget:0}),jo=Re(Sd),kc=v({},$e,{animationName:0,elapsedTime:0,pseudoElement:0}),Td=Re(kc),fl=v({},$e,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kd=Re(fl),Ad=v({},$e,{data:0}),ha=Re(Ad),Cd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dd(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Id[n])?!!i[n]:!1}function vi(){return Dd}var Dn=v({},_t,{key:function(n){if(n.key){var i=Cd[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=da(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Rd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vi,charCode:function(n){return n.type==="keypress"?da(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?da(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Md=Re(Dn),Od=v({},Sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=Re(Od),h=v({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vi}),y=Re(h),_=v({},$e,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Re(_),ae=v({},Sr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),he=Re(ae),Oe=v({},$e,{newState:0,oldState:0}),gt=Re(Oe),Ds=[9,13,27,32],Ft=qn&&"CompositionEvent"in window,ps=null;qn&&"documentMode"in document&&(ps=document.documentMode);var Tr=qn&&"TextEvent"in window&&!ps,fa=qn&&(!Ft||ps&&8<ps&&11>=ps),Fr=" ",Hr=!1;function Eo(n,i){switch(n){case"keyup":return Ds.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ml(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pl=!1;function i5(n,i){switch(n){case"compositionend":return ml(i);case"keypress":return i.which!==32?null:(Hr=!0,Fr);case"textInput":return n=i.data,n===Fr&&Hr?null:n;default:return null}}function o5(n,i){if(pl)return n==="compositionend"||!Ft&&Eo(n,i)?(n=No(),za=wo=Er=null,pl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return fa&&i.locale!=="ko"?null:i.data;default:return null}}var l5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!l5[n.type]:i==="textarea"}function pb(n,i,l,u){ca?_r?_r.push(u):_r=[u]:ca=u,i=jh(i,"onChange"),0<i.length&&(l=new Nt("onChange","change",null,l,u),n.push({event:l,listeners:i}))}var Ac=null,Cc=null;function c5(n){Wv(n,0)}function Pd(n){var i=vn(n);if(Pa(i))return n}function gb(n,i){if(n==="change")return i}var xb=!1;if(qn){var Dm;if(qn){var Mm="oninput"in document;if(!Mm){var bb=document.createElement("div");bb.setAttribute("oninput","return;"),Mm=typeof bb.oninput=="function"}Dm=Mm}else Dm=!1;xb=Dm&&(!document.documentMode||9<document.documentMode)}function yb(){Ac&&(Ac.detachEvent("onpropertychange",vb),Cc=Ac=null)}function vb(n){if(n.propertyName==="value"&&Pd(Cc)){var i=[];pb(i,Cc,n,In(n)),ua(c5,i)}}function u5(n,i,l){n==="focusin"?(yb(),Ac=i,Cc=l,Ac.attachEvent("onpropertychange",vb)):n==="focusout"&&yb()}function d5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Pd(Cc)}function h5(n,i){if(n==="click")return Pd(i)}function f5(n,i){if(n==="input"||n==="change")return Pd(i)}function m5(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var or=typeof Object.is=="function"?Object.is:m5;function Rc(n,i){if(or(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!lt.call(i,f)||!or(n[f],i[f]))return!1}return!0}function wb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Nb(n,i){var l=wb(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=i&&u>=i)return{node:l,offset:i-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=wb(l)}}function _b(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?_b(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function jb(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Nr(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Nr(n.document)}return i}function Om(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var p5=qn&&"documentMode"in document&&11>=document.documentMode,gl=null,Pm=null,Ic=null,Lm=!1;function Eb(n,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Lm||gl==null||gl!==Nr(u)||(u=gl,"selectionStart"in u&&Om(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ic&&Rc(Ic,u)||(Ic=u,u=jh(Pm,"onSelect"),0<u.length&&(i=new Nt("onSelect","select",null,i,l),n.push({event:i,listeners:u}),i.target=gl)))}function So(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var xl={animationend:So("Animation","AnimationEnd"),animationiteration:So("Animation","AnimationIteration"),animationstart:So("Animation","AnimationStart"),transitionrun:So("Transition","TransitionRun"),transitionstart:So("Transition","TransitionStart"),transitioncancel:So("Transition","TransitionCancel"),transitionend:So("Transition","TransitionEnd")},zm={},Sb={};qn&&(Sb=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function To(n){if(zm[n])return zm[n];if(!xl[n])return n;var i=xl[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in Sb)return zm[n]=i[l];return n}var Tb=To("animationend"),kb=To("animationiteration"),Ab=To("animationstart"),g5=To("transitionrun"),x5=To("transitionstart"),b5=To("transitioncancel"),Cb=To("transitionend"),Rb=new Map,Vm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vm.push("scrollEnd");function qr(n,i){Rb.set(n,i),vr(i,[n])}var Ld=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},kr=[],bl=0,Um=0;function zd(){for(var n=bl,i=Um=bl=0;i<n;){var l=kr[i];kr[i++]=null;var u=kr[i];kr[i++]=null;var f=kr[i];kr[i++]=null;var x=kr[i];if(kr[i++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}x!==0&&Ib(l,f,x)}}function Vd(n,i,l,u){kr[bl++]=n,kr[bl++]=i,kr[bl++]=l,kr[bl++]=u,Um|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Bm(n,i,l,u){return Vd(n,i,l,u),Ud(n)}function ko(n,i){return Vd(n,null,null,i),Ud(n)}function Ib(n,i,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var f=!1,x=n.return;x!==null;)x.childLanes|=l,u=x.alternate,u!==null&&(u.childLanes|=l),x.tag===22&&(n=x.stateNode,n===null||n._visibility&1||(f=!0)),n=x,x=x.return;return n.tag===3?(x=n.stateNode,f&&i!==null&&(f=31-ze(l),n=x.hiddenUpdates,u=n[f],u===null?n[f]=[i]:u.push(i),i.lane=l|536870912),x):null}function Ud(n){if(50<eu)throw eu=0,Xp=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var yl={};function y5(n,i,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(n,i,l,u){return new y5(n,i,l,u)}function $m(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ua(n,i){var l=n.alternate;return l===null?(l=lr(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Db(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Bd(n,i,l,u,f,x){var w=0;if(u=n,typeof n=="function")$m(n)&&(w=1);else if(typeof n=="string")w=jS(n,l,ge.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case A:return n=lr(31,l,i,f),n.elementType=A,n.lanes=x,n;case O:return Ao(l.children,f,x,i);case L:w=8,f|=24;break;case se:return n=lr(12,l,i,f|2),n.elementType=se,n.lanes=x,n;case xe:return n=lr(13,l,i,f),n.elementType=xe,n.lanes=x,n;case Te:return n=lr(19,l,i,f),n.elementType=Te,n.lanes=x,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case re:w=10;break e;case W:w=9;break e;case me:w=11;break e;case D:w=14;break e;case T:w=16,u=null;break e}w=29,l=Error(a(130,n===null?"null":typeof n,"")),u=null}return i=lr(w,l,i,f),i.elementType=n,i.type=u,i.lanes=x,i}function Ao(n,i,l,u){return n=lr(7,n,u,i),n.lanes=l,n}function Fm(n,i,l){return n=lr(6,n,null,i),n.lanes=l,n}function Mb(n){var i=lr(18,null,null,0);return i.stateNode=n,i}function Hm(n,i,l){return i=lr(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ob=new WeakMap;function Ar(n,i){if(typeof n=="object"&&n!==null){var l=Ob.get(n);return l!==void 0?l:(i={value:n,source:i,stack:bt(i)},Ob.set(n,i),i)}return{value:n,source:i,stack:bt(i)}}var vl=[],wl=0,$d=null,Dc=0,Cr=[],Rr=0,wi=null,ma=1,pa="";function Ba(n,i){vl[wl++]=Dc,vl[wl++]=$d,$d=n,Dc=i}function Pb(n,i,l){Cr[Rr++]=ma,Cr[Rr++]=pa,Cr[Rr++]=wi,wi=n;var u=ma;n=pa;var f=32-ze(u)-1;u&=~(1<<f),l+=1;var x=32-ze(i)+f;if(30<x){var w=f-f%5;x=(u&(1<<w)-1).toString(32),u>>=w,f-=w,ma=1<<32-ze(i)+f|l<<f|u,pa=x+n}else ma=1<<x|l<<f|u,pa=n}function qm(n){n.return!==null&&(Ba(n,1),Pb(n,1,0))}function Gm(n){for(;n===$d;)$d=vl[--wl],vl[wl]=null,Dc=vl[--wl],vl[wl]=null;for(;n===wi;)wi=Cr[--Rr],Cr[Rr]=null,pa=Cr[--Rr],Cr[Rr]=null,ma=Cr[--Rr],Cr[Rr]=null}function Lb(n,i){Cr[Rr++]=ma,Cr[Rr++]=pa,Cr[Rr++]=wi,ma=i.id,pa=i.overflow,wi=n}var un=null,fs=null,Dt=!1,Ni=null,Ir=!1,Km=Error(a(519));function _i(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(Ar(i,n)),Km}function zb(n){var i=n.stateNode,l=n.type,u=n.memoizedProps;switch(i[It]=n,i[Bt]=u,l){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(l=0;l<su.length;l++)Et(su[l],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),ul(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),ia(i,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||t1(i.textContent,l)?(u.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),u.onScroll!=null&&Et("scroll",i),u.onScrollEnd!=null&&Et("scrollend",i),u.onClick!=null&&(i.onclick=Hn),i=!0):i=!1,i||_i(n,!0)}function Vb(n){for(un=n.return;un;)switch(un.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:un=un.return}}function Nl(n){if(n!==un)return!1;if(!Dt)return Vb(n),Dt=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||d0(n.type,n.memoizedProps)),l=!l),l&&fs&&_i(n),Vb(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));fs=u1(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));fs=u1(n)}else i===27?(i=fs,Li(n.type)?(n=g0,g0=null,fs=n):fs=i):fs=un?Mr(n.stateNode.nextSibling):null;return!0}function Co(){fs=un=null,Dt=!1}function Qm(){var n=Ni;return n!==null&&(Xn===null?Xn=n:Xn.push.apply(Xn,n),Ni=null),n}function Mc(n){Ni===null?Ni=[n]:Ni.push(n)}var Ym=C(null),Ro=null,$a=null;function ji(n,i,l){te(Ym,i._currentValue),i._currentValue=l}function Fa(n){n._currentValue=Ym.current,J(Ym)}function Xm(n,i,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===l)break;n=n.return}}function Wm(n,i,l,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var x=f.dependencies;if(x!==null){var w=f.child;x=x.firstContext;e:for(;x!==null;){var S=x;x=f;for(var G=0;G<i.length;G++)if(S.context===i[G]){x.lanes|=l,S=x.alternate,S!==null&&(S.lanes|=l),Xm(x.return,l,n),u||(w=null);break e}x=S.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(a(341));w.lanes|=l,x=w.alternate,x!==null&&(x.lanes|=l),Xm(w,l,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function _l(n,i,l,u){n=null;for(var f=i,x=!1;f!==null;){if(!x){if((f.flags&524288)!==0)x=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var S=f.type;or(f.pendingProps.value,w.value)||(n!==null?n.push(S):n=[S])}}else if(f===Ce.current){if(w=f.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ou):n=[ou])}f=f.return}n!==null&&Wm(i,n,l,u),i.flags|=262144}function Fd(n){for(n=n.firstContext;n!==null;){if(!or(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Io(n){Ro=n,$a=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function dn(n){return Ub(Ro,n)}function Hd(n,i){return Ro===null&&Io(n),Ub(n,i)}function Ub(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},$a===null){if(n===null)throw Error(a(308));$a=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else $a=$a.next=i;return l}var v5=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},w5=s.unstable_scheduleCallback,N5=s.unstable_NormalPriority,Fs={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new v5,data:new Map,refCount:0}}function Oc(n){n.refCount--,n.refCount===0&&w5(N5,function(){n.controller.abort()})}var Pc=null,Zm=0,jl=0,El=null;function _5(n,i){if(Pc===null){var l=Pc=[];Zm=0,jl=s0(),El={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Zm++,i.then(Bb,Bb),i}function Bb(){if(--Zm===0&&Pc!==null){El!==null&&(El.status="fulfilled");var n=Pc;Pc=null,jl=0,El=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function j5(n,i){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<l.length;f++)(0,l[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}var $b=P.S;P.S=function(n,i){Ev=is(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&_5(n,i),$b!==null&&$b(n,i)};var Do=C(null);function ep(){var n=Do.current;return n!==null?n:rs.pooledCache}function qd(n,i){i===null?te(Do,Do.current):te(Do,i.pool)}function Fb(){var n=ep();return n===null?null:{parent:Fs._currentValue,pool:n}}var Sl=Error(a(460)),tp=Error(a(474)),Gd=Error(a(542)),Kd={then:function(){}};function Hb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qb(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(Hn,Hn),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Kb(n),n;default:if(typeof i.status=="string")i.then(Hn,Hn);else{if(n=rs,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Kb(n),n}throw Oo=i,Sl}}function Mo(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Oo=l,Sl):l}}var Oo=null;function Gb(){if(Oo===null)throw Error(a(459));var n=Oo;return Oo=null,n}function Kb(n){if(n===Sl||n===Gd)throw Error(a(483))}var Tl=null,Lc=0;function Qd(n){var i=Lc;return Lc+=1,Tl===null&&(Tl=[]),qb(Tl,n,i)}function zc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Yd(n,i){throw i.$$typeof===j?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Qb(n){function i(ne,X){if(n){var ie=ne.deletions;ie===null?(ne.deletions=[X],ne.flags|=16):ie.push(X)}}function l(ne,X){if(!n)return null;for(;X!==null;)i(ne,X),X=X.sibling;return null}function u(ne){for(var X=new Map;ne!==null;)ne.key!==null?X.set(ne.key,ne):X.set(ne.index,ne),ne=ne.sibling;return X}function f(ne,X){return ne=Ua(ne,X),ne.index=0,ne.sibling=null,ne}function x(ne,X,ie){return ne.index=ie,n?(ie=ne.alternate,ie!==null?(ie=ie.index,ie<X?(ne.flags|=67108866,X):ie):(ne.flags|=67108866,X)):(ne.flags|=1048576,X)}function w(ne){return n&&ne.alternate===null&&(ne.flags|=67108866),ne}function S(ne,X,ie,Ne){return X===null||X.tag!==6?(X=Fm(ie,ne.mode,Ne),X.return=ne,X):(X=f(X,ie),X.return=ne,X)}function G(ne,X,ie,Ne){var tt=ie.type;return tt===O?ye(ne,X,ie.props.children,Ne,ie.key):X!==null&&(X.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===T&&Mo(tt)===X.type)?(X=f(X,ie.props),zc(X,ie),X.return=ne,X):(X=Bd(ie.type,ie.key,ie.props,null,ne.mode,Ne),zc(X,ie),X.return=ne,X)}function oe(ne,X,ie,Ne){return X===null||X.tag!==4||X.stateNode.containerInfo!==ie.containerInfo||X.stateNode.implementation!==ie.implementation?(X=Hm(ie,ne.mode,Ne),X.return=ne,X):(X=f(X,ie.children||[]),X.return=ne,X)}function ye(ne,X,ie,Ne,tt){return X===null||X.tag!==7?(X=Ao(ie,ne.mode,Ne,tt),X.return=ne,X):(X=f(X,ie),X.return=ne,X)}function Ee(ne,X,ie){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return X=Fm(""+X,ne.mode,ie),X.return=ne,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case I:return ie=Bd(X.type,X.key,X.props,null,ne.mode,ie),zc(ie,X),ie.return=ne,ie;case B:return X=Hm(X,ne.mode,ie),X.return=ne,X;case T:return X=Mo(X),Ee(ne,X,ie)}if(_e(X)||q(X))return X=Ao(X,ne.mode,ie,null),X.return=ne,X;if(typeof X.then=="function")return Ee(ne,Qd(X),ie);if(X.$$typeof===re)return Ee(ne,Hd(ne,X),ie);Yd(ne,X)}return null}function ce(ne,X,ie,Ne){var tt=X!==null?X.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return tt!==null?null:S(ne,X,""+ie,Ne);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case I:return ie.key===tt?G(ne,X,ie,Ne):null;case B:return ie.key===tt?oe(ne,X,ie,Ne):null;case T:return ie=Mo(ie),ce(ne,X,ie,Ne)}if(_e(ie)||q(ie))return tt!==null?null:ye(ne,X,ie,Ne,null);if(typeof ie.then=="function")return ce(ne,X,Qd(ie),Ne);if(ie.$$typeof===re)return ce(ne,X,Hd(ne,ie),Ne);Yd(ne,ie)}return null}function pe(ne,X,ie,Ne,tt){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ne=ne.get(ie)||null,S(X,ne,""+Ne,tt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case I:return ne=ne.get(Ne.key===null?ie:Ne.key)||null,G(X,ne,Ne,tt);case B:return ne=ne.get(Ne.key===null?ie:Ne.key)||null,oe(X,ne,Ne,tt);case T:return Ne=Mo(Ne),pe(ne,X,ie,Ne,tt)}if(_e(Ne)||q(Ne))return ne=ne.get(ie)||null,ye(X,ne,Ne,tt,null);if(typeof Ne.then=="function")return pe(ne,X,ie,Qd(Ne),tt);if(Ne.$$typeof===re)return pe(ne,X,ie,Hd(X,Ne),tt);Yd(X,Ne)}return null}function Qe(ne,X,ie,Ne){for(var tt=null,Vt=null,Je=X,vt=X=0,kt=null;Je!==null&&vt<ie.length;vt++){Je.index>vt?(kt=Je,Je=null):kt=Je.sibling;var Ut=ce(ne,Je,ie[vt],Ne);if(Ut===null){Je===null&&(Je=kt);break}n&&Je&&Ut.alternate===null&&i(ne,Je),X=x(Ut,X,vt),Vt===null?tt=Ut:Vt.sibling=Ut,Vt=Ut,Je=kt}if(vt===ie.length)return l(ne,Je),Dt&&Ba(ne,vt),tt;if(Je===null){for(;vt<ie.length;vt++)Je=Ee(ne,ie[vt],Ne),Je!==null&&(X=x(Je,X,vt),Vt===null?tt=Je:Vt.sibling=Je,Vt=Je);return Dt&&Ba(ne,vt),tt}for(Je=u(Je);vt<ie.length;vt++)kt=pe(Je,ne,vt,ie[vt],Ne),kt!==null&&(n&&kt.alternate!==null&&Je.delete(kt.key===null?vt:kt.key),X=x(kt,X,vt),Vt===null?tt=kt:Vt.sibling=kt,Vt=kt);return n&&Je.forEach(function($i){return i(ne,$i)}),Dt&&Ba(ne,vt),tt}function at(ne,X,ie,Ne){if(ie==null)throw Error(a(151));for(var tt=null,Vt=null,Je=X,vt=X=0,kt=null,Ut=ie.next();Je!==null&&!Ut.done;vt++,Ut=ie.next()){Je.index>vt?(kt=Je,Je=null):kt=Je.sibling;var $i=ce(ne,Je,Ut.value,Ne);if($i===null){Je===null&&(Je=kt);break}n&&Je&&$i.alternate===null&&i(ne,Je),X=x($i,X,vt),Vt===null?tt=$i:Vt.sibling=$i,Vt=$i,Je=kt}if(Ut.done)return l(ne,Je),Dt&&Ba(ne,vt),tt;if(Je===null){for(;!Ut.done;vt++,Ut=ie.next())Ut=Ee(ne,Ut.value,Ne),Ut!==null&&(X=x(Ut,X,vt),Vt===null?tt=Ut:Vt.sibling=Ut,Vt=Ut);return Dt&&Ba(ne,vt),tt}for(Je=u(Je);!Ut.done;vt++,Ut=ie.next())Ut=pe(Je,ne,vt,Ut.value,Ne),Ut!==null&&(n&&Ut.alternate!==null&&Je.delete(Ut.key===null?vt:Ut.key),X=x(Ut,X,vt),Vt===null?tt=Ut:Vt.sibling=Ut,Vt=Ut);return n&&Je.forEach(function(OS){return i(ne,OS)}),Dt&&Ba(ne,vt),tt}function es(ne,X,ie,Ne){if(typeof ie=="object"&&ie!==null&&ie.type===O&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case I:e:{for(var tt=ie.key;X!==null;){if(X.key===tt){if(tt=ie.type,tt===O){if(X.tag===7){l(ne,X.sibling),Ne=f(X,ie.props.children),Ne.return=ne,ne=Ne;break e}}else if(X.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===T&&Mo(tt)===X.type){l(ne,X.sibling),Ne=f(X,ie.props),zc(Ne,ie),Ne.return=ne,ne=Ne;break e}l(ne,X);break}else i(ne,X);X=X.sibling}ie.type===O?(Ne=Ao(ie.props.children,ne.mode,Ne,ie.key),Ne.return=ne,ne=Ne):(Ne=Bd(ie.type,ie.key,ie.props,null,ne.mode,Ne),zc(Ne,ie),Ne.return=ne,ne=Ne)}return w(ne);case B:e:{for(tt=ie.key;X!==null;){if(X.key===tt)if(X.tag===4&&X.stateNode.containerInfo===ie.containerInfo&&X.stateNode.implementation===ie.implementation){l(ne,X.sibling),Ne=f(X,ie.children||[]),Ne.return=ne,ne=Ne;break e}else{l(ne,X);break}else i(ne,X);X=X.sibling}Ne=Hm(ie,ne.mode,Ne),Ne.return=ne,ne=Ne}return w(ne);case T:return ie=Mo(ie),es(ne,X,ie,Ne)}if(_e(ie))return Qe(ne,X,ie,Ne);if(q(ie)){if(tt=q(ie),typeof tt!="function")throw Error(a(150));return ie=tt.call(ie),at(ne,X,ie,Ne)}if(typeof ie.then=="function")return es(ne,X,Qd(ie),Ne);if(ie.$$typeof===re)return es(ne,X,Hd(ne,ie),Ne);Yd(ne,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,X!==null&&X.tag===6?(l(ne,X.sibling),Ne=f(X,ie),Ne.return=ne,ne=Ne):(l(ne,X),Ne=Fm(ie,ne.mode,Ne),Ne.return=ne,ne=Ne),w(ne)):l(ne,X)}return function(ne,X,ie,Ne){try{Lc=0;var tt=es(ne,X,ie,Ne);return Tl=null,tt}catch(Je){if(Je===Sl||Je===Gd)throw Je;var Vt=lr(29,Je,null,ne.mode);return Vt.lanes=Ne,Vt.return=ne,Vt}}}var Po=Qb(!0),Yb=Qb(!1),Ei=!1;function sp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function np(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Si(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ti(n,i,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ht&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=Ud(n),Ib(n,null,l),i}return Vd(n,u,i,l),Ud(n)}function Vc(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,St(n,l)}}function rp(n,i){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,x=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};x===null?f=x=w:x=x.next=w,l=l.next}while(l!==null);x===null?f=x=i:x=x.next=i}else f=x=i;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:x,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var ap=!1;function Uc(){if(ap){var n=El;if(n!==null)throw n}}function Bc(n,i,l,u){ap=!1;var f=n.updateQueue;Ei=!1;var x=f.firstBaseUpdate,w=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var G=S,oe=G.next;G.next=null,w===null?x=oe:w.next=oe,w=G;var ye=n.alternate;ye!==null&&(ye=ye.updateQueue,S=ye.lastBaseUpdate,S!==w&&(S===null?ye.firstBaseUpdate=oe:S.next=oe,ye.lastBaseUpdate=G))}if(x!==null){var Ee=f.baseState;w=0,ye=oe=G=null,S=x;do{var ce=S.lane&-536870913,pe=ce!==S.lane;if(pe?(Tt&ce)===ce:(u&ce)===ce){ce!==0&&ce===jl&&(ap=!0),ye!==null&&(ye=ye.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Qe=n,at=S;ce=i;var es=l;switch(at.tag){case 1:if(Qe=at.payload,typeof Qe=="function"){Ee=Qe.call(es,Ee,ce);break e}Ee=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=at.payload,ce=typeof Qe=="function"?Qe.call(es,Ee,ce):Qe,ce==null)break e;Ee=v({},Ee,ce);break e;case 2:Ei=!0}}ce=S.callback,ce!==null&&(n.flags|=64,pe&&(n.flags|=8192),pe=f.callbacks,pe===null?f.callbacks=[ce]:pe.push(ce))}else pe={lane:ce,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ye===null?(oe=ye=pe,G=Ee):ye=ye.next=pe,w|=ce;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;pe=S,S=pe.next,pe.next=null,f.lastBaseUpdate=pe,f.shared.pending=null}}while(!0);ye===null&&(G=Ee),f.baseState=G,f.firstBaseUpdate=oe,f.lastBaseUpdate=ye,x===null&&(f.shared.lanes=0),Ii|=w,n.lanes=w,n.memoizedState=Ee}}function Xb(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Wb(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Xb(l[n],i)}var kl=C(null),Xd=C(0);function Jb(n,i){n=Ja,te(Xd,n),te(kl,i),Ja=n|i.baseLanes}function ip(){te(Xd,Ja),te(kl,kl.current)}function op(){Ja=Xd.current,J(kl),J(Xd)}var cr=C(null),Dr=null;function ki(n){var i=n.alternate;te(Ms,Ms.current&1),te(cr,n),Dr===null&&(i===null||kl.current!==null||i.memoizedState!==null)&&(Dr=n)}function lp(n){te(Ms,Ms.current),te(cr,n),Dr===null&&(Dr=n)}function Zb(n){n.tag===22?(te(Ms,Ms.current),te(cr,n),Dr===null&&(Dr=n)):Ai()}function Ai(){te(Ms,Ms.current),te(cr,cr.current)}function ur(n){J(cr),Dr===n&&(Dr=null),J(Ms)}var Ms=C(0);function Wd(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||m0(l)||p0(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ha=0,xt=null,Jt=null,Hs=null,Jd=!1,Al=!1,Lo=!1,Zd=0,$c=0,Cl=null,E5=0;function Ss(){throw Error(a(321))}function cp(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!or(n[l],i[l]))return!1;return!0}function up(n,i,l,u,f,x){return Ha=x,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=n===null||n.memoizedState===null?Py:Ep,Lo=!1,x=l(u,f),Lo=!1,Al&&(x=ty(i,l,u,f)),ey(n),x}function ey(n){P.H=qc;var i=Jt!==null&&Jt.next!==null;if(Ha=0,Hs=Jt=xt=null,Jd=!1,$c=0,Cl=null,i)throw Error(a(300));n===null||qs||(n=n.dependencies,n!==null&&Fd(n)&&(qs=!0))}function ty(n,i,l,u){xt=n;var f=0;do{if(Al&&(Cl=null),$c=0,Al=!1,25<=f)throw Error(a(301));if(f+=1,Hs=Jt=null,n.updateQueue!=null){var x=n.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}P.H=Ly,x=i(l,u)}while(Al);return x}function S5(){var n=P.H,i=n.useState()[0];return i=typeof i.then=="function"?Fc(i):i,n=n.useState()[0],(Jt!==null?Jt.memoizedState:null)!==n&&(xt.flags|=1024),i}function dp(){var n=Zd!==0;return Zd=0,n}function hp(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function fp(n){if(Jd){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jd=!1}Ha=0,Hs=Jt=xt=null,Al=!1,$c=Zd=0,Cl=null}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?xt.memoizedState=Hs=n:Hs=Hs.next=n,Hs}function Os(){if(Jt===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var i=Hs===null?xt.memoizedState:Hs.next;if(i!==null)Hs=i,Jt=n;else{if(n===null)throw xt.alternate===null?Error(a(467)):Error(a(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Hs===null?xt.memoizedState=Hs=n:Hs=Hs.next=n}return Hs}function eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fc(n){var i=$c;return $c+=1,Cl===null&&(Cl=[]),n=qb(Cl,n,i),i=xt,(Hs===null?i.memoizedState:Hs.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?Py:Ep),n}function th(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fc(n);if(n.$$typeof===re)return dn(n)}throw Error(a(438,String(n)))}function mp(n){var i=null,l=xt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=xt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=eh(),xt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),u=0;u<n;u++)l[u]=z;return i.index++,l}function qa(n,i){return typeof i=="function"?i(n):i}function sh(n){var i=Os();return pp(i,Jt,n)}function pp(n,i,l){var u=n.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=l;var f=n.baseQueue,x=u.pending;if(x!==null){if(f!==null){var w=f.next;f.next=x.next,x.next=w}i.baseQueue=f=x,u.pending=null}if(x=n.baseState,f===null)n.memoizedState=x;else{i=f.next;var S=w=null,G=null,oe=i,ye=!1;do{var Ee=oe.lane&-536870913;if(Ee!==oe.lane?(Tt&Ee)===Ee:(Ha&Ee)===Ee){var ce=oe.revertLane;if(ce===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),Ee===jl&&(ye=!0);else if((Ha&ce)===ce){oe=oe.next,ce===jl&&(ye=!0);continue}else Ee={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},G===null?(S=G=Ee,w=x):G=G.next=Ee,xt.lanes|=ce,Ii|=ce;Ee=oe.action,Lo&&l(x,Ee),x=oe.hasEagerState?oe.eagerState:l(x,Ee)}else ce={lane:Ee,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},G===null?(S=G=ce,w=x):G=G.next=ce,xt.lanes|=Ee,Ii|=Ee;oe=oe.next}while(oe!==null&&oe!==i);if(G===null?w=x:G.next=S,!or(x,n.memoizedState)&&(qs=!0,ye&&(l=El,l!==null)))throw l;n.memoizedState=x,n.baseState=w,n.baseQueue=G,u.lastRenderedState=x}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function gp(n){var i=Os(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var u=l.dispatch,f=l.pending,x=i.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do x=n(x,w.action),w=w.next;while(w!==f);or(x,i.memoizedState)||(qs=!0),i.memoizedState=x,i.baseQueue===null&&(i.baseState=x),l.lastRenderedState=x}return[x,u]}function sy(n,i,l){var u=xt,f=Os(),x=Dt;if(x){if(l===void 0)throw Error(a(407));l=l()}else l=i();var w=!or((Jt||f).memoizedState,l);if(w&&(f.memoizedState=l,qs=!0),f=f.queue,yp(ay.bind(null,u,f,n),[n]),f.getSnapshot!==i||w||Hs!==null&&Hs.memoizedState.tag&1){if(u.flags|=2048,Rl(9,{destroy:void 0},ry.bind(null,u,f,l,i),null),rs===null)throw Error(a(349));x||(Ha&127)!==0||ny(u,i,l)}return l}function ny(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=xt.updateQueue,i===null?(i=eh(),xt.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function ry(n,i,l,u){i.value=l,i.getSnapshot=u,iy(i)&&oy(n)}function ay(n,i,l){return l(function(){iy(i)&&oy(n)})}function iy(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!or(n,l)}catch{return!0}}function oy(n){var i=ko(n,2);i!==null&&Wn(i,n,2)}function xp(n){var i=Mn();if(typeof n=="function"){var l=n;if(n=l(),Lo){Ve(!0);try{l()}finally{Ve(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:n},i}function ly(n,i,l,u){return n.baseState=l,pp(n,Jt,typeof u=="function"?u:qa)}function T5(n,i,l,u,f){if(ah(n))throw Error(a(485));if(n=i.action,n!==null){var x={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};P.T!==null?l(!0):x.isTransition=!1,u(x),l=i.pending,l===null?(x.next=i.pending=x,cy(i,x)):(x.next=l.next,i.pending=l.next=x)}}function cy(n,i){var l=i.action,u=i.payload,f=n.state;if(i.isTransition){var x=P.T,w={};P.T=w;try{var S=l(f,u),G=P.S;G!==null&&G(w,S),uy(n,i,S)}catch(oe){bp(n,i,oe)}finally{x!==null&&w.types!==null&&(x.types=w.types),P.T=x}}else try{x=l(f,u),uy(n,i,x)}catch(oe){bp(n,i,oe)}}function uy(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){dy(n,i,u)},function(u){return bp(n,i,u)}):dy(n,i,l)}function dy(n,i,l){i.status="fulfilled",i.value=l,hy(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,cy(n,l)))}function bp(n,i,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,hy(i),i=i.next;while(i!==u)}n.action=null}function hy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function fy(n,i){return i}function my(n,i){if(Dt){var l=rs.formState;if(l!==null){e:{var u=xt;if(Dt){if(fs){t:{for(var f=fs,x=Ir;f.nodeType!==8;){if(!x){f=null;break t}if(f=Mr(f.nextSibling),f===null){f=null;break t}}x=f.data,f=x==="F!"||x==="F"?f:null}if(f){fs=Mr(f.nextSibling),u=f.data==="F!";break e}}_i(u)}u=!1}u&&(i=l[0])}}return l=Mn(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fy,lastRenderedState:i},l.queue=u,l=Dy.bind(null,xt,u),u.dispatch=l,u=xp(!1),x=jp.bind(null,xt,!1,u.queue),u=Mn(),f={state:i,dispatch:null,action:n,pending:null},u.queue=f,l=T5.bind(null,xt,f,x,l),f.dispatch=l,u.memoizedState=n,[i,l,!1]}function py(n){var i=Os();return gy(i,Jt,n)}function gy(n,i,l){if(i=pp(n,i,fy)[0],n=sh(qa)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Fc(i)}catch(w){throw w===Sl?Gd:w}else u=i;i=Os();var f=i.queue,x=f.dispatch;return l!==i.memoizedState&&(xt.flags|=2048,Rl(9,{destroy:void 0},k5.bind(null,f,l),null)),[u,x,n]}function k5(n,i){n.action=i}function xy(n){var i=Os(),l=Jt;if(l!==null)return gy(i,l,n);Os(),i=i.memoizedState,l=Os();var u=l.queue.dispatch;return l.memoizedState=n,[i,u,!1]}function Rl(n,i,l,u){return n={tag:n,create:l,deps:u,inst:i,next:null},i=xt.updateQueue,i===null&&(i=eh(),xt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,i.lastEffect=n),n}function by(){return Os().memoizedState}function nh(n,i,l,u){var f=Mn();xt.flags|=n,f.memoizedState=Rl(1|i,{destroy:void 0},l,u===void 0?null:u)}function rh(n,i,l,u){var f=Os();u=u===void 0?null:u;var x=f.memoizedState.inst;Jt!==null&&u!==null&&cp(u,Jt.memoizedState.deps)?f.memoizedState=Rl(i,x,l,u):(xt.flags|=n,f.memoizedState=Rl(1|i,x,l,u))}function yy(n,i){nh(8390656,8,n,i)}function yp(n,i){rh(2048,8,n,i)}function A5(n){xt.flags|=4;var i=xt.updateQueue;if(i===null)i=eh(),xt.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function vy(n){var i=Os().memoizedState;return A5({ref:i,nextImpl:n}),function(){if((Ht&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function wy(n,i){return rh(4,2,n,i)}function Ny(n,i){return rh(4,4,n,i)}function _y(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function jy(n,i,l){l=l!=null?l.concat([n]):null,rh(4,4,_y.bind(null,i,n),l)}function vp(){}function Ey(n,i){var l=Os();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&cp(i,u[1])?u[0]:(l.memoizedState=[n,i],n)}function Sy(n,i){var l=Os();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&cp(i,u[1]))return u[0];if(u=n(),Lo){Ve(!0);try{n()}finally{Ve(!1)}}return l.memoizedState=[u,i],u}function wp(n,i,l){return l===void 0||(Ha&1073741824)!==0&&(Tt&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=Tv(),xt.lanes|=n,Ii|=n,l)}function Ty(n,i,l,u){return or(l,i)?l:kl.current!==null?(n=wp(n,l,u),or(n,i)||(qs=!0),n):(Ha&42)===0||(Ha&1073741824)!==0&&(Tt&261930)===0?(qs=!0,n.memoizedState=l):(n=Tv(),xt.lanes|=n,Ii|=n,i)}function ky(n,i,l,u,f){var x=M.p;M.p=x!==0&&8>x?x:8;var w=P.T,S={};P.T=S,jp(n,!1,i,l);try{var G=f(),oe=P.S;if(oe!==null&&oe(S,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ye=j5(G,u);Hc(n,i,ye,fr(n))}else Hc(n,i,u,fr(n))}catch(Ee){Hc(n,i,{then:function(){},status:"rejected",reason:Ee},fr())}finally{M.p=x,w!==null&&S.types!==null&&(w.types=S.types),P.T=w}}function C5(){}function Np(n,i,l,u){if(n.tag!==5)throw Error(a(476));var f=Ay(n).queue;ky(n,f,i,F,l===null?C5:function(){return Cy(n),l(u)})}function Ay(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:F},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Cy(n){var i=Ay(n);i.next===null&&(i=n.alternate.memoizedState),Hc(n,i.next.queue,{},fr())}function _p(){return dn(ou)}function Ry(){return Os().memoizedState}function Iy(){return Os().memoizedState}function R5(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=fr();n=Si(l);var u=Ti(i,n,l);u!==null&&(Wn(u,i,l),Vc(u,i,l)),i={cache:Jm()},n.payload=i;return}i=i.return}}function I5(n,i,l){var u=fr();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ah(n)?My(i,l):(l=Bm(n,i,l,u),l!==null&&(Wn(l,n,u),Oy(l,i,u)))}function Dy(n,i,l){var u=fr();Hc(n,i,l,u)}function Hc(n,i,l,u){var f={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ah(n))My(i,f);else{var x=n.alternate;if(n.lanes===0&&(x===null||x.lanes===0)&&(x=i.lastRenderedReducer,x!==null))try{var w=i.lastRenderedState,S=x(w,l);if(f.hasEagerState=!0,f.eagerState=S,or(S,w))return Vd(n,i,f,0),rs===null&&zd(),!1}catch{}if(l=Bm(n,i,f,u),l!==null)return Wn(l,n,u),Oy(l,i,u),!0}return!1}function jp(n,i,l,u){if(u={lane:2,revertLane:s0(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ah(n)){if(i)throw Error(a(479))}else i=Bm(n,l,u,2),i!==null&&Wn(i,n,2)}function ah(n){var i=n.alternate;return n===xt||i!==null&&i===xt}function My(n,i){Al=Jd=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function Oy(n,i,l){if((l&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,l|=u,i.lanes=l,St(n,l)}}var qc={readContext:dn,use:th,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useLayoutEffect:Ss,useInsertionEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useSyncExternalStore:Ss,useId:Ss,useHostTransitionStatus:Ss,useFormState:Ss,useActionState:Ss,useOptimistic:Ss,useMemoCache:Ss,useCacheRefresh:Ss};qc.useEffectEvent=Ss;var Py={readContext:dn,use:th,useCallback:function(n,i){return Mn().memoizedState=[n,i===void 0?null:i],n},useContext:dn,useEffect:yy,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,nh(4194308,4,_y.bind(null,i,n),l)},useLayoutEffect:function(n,i){return nh(4194308,4,n,i)},useInsertionEffect:function(n,i){nh(4,2,n,i)},useMemo:function(n,i){var l=Mn();i=i===void 0?null:i;var u=n();if(Lo){Ve(!0);try{n()}finally{Ve(!1)}}return l.memoizedState=[u,i],u},useReducer:function(n,i,l){var u=Mn();if(l!==void 0){var f=l(i);if(Lo){Ve(!0);try{l(i)}finally{Ve(!1)}}}else f=i;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=I5.bind(null,xt,n),[u.memoizedState,n]},useRef:function(n){var i=Mn();return n={current:n},i.memoizedState=n},useState:function(n){n=xp(n);var i=n.queue,l=Dy.bind(null,xt,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:vp,useDeferredValue:function(n,i){var l=Mn();return wp(l,n,i)},useTransition:function(){var n=xp(!1);return n=ky.bind(null,xt,n.queue,!0,!1),Mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var u=xt,f=Mn();if(Dt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),rs===null)throw Error(a(349));(Tt&127)!==0||ny(u,i,l)}f.memoizedState=l;var x={value:l,getSnapshot:i};return f.queue=x,yy(ay.bind(null,u,x,n),[n]),u.flags|=2048,Rl(9,{destroy:void 0},ry.bind(null,u,x,l,i),null),l},useId:function(){var n=Mn(),i=rs.identifierPrefix;if(Dt){var l=pa,u=ma;l=(u&~(1<<32-ze(u)-1)).toString(32)+l,i="_"+i+"R_"+l,l=Zd++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=E5++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:_p,useFormState:my,useActionState:my,useOptimistic:function(n){var i=Mn();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=jp.bind(null,xt,!0,l),l.dispatch=i,[n,i]},useMemoCache:mp,useCacheRefresh:function(){return Mn().memoizedState=R5.bind(null,xt)},useEffectEvent:function(n){var i=Mn(),l={impl:n};return i.memoizedState=l,function(){if((Ht&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Ep={readContext:dn,use:th,useCallback:Ey,useContext:dn,useEffect:yp,useImperativeHandle:jy,useInsertionEffect:wy,useLayoutEffect:Ny,useMemo:Sy,useReducer:sh,useRef:by,useState:function(){return sh(qa)},useDebugValue:vp,useDeferredValue:function(n,i){var l=Os();return Ty(l,Jt.memoizedState,n,i)},useTransition:function(){var n=sh(qa)[0],i=Os().memoizedState;return[typeof n=="boolean"?n:Fc(n),i]},useSyncExternalStore:sy,useId:Ry,useHostTransitionStatus:_p,useFormState:py,useActionState:py,useOptimistic:function(n,i){var l=Os();return ly(l,Jt,n,i)},useMemoCache:mp,useCacheRefresh:Iy};Ep.useEffectEvent=vy;var Ly={readContext:dn,use:th,useCallback:Ey,useContext:dn,useEffect:yp,useImperativeHandle:jy,useInsertionEffect:wy,useLayoutEffect:Ny,useMemo:Sy,useReducer:gp,useRef:by,useState:function(){return gp(qa)},useDebugValue:vp,useDeferredValue:function(n,i){var l=Os();return Jt===null?wp(l,n,i):Ty(l,Jt.memoizedState,n,i)},useTransition:function(){var n=gp(qa)[0],i=Os().memoizedState;return[typeof n=="boolean"?n:Fc(n),i]},useSyncExternalStore:sy,useId:Ry,useHostTransitionStatus:_p,useFormState:xy,useActionState:xy,useOptimistic:function(n,i){var l=Os();return Jt!==null?ly(l,Jt,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:mp,useCacheRefresh:Iy};Ly.useEffectEvent=vy;function Sp(n,i,l,u){i=n.memoizedState,l=l(u,i),l=l==null?i:v({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Tp={enqueueSetState:function(n,i,l){n=n._reactInternals;var u=fr(),f=Si(u);f.payload=i,l!=null&&(f.callback=l),i=Ti(n,f,u),i!==null&&(Wn(i,n,u),Vc(i,n,u))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var u=fr(),f=Si(u);f.tag=1,f.payload=i,l!=null&&(f.callback=l),i=Ti(n,f,u),i!==null&&(Wn(i,n,u),Vc(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=fr(),u=Si(l);u.tag=2,i!=null&&(u.callback=i),i=Ti(n,u,l),i!==null&&(Wn(i,n,l),Vc(i,n,l))}};function zy(n,i,l,u,f,x,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,x,w):i.prototype&&i.prototype.isPureReactComponent?!Rc(l,u)||!Rc(f,x):!0}function Vy(n,i,l,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==n&&Tp.enqueueReplaceState(i,i.state,null)}function zo(n,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(n=n.defaultProps){l===i&&(l=v({},l));for(var f in n)l[f]===void 0&&(l[f]=n[f])}return l}function Uy(n){Ld(n)}function By(n){console.error(n)}function $y(n){Ld(n)}function ih(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Fy(n,i,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function kp(n,i,l){return l=Si(l),l.tag=3,l.payload={element:null},l.callback=function(){ih(n,i)},l}function Hy(n){return n=Si(n),n.tag=3,n}function qy(n,i,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var x=u.value;n.payload=function(){return f(x)},n.callback=function(){Fy(i,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){Fy(i,l,u),typeof f!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function D5(n,i,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&_l(i,l,f,!0),l=cr.current,l!==null){switch(l.tag){case 31:case 13:return Dr===null?bh():l.alternate===null&&Ts===0&&(Ts=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===Kd?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Zp(n,u,f)),!1;case 22:return l.flags|=65536,u===Kd?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Zp(n,u,f)),!1}throw Error(a(435,l.tag))}return Zp(n,u,f),bh(),!1}if(Dt)return i=cr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Km&&(n=Error(a(422),{cause:u}),Mc(Ar(n,l)))):(u!==Km&&(i=Error(a(423),{cause:u}),Mc(Ar(i,l))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Ar(u,l),f=kp(n.stateNode,u,f),rp(n,f),Ts!==4&&(Ts=2)),!1;var x=Error(a(520),{cause:u});if(x=Ar(x,l),Zc===null?Zc=[x]:Zc.push(x),Ts!==4&&(Ts=2),i===null)return!0;u=Ar(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=f&-f,l.lanes|=n,n=kp(l.stateNode,u,n),rp(l,n),!1;case 1:if(i=l.type,x=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Di===null||!Di.has(x))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Hy(f),qy(f,n,l,u),rp(l,f),!1}l=l.return}while(l!==null);return!1}var Ap=Error(a(461)),qs=!1;function hn(n,i,l,u){i.child=n===null?Yb(i,null,l,u):Po(i,n.child,l,u)}function Gy(n,i,l,u,f){l=l.render;var x=i.ref;if("ref"in u){var w={};for(var S in u)S!=="ref"&&(w[S]=u[S])}else w=u;return Io(i),u=up(n,i,l,w,x,f),S=dp(),n!==null&&!qs?(hp(n,i,f),Ga(n,i,f)):(Dt&&S&&qm(i),i.flags|=1,hn(n,i,u,f),i.child)}function Ky(n,i,l,u,f){if(n===null){var x=l.type;return typeof x=="function"&&!$m(x)&&x.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=x,Qy(n,i,x,u,f)):(n=Bd(l.type,null,u,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(x=n.child,!Lp(n,f)){var w=x.memoizedProps;if(l=l.compare,l=l!==null?l:Rc,l(w,u)&&n.ref===i.ref)return Ga(n,i,f)}return i.flags|=1,n=Ua(x,u),n.ref=i.ref,n.return=i,i.child=n}function Qy(n,i,l,u,f){if(n!==null){var x=n.memoizedProps;if(Rc(x,u)&&n.ref===i.ref)if(qs=!1,i.pendingProps=u=x,Lp(n,f))(n.flags&131072)!==0&&(qs=!0);else return i.lanes=n.lanes,Ga(n,i,f)}return Cp(n,i,l,u,f)}function Yy(n,i,l,u){var f=u.children,x=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(x=x!==null?x.baseLanes|l:l,n!==null){for(u=i.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~x}else u=0,i.child=null;return Xy(n,i,x,l,u)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&qd(i,x!==null?x.cachePool:null),x!==null?Jb(i,x):ip(),Zb(i);else return u=i.lanes=536870912,Xy(n,i,x!==null?x.baseLanes|l:l,l,u)}else x!==null?(qd(i,x.cachePool),Jb(i,x),Ai(),i.memoizedState=null):(n!==null&&qd(i,null),ip(),Ai());return hn(n,i,f,l),i.child}function Gc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Xy(n,i,l,u,f){var x=ep();return x=x===null?null:{parent:Fs._currentValue,pool:x},i.memoizedState={baseLanes:l,cachePool:x},n!==null&&qd(i,null),ip(),Zb(i),n!==null&&_l(n,i,u,!0),i.childLanes=f,null}function oh(n,i){return i=ch({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Wy(n,i,l){return Po(i,n.child,null,l),n=oh(i,i.pendingProps),n.flags|=2,ur(i),i.memoizedState=null,n}function M5(n,i,l){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Dt){if(u.mode==="hidden")return n=oh(i,u),i.lanes=536870912,Gc(null,n);if(lp(i),(n=fs)?(n=c1(n,Ir),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:wi!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=Mb(n),l.return=i,i.child=l,un=i,fs=null)):n=null,n===null)throw _i(i);return i.lanes=536870912,null}return oh(i,u)}var x=n.memoizedState;if(x!==null){var w=x.dehydrated;if(lp(i),f)if(i.flags&256)i.flags&=-257,i=Wy(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(qs||_l(n,i,l,!1),f=(l&n.childLanes)!==0,qs||f){if(u=rs,u!==null&&(w=os(u,l),w!==0&&w!==x.retryLane))throw x.retryLane=w,ko(n,w),Wn(u,n,w),Ap;bh(),i=Wy(n,i,l)}else n=x.treeContext,fs=Mr(w.nextSibling),un=i,Dt=!0,Ni=null,Ir=!1,n!==null&&Lb(i,n),i=oh(i,u),i.flags|=4096;return i}return n=Ua(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function lh(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function Cp(n,i,l,u,f){return Io(i),l=up(n,i,l,u,void 0,f),u=dp(),n!==null&&!qs?(hp(n,i,f),Ga(n,i,f)):(Dt&&u&&qm(i),i.flags|=1,hn(n,i,l,f),i.child)}function Jy(n,i,l,u,f,x){return Io(i),i.updateQueue=null,l=ty(i,u,l,f),ey(n),u=dp(),n!==null&&!qs?(hp(n,i,x),Ga(n,i,x)):(Dt&&u&&qm(i),i.flags|=1,hn(n,i,l,x),i.child)}function Zy(n,i,l,u,f){if(Io(i),i.stateNode===null){var x=yl,w=l.contextType;typeof w=="object"&&w!==null&&(x=dn(w)),x=new l(u,x),i.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Tp,i.stateNode=x,x._reactInternals=i,x=i.stateNode,x.props=u,x.state=i.memoizedState,x.refs={},sp(i),w=l.contextType,x.context=typeof w=="object"&&w!==null?dn(w):yl,x.state=i.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Sp(i,l,w,u),x.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&Tp.enqueueReplaceState(x,x.state,null),Bc(i,u,x,f),Uc(),x.state=i.memoizedState),typeof x.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){x=i.stateNode;var S=i.memoizedProps,G=zo(l,S);x.props=G;var oe=x.context,ye=l.contextType;w=yl,typeof ye=="object"&&ye!==null&&(w=dn(ye));var Ee=l.getDerivedStateFromProps;ye=typeof Ee=="function"||typeof x.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,ye||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S||oe!==w)&&Vy(i,x,u,w),Ei=!1;var ce=i.memoizedState;x.state=ce,Bc(i,u,x,f),Uc(),oe=i.memoizedState,S||ce!==oe||Ei?(typeof Ee=="function"&&(Sp(i,l,Ee,u),oe=i.memoizedState),(G=Ei||zy(i,l,G,u,ce,oe,w))?(ye||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=oe),x.props=u,x.state=oe,x.context=w,u=G):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{x=i.stateNode,np(n,i),w=i.memoizedProps,ye=zo(l,w),x.props=ye,Ee=i.pendingProps,ce=x.context,oe=l.contextType,G=yl,typeof oe=="object"&&oe!==null&&(G=dn(oe)),S=l.getDerivedStateFromProps,(oe=typeof S=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==Ee||ce!==G)&&Vy(i,x,u,G),Ei=!1,ce=i.memoizedState,x.state=ce,Bc(i,u,x,f),Uc();var pe=i.memoizedState;w!==Ee||ce!==pe||Ei||n!==null&&n.dependencies!==null&&Fd(n.dependencies)?(typeof S=="function"&&(Sp(i,l,S,u),pe=i.memoizedState),(ye=Ei||zy(i,l,ye,u,ce,pe,G)||n!==null&&n.dependencies!==null&&Fd(n.dependencies))?(oe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,pe,G),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,pe,G)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=pe),x.props=u,x.state=pe,x.context=G,u=ye):(typeof x.componentDidUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ce===n.memoizedState||(i.flags|=1024),u=!1)}return x=u,lh(n,i),u=(i.flags&128)!==0,x||u?(x=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:x.render(),i.flags|=1,n!==null&&u?(i.child=Po(i,n.child,null,f),i.child=Po(i,null,l,f)):hn(n,i,l,f),i.memoizedState=x.state,n=i.child):n=Ga(n,i,f),n}function ev(n,i,l,u){return Co(),i.flags|=256,hn(n,i,l,u),i.child}var Rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(n){return{baseLanes:n,cachePool:Fb()}}function Dp(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=hr),n}function tv(n,i,l){var u=i.pendingProps,f=!1,x=(i.flags&128)!==0,w;if((w=x)||(w=n!==null&&n.memoizedState===null?!1:(Ms.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(Dt){if(f?ki(i):Ai(),(n=fs)?(n=c1(n,Ir),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:wi!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=Mb(n),l.return=i,i.child=l,un=i,fs=null)):n=null,n===null)throw _i(i);return p0(n)?i.lanes=32:i.lanes=536870912,null}var S=u.children;return u=u.fallback,f?(Ai(),f=i.mode,S=ch({mode:"hidden",children:S},f),u=Ao(u,f,l,null),S.return=i,u.return=i,S.sibling=u,i.child=S,u=i.child,u.memoizedState=Ip(l),u.childLanes=Dp(n,w,l),i.memoizedState=Rp,Gc(null,u)):(ki(i),Mp(i,S))}var G=n.memoizedState;if(G!==null&&(S=G.dehydrated,S!==null)){if(x)i.flags&256?(ki(i),i.flags&=-257,i=Op(n,i,l)):i.memoizedState!==null?(Ai(),i.child=n.child,i.flags|=128,i=null):(Ai(),S=u.fallback,f=i.mode,u=ch({mode:"visible",children:u.children},f),S=Ao(S,f,l,null),S.flags|=2,u.return=i,S.return=i,u.sibling=S,i.child=u,Po(i,n.child,null,l),u=i.child,u.memoizedState=Ip(l),u.childLanes=Dp(n,w,l),i.memoizedState=Rp,i=Gc(null,u));else if(ki(i),p0(S)){if(w=S.nextSibling&&S.nextSibling.dataset,w)var oe=w.dgst;w=oe,u=Error(a(419)),u.stack="",u.digest=w,Mc({value:u,source:null,stack:null}),i=Op(n,i,l)}else if(qs||_l(n,i,l,!1),w=(l&n.childLanes)!==0,qs||w){if(w=rs,w!==null&&(u=os(w,l),u!==0&&u!==G.retryLane))throw G.retryLane=u,ko(n,u),Wn(w,n,u),Ap;m0(S)||bh(),i=Op(n,i,l)}else m0(S)?(i.flags|=192,i.child=n.child,i=null):(n=G.treeContext,fs=Mr(S.nextSibling),un=i,Dt=!0,Ni=null,Ir=!1,n!==null&&Lb(i,n),i=Mp(i,u.children),i.flags|=4096);return i}return f?(Ai(),S=u.fallback,f=i.mode,G=n.child,oe=G.sibling,u=Ua(G,{mode:"hidden",children:u.children}),u.subtreeFlags=G.subtreeFlags&65011712,oe!==null?S=Ua(oe,S):(S=Ao(S,f,l,null),S.flags|=2),S.return=i,u.return=i,u.sibling=S,i.child=u,Gc(null,u),u=i.child,S=n.child.memoizedState,S===null?S=Ip(l):(f=S.cachePool,f!==null?(G=Fs._currentValue,f=f.parent!==G?{parent:G,pool:G}:f):f=Fb(),S={baseLanes:S.baseLanes|l,cachePool:f}),u.memoizedState=S,u.childLanes=Dp(n,w,l),i.memoizedState=Rp,Gc(n.child,u)):(ki(i),l=n.child,n=l.sibling,l=Ua(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=l,i.memoizedState=null,l)}function Mp(n,i){return i=ch({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ch(n,i){return n=lr(22,n,null,i),n.lanes=0,n}function Op(n,i,l){return Po(i,n.child,null,l),n=Mp(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function sv(n,i,l){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Xm(n.return,i,l)}function Pp(n,i,l,u,f,x){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f,treeForkCount:x}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=l,w.tailMode=f,w.treeForkCount=x)}function nv(n,i,l){var u=i.pendingProps,f=u.revealOrder,x=u.tail;u=u.children;var w=Ms.current,S=(w&2)!==0;if(S?(w=w&1|2,i.flags|=128):w&=1,te(Ms,w),hn(n,i,u,l),u=Dt?Dc:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sv(n,l,i);else if(n.tag===19)sv(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(l=i.child,f=null;l!==null;)n=l.alternate,n!==null&&Wd(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),Pp(i,!1,f,l,x,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Wd(n)===null){i.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Pp(i,!0,l,null,x,u);break;case"together":Pp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Ga(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Ii|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(_l(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,l=Ua(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Ua(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function Lp(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Fd(n)))}function O5(n,i,l){switch(i.tag){case 3:qe(i,i.stateNode.containerInfo),ji(i,Fs,n.memoizedState.cache),Co();break;case 27:case 5:H(i);break;case 4:qe(i,i.stateNode.containerInfo);break;case 10:ji(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lp(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ki(i),i.flags|=128,null):(l&i.child.childLanes)!==0?tv(n,i,l):(ki(i),n=Ga(n,i,l),n!==null?n.sibling:null);ki(i);break;case 19:var f=(n.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(_l(n,i,l,!1),u=(l&i.childLanes)!==0),f){if(u)return nv(n,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),te(Ms,Ms.current),u)break;return null;case 22:return i.lanes=0,Yy(n,i,l,i.pendingProps);case 24:ji(i,Fs,n.memoizedState.cache)}return Ga(n,i,l)}function rv(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)qs=!0;else{if(!Lp(n,l)&&(i.flags&128)===0)return qs=!1,O5(n,i,l);qs=(n.flags&131072)!==0}else qs=!1,Dt&&(i.flags&1048576)!==0&&Pb(i,Dc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=Mo(i.elementType),i.type=n,typeof n=="function")$m(n)?(u=zo(n,u),i.tag=1,i=Zy(null,i,n,u,l)):(i.tag=0,i=Cp(null,i,n,u,l));else{if(n!=null){var f=n.$$typeof;if(f===me){i.tag=11,i=Gy(null,i,n,u,l);break e}else if(f===D){i.tag=14,i=Ky(null,i,n,u,l);break e}}throw i=ue(n)||n,Error(a(306,i,""))}}return i;case 0:return Cp(n,i,i.type,i.pendingProps,l);case 1:return u=i.type,f=zo(u,i.pendingProps),Zy(n,i,u,f,l);case 3:e:{if(qe(i,i.stateNode.containerInfo),n===null)throw Error(a(387));u=i.pendingProps;var x=i.memoizedState;f=x.element,np(n,i),Bc(i,u,null,l);var w=i.memoizedState;if(u=w.cache,ji(i,Fs,u),u!==x.cache&&Wm(i,[Fs],l,!0),Uc(),u=w.element,x.isDehydrated)if(x={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=x,i.memoizedState=x,i.flags&256){i=ev(n,i,u,l);break e}else if(u!==f){f=Ar(Error(a(424)),i),Mc(f),i=ev(n,i,u,l);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,fs=Mr(n.firstChild),un=i,Dt=!0,Ni=null,Ir=!0,l=Yb(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Co(),u===f){i=Ga(n,i,l);break e}hn(n,i,u,l)}i=i.child}return i;case 26:return lh(n,i),n===null?(l=p1(i.type,null,i.pendingProps,null))?i.memoizedState=l:Dt||(l=i.type,n=i.pendingProps,u=Eh(De.current).createElement(l),u[It]=i,u[Bt]=n,fn(u,l,n),_s(u),i.stateNode=u):i.memoizedState=p1(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return H(i),n===null&&Dt&&(u=i.stateNode=h1(i.type,i.pendingProps,De.current),un=i,Ir=!0,f=fs,Li(i.type)?(g0=f,fs=Mr(u.firstChild)):fs=f),hn(n,i,i.pendingProps.children,l),lh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Dt&&((f=u=fs)&&(u=dS(u,i.type,i.pendingProps,Ir),u!==null?(i.stateNode=u,un=i,fs=Mr(u.firstChild),Ir=!1,f=!0):f=!1),f||_i(i)),H(i),f=i.type,x=i.pendingProps,w=n!==null?n.memoizedProps:null,u=x.children,d0(f,x)?u=null:w!==null&&d0(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=up(n,i,S5,null,null,l),ou._currentValue=f),lh(n,i),hn(n,i,u,l),i.child;case 6:return n===null&&Dt&&((n=l=fs)&&(l=hS(l,i.pendingProps,Ir),l!==null?(i.stateNode=l,un=i,fs=null,n=!0):n=!1),n||_i(i)),null;case 13:return tv(n,i,l);case 4:return qe(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Po(i,null,u,l):hn(n,i,u,l),i.child;case 11:return Gy(n,i,i.type,i.pendingProps,l);case 7:return hn(n,i,i.pendingProps,l),i.child;case 8:return hn(n,i,i.pendingProps.children,l),i.child;case 12:return hn(n,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,ji(i,i.type,u.value),hn(n,i,u.children,l),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,Io(i),f=dn(f),u=u(f),i.flags|=1,hn(n,i,u,l),i.child;case 14:return Ky(n,i,i.type,i.pendingProps,l);case 15:return Qy(n,i,i.type,i.pendingProps,l);case 19:return nv(n,i,l);case 31:return M5(n,i,l);case 22:return Yy(n,i,l,i.pendingProps);case 24:return Io(i),u=dn(Fs),n===null?(f=ep(),f===null&&(f=rs,x=Jm(),f.pooledCache=x,x.refCount++,x!==null&&(f.pooledCacheLanes|=l),f=x),i.memoizedState={parent:u,cache:f},sp(i),ji(i,Fs,f)):((n.lanes&l)!==0&&(np(n,i),Bc(i,null,null,l),Uc()),f=n.memoizedState,x=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ji(i,Fs,u)):(u=x.cache,ji(i,Fs,u),u!==f.cache&&Wm(i,[Fs],l,!0))),hn(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Ka(n){n.flags|=4}function zp(n,i,l,u,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Rv())n.flags|=8192;else throw Oo=Kd,tp}else n.flags&=-16777217}function av(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!v1(i))if(Rv())n.flags|=8192;else throw Oo=Kd,tp}function uh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ke():536870912,n.lanes|=i,Ol|=i)}function Kc(n,i){if(!Dt)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ms(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(i)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=l,i}function P5(n,i,l){var u=i.pendingProps;switch(Gm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(i),null;case 1:return ms(i),null;case 3:return l=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Fa(Fs),be(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Nl(i)?Ka(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qm())),ms(i),null;case 26:var f=i.type,x=i.memoizedState;return n===null?(Ka(i),x!==null?(ms(i),av(i,x)):(ms(i),zp(i,f,null,u,l))):x?x!==n.memoizedState?(Ka(i),ms(i),av(i,x)):(ms(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ka(i),ms(i),zp(i,f,n,u,l)),null;case 27:if(Me(i),l=De.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ka(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return ms(i),null}n=ge.current,Nl(i)?zb(i):(n=h1(f,u,l),i.stateNode=n,Ka(i))}return ms(i),null;case 5:if(Me(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&Ka(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return ms(i),null}if(x=ge.current,Nl(i))zb(i);else{var w=Eh(De.current);switch(x){case 1:x=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:x=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":x=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":x=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":x=w.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?x.multiple=!0:u.size&&(x.size=u.size);break;default:x=typeof u.is=="string"?w.createElement(f,{is:u.is}):w.createElement(f)}}x[It]=i,x[Bt]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)x.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=x;e:switch(fn(x,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ka(i)}}return ms(i),zp(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&Ka(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(n=De.current,Nl(i)){if(n=i.stateNode,l=i.memoizedProps,u=null,f=un,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[It]=i,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||t1(n.nodeValue,l)),n||_i(i,!0)}else n=Eh(n).createTextNode(u),n[It]=i,i.stateNode=n}return ms(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(u=Nl(i),l!==null){if(n===null){if(!u)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[It]=i}else Co(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ms(i),n=!1}else l=Qm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(ur(i),i):(ur(i),null);if((i.flags&128)!==0)throw Error(a(558))}return ms(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Nl(i),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[It]=i}else Co(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ms(i),f=!1}else f=Qm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ur(i),i):(ur(i),null)}return ur(i),(i.flags&128)!==0?(i.lanes=l,i):(l=u!==null,n=n!==null&&n.memoizedState!==null,l&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),x=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),x!==f&&(u.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),uh(i,i.updateQueue),ms(i),null);case 4:return be(),n===null&&i0(i.stateNode.containerInfo),ms(i),null;case 10:return Fa(i.type),ms(i),null;case 19:if(J(Ms),u=i.memoizedState,u===null)return ms(i),null;if(f=(i.flags&128)!==0,x=u.rendering,x===null)if(f)Kc(u,!1);else{if(Ts!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(x=Wd(n),x!==null){for(i.flags|=128,Kc(u,!1),n=x.updateQueue,i.updateQueue=n,uh(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)Db(l,n),l=l.sibling;return te(Ms,Ms.current&1|2),Dt&&Ba(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&is()>ph&&(i.flags|=128,f=!0,Kc(u,!1),i.lanes=4194304)}else{if(!f)if(n=Wd(x),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,uh(i,n),Kc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!Dt)return ms(i),null}else 2*is()-u.renderingStartTime>ph&&l!==536870912&&(i.flags|=128,f=!0,Kc(u,!1),i.lanes=4194304);u.isBackwards?(x.sibling=i.child,i.child=x):(n=u.last,n!==null?n.sibling=x:i.child=x,u.last=x)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=is(),n.sibling=null,l=Ms.current,te(Ms,f?l&1|2:l&1),Dt&&Ba(i,u.treeForkCount),n):(ms(i),null);case 22:case 23:return ur(i),op(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(ms(i),i.subtreeFlags&6&&(i.flags|=8192)):ms(i),l=i.updateQueue,l!==null&&uh(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),n!==null&&J(Do),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Fa(Fs),ms(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function L5(n,i){switch(Gm(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Fa(Fs),be(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Me(i),null;case 31:if(i.memoizedState!==null){if(ur(i),i.alternate===null)throw Error(a(340));Co()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(ur(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Co()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(Ms),null;case 4:return be(),null;case 10:return Fa(i.type),null;case 22:case 23:return ur(i),op(),n!==null&&J(Do),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Fa(Fs),null;case 25:return null;default:return null}}function iv(n,i){switch(Gm(i),i.tag){case 3:Fa(Fs),be();break;case 26:case 27:case 5:Me(i);break;case 4:be();break;case 31:i.memoizedState!==null&&ur(i);break;case 13:ur(i);break;case 19:J(Ms);break;case 10:Fa(i.type);break;case 22:case 23:ur(i),op(),n!==null&&J(Do);break;case 24:Fa(Fs)}}function Qc(n,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&n)===n){u=void 0;var x=l.create,w=l.inst;u=x(),w.destroy=u}l=l.next}while(l!==f)}}catch(S){Qt(i,i.return,S)}}function Ci(n,i,l){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var x=f.next;u=x;do{if((u.tag&n)===n){var w=u.inst,S=w.destroy;if(S!==void 0){w.destroy=void 0,f=i;var G=l,oe=S;try{oe()}catch(ye){Qt(f,G,ye)}}}u=u.next}while(u!==x)}}catch(ye){Qt(i,i.return,ye)}}function ov(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Wb(i,l)}catch(u){Qt(n,n.return,u)}}}function lv(n,i,l){l.props=zo(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){Qt(n,i,u)}}function Yc(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(f){Qt(n,i,f)}}function ga(n,i){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){Qt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Qt(n,i,f)}else l.current=null}function cv(n){var i=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(f){Qt(n,n.return,f)}}function Vp(n,i,l){try{var u=n.stateNode;aS(u,n.type,l,i),u[Bt]=i}catch(f){Qt(n,n.return,f)}}function uv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Li(n.type)||n.tag===4}function Up(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Li(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bp(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Hn));else if(u!==4&&(u===27&&Li(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(Bp(n,i,l),n=n.sibling;n!==null;)Bp(n,i,l),n=n.sibling}function dh(n,i,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(u!==4&&(u===27&&Li(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(dh(n,i,l),n=n.sibling;n!==null;)dh(n,i,l),n=n.sibling}function dv(n){var i=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);fn(i,u,l),i[It]=n,i[Bt]=l}catch(x){Qt(n,n.return,x)}}var Qa=!1,Gs=!1,$p=!1,hv=typeof WeakSet=="function"?WeakSet:Set,nn=null;function z5(n,i){if(n=n.containerInfo,c0=Ih,n=jb(n),Om(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,x=u.focusNode;u=u.focusOffset;try{l.nodeType,x.nodeType}catch{l=null;break e}var w=0,S=-1,G=-1,oe=0,ye=0,Ee=n,ce=null;t:for(;;){for(var pe;Ee!==l||f!==0&&Ee.nodeType!==3||(S=w+f),Ee!==x||u!==0&&Ee.nodeType!==3||(G=w+u),Ee.nodeType===3&&(w+=Ee.nodeValue.length),(pe=Ee.firstChild)!==null;)ce=Ee,Ee=pe;for(;;){if(Ee===n)break t;if(ce===l&&++oe===f&&(S=w),ce===x&&++ye===u&&(G=w),(pe=Ee.nextSibling)!==null)break;Ee=ce,ce=Ee.parentNode}Ee=pe}l=S===-1||G===-1?null:{start:S,end:G}}else l=null}l=l||{start:0,end:0}}else l=null;for(u0={focusedElem:n,selectionRange:l},Ih=!1,nn=i;nn!==null;)if(i=nn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,nn=n;else for(;nn!==null;){switch(i=nn,x=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)f=n[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&x!==null){n=void 0,l=i,f=x.memoizedProps,x=x.memoizedState,u=l.stateNode;try{var Qe=zo(l.type,f);n=u.getSnapshotBeforeUpdate(Qe,x),u.__reactInternalSnapshotBeforeUpdate=n}catch(at){Qt(l,l.return,at)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)f0(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":f0(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,nn=n;break}nn=i.return}}function fv(n,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Xa(n,l),u&4&&Qc(5,l);break;case 1:if(Xa(n,l),u&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(w){Qt(l,l.return,w)}else{var f=zo(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Qt(l,l.return,w)}}u&64&&ov(l),u&512&&Yc(l,l.return);break;case 3:if(Xa(n,l),u&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Wb(n,i)}catch(w){Qt(l,l.return,w)}}break;case 27:i===null&&u&4&&dv(l);case 26:case 5:Xa(n,l),i===null&&u&4&&cv(l),u&512&&Yc(l,l.return);break;case 12:Xa(n,l);break;case 31:Xa(n,l),u&4&&gv(n,l);break;case 13:Xa(n,l),u&4&&xv(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=K5.bind(null,l),fS(n,l))));break;case 22:if(u=l.memoizedState!==null||Qa,!u){i=i!==null&&i.memoizedState!==null||Gs,f=Qa;var x=Gs;Qa=u,(Gs=i)&&!x?Wa(n,l,(l.subtreeFlags&8772)!==0):Xa(n,l),Qa=f,Gs=x}break;case 30:break;default:Xa(n,l)}}function mv(n){var i=n.alternate;i!==null&&(n.alternate=null,mv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Br(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gs=null,Kn=!1;function Ya(n,i,l){for(l=l.child;l!==null;)pv(n,i,l),l=l.sibling}function pv(n,i,l){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(U,l)}catch{}switch(l.tag){case 26:Gs||ga(l,i),Ya(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Gs||ga(l,i);var u=gs,f=Kn;Li(l.type)&&(gs=l.stateNode,Kn=!1),Ya(n,i,l),ru(l.stateNode),gs=u,Kn=f;break;case 5:Gs||ga(l,i);case 6:if(u=gs,f=Kn,gs=null,Ya(n,i,l),gs=u,Kn=f,gs!==null)if(Kn)try{(gs.nodeType===9?gs.body:gs.nodeName==="HTML"?gs.ownerDocument.body:gs).removeChild(l.stateNode)}catch(x){Qt(l,i,x)}else try{gs.removeChild(l.stateNode)}catch(x){Qt(l,i,x)}break;case 18:gs!==null&&(Kn?(n=gs,o1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Fl(n)):o1(gs,l.stateNode));break;case 4:u=gs,f=Kn,gs=l.stateNode.containerInfo,Kn=!0,Ya(n,i,l),gs=u,Kn=f;break;case 0:case 11:case 14:case 15:Ci(2,l,i),Gs||Ci(4,l,i),Ya(n,i,l);break;case 1:Gs||(ga(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&lv(l,i,u)),Ya(n,i,l);break;case 21:Ya(n,i,l);break;case 22:Gs=(u=Gs)||l.memoizedState!==null,Ya(n,i,l),Gs=u;break;default:Ya(n,i,l)}}function gv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Fl(n)}catch(l){Qt(i,i.return,l)}}}function xv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fl(n)}catch(l){Qt(i,i.return,l)}}function V5(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new hv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new hv),i;default:throw Error(a(435,n.tag))}}function hh(n,i){var l=V5(n);i.forEach(function(u){if(!l.has(u)){l.add(u);var f=Q5.bind(null,n,u);u.then(f,f)}})}function Qn(n,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],x=n,w=i,S=w;e:for(;S!==null;){switch(S.tag){case 27:if(Li(S.type)){gs=S.stateNode,Kn=!1;break e}break;case 5:gs=S.stateNode,Kn=!1;break e;case 3:case 4:gs=S.stateNode.containerInfo,Kn=!0;break e}S=S.return}if(gs===null)throw Error(a(160));pv(x,w,f),gs=null,Kn=!1,x=f.alternate,x!==null&&(x.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)bv(i,n),i=i.sibling}var Gr=null;function bv(n,i){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qn(i,n),Yn(n),u&4&&(Ci(3,n,n.return),Qc(3,n),Ci(5,n,n.return));break;case 1:Qn(i,n),Yn(n),u&512&&(Gs||l===null||ga(l,l.return)),u&64&&Qa&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var f=Gr;if(Qn(i,n),Yn(n),u&512&&(Gs||l===null||ga(l,l.return)),u&4){var x=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":x=f.getElementsByTagName("title")[0],(!x||x[bn]||x[It]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=f.createElement(u),f.head.insertBefore(x,f.querySelector("head > title"))),fn(x,u,l),x[It]=n,_s(x),u=x;break e;case"link":var w=b1("link","href",f).get(u+(l.href||""));if(w){for(var S=0;S<w.length;S++)if(x=w[S],x.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&x.getAttribute("rel")===(l.rel==null?null:l.rel)&&x.getAttribute("title")===(l.title==null?null:l.title)&&x.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(S,1);break t}}x=f.createElement(u),fn(x,u,l),f.head.appendChild(x);break;case"meta":if(w=b1("meta","content",f).get(u+(l.content||""))){for(S=0;S<w.length;S++)if(x=w[S],x.getAttribute("content")===(l.content==null?null:""+l.content)&&x.getAttribute("name")===(l.name==null?null:l.name)&&x.getAttribute("property")===(l.property==null?null:l.property)&&x.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&x.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(S,1);break t}}x=f.createElement(u),fn(x,u,l),f.head.appendChild(x);break;default:throw Error(a(468,u))}x[It]=n,_s(x),u=x}n.stateNode=u}else y1(f,n.type,n.stateNode);else n.stateNode=x1(f,u,n.memoizedProps);else x!==u?(x===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):x.count--,u===null?y1(f,n.type,n.stateNode):x1(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Vp(n,n.memoizedProps,l.memoizedProps)}break;case 27:Qn(i,n),Yn(n),u&512&&(Gs||l===null||ga(l,l.return)),l!==null&&u&4&&Vp(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Qn(i,n),Yn(n),u&512&&(Gs||l===null||ga(l,l.return)),n.flags&32){f=n.stateNode;try{Nn(f,"")}catch(Qe){Qt(n,n.return,Qe)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Vp(n,f,l!==null?l.memoizedProps:f)),u&1024&&($p=!0);break;case 6:if(Qn(i,n),Yn(n),u&4){if(n.stateNode===null)throw Error(a(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(Qe){Qt(n,n.return,Qe)}}break;case 3:if(kh=null,f=Gr,Gr=Sh(i.containerInfo),Qn(i,n),Gr=f,Yn(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Fl(i.containerInfo)}catch(Qe){Qt(n,n.return,Qe)}$p&&($p=!1,yv(n));break;case 4:u=Gr,Gr=Sh(n.stateNode.containerInfo),Qn(i,n),Yn(n),Gr=u;break;case 12:Qn(i,n),Yn(n);break;case 31:Qn(i,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,hh(n,u)));break;case 13:Qn(i,n),Yn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(mh=is()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,hh(n,u)));break;case 22:f=n.memoizedState!==null;var G=l!==null&&l.memoizedState!==null,oe=Qa,ye=Gs;if(Qa=oe||f,Gs=ye||G,Qn(i,n),Gs=ye,Qa=oe,Yn(n),u&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(l===null||G||Qa||Gs||Vo(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){G=l=i;try{if(x=G.stateNode,f)w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{S=G.stateNode;var Ee=G.memoizedProps.style,ce=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;S.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Qe){Qt(G,G.return,Qe)}}}else if(i.tag===6){if(l===null){G=i;try{G.stateNode.nodeValue=f?"":G.memoizedProps}catch(Qe){Qt(G,G.return,Qe)}}}else if(i.tag===18){if(l===null){G=i;try{var pe=G.stateNode;f?l1(pe,!0):l1(G.stateNode,!1)}catch(Qe){Qt(G,G.return,Qe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,hh(n,l))));break;case 19:Qn(i,n),Yn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,hh(n,u)));break;case 30:break;case 21:break;default:Qn(i,n),Yn(n)}}function Yn(n){var i=n.flags;if(i&2){try{for(var l,u=n.return;u!==null;){if(uv(u)){l=u;break}u=u.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,x=Up(n);dh(n,x,f);break;case 5:var w=l.stateNode;l.flags&32&&(Nn(w,""),l.flags&=-33);var S=Up(n);dh(n,S,w);break;case 3:case 4:var G=l.stateNode.containerInfo,oe=Up(n);Bp(n,oe,G);break;default:throw Error(a(161))}}catch(ye){Qt(n,n.return,ye)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;yv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Xa(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)fv(n,i.alternate,i),i=i.sibling}function Vo(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ci(4,i,i.return),Vo(i);break;case 1:ga(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&lv(i,i.return,l),Vo(i);break;case 27:ru(i.stateNode);case 26:case 5:ga(i,i.return),Vo(i);break;case 22:i.memoizedState===null&&Vo(i);break;case 30:Vo(i);break;default:Vo(i)}n=n.sibling}}function Wa(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=n,x=i,w=x.flags;switch(x.tag){case 0:case 11:case 15:Wa(f,x,l),Qc(4,x);break;case 1:if(Wa(f,x,l),u=x,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(oe){Qt(u,u.return,oe)}if(u=x,f=u.updateQueue,f!==null){var S=u.stateNode;try{var G=f.shared.hiddenCallbacks;if(G!==null)for(f.shared.hiddenCallbacks=null,f=0;f<G.length;f++)Xb(G[f],S)}catch(oe){Qt(u,u.return,oe)}}l&&w&64&&ov(x),Yc(x,x.return);break;case 27:dv(x);case 26:case 5:Wa(f,x,l),l&&u===null&&w&4&&cv(x),Yc(x,x.return);break;case 12:Wa(f,x,l);break;case 31:Wa(f,x,l),l&&w&4&&gv(f,x);break;case 13:Wa(f,x,l),l&&w&4&&xv(f,x);break;case 22:x.memoizedState===null&&Wa(f,x,l),Yc(x,x.return);break;case 30:break;default:Wa(f,x,l)}i=i.sibling}}function Fp(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Oc(l))}function Hp(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Oc(n))}function Kr(n,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)vv(n,i,l,u),i=i.sibling}function vv(n,i,l,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Kr(n,i,l,u),f&2048&&Qc(9,i);break;case 1:Kr(n,i,l,u);break;case 3:Kr(n,i,l,u),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Oc(n)));break;case 12:if(f&2048){Kr(n,i,l,u),n=i.stateNode;try{var x=i.memoizedProps,w=x.id,S=x.onPostCommit;typeof S=="function"&&S(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(G){Qt(i,i.return,G)}}else Kr(n,i,l,u);break;case 31:Kr(n,i,l,u);break;case 13:Kr(n,i,l,u);break;case 23:break;case 22:x=i.stateNode,w=i.alternate,i.memoizedState!==null?x._visibility&2?Kr(n,i,l,u):Xc(n,i):x._visibility&2?Kr(n,i,l,u):(x._visibility|=2,Il(n,i,l,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fp(w,i);break;case 24:Kr(n,i,l,u),f&2048&&Hp(i.alternate,i);break;default:Kr(n,i,l,u)}}function Il(n,i,l,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var x=n,w=i,S=l,G=u,oe=w.flags;switch(w.tag){case 0:case 11:case 15:Il(x,w,S,G,f),Qc(8,w);break;case 23:break;case 22:var ye=w.stateNode;w.memoizedState!==null?ye._visibility&2?Il(x,w,S,G,f):Xc(x,w):(ye._visibility|=2,Il(x,w,S,G,f)),f&&oe&2048&&Fp(w.alternate,w);break;case 24:Il(x,w,S,G,f),f&&oe&2048&&Hp(w.alternate,w);break;default:Il(x,w,S,G,f)}i=i.sibling}}function Xc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,u=i,f=u.flags;switch(u.tag){case 22:Xc(l,u),f&2048&&Fp(u.alternate,u);break;case 24:Xc(l,u),f&2048&&Hp(u.alternate,u);break;default:Xc(l,u)}i=i.sibling}}var Wc=8192;function Dl(n,i,l){if(n.subtreeFlags&Wc)for(n=n.child;n!==null;)wv(n,i,l),n=n.sibling}function wv(n,i,l){switch(n.tag){case 26:Dl(n,i,l),n.flags&Wc&&n.memoizedState!==null&&ES(l,Gr,n.memoizedState,n.memoizedProps);break;case 5:Dl(n,i,l);break;case 3:case 4:var u=Gr;Gr=Sh(n.stateNode.containerInfo),Dl(n,i,l),Gr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Wc,Wc=16777216,Dl(n,i,l),Wc=u):Dl(n,i,l));break;default:Dl(n,i,l)}}function Nv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Jc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];nn=u,jv(u,n)}Nv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_v(n),n=n.sibling}function _v(n){switch(n.tag){case 0:case 11:case 15:Jc(n),n.flags&2048&&Ci(9,n,n.return);break;case 3:Jc(n);break;case 12:Jc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,fh(n)):Jc(n);break;default:Jc(n)}}function fh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];nn=u,jv(u,n)}Nv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ci(8,i,i.return),fh(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,fh(i));break;default:fh(i)}n=n.sibling}}function jv(n,i){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:Ci(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Oc(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,nn=u;else e:for(l=n;nn!==null;){u=nn;var f=u.sibling,x=u.return;if(mv(u),u===l){nn=null;break e}if(f!==null){f.return=x,nn=f;break e}nn=x}}}var U5={getCacheForType:function(n){var i=dn(Fs),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return dn(Fs).controller.signal}},B5=typeof WeakMap=="function"?WeakMap:Map,Ht=0,rs=null,jt=null,Tt=0,Kt=0,dr=null,Ri=!1,Ml=!1,qp=!1,Ja=0,Ts=0,Ii=0,Uo=0,Gp=0,hr=0,Ol=0,Zc=null,Xn=null,Kp=!1,mh=0,Ev=0,ph=1/0,gh=null,Di=null,Js=0,Mi=null,Pl=null,Za=0,Qp=0,Yp=null,Sv=null,eu=0,Xp=null;function fr(){return(Ht&2)!==0&&Tt!==0?Tt&-Tt:P.T!==null?s0():nr()}function Tv(){if(hr===0)if((Tt&536870912)===0||Dt){var n=K;K<<=1,(K&3932160)===0&&(K=262144),hr=n}else hr=536870912;return n=cr.current,n!==null&&(n.flags|=32),hr}function Wn(n,i,l){(n===rs&&(Kt===2||Kt===9)||n.cancelPendingCommit!==null)&&(Ll(n,0),Oi(n,Tt,hr,!1)),Wt(n,l),((Ht&2)===0||n!==rs)&&(n===rs&&((Ht&2)===0&&(Uo|=l),Ts===4&&Oi(n,Tt,hr,!1)),xa(n))}function kv(n,i,l){if((Ht&6)!==0)throw Error(a(327));var u=!l&&(i&127)===0&&(i&n.expiredLanes)===0||Se(n,i),f=u?H5(n,i):Jp(n,i,!0),x=u;do{if(f===0){Ml&&!u&&Oi(n,i,0,!1);break}else{if(l=n.current.alternate,x&&!$5(l)){f=Jp(n,i,!1),x=!1;continue}if(f===2){if(x=i,n.errorRecoveryDisabledLanes&x)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var S=n;f=Zc;var G=S.current.memoizedState.isDehydrated;if(G&&(Ll(S,w).flags|=256),w=Jp(S,w,!1),w!==2){if(qp&&!G){S.errorRecoveryDisabledLanes|=x,Uo|=x,f=4;break e}x=Xn,Xn=f,x!==null&&(Xn===null?Xn=x:Xn.push.apply(Xn,x))}f=w}if(x=!1,f!==2)continue}}if(f===1){Ll(n,0),Oi(n,i,0,!0);break}e:{switch(u=n,x=f,x){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Oi(u,i,hr,!Ri);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=mh+300-is(),10<f)){if(Oi(u,i,hr,!Ri),Y(u,0,!0)!==0)break e;Za=i,u.timeoutHandle=a1(Av.bind(null,u,l,Xn,gh,Kp,i,hr,Uo,Ol,Ri,x,"Throttled",-0,0),f);break e}Av(u,l,Xn,gh,Kp,i,hr,Uo,Ol,Ri,x,null,-0,0)}}break}while(!0);xa(n)}function Av(n,i,l,u,f,x,w,S,G,oe,ye,Ee,ce,pe){if(n.timeoutHandle=-1,Ee=i.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Hn},wv(i,x,Ee);var Qe=(x&62914560)===x?mh-is():(x&4194048)===x?Ev-is():0;if(Qe=SS(Ee,Qe),Qe!==null){Za=x,n.cancelPendingCommit=Qe(Lv.bind(null,n,i,x,l,u,f,w,S,G,ye,Ee,null,ce,pe)),Oi(n,x,w,!oe);return}}Lv(n,i,x,l,u,f,w,S,G)}function $5(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],x=f.getSnapshot;f=f.value;try{if(!or(x(),f))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Oi(n,i,l,u){i&=~Gp,i&=~Uo,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var f=i;0<f;){var x=31-ze(f),w=1<<x;u[x]=-1,f&=~w}l!==0&&hs(n,l,i)}function xh(){return(Ht&6)===0?(tu(0),!1):!0}function Wp(){if(jt!==null){if(Kt===0)var n=jt.return;else n=jt,$a=Ro=null,fp(n),Tl=null,Lc=0,n=jt;for(;n!==null;)iv(n.alternate,n),n=n.return;jt=null}}function Ll(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,lS(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Za=0,Wp(),rs=n,jt=l=Ua(n.current,null),Tt=i,Kt=0,dr=null,Ri=!1,Ml=Se(n,i),qp=!1,Ol=hr=Gp=Uo=Ii=Ts=0,Xn=Zc=null,Kp=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var f=31-ze(u),x=1<<f;i|=n[f],u&=~x}return Ja=i,zd(),l}function Cv(n,i){xt=null,P.H=qc,i===Sl||i===Gd?(i=Gb(),Kt=3):i===tp?(i=Gb(),Kt=4):Kt=i===Ap?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,dr=i,jt===null&&(Ts=1,ih(n,Ar(i,n.current)))}function Rv(){var n=cr.current;return n===null?!0:(Tt&4194048)===Tt?Dr===null:(Tt&62914560)===Tt||(Tt&536870912)!==0?n===Dr:!1}function Iv(){var n=P.H;return P.H=qc,n===null?qc:n}function Dv(){var n=P.A;return P.A=U5,n}function bh(){Ts=4,Ri||(Tt&4194048)!==Tt&&cr.current!==null||(Ml=!0),(Ii&134217727)===0&&(Uo&134217727)===0||rs===null||Oi(rs,Tt,hr,!1)}function Jp(n,i,l){var u=Ht;Ht|=2;var f=Iv(),x=Dv();(rs!==n||Tt!==i)&&(gh=null,Ll(n,i)),i=!1;var w=Ts;e:do try{if(Kt!==0&&jt!==null){var S=jt,G=dr;switch(Kt){case 8:Wp(),w=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(i=!0);var oe=Kt;if(Kt=0,dr=null,zl(n,S,G,oe),l&&Ml){w=0;break e}break;default:oe=Kt,Kt=0,dr=null,zl(n,S,G,oe)}}F5(),w=Ts;break}catch(ye){Cv(n,ye)}while(!0);return i&&n.shellSuspendCounter++,$a=Ro=null,Ht=u,P.H=f,P.A=x,jt===null&&(rs=null,Tt=0,zd()),w}function F5(){for(;jt!==null;)Mv(jt)}function H5(n,i){var l=Ht;Ht|=2;var u=Iv(),f=Dv();rs!==n||Tt!==i?(gh=null,ph=is()+500,Ll(n,i)):Ml=Se(n,i);e:do try{if(Kt!==0&&jt!==null){i=jt;var x=dr;t:switch(Kt){case 1:Kt=0,dr=null,zl(n,i,x,1);break;case 2:case 9:if(Hb(x)){Kt=0,dr=null,Ov(i);break}i=function(){Kt!==2&&Kt!==9||rs!==n||(Kt=7),xa(n)},x.then(i,i);break e;case 3:Kt=7;break e;case 4:Kt=5;break e;case 7:Hb(x)?(Kt=0,dr=null,Ov(i)):(Kt=0,dr=null,zl(n,i,x,7));break;case 5:var w=null;switch(jt.tag){case 26:w=jt.memoizedState;case 5:case 27:var S=jt;if(w?v1(w):S.stateNode.complete){Kt=0,dr=null;var G=S.sibling;if(G!==null)jt=G;else{var oe=S.return;oe!==null?(jt=oe,yh(oe)):jt=null}break t}}Kt=0,dr=null,zl(n,i,x,5);break;case 6:Kt=0,dr=null,zl(n,i,x,6);break;case 8:Wp(),Ts=6;break e;default:throw Error(a(462))}}q5();break}catch(ye){Cv(n,ye)}while(!0);return $a=Ro=null,P.H=u,P.A=f,Ht=l,jt!==null?0:(rs=null,Tt=0,zd(),Ts)}function q5(){for(;jt!==null&&!Ws();)Mv(jt)}function Mv(n){var i=rv(n.alternate,n,Ja);n.memoizedProps=n.pendingProps,i===null?yh(n):jt=i}function Ov(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=Jy(l,i,i.pendingProps,i.type,void 0,Tt);break;case 11:i=Jy(l,i,i.pendingProps,i.type.render,i.ref,Tt);break;case 5:fp(i);default:iv(l,i),i=jt=Db(i,Ja),i=rv(l,i,Ja)}n.memoizedProps=n.pendingProps,i===null?yh(n):jt=i}function zl(n,i,l,u){$a=Ro=null,fp(i),Tl=null,Lc=0;var f=i.return;try{if(D5(n,f,i,l,Tt)){Ts=1,ih(n,Ar(l,n.current)),jt=null;return}}catch(x){if(f!==null)throw jt=f,x;Ts=1,ih(n,Ar(l,n.current)),jt=null;return}i.flags&32768?(Dt||u===1?n=!0:Ml||(Tt&536870912)!==0?n=!1:(Ri=n=!0,(u===2||u===9||u===3||u===6)&&(u=cr.current,u!==null&&u.tag===13&&(u.flags|=16384))),Pv(i,n)):yh(i)}function yh(n){var i=n;do{if((i.flags&32768)!==0){Pv(i,Ri);return}n=i.return;var l=P5(i.alternate,i,Ja);if(l!==null){jt=l;return}if(i=i.sibling,i!==null){jt=i;return}jt=i=n}while(i!==null);Ts===0&&(Ts=5)}function Pv(n,i){do{var l=L5(n.alternate,n);if(l!==null){l.flags&=32767,jt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){jt=n;return}jt=n=l}while(n!==null);Ts=6,jt=null}function Lv(n,i,l,u,f,x,w,S,G){n.cancelPendingCommit=null;do vh();while(Js!==0);if((Ht&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(x=i.lanes|i.childLanes,x|=Um,yt(n,l,x,w,S,G),n===rs&&(jt=rs=null,Tt=0),Pl=i,Mi=n,Za=l,Qp=x,Yp=f,Sv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Y5(Xt,function(){return $v(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,f=M.p,M.p=2,w=Ht,Ht|=4;try{z5(n,i,l)}finally{Ht=w,M.p=f,P.T=u}}Js=1,zv(),Vv(),Uv()}}function zv(){if(Js===1){Js=0;var n=Mi,i=Pl,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var u=M.p;M.p=2;var f=Ht;Ht|=4;try{bv(i,n);var x=u0,w=jb(n.containerInfo),S=x.focusedElem,G=x.selectionRange;if(w!==S&&S&&S.ownerDocument&&_b(S.ownerDocument.documentElement,S)){if(G!==null&&Om(S)){var oe=G.start,ye=G.end;if(ye===void 0&&(ye=oe),"selectionStart"in S)S.selectionStart=oe,S.selectionEnd=Math.min(ye,S.value.length);else{var Ee=S.ownerDocument||document,ce=Ee&&Ee.defaultView||window;if(ce.getSelection){var pe=ce.getSelection(),Qe=S.textContent.length,at=Math.min(G.start,Qe),es=G.end===void 0?at:Math.min(G.end,Qe);!pe.extend&&at>es&&(w=es,es=at,at=w);var ne=Nb(S,at),X=Nb(S,es);if(ne&&X&&(pe.rangeCount!==1||pe.anchorNode!==ne.node||pe.anchorOffset!==ne.offset||pe.focusNode!==X.node||pe.focusOffset!==X.offset)){var ie=Ee.createRange();ie.setStart(ne.node,ne.offset),pe.removeAllRanges(),at>es?(pe.addRange(ie),pe.extend(X.node,X.offset)):(ie.setEnd(X.node,X.offset),pe.addRange(ie))}}}}for(Ee=[],pe=S;pe=pe.parentNode;)pe.nodeType===1&&Ee.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Ee.length;S++){var Ne=Ee[S];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Ih=!!c0,u0=c0=null}finally{Ht=f,M.p=u,P.T=l}}n.current=i,Js=2}}function Vv(){if(Js===2){Js=0;var n=Mi,i=Pl,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var u=M.p;M.p=2;var f=Ht;Ht|=4;try{fv(n,i.alternate,i)}finally{Ht=f,M.p=u,P.T=l}}Js=3}}function Uv(){if(Js===4||Js===3){Js=0,Bn();var n=Mi,i=Pl,l=Za,u=Sv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Js=5:(Js=0,Pl=Mi=null,Bv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Di=null),cn(l),i=i.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(U,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=P.T,f=M.p,M.p=2,P.T=null;try{for(var x=n.onRecoverableError,w=0;w<u.length;w++){var S=u[w];x(S.value,{componentStack:S.stack})}}finally{P.T=i,M.p=f}}(Za&3)!==0&&vh(),xa(n),f=n.pendingLanes,(l&261930)!==0&&(f&42)!==0?n===Xp?eu++:(eu=0,Xp=n):eu=0,tu(0)}}function Bv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Oc(i)))}function vh(){return zv(),Vv(),Uv(),$v()}function $v(){if(Js!==5)return!1;var n=Mi,i=Qp;Qp=0;var l=cn(Za),u=P.T,f=M.p;try{M.p=32>l?32:l,P.T=null,l=Yp,Yp=null;var x=Mi,w=Za;if(Js=0,Pl=Mi=null,Za=0,(Ht&6)!==0)throw Error(a(331));var S=Ht;if(Ht|=4,_v(x.current),vv(x,x.current,w,l),Ht=S,tu(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(U,x)}catch{}return!0}finally{M.p=f,P.T=u,Bv(n,i)}}function Fv(n,i,l){i=Ar(l,i),i=kp(n.stateNode,i,2),n=Ti(n,i,2),n!==null&&(Wt(n,2),xa(n))}function Qt(n,i,l){if(n.tag===3)Fv(n,n,l);else for(;i!==null;){if(i.tag===3){Fv(i,n,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Di===null||!Di.has(u))){n=Ar(l,n),l=Hy(2),u=Ti(i,l,2),u!==null&&(qy(l,u,i,n),Wt(u,2),xa(u));break}}i=i.return}}function Zp(n,i,l){var u=n.pingCache;if(u===null){u=n.pingCache=new B5;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(l)||(qp=!0,f.add(l),n=G5.bind(null,n,i,l),i.then(n,n))}function G5(n,i,l){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,rs===n&&(Tt&l)===l&&(Ts===4||Ts===3&&(Tt&62914560)===Tt&&300>is()-mh?(Ht&2)===0&&Ll(n,0):Gp|=l,Ol===Tt&&(Ol=0)),xa(n)}function Hv(n,i){i===0&&(i=Ke()),n=ko(n,i),n!==null&&(Wt(n,i),xa(n))}function K5(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),Hv(n,l)}function Q5(n,i){var l=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),Hv(n,l)}function Y5(n,i){return mt(n,i)}var wh=null,Vl=null,e0=!1,Nh=!1,t0=!1,Pi=0;function xa(n){n!==Vl&&n.next===null&&(Vl===null?wh=Vl=n:Vl=Vl.next=n),Nh=!0,e0||(e0=!0,W5())}function tu(n,i){if(!t0&&Nh){t0=!0;do for(var l=!1,u=wh;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var x=0;else{var w=u.suspendedLanes,S=u.pingedLanes;x=(1<<31-ze(42|n)+1)-1,x&=f&~(w&~S),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(l=!0,Qv(u,x))}else x=Tt,x=Y(u,u===rs?x:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(x&3)===0||Se(u,x)||(l=!0,Qv(u,x));u=u.next}while(l);t0=!1}}function X5(){qv()}function qv(){Nh=e0=!1;var n=0;Pi!==0&&oS()&&(n=Pi);for(var i=is(),l=null,u=wh;u!==null;){var f=u.next,x=Gv(u,i);x===0?(u.next=null,l===null?wh=f:l.next=f,f===null&&(Vl=l)):(l=u,(n!==0||(x&3)!==0)&&(Nh=!0)),u=f}Js!==0&&Js!==5||tu(n),Pi!==0&&(Pi=0)}function Gv(n,i){for(var l=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,x=n.pendingLanes&-62914561;0<x;){var w=31-ze(x),S=1<<w,G=f[w];G===-1?((S&l)===0||(S&u)!==0)&&(f[w]=Ue(S,i)):G<=i&&(n.expiredLanes|=S),x&=~S}if(i=rs,l=Tt,l=Y(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===i&&(Kt===2||Kt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Pt(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Se(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(u!==null&&Pt(u),cn(l)){case 2:case 8:l=xn;break;case 32:l=Xt;break;case 268435456:l=ds;break;default:l=Xt}return u=Kv.bind(null,n),l=mt(l,u),n.callbackPriority=i,n.callbackNode=l,i}return u!==null&&u!==null&&Pt(u),n.callbackPriority=2,n.callbackNode=null,2}function Kv(n,i){if(Js!==0&&Js!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(vh()&&n.callbackNode!==l)return null;var u=Tt;return u=Y(n,n===rs?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(kv(n,u,i),Gv(n,is()),n.callbackNode!=null&&n.callbackNode===l?Kv.bind(null,n):null)}function Qv(n,i){if(vh())return null;kv(n,i,!0)}function W5(){cS(function(){(Ht&6)!==0?mt(Rs,X5):qv()})}function s0(){if(Pi===0){var n=jl;n===0&&(n=Lt,Lt<<=1,(Lt&261888)===0&&(Lt=256)),Pi=n}return Pi}function Yv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:yi(""+n)}function Xv(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function J5(n,i,l,u,f){if(i==="submit"&&l&&l.stateNode===f){var x=Yv((f[Bt]||null).action),w=u.submitter;w&&(i=(i=w[Bt]||null)?Yv(i.formAction):w.getAttribute("formAction"),i!==null&&(x=i,w=null));var S=new Nt("action","action",null,u,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Pi!==0){var G=w?Xv(f,w):new FormData(f);Np(l,{pending:!0,data:G,method:f.method,action:x},null,G)}}else typeof x=="function"&&(S.preventDefault(),G=w?Xv(f,w):new FormData(f),Np(l,{pending:!0,data:G,method:f.method,action:x},x,G))},currentTarget:f}]})}}for(var n0=0;n0<Vm.length;n0++){var r0=Vm[n0],Z5=r0.toLowerCase(),eS=r0[0].toUpperCase()+r0.slice(1);qr(Z5,"on"+eS)}qr(Tb,"onAnimationEnd"),qr(kb,"onAnimationIteration"),qr(Ab,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(g5,"onTransitionRun"),qr(x5,"onTransitionStart"),qr(b5,"onTransitionCancel"),qr(Cb,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(su));function Wv(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],f=u.event;u=u.listeners;e:{var x=void 0;if(i)for(var w=u.length-1;0<=w;w--){var S=u[w],G=S.instance,oe=S.currentTarget;if(S=S.listener,G!==x&&f.isPropagationStopped())break e;x=S,f.currentTarget=oe;try{x(f)}catch(ye){Ld(ye)}f.currentTarget=null,x=G}else for(w=0;w<u.length;w++){if(S=u[w],G=S.instance,oe=S.currentTarget,S=S.listener,G!==x&&f.isPropagationStopped())break e;x=S,f.currentTarget=oe;try{x(f)}catch(ye){Ld(ye)}f.currentTarget=null,x=G}}}}function Et(n,i){var l=i[Ma];l===void 0&&(l=i[Ma]=new Set);var u=n+"__bubble";l.has(u)||(Jv(i,n,2,!1),l.add(u))}function a0(n,i,l){var u=0;i&&(u|=4),Jv(l,n,u,i)}var _h="_reactListening"+Math.random().toString(36).slice(2);function i0(n){if(!n[_h]){n[_h]=!0,fo.forEach(function(l){l!=="selectionchange"&&(tS.has(l)||a0(l,!1,n),a0(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_h]||(i[_h]=!0,a0("selectionchange",!1,i))}}function Jv(n,i,l,u){switch(T1(i)){case 2:var f=AS;break;case 8:f=CS;break;default:f=w0}l=f.bind(null,i,l,n),f=void 0,!La||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(i,l,{capture:!0,passive:f}):n.addEventListener(i,l,!0):f!==void 0?n.addEventListener(i,l,{passive:f}):n.addEventListener(i,l,!1)}function o0(n,i,l,u,f){var x=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var S=u.stateNode.containerInfo;if(S===f)break;if(w===4)for(w=u.return;w!==null;){var G=w.tag;if((G===3||G===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;S!==null;){if(w=rr(S),w===null)return;if(G=w.tag,G===5||G===6||G===26||G===27){u=x=w;continue e}S=S.parentNode}}u=u.return}ua(function(){var oe=x,ye=In(l),Ee=[];e:{var ce=Rb.get(n);if(ce!==void 0){var pe=Nt,Qe=n;switch(n){case"keypress":if(da(l)===0)break e;case"keydown":case"keyup":pe=Md;break;case"focusin":Qe="focus",pe=jo;break;case"focusout":Qe="blur",pe=jo;break;case"beforeblur":case"afterblur":pe=jo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=Ed;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=y;break;case Tb:case kb:case Ab:pe=Td;break;case Cb:pe=R;break;case"scroll":case"scrollend":pe=Es;break;case"wheel":pe=he;break;case"copy":case"cut":case"paste":pe=kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=Va;break;case"toggle":case"beforetoggle":pe=gt}var at=(i&4)!==0,es=!at&&(n==="scroll"||n==="scrollend"),ne=at?ce!==null?ce+"Capture":null:ce;at=[];for(var X=oe,ie;X!==null;){var Ne=X;if(ie=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ie===null||ne===null||(Ne=ir(X,ne),Ne!=null&&at.push(nu(X,Ne,ie))),es)break;X=X.return}0<at.length&&(ce=new pe(ce,Qe,null,l,ye),Ee.push({event:ce,listeners:at}))}}if((i&7)===0){e:{if(ce=n==="mouseover"||n==="pointerover",pe=n==="mouseout"||n==="pointerout",ce&&l!==la&&(Qe=l.relatedTarget||l.fromElement)&&(rr(Qe)||Qe[Bs]))break e;if((pe||ce)&&(ce=ye.window===ye?ye:(ce=ye.ownerDocument)?ce.defaultView||ce.parentWindow:window,pe?(Qe=l.relatedTarget||l.toElement,pe=oe,Qe=Qe?rr(Qe):null,Qe!==null&&(es=c(Qe),at=Qe.tag,Qe!==es||at!==5&&at!==27&&at!==6)&&(Qe=null)):(pe=null,Qe=oe),pe!==Qe)){if(at=Tc,Ne="onMouseLeave",ne="onMouseEnter",X="mouse",(n==="pointerout"||n==="pointerover")&&(at=Va,Ne="onPointerLeave",ne="onPointerEnter",X="pointer"),es=pe==null?ce:vn(pe),ie=Qe==null?ce:vn(Qe),ce=new at(Ne,X+"leave",pe,l,ye),ce.target=es,ce.relatedTarget=ie,Ne=null,rr(ye)===oe&&(at=new at(ne,X+"enter",Qe,l,ye),at.target=ie,at.relatedTarget=es,Ne=at),es=Ne,pe&&Qe)t:{for(at=sS,ne=pe,X=Qe,ie=0,Ne=ne;Ne;Ne=at(Ne))ie++;Ne=0;for(var tt=X;tt;tt=at(tt))Ne++;for(;0<ie-Ne;)ne=at(ne),ie--;for(;0<Ne-ie;)X=at(X),Ne--;for(;ie--;){if(ne===X||X!==null&&ne===X.alternate){at=ne;break t}ne=at(ne),X=at(X)}at=null}else at=null;pe!==null&&Zv(Ee,ce,pe,at,!1),Qe!==null&&es!==null&&Zv(Ee,es,Qe,at,!0)}}e:{if(ce=oe?vn(oe):window,pe=ce.nodeName&&ce.nodeName.toLowerCase(),pe==="select"||pe==="input"&&ce.type==="file")var Vt=gb;else if(mb(ce))if(xb)Vt=f5;else{Vt=d5;var Je=u5}else pe=ce.nodeName,!pe||pe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?oe&&bi(oe.elementType)&&(Vt=gb):Vt=h5;if(Vt&&(Vt=Vt(n,oe))){pb(Ee,Vt,l,ye);break e}Je&&Je(n,ce,oe),n==="focusout"&&oe&&ce.type==="number"&&oe.memoizedProps.value!=null&&yo(ce,"number",ce.value)}switch(Je=oe?vn(oe):window,n){case"focusin":(mb(Je)||Je.contentEditable==="true")&&(gl=Je,Pm=oe,Ic=null);break;case"focusout":Ic=Pm=gl=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,Eb(Ee,l,ye);break;case"selectionchange":if(p5)break;case"keydown":case"keyup":Eb(Ee,l,ye)}var vt;if(Ft)e:{switch(n){case"compositionstart":var kt="onCompositionStart";break e;case"compositionend":kt="onCompositionEnd";break e;case"compositionupdate":kt="onCompositionUpdate";break e}kt=void 0}else pl?Eo(n,l)&&(kt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(kt="onCompositionStart");kt&&(fa&&l.locale!=="ko"&&(pl||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&pl&&(vt=No()):(Er=ye,wo="value"in Er?Er.value:Er.textContent,pl=!0)),Je=jh(oe,kt),0<Je.length&&(kt=new ha(kt,n,null,l,ye),Ee.push({event:kt,listeners:Je}),vt?kt.data=vt:(vt=ml(l),vt!==null&&(kt.data=vt)))),(vt=Tr?i5(n,l):o5(n,l))&&(kt=jh(oe,"onBeforeInput"),0<kt.length&&(Je=new ha("onBeforeInput","beforeinput",null,l,ye),Ee.push({event:Je,listeners:kt}),Je.data=vt)),J5(Ee,n,oe,l,ye)}Wv(Ee,i)})}function nu(n,i,l){return{instance:n,listener:i,currentTarget:l}}function jh(n,i){for(var l=i+"Capture",u=[];n!==null;){var f=n,x=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||x===null||(f=ir(n,l),f!=null&&u.unshift(nu(n,f,x)),f=ir(n,i),f!=null&&u.push(nu(n,f,x))),n.tag===3)return u;n=n.return}return[]}function sS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Zv(n,i,l,u,f){for(var x=i._reactName,w=[];l!==null&&l!==u;){var S=l,G=S.alternate,oe=S.stateNode;if(S=S.tag,G!==null&&G===u)break;S!==5&&S!==26&&S!==27||oe===null||(G=oe,f?(oe=ir(l,x),oe!=null&&w.unshift(nu(l,oe,G))):f||(oe=ir(l,x),oe!=null&&w.push(nu(l,oe,G)))),l=l.return}w.length!==0&&n.push({event:i,listeners:w})}var nS=/\r\n?/g,rS=/\u0000|\uFFFD/g;function e1(n){return(typeof n=="string"?n:""+n).replace(nS,`
`).replace(rS,"")}function t1(n,i){return i=e1(i),e1(n)===i}function Zt(n,i,l,u,f,x){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Nn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Nn(n,""+u);break;case"className":Rn(n,"class",u);break;case"tabIndex":Rn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(n,l,u);break;case"style":xi(n,u,x);break;case"data":if(i!=="object"){Rn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=yi(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(l==="formAction"?(i!=="input"&&Zt(n,i,"name",f.name,f,null),Zt(n,i,"formEncType",f.formEncType,f,null),Zt(n,i,"formMethod",f.formMethod,f,null),Zt(n,i,"formTarget",f.formTarget,f,null)):(Zt(n,i,"encType",f.encType,f,null),Zt(n,i,"method",f.method,f,null),Zt(n,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=yi(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=Hn);break;case"onScroll":u!=null&&Et("scroll",n);break;case"onScrollEnd":u!=null&&Et("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=yi(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":Et("beforetoggle",n),Et("toggle",n),Oa(n,"popover",u);break;case"xlinkActuate":js(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":js(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":js(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":js(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":js(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":js(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":js(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":js(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":js(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Oa(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=hl.get(l)||l,Oa(n,l,u))}}function l0(n,i,l,u,f,x){switch(l){case"style":xi(n,u,x);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(l=u.__html,l!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof u=="string"?Nn(n,u):(typeof u=="number"||typeof u=="bigint")&&Nn(n,""+u);break;case"onScroll":u!=null&&Et("scroll",n);break;case"onScrollEnd":u!=null&&Et("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Hn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),i=l.slice(2,f?l.length-7:void 0),x=n[Bt]||null,x=x!=null?x[l]:null,typeof x=="function"&&n.removeEventListener(i,x,f),typeof u=="function")){typeof x!="function"&&x!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,u,f);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):Oa(n,l,u)}}}function fn(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",n),Et("load",n);var u=!1,f=!1,x;for(x in l)if(l.hasOwnProperty(x)){var w=l[x];if(w!=null)switch(x){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Zt(n,i,x,w,l,null)}}f&&Zt(n,i,"srcSet",l.srcSet,l,null),u&&Zt(n,i,"src",l.src,l,null);return;case"input":Et("invalid",n);var S=x=w=f=null,G=null,oe=null;for(u in l)if(l.hasOwnProperty(u)){var ye=l[u];if(ye!=null)switch(u){case"name":f=ye;break;case"type":w=ye;break;case"checked":G=ye;break;case"defaultChecked":oe=ye;break;case"value":x=ye;break;case"defaultValue":S=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(a(137,i));break;default:Zt(n,i,u,ye,l,null)}}ul(n,x,S,G,oe,w,f,!1);return;case"select":Et("invalid",n),u=w=x=null;for(f in l)if(l.hasOwnProperty(f)&&(S=l[f],S!=null))switch(f){case"value":x=S;break;case"defaultValue":w=S;break;case"multiple":u=S;default:Zt(n,i,f,S,l,null)}i=x,l=w,n.multiple=!!u,i!=null?aa(n,!!u,i,!1):l!=null&&aa(n,!!u,l,!0);return;case"textarea":Et("invalid",n),x=f=u=null;for(w in l)if(l.hasOwnProperty(w)&&(S=l[w],S!=null))switch(w){case"value":u=S;break;case"defaultValue":f=S;break;case"children":x=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(a(91));break;default:Zt(n,i,w,S,l,null)}ia(n,u,f,x);return;case"option":for(G in l)l.hasOwnProperty(G)&&(u=l[G],u!=null)&&(G==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":Zt(n,i,G,u,l,null));return;case"dialog":Et("beforetoggle",n),Et("toggle",n),Et("cancel",n),Et("close",n);break;case"iframe":case"object":Et("load",n);break;case"video":case"audio":for(u=0;u<su.length;u++)Et(su[u],n);break;case"image":Et("error",n),Et("load",n);break;case"details":Et("toggle",n);break;case"embed":case"source":case"link":Et("error",n),Et("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in l)if(l.hasOwnProperty(oe)&&(u=l[oe],u!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Zt(n,i,oe,u,l,null)}return;default:if(bi(i)){for(ye in l)l.hasOwnProperty(ye)&&(u=l[ye],u!==void 0&&l0(n,i,ye,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Zt(n,i,S,u,l,null))}function aS(n,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,x=null,w=null,S=null,G=null,oe=null,ye=null;for(pe in l){var Ee=l[pe];if(l.hasOwnProperty(pe)&&Ee!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":G=Ee;default:u.hasOwnProperty(pe)||Zt(n,i,pe,null,u,Ee)}}for(var ce in u){var pe=u[ce];if(Ee=l[ce],u.hasOwnProperty(ce)&&(pe!=null||Ee!=null))switch(ce){case"type":x=pe;break;case"name":f=pe;break;case"checked":oe=pe;break;case"defaultChecked":ye=pe;break;case"value":w=pe;break;case"defaultValue":S=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,i));break;default:pe!==Ee&&Zt(n,i,ce,pe,u,Ee)}}pi(n,w,S,G,oe,ye,x,f);return;case"select":pe=w=S=ce=null;for(x in l)if(G=l[x],l.hasOwnProperty(x)&&G!=null)switch(x){case"value":break;case"multiple":pe=G;default:u.hasOwnProperty(x)||Zt(n,i,x,null,u,G)}for(f in u)if(x=u[f],G=l[f],u.hasOwnProperty(f)&&(x!=null||G!=null))switch(f){case"value":ce=x;break;case"defaultValue":S=x;break;case"multiple":w=x;default:x!==G&&Zt(n,i,f,x,u,G)}i=S,l=w,u=pe,ce!=null?aa(n,!!l,ce,!1):!!u!=!!l&&(i!=null?aa(n,!!l,i,!0):aa(n,!!l,l?[]:"",!1));return;case"textarea":pe=ce=null;for(S in l)if(f=l[S],l.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Zt(n,i,S,null,u,f)}for(w in u)if(f=u[w],x=l[w],u.hasOwnProperty(w)&&(f!=null||x!=null))switch(w){case"value":ce=f;break;case"defaultValue":pe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==x&&Zt(n,i,w,f,u,x)}dl(n,ce,pe);return;case"option":for(var Qe in l)ce=l[Qe],l.hasOwnProperty(Qe)&&ce!=null&&!u.hasOwnProperty(Qe)&&(Qe==="selected"?n.selected=!1:Zt(n,i,Qe,null,u,ce));for(G in u)ce=u[G],pe=l[G],u.hasOwnProperty(G)&&ce!==pe&&(ce!=null||pe!=null)&&(G==="selected"?n.selected=ce&&typeof ce!="function"&&typeof ce!="symbol":Zt(n,i,G,ce,u,pe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in l)ce=l[at],l.hasOwnProperty(at)&&ce!=null&&!u.hasOwnProperty(at)&&Zt(n,i,at,null,u,ce);for(oe in u)if(ce=u[oe],pe=l[oe],u.hasOwnProperty(oe)&&ce!==pe&&(ce!=null||pe!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,i));break;default:Zt(n,i,oe,ce,u,pe)}return;default:if(bi(i)){for(var es in l)ce=l[es],l.hasOwnProperty(es)&&ce!==void 0&&!u.hasOwnProperty(es)&&l0(n,i,es,void 0,u,ce);for(ye in u)ce=u[ye],pe=l[ye],!u.hasOwnProperty(ye)||ce===pe||ce===void 0&&pe===void 0||l0(n,i,ye,ce,u,pe);return}}for(var ne in l)ce=l[ne],l.hasOwnProperty(ne)&&ce!=null&&!u.hasOwnProperty(ne)&&Zt(n,i,ne,null,u,ce);for(Ee in u)ce=u[Ee],pe=l[Ee],!u.hasOwnProperty(Ee)||ce===pe||ce==null&&pe==null||Zt(n,i,Ee,ce,u,pe)}function s1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var f=l[u],x=f.transferSize,w=f.initiatorType,S=f.duration;if(x&&S&&s1(w)){for(w=0,S=f.responseEnd,u+=1;u<l.length;u++){var G=l[u],oe=G.startTime;if(oe>S)break;var ye=G.transferSize,Ee=G.initiatorType;ye&&s1(Ee)&&(G=G.responseEnd,w+=ye*(G<S?1:(S-oe)/(G-oe)))}if(--u,i+=8*(x+w)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var c0=null,u0=null;function Eh(n){return n.nodeType===9?n:n.ownerDocument}function n1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r1(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function d0(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var h0=null;function oS(){var n=window.event;return n&&n.type==="popstate"?n===h0?!1:(h0=n,!0):(h0=null,!1)}var a1=typeof setTimeout=="function"?setTimeout:void 0,lS=typeof clearTimeout=="function"?clearTimeout:void 0,i1=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof i1<"u"?function(n){return i1.resolve(null).then(n).catch(uS)}:a1;function uS(n){setTimeout(function(){throw n})}function Li(n){return n==="head"}function o1(n,i){var l=i,u=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(u===0){n.removeChild(f),Fl(i);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")ru(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,ru(l);for(var x=l.firstChild;x;){var w=x.nextSibling,S=x.nodeName;x[bn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=w}}else l==="body"&&ru(n.ownerDocument.body);l=f}while(l);Fl(i)}function l1(n,i){var l=n;n=0;do{var u=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=u}while(l)}function f0(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":f0(l),Br(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function dS(n,i,l,u){for(;n.nodeType===1;){var f=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[bn])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(x=n.getAttribute("rel"),x==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(x!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(x=n.getAttribute("src"),(x!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&x&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var x=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===x)return n}else return n;if(n=Mr(n.nextSibling),n===null)break}return null}function hS(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Mr(n.nextSibling),n===null))return null;return n}function c1(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Mr(n.nextSibling),n===null))return null;return n}function m0(n){return n.data==="$?"||n.data==="$~"}function p0(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function fS(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Mr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var g0=null;function u1(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Mr(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function d1(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function h1(n,i,l){switch(i=Eh(l),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function ru(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Br(n)}var Or=new Map,f1=new Set;function Sh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ei=M.d;M.d={f:mS,r:pS,D:gS,C:xS,L:bS,m:yS,X:wS,S:vS,M:NS};function mS(){var n=ei.f(),i=xh();return n||i}function pS(n){var i=yn(n);i!==null&&i.tag===5&&i.type==="form"?Cy(i):ei.r(n)}var Ul=typeof document>"u"?null:document;function m1(n,i,l){var u=Ul;if(u&&typeof i=="string"&&i){var f=wn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),f1.has(f)||(f1.add(f),n={rel:n,crossOrigin:l,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),fn(i,"link",n),_s(i),u.head.appendChild(i)))}}function gS(n){ei.D(n),m1("dns-prefetch",n,null)}function xS(n,i){ei.C(n,i),m1("preconnect",n,i)}function bS(n,i,l){ei.L(n,i,l);var u=Ul;if(u&&n&&i){var f='link[rel="preload"][as="'+wn(i)+'"]';i==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+wn(l.imageSizes)+'"]')):f+='[href="'+wn(n)+'"]';var x=f;switch(i){case"style":x=Bl(n);break;case"script":x=$l(n)}Or.has(x)||(n=v({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Or.set(x,n),u.querySelector(f)!==null||i==="style"&&u.querySelector(au(x))||i==="script"&&u.querySelector(iu(x))||(i=u.createElement("link"),fn(i,"link",n),_s(i),u.head.appendChild(i)))}}function yS(n,i){ei.m(n,i);var l=Ul;if(l&&n){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+wn(u)+'"][href="'+wn(n)+'"]',x=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=$l(n)}if(!Or.has(x)&&(n=v({rel:"modulepreload",href:n},i),Or.set(x,n),l.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(iu(x)))return}u=l.createElement("link"),fn(u,"link",n),_s(u),l.head.appendChild(u)}}}function vS(n,i,l){ei.S(n,i,l);var u=Ul;if(u&&n){var f=ar(u).hoistableStyles,x=Bl(n);i=i||"default";var w=f.get(x);if(!w){var S={loading:0,preload:null};if(w=u.querySelector(au(x)))S.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Or.get(x))&&x0(n,l);var G=w=u.createElement("link");_s(G),fn(G,"link",n),G._p=new Promise(function(oe,ye){G.onload=oe,G.onerror=ye}),G.addEventListener("load",function(){S.loading|=1}),G.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Th(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:S},f.set(x,w)}}}function wS(n,i){ei.X(n,i);var l=Ul;if(l&&n){var u=ar(l).hoistableScripts,f=$l(n),x=u.get(f);x||(x=l.querySelector(iu(f)),x||(n=v({src:n,async:!0},i),(i=Or.get(f))&&b0(n,i),x=l.createElement("script"),_s(x),fn(x,"link",n),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(f,x))}}function NS(n,i){ei.M(n,i);var l=Ul;if(l&&n){var u=ar(l).hoistableScripts,f=$l(n),x=u.get(f);x||(x=l.querySelector(iu(f)),x||(n=v({src:n,async:!0,type:"module"},i),(i=Or.get(f))&&b0(n,i),x=l.createElement("script"),_s(x),fn(x,"link",n),l.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},u.set(f,x))}}function p1(n,i,l,u){var f=(f=De.current)?Sh(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Bl(l.href),l=ar(f).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Bl(l.href);var x=ar(f).hoistableStyles,w=x.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(n,w),(x=f.querySelector(au(n)))&&!x._p&&(w.instance=x,w.state.loading=5),Or.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Or.set(n,l),x||_S(f,n,l,w.state))),i&&u===null)throw Error(a(528,""));return w}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=$l(l),l=ar(f).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function Bl(n){return'href="'+wn(n)+'"'}function au(n){return'link[rel="stylesheet"]['+n+"]"}function g1(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function _S(n,i,l,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),fn(i,"link",l),_s(i),n.head.appendChild(i))}function $l(n){return'[src="'+wn(n)+'"]'}function iu(n){return"script[async]"+n}function x1(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+wn(l.href)+'"]');if(u)return i.instance=u,_s(u),u;var f=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_s(u),fn(u,"style",f),Th(u,l.precedence,n),i.instance=u;case"stylesheet":f=Bl(l.href);var x=n.querySelector(au(f));if(x)return i.state.loading|=4,i.instance=x,_s(x),x;u=g1(l),(f=Or.get(f))&&x0(u,f),x=(n.ownerDocument||n).createElement("link"),_s(x);var w=x;return w._p=new Promise(function(S,G){w.onload=S,w.onerror=G}),fn(x,"link",u),i.state.loading|=4,Th(x,l.precedence,n),i.instance=x;case"script":return x=$l(l.src),(f=n.querySelector(iu(x)))?(i.instance=f,_s(f),f):(u=l,(f=Or.get(x))&&(u=v({},l),b0(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),_s(f),fn(f,"link",u),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Th(u,l.precedence,n));return i.instance}function Th(n,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,x=f,w=0;w<u.length;w++){var S=u[w];if(S.dataset.precedence===i)x=S;else if(x!==f)break}x?x.parentNode.insertBefore(n,x.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function x0(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function b0(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var kh=null;function b1(n,i,l){if(kh===null){var u=new Map,f=kh=new Map;f.set(l,u)}else f=kh,u=f.get(l),u||(u=new Map,f.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),f=0;f<l.length;f++){var x=l[f];if(!(x[bn]||x[It]||n==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var w=x.getAttribute(i)||"";w=n+w;var S=u.get(w);S?S.push(x):u.set(w,[x])}}return u}function y1(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function jS(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function ES(n,i,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=Bl(u.href),x=i.querySelector(au(f));if(x){i=x._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Ah.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=x,_s(x);return}x=i.ownerDocument||i,u=g1(u),(f=Or.get(f))&&x0(u,f),x=x.createElement("link"),_s(x);var w=x;w._p=new Promise(function(S,G){w.onload=S,w.onerror=G}),fn(x,"link",u),l.instance=x}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Ah.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var y0=0;function SS(n,i){return n.stylesheets&&n.count===0&&Rh(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var u=setTimeout(function(){if(n.stylesheets&&Rh(n,n.stylesheets),n.unsuspend){var x=n.unsuspend;n.unsuspend=null,x()}},6e4+i);0<n.imgBytes&&y0===0&&(y0=62500*iS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Rh(n,n.stylesheets),n.unsuspend)){var x=n.unsuspend;n.unsuspend=null,x()}},(n.imgBytes>y0?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ch=null;function Rh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ch=new Map,i.forEach(TS,n),Ch=null,Ah.call(n))}function TS(n,i){if(!(i.state.loading&4)){var l=Ch.get(n);if(l)var u=l.get(null);else{l=new Map,Ch.set(n,l);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<f.length;x++){var w=f[x];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}f=i.instance,w=f.getAttribute("data-precedence"),x=l.get(w)||u,x===u&&l.set(null,f),l.set(w,f),this.count++,u=Ah.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),x?x.parentNode.insertBefore(f,x.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var ou={$$typeof:re,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function kS(n,i,l,u,f,x,w,S,G){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ht(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.hiddenUpdates=ht(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function w1(n,i,l,u,f,x,w,S,G,oe,ye,Ee){return n=new kS(n,i,l,w,G,oe,ye,Ee,S),i=1,x===!0&&(i|=24),x=lr(3,null,null,i),n.current=x,x.stateNode=n,i=Jm(),i.refCount++,n.pooledCache=i,i.refCount++,x.memoizedState={element:u,isDehydrated:l,cache:i},sp(x),n}function N1(n){return n?(n=yl,n):yl}function _1(n,i,l,u,f,x){f=N1(f),u.context===null?u.context=f:u.pendingContext=f,u=Si(i),u.payload={element:l},x=x===void 0?null:x,x!==null&&(u.callback=x),l=Ti(n,u,i),l!==null&&(Wn(l,n,i),Vc(l,n,i))}function j1(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function v0(n,i){j1(n,i),(n=n.alternate)&&j1(n,i)}function E1(n){if(n.tag===13||n.tag===31){var i=ko(n,67108864);i!==null&&Wn(i,n,67108864),v0(n,67108864)}}function S1(n){if(n.tag===13||n.tag===31){var i=fr();i=ns(i);var l=ko(n,i);l!==null&&Wn(l,n,i),v0(n,i)}}var Ih=!0;function AS(n,i,l,u){var f=P.T;P.T=null;var x=M.p;try{M.p=2,w0(n,i,l,u)}finally{M.p=x,P.T=f}}function CS(n,i,l,u){var f=P.T;P.T=null;var x=M.p;try{M.p=8,w0(n,i,l,u)}finally{M.p=x,P.T=f}}function w0(n,i,l,u){if(Ih){var f=N0(u);if(f===null)o0(n,i,u,Dh,l),k1(n,u);else if(IS(f,n,i,l,u))u.stopPropagation();else if(k1(n,u),i&4&&-1<RS.indexOf(n)){for(;f!==null;){var x=yn(f);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var w=V(x.pendingLanes);if(w!==0){var S=x;for(S.pendingLanes|=2,S.entangledLanes|=2;w;){var G=1<<31-ze(w);S.entanglements[1]|=G,w&=~G}xa(x),(Ht&6)===0&&(ph=is()+500,tu(0))}}break;case 31:case 13:S=ko(x,2),S!==null&&Wn(S,x,2),xh(),v0(x,2)}if(x=N0(u),x===null&&o0(n,i,u,Dh,l),x===f)break;f=x}f!==null&&u.stopPropagation()}else o0(n,i,u,null,l)}}function N0(n){return n=In(n),_0(n)}var Dh=null;function _0(n){if(Dh=null,n=rr(n),n!==null){var i=c(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=d(i),n!==null)return n;n=null}else if(l===31){if(n=m(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Dh=n,null}function T1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sn()){case Rs:return 2;case xn:return 8;case Xt:case $n:return 32;case ds:return 268435456;default:return 32}default:return 32}}var j0=!1,zi=null,Vi=null,Ui=null,lu=new Map,cu=new Map,Bi=[],RS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function k1(n,i){switch(n){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":lu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(i.pointerId)}}function uu(n,i,l,u,f,x){return n===null||n.nativeEvent!==x?(n={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:x,targetContainers:[f]},i!==null&&(i=yn(i),i!==null&&E1(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function IS(n,i,l,u,f){switch(i){case"focusin":return zi=uu(zi,n,i,l,u,f),!0;case"dragenter":return Vi=uu(Vi,n,i,l,u,f),!0;case"mouseover":return Ui=uu(Ui,n,i,l,u,f),!0;case"pointerover":var x=f.pointerId;return lu.set(x,uu(lu.get(x)||null,n,i,l,u,f)),!0;case"gotpointercapture":return x=f.pointerId,cu.set(x,uu(cu.get(x)||null,n,i,l,u,f)),!0}return!1}function A1(n){var i=rr(n.target);if(i!==null){var l=c(i);if(l!==null){if(i=l.tag,i===13){if(i=d(l),i!==null){n.blockedOn=i,Us(n.priority,function(){S1(l)});return}}else if(i===31){if(i=m(l),i!==null){n.blockedOn=i,Us(n.priority,function(){S1(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=N0(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);la=u,l.target.dispatchEvent(u),la=null}else return i=yn(l),i!==null&&E1(i),n.blockedOn=l,!1;i.shift()}return!0}function C1(n,i,l){Mh(n)&&l.delete(i)}function DS(){j0=!1,zi!==null&&Mh(zi)&&(zi=null),Vi!==null&&Mh(Vi)&&(Vi=null),Ui!==null&&Mh(Ui)&&(Ui=null),lu.forEach(C1),cu.forEach(C1)}function Oh(n,i){n.blockedOn===i&&(n.blockedOn=null,j0||(j0=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,DS)))}var Ph=null;function R1(n){Ph!==n&&(Ph=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ph===n&&(Ph=null);for(var i=0;i<n.length;i+=3){var l=n[i],u=n[i+1],f=n[i+2];if(typeof u!="function"){if(_0(u||l)===null)continue;break}var x=yn(l);x!==null&&(n.splice(i,3),i-=3,Np(x,{pending:!0,data:f,method:l.method,action:u},u,f))}}))}function Fl(n){function i(G){return Oh(G,n)}zi!==null&&Oh(zi,n),Vi!==null&&Oh(Vi,n),Ui!==null&&Oh(Ui,n),lu.forEach(i),cu.forEach(i);for(var l=0;l<Bi.length;l++){var u=Bi[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Bi.length&&(l=Bi[0],l.blockedOn===null);)A1(l),l.blockedOn===null&&Bi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var f=l[u],x=l[u+1],w=f[Bt]||null;if(typeof x=="function")w||R1(l);else if(w){var S=null;if(x&&x.hasAttribute("formAction")){if(f=x,w=x[Bt]||null)S=w.formAction;else if(_0(f)!==null)continue}else S=w.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),R1(l)}}}function I1(){function n(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function E0(n){this._internalRoot=n}Lh.prototype.render=E0.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,u=fr();_1(l,u,n,i,null,null)},Lh.prototype.unmount=E0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;_1(n.current,2,null,n,null,null),xh(),i[Bs]=null}};function Lh(n){this._internalRoot=n}Lh.prototype.unstable_scheduleHydration=function(n){if(n){var i=nr();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Bi.length&&i!==0&&i<Bi[l].priority;l++);Bi.splice(l,0,n),l===0&&A1(n)}};var D1=e.version;if(D1!=="19.2.3")throw Error(a(527,D1,"19.2.3"));M.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=g(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var MS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zh.isDisabled&&zh.supportsFiber)try{U=zh.inject(MS),Ae=zh}catch{}}return hu.createRoot=function(n,i){if(!o(n))throw Error(a(299));var l=!1,u="",f=Uy,x=By,w=$y;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(x=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=w1(n,1,!1,null,null,l,u,null,f,x,w,I1),n[Bs]=i.current,i0(n),new E0(i)},hu.hydrateRoot=function(n,i,l){if(!o(n))throw Error(a(299));var u=!1,f="",x=Uy,w=By,S=$y,G=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(G=l.formState)),i=w1(n,1,!0,i,l??null,u,f,G,x,w,S,I1),i.context=N1(null),l=i.current,u=fr(),u=ns(u),f=Si(u),f.callback=null,Ti(l,f,u),l=u,i.current.lanes=l,Wt(i,l),xa(i),n[Bs]=i.current,i0(n),new Lh(i)},hu.version="19.2.3",hu}var F1;function FS(){if(F1)return k0.exports;F1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),k0.exports=$S(),k0.exports}var HS=FS();const ut=s=>typeof s=="string",fu=()=>{let s,e;const t=new Promise((a,o)=>{s=a,e=o});return t.resolve=s,t.reject=e,t},H1=s=>s==null?"":""+s,qS=(s,e,t)=>{s.forEach(a=>{e[a]&&(t[a]=e[a])})},GS=/###/g,q1=s=>s&&s.indexOf("###")>-1?s.replace(GS,"."):s,G1=s=>!s||ut(s),Nu=(s,e,t)=>{const a=ut(e)?e.split("."):e;let o=0;for(;o<a.length-1;){if(G1(s))return{};const c=q1(a[o]);!s[c]&&t&&(s[c]=new t),Object.prototype.hasOwnProperty.call(s,c)?s=s[c]:s={},++o}return G1(s)?{}:{obj:s,k:q1(a[o])}},K1=(s,e,t)=>{const{obj:a,k:o}=Nu(s,e,Object);if(a!==void 0||e.length===1){a[o]=t;return}let c=e[e.length-1],d=e.slice(0,e.length-1),m=Nu(s,d,Object);for(;m.obj===void 0&&d.length;)c=`${d[d.length-1]}.${c}`,d=d.slice(0,d.length-1),m=Nu(s,d,Object),m?.obj&&typeof m.obj[`${m.k}.${c}`]<"u"&&(m.obj=void 0);m.obj[`${m.k}.${c}`]=t},KS=(s,e,t,a)=>{const{obj:o,k:c}=Nu(s,e,Object);o[c]=o[c]||[],o[c].push(t)},mf=(s,e)=>{const{obj:t,k:a}=Nu(s,e);if(t&&Object.prototype.hasOwnProperty.call(t,a))return t[a]},QS=(s,e,t)=>{const a=mf(s,t);return a!==void 0?a:mf(e,t)},wN=(s,e,t)=>{for(const a in e)a!=="__proto__"&&a!=="constructor"&&(a in s?ut(s[a])||s[a]instanceof String||ut(e[a])||e[a]instanceof String?t&&(s[a]=e[a]):wN(s[a],e[a],t):s[a]=e[a]);return s},Hl=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var YS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const XS=s=>ut(s)?s.replace(/[&<>"'\/]/g,e=>YS[e]):s;class WS{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const a=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,a),this.regExpQueue.push(e),a}}const JS=[" ",",","?","!",";"],ZS=new WS(20),e4=(s,e,t)=>{e=e||"",t=t||"";const a=JS.filter(d=>e.indexOf(d)<0&&t.indexOf(d)<0);if(a.length===0)return!0;const o=ZS.getRegExp(`(${a.map(d=>d==="?"?"\\?":d).join("|")})`);let c=!o.test(s);if(!c){const d=s.indexOf(t);d>0&&!o.test(s.substring(0,d))&&(c=!0)}return c},ig=(s,e,t=".")=>{if(!s)return;if(s[e])return Object.prototype.hasOwnProperty.call(s,e)?s[e]:void 0;const a=e.split(t);let o=s;for(let c=0;c<a.length;){if(!o||typeof o!="object")return;let d,m="";for(let p=c;p<a.length;++p)if(p!==c&&(m+=t),m+=a[p],d=o[m],d!==void 0){if(["string","number","boolean"].indexOf(typeof d)>-1&&p<a.length-1)continue;c+=p-c+1;break}o=d}return o},Uu=s=>s?.replace("_","-"),t4={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,e){console?.[s]?.apply?.(console,e)}};let s4=class og{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||t4,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,a,o){return o&&!this.debug?null:(ut(e[0])&&(e[0]=`${a}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new og(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new og(this.logger,e)}};var va=new s4;class Xf{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const o=this.observers[a].get(t)||0;this.observers[a].set(t,o+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([o,c])=>{for(let d=0;d<c;d++)o(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([o,c])=>{for(let d=0;d<c;d++)o.apply(o,[e,...t])})}}class Q1 extends Xf{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,a,o={}){const c=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,d=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let m;e.indexOf(".")>-1?m=e.split("."):(m=[e,t],a&&(Array.isArray(a)?m.push(...a):ut(a)&&c?m.push(...a.split(c)):m.push(a)));const p=mf(this.data,m);return!p&&!t&&!a&&e.indexOf(".")>-1&&(e=m[0],t=m[1],a=m.slice(2).join(".")),p||!d||!ut(a)?p:ig(this.data?.[e]?.[t],a,c)}addResource(e,t,a,o,c={silent:!1}){const d=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let m=[e,t];a&&(m=m.concat(d?a.split(d):a)),e.indexOf(".")>-1&&(m=e.split("."),o=t,t=m[1]),this.addNamespaces(t),K1(this.data,m,o),c.silent||this.emit("added",e,t,a,o)}addResources(e,t,a,o={silent:!1}){for(const c in a)(ut(a[c])||Array.isArray(a[c]))&&this.addResource(e,t,c,a[c],{silent:!0});o.silent||this.emit("added",e,t,a)}addResourceBundle(e,t,a,o,c,d={silent:!1,skipCopy:!1}){let m=[e,t];e.indexOf(".")>-1&&(m=e.split("."),o=a,a=t,t=m[1]),this.addNamespaces(t);let p=mf(this.data,m)||{};d.skipCopy||(a=JSON.parse(JSON.stringify(a))),o?wN(p,a,c):p={...p,...a},K1(this.data,m,p),d.silent||this.emit("added",e,t,a)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(o=>t[o]&&Object.keys(t[o]).length>0)}toJSON(){return this.data}}var NN={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,e,t,a,o){return s.forEach(c=>{e=this.processors[c]?.process(e,t,a,o)??e}),e}};const _N=Symbol("i18next/PATH_KEY");function n4(){const s=[],e=Object.create(null);let t;return e.get=(a,o)=>(t?.revoke?.(),o===_N?s:(s.push(o),t=Proxy.revocable(a,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function lg(s,e){const{[_N]:t}=s(n4());return t.join(e?.keySeparator??".")}const Y1={},I0=s=>!ut(s)&&typeof s!="boolean"&&typeof s!="number";class pf extends Xf{constructor(e,t={}){super(),qS(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=va.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const a={...t};if(e==null)return!1;const o=this.resolve(e,a);if(o?.res===void 0)return!1;const c=I0(o.res);return!(a.returnObjects===!1&&c)}extractFromKey(e,t){let a=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const o=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let c=t.ns||this.options.defaultNS||[];const d=a&&e.indexOf(a)>-1,m=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!e4(e,a,o);if(d&&!m){const p=e.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:e,namespaces:ut(c)?[c]:c};const g=e.split(a);(a!==o||a===o&&this.options.ns.indexOf(g[0])>-1)&&(c=g.shift()),e=g.join(o)}return{key:e,namespaces:ut(c)?[c]:c}}translate(e,t,a){let o=typeof t=="object"?{...t}:t;if(typeof o!="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),typeof o=="object"&&(o={...o}),o||(o={}),e==null)return"";typeof e=="function"&&(e=lg(e,{...this.options,...o})),Array.isArray(e)||(e=[String(e)]);const c=o.returnDetails!==void 0?o.returnDetails:this.options.returnDetails,d=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,{key:m,namespaces:p}=this.extractFromKey(e[e.length-1],o),g=p[p.length-1];let b=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;b===void 0&&(b=":");const v=o.lng||this.language,j=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v?.toLowerCase()==="cimode")return j?c?{res:`${g}${b}${m}`,usedKey:m,exactUsedKey:m,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(o)}:`${g}${b}${m}`:c?{res:m,usedKey:m,exactUsedKey:m,usedLng:v,usedNS:g,usedParams:this.getUsedParamsDetails(o)}:m;const I=this.resolve(e,o);let B=I?.res;const O=I?.usedKey||m,L=I?.exactUsedKey||m,se=["[object Number]","[object Function]","[object RegExp]"],W=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,re=!this.i18nFormat||this.i18nFormat.handleAsObject,me=o.count!==void 0&&!ut(o.count),xe=pf.hasDefaultValue(o),Te=me?this.pluralResolver.getSuffix(v,o.count,o):"",D=o.ordinal&&me?this.pluralResolver.getSuffix(v,o.count,{ordinal:!1}):"",T=me&&!o.ordinal&&o.count===0,A=T&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${Te}`]||o[`defaultValue${D}`]||o.defaultValue;let z=B;re&&!B&&xe&&(z=A);const $=I0(z),q=Object.prototype.toString.apply(z);if(re&&z&&$&&se.indexOf(q)<0&&!(ut(W)&&Array.isArray(z))){if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const k=this.options.returnedObjectHandler?this.options.returnedObjectHandler(O,z,{...o,ns:p}):`key '${m} (${this.language})' returned an object instead of string.`;return c?(I.res=k,I.usedParams=this.getUsedParamsDetails(o),I):k}if(d){const k=Array.isArray(z),ue=k?[]:{},_e=k?L:O;for(const P in z)if(Object.prototype.hasOwnProperty.call(z,P)){const M=`${_e}${d}${P}`;xe&&!B?ue[P]=this.translate(M,{...o,defaultValue:I0(A)?A[P]:void 0,joinArrays:!1,ns:p}):ue[P]=this.translate(M,{...o,joinArrays:!1,ns:p}),ue[P]===M&&(ue[P]=z[P])}B=ue}}else if(re&&ut(W)&&Array.isArray(B))B=B.join(W),B&&(B=this.extendTranslation(B,e,o,a));else{let k=!1,ue=!1;!this.isValidLookup(B)&&xe&&(k=!0,B=A),this.isValidLookup(B)||(ue=!0,B=m);const P=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ue?void 0:B,M=xe&&A!==B&&this.options.updateMissing;if(ue||k||M){if(this.logger.log(M?"updateKey":"missingKey",v,g,m,M?A:B),d){const C=this.resolve(m,{...o,keySeparator:!1});C&&C.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let C=0;C<Q.length;C++)F.push(Q[C]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(o.lng||this.language):F.push(o.lng||this.language);const de=(C,J,te)=>{const ge=xe&&te!==B?te:P;this.options.missingKeyHandler?this.options.missingKeyHandler(C,g,J,ge,M,o):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(C,g,J,ge,M,o),this.emit("missingKey",C,g,J,B)};this.options.saveMissing&&(this.options.saveMissingPlurals&&me?F.forEach(C=>{const J=this.pluralResolver.getSuffixes(C,o);T&&o[`defaultValue${this.options.pluralSeparator}zero`]&&J.indexOf(`${this.options.pluralSeparator}zero`)<0&&J.push(`${this.options.pluralSeparator}zero`),J.forEach(te=>{de([C],m+te,o[`defaultValue${te}`]||A)})}):de(F,m,A))}B=this.extendTranslation(B,e,o,I,a),ue&&B===m&&this.options.appendNamespaceToMissingKey&&(B=`${g}${b}${m}`),(ue||k)&&this.options.parseMissingKeyHandler&&(B=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${g}${b}${m}`:m,k?B:void 0,o))}return c?(I.res=B,I.usedParams=this.getUsedParamsDetails(o),I):B}extendTranslation(e,t,a,o,c){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const p=ut(e)&&(a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(p){const v=e.match(this.interpolator.nestingRegexp);g=v&&v.length}let b=a.replace&&!ut(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(b={...this.options.interpolation.defaultVariables,...b}),e=this.interpolator.interpolate(e,b,a.lng||this.language||o.usedLng,a),p){const v=e.match(this.interpolator.nestingRegexp),j=v&&v.length;g<j&&(a.nest=!1)}!a.lng&&o&&o.res&&(a.lng=this.language||o.usedLng),a.nest!==!1&&(e=this.interpolator.nest(e,(...v)=>c?.[0]===v[0]&&!a.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${t[0]}`),null):this.translate(...v,t),a)),a.interpolation&&this.interpolator.reset()}const d=a.postProcess||this.options.postProcess,m=ut(d)?[d]:d;return e!=null&&m?.length&&a.applyPostProcessor!==!1&&(e=NN.handle(m,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),e}resolve(e,t={}){let a,o,c,d,m;return ut(e)&&(e=[e]),e.forEach(p=>{if(this.isValidLookup(a))return;const g=this.extractFromKey(p,t),b=g.key;o=b;let v=g.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const j=t.count!==void 0&&!ut(t.count),I=j&&!t.ordinal&&t.count===0,B=t.context!==void 0&&(ut(t.context)||typeof t.context=="number")&&t.context!=="",O=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(L=>{this.isValidLookup(a)||(m=L,!Y1[`${O[0]}-${L}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(m)&&(Y1[`${O[0]}-${L}`]=!0,this.logger.warn(`key "${o}" for languages "${O.join(", ")}" won't get resolved as namespace "${m}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),O.forEach(se=>{if(this.isValidLookup(a))return;d=se;const W=[b];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(W,b,se,L,t);else{let me;j&&(me=this.pluralResolver.getSuffix(se,t.count,t));const xe=`${this.options.pluralSeparator}zero`,Te=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(j&&(t.ordinal&&me.indexOf(Te)===0&&W.push(b+me.replace(Te,this.options.pluralSeparator)),W.push(b+me),I&&W.push(b+xe)),B){const D=`${b}${this.options.contextSeparator||"_"}${t.context}`;W.push(D),j&&(t.ordinal&&me.indexOf(Te)===0&&W.push(D+me.replace(Te,this.options.pluralSeparator)),W.push(D+me),I&&W.push(D+xe))}}let re;for(;re=W.pop();)this.isValidLookup(a)||(c=re,a=this.getResource(se,L,re,t))}))})}),{res:a,usedKey:o,exactUsedKey:c,usedLng:d,usedNS:m}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,a,o={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,a,o):this.resourceStore.getResource(e,t,a,o)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=e.replace&&!ut(e.replace);let o=a?e.replace:e;if(a&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!a){o={...o};for(const c of t)delete o[c]}return o}static hasDefaultValue(e){const t="defaultValue";for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t===a.substring(0,t.length)&&e[a]!==void 0)return!0;return!1}}class X1{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=va.create("languageUtils")}getScriptPartFromCode(e){if(e=Uu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Uu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ut(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(a=>{if(t)return;const o=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(o))&&(t=o)}),!t&&this.options.supportedLngs&&e.forEach(a=>{if(t)return;const o=this.getScriptPartFromCode(a);if(this.isSupportedCode(o))return t=o;const c=this.getLanguagePartFromCode(a);if(this.isSupportedCode(c))return t=c;t=this.options.supportedLngs.find(d=>{if(d===c)return d;if(!(d.indexOf("-")<0&&c.indexOf("-")<0)&&(d.indexOf("-")>0&&c.indexOf("-")<0&&d.substring(0,d.indexOf("-"))===c||d.indexOf(c)===0&&c.length>1))return d})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),ut(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let a=e[t];return a||(a=e[this.getScriptPartFromCode(t)]),a||(a=e[this.formatLanguageCode(t)]),a||(a=e[this.getLanguagePartFromCode(t)]),a||(a=e.default),a||[]}toResolveHierarchy(e,t){const a=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),o=[],c=d=>{d&&(this.isSupportedCode(d)?o.push(d):this.logger.warn(`rejecting language code not found in supportedLngs: ${d}`))};return ut(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(e))):ut(e)&&c(this.formatLanguageCode(e)),a.forEach(d=>{o.indexOf(d)<0&&c(this.formatLanguageCode(d))}),o}}const W1={zero:0,one:1,two:2,few:3,many:4,other:5},J1={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class r4{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=va.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const a=Uu(e==="dev"?"en":e),o=t.ordinal?"ordinal":"cardinal",c=JSON.stringify({cleanedCode:a,type:o});if(c in this.pluralRulesCache)return this.pluralRulesCache[c];let d;try{d=new Intl.PluralRules(a,{type:o})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),J1;if(!e.match(/-|_/))return J1;const p=this.languageUtils.getLanguagePartFromCode(e);d=this.getRule(p,t)}return this.pluralRulesCache[c]=d,d}needsPlural(e,t={}){let a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),a?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,a={}){return this.getSuffixes(e,a).map(o=>`${t}${o}`)}getSuffixes(e,t={}){let a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),a?a.resolvedOptions().pluralCategories.sort((o,c)=>W1[o]-W1[c]).map(o=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${o}`):[]}getSuffix(e,t,a={}){const o=this.getRule(e,a);return o?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${o.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,a))}}const Z1=(s,e,t,a=".",o=!0)=>{let c=QS(s,e,t);return!c&&o&&ut(t)&&(c=ig(s,t,a),c===void 0&&(c=ig(e,t,a))),c},D0=s=>s.replace(/\$/g,"$$$$");class ew{constructor(e={}){this.logger=va.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:a,useRawValueToEscape:o,prefix:c,prefixEscaped:d,suffix:m,suffixEscaped:p,formatSeparator:g,unescapeSuffix:b,unescapePrefix:v,nestingPrefix:j,nestingPrefixEscaped:I,nestingSuffix:B,nestingSuffixEscaped:O,nestingOptionsSeparator:L,maxReplaces:se,alwaysFormat:W}=e.interpolation;this.escape=t!==void 0?t:XS,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=c?Hl(c):d||"{{",this.suffix=m?Hl(m):p||"}}",this.formatSeparator=g||",",this.unescapePrefix=b?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":b||"",this.nestingPrefix=j?Hl(j):I||Hl("$t("),this.nestingSuffix=B?Hl(B):O||Hl(")"),this.nestingOptionsSeparator=L||",",this.maxReplaces=se||1e3,this.alwaysFormat=W!==void 0?W:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,a)=>t?.source===a?(t.lastIndex=0,t):new RegExp(a,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,a,o){let c,d,m;const p=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},g=I=>{if(I.indexOf(this.formatSeparator)<0){const se=Z1(t,p,I,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(se,void 0,a,{...o,...t,interpolationkey:I}):se}const B=I.split(this.formatSeparator),O=B.shift().trim(),L=B.join(this.formatSeparator).trim();return this.format(Z1(t,p,O,this.options.keySeparator,this.options.ignoreJSONStructure),L,a,{...o,...t,interpolationkey:O})};this.resetRegExp();const b=o?.missingInterpolationHandler||this.options.missingInterpolationHandler,v=o?.interpolation?.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:I=>D0(I)},{regex:this.regexp,safeValue:I=>this.escapeValue?D0(this.escape(I)):D0(I)}].forEach(I=>{for(m=0;c=I.regex.exec(e);){const B=c[1].trim();if(d=g(B),d===void 0)if(typeof b=="function"){const L=b(e,c,o);d=ut(L)?L:""}else if(o&&Object.prototype.hasOwnProperty.call(o,B))d="";else if(v){d=c[0];continue}else this.logger.warn(`missed to pass in variable ${B} for interpolating ${e}`),d="";else!ut(d)&&!this.useRawValueToEscape&&(d=H1(d));const O=I.safeValue(d);if(e=e.replace(c[0],O),v?(I.regex.lastIndex+=d.length,I.regex.lastIndex-=c[0].length):I.regex.lastIndex=0,m++,m>=this.maxReplaces)break}}),e}nest(e,t,a={}){let o,c,d;const m=(p,g)=>{const b=this.nestingOptionsSeparator;if(p.indexOf(b)<0)return p;const v=p.split(new RegExp(`${b}[ ]*{`));let j=`{${v[1]}`;p=v[0],j=this.interpolate(j,d);const I=j.match(/'/g),B=j.match(/"/g);((I?.length??0)%2===0&&!B||B.length%2!==0)&&(j=j.replace(/'/g,'"'));try{d=JSON.parse(j),g&&(d={...g,...d})}catch(O){return this.logger.warn(`failed parsing options string in nesting for key ${p}`,O),`${p}${b}${j}`}return d.defaultValue&&d.defaultValue.indexOf(this.prefix)>-1&&delete d.defaultValue,p};for(;o=this.nestingRegexp.exec(e);){let p=[];d={...a},d=d.replace&&!ut(d.replace)?d.replace:d,d.applyPostProcessor=!1,delete d.defaultValue;const g=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(g!==-1&&(p=o[1].slice(g).split(this.formatSeparator).map(b=>b.trim()).filter(Boolean),o[1]=o[1].slice(0,g)),c=t(m.call(this,o[1].trim(),d),d),c&&o[0]===e&&!ut(c))return c;ut(c)||(c=H1(c)),c||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),c=""),p.length&&(c=p.reduce((b,v)=>this.format(b,v,a.lng,{...a,interpolationkey:o[1].trim()}),c.trim())),e=e.replace(o[0],c),this.regexp.lastIndex=0}return e}}const a4=s=>{let e=s.toLowerCase().trim();const t={};if(s.indexOf("(")>-1){const a=s.split("(");e=a[0].toLowerCase().trim();const o=a[1].substring(0,a[1].length-1);e==="currency"&&o.indexOf(":")<0?t.currency||(t.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?t.range||(t.range=o.trim()):o.split(";").forEach(d=>{if(d){const[m,...p]=d.split(":"),g=p.join(":").trim().replace(/^'+|'+$/g,""),b=m.trim();t[b]||(t[b]=g),g==="false"&&(t[b]=!1),g==="true"&&(t[b]=!0),isNaN(g)||(t[b]=parseInt(g,10))}})}return{formatName:e,formatOptions:t}},tw=s=>{const e={};return(t,a,o)=>{let c=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(c={...c,[o.interpolationkey]:void 0});const d=a+JSON.stringify(c);let m=e[d];return m||(m=s(Uu(a),o),e[d]=m),m(t)}},i4=s=>(e,t,a)=>s(Uu(t),a)(e);class o4{constructor(e={}){this.logger=va.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const a=t.cacheInBuiltFormats?tw:i4;this.formats={number:a((o,c)=>{const d=new Intl.NumberFormat(o,{...c});return m=>d.format(m)}),currency:a((o,c)=>{const d=new Intl.NumberFormat(o,{...c,style:"currency"});return m=>d.format(m)}),datetime:a((o,c)=>{const d=new Intl.DateTimeFormat(o,{...c});return m=>d.format(m)}),relativetime:a((o,c)=>{const d=new Intl.RelativeTimeFormat(o,{...c});return m=>d.format(m,c.range||"day")}),list:a((o,c)=>{const d=new Intl.ListFormat(o,{...c});return m=>d.format(m)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=tw(t)}format(e,t,a,o={}){const c=t.split(this.formatSeparator);if(c.length>1&&c[0].indexOf("(")>1&&c[0].indexOf(")")<0&&c.find(m=>m.indexOf(")")>-1)){const m=c.findIndex(p=>p.indexOf(")")>-1);c[0]=[c[0],...c.splice(1,m)].join(this.formatSeparator)}return c.reduce((m,p)=>{const{formatName:g,formatOptions:b}=a4(p);if(this.formats[g]){let v=m;try{const j=o?.formatParams?.[o.interpolationkey]||{},I=j.locale||j.lng||o.locale||o.lng||a;v=this.formats[g](m,I,{...b,...o,...j})}catch(j){this.logger.warn(j)}return v}else this.logger.warn(`there was no format function for ${g}`);return m},e)}}const l4=(s,e)=>{s.pending[e]!==void 0&&(delete s.pending[e],s.pendingCount--)};class c4 extends Xf{constructor(e,t,a,o={}){super(),this.backend=e,this.store=t,this.services=a,this.languageUtils=a.languageUtils,this.options=o,this.logger=va.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(a,o.backend,o)}queueLoad(e,t,a,o){const c={},d={},m={},p={};return e.forEach(g=>{let b=!0;t.forEach(v=>{const j=`${g}|${v}`;!a.reload&&this.store.hasResourceBundle(g,v)?this.state[j]=2:this.state[j]<0||(this.state[j]===1?d[j]===void 0&&(d[j]=!0):(this.state[j]=1,b=!1,d[j]===void 0&&(d[j]=!0),c[j]===void 0&&(c[j]=!0),p[v]===void 0&&(p[v]=!0)))}),b||(m[g]=!0)}),(Object.keys(c).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(c),pending:Object.keys(d),toLoadLanguages:Object.keys(m),toLoadNamespaces:Object.keys(p)}}loaded(e,t,a){const o=e.split("|"),c=o[0],d=o[1];t&&this.emit("failedLoading",c,d,t),!t&&a&&this.store.addResourceBundle(c,d,a,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&a&&(this.state[e]=0);const m={};this.queue.forEach(p=>{KS(p.loaded,[c],d),l4(p,e),t&&p.errors.push(t),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(g=>{m[g]||(m[g]={});const b=p.loaded[g];b.length&&b.forEach(v=>{m[g][v]===void 0&&(m[g][v]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",m),this.queue=this.queue.filter(p=>!p.done)}read(e,t,a,o=0,c=this.retryTimeout,d){if(!e.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:a,tried:o,wait:c,callback:d});return}this.readingCalls++;const m=(g,b)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(g&&b&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,a,o+1,c*2,d)},c);return}d(g,b)},p=this.backend[a].bind(this.backend);if(p.length===2){try{const g=p(e,t);g&&typeof g.then=="function"?g.then(b=>m(null,b)).catch(m):m(null,g)}catch(g){m(g)}return}return p(e,t,m)}prepareLoading(e,t,a={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ut(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ut(t)&&(t=[t]);const c=this.queueLoad(e,t,a,o);if(!c.toLoad.length)return c.pending.length||o(),null;c.toLoad.forEach(d=>{this.loadOne(d)})}load(e,t,a){this.prepareLoading(e,t,{},a)}reload(e,t,a){this.prepareLoading(e,t,{reload:!0},a)}loadOne(e,t=""){const a=e.split("|"),o=a[0],c=a[1];this.read(o,c,"read",void 0,void 0,(d,m)=>{d&&this.logger.warn(`${t}loading namespace ${c} for language ${o} failed`,d),!d&&m&&this.logger.log(`${t}loaded namespace ${c} for language ${o}`,m),this.loaded(e,d,m)})}saveMissing(e,t,a,o,c,d={},m=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${a}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend?.create){const p={...d,isUpdate:c},g=this.backend.create.bind(this.backend);if(g.length<6)try{let b;g.length===5?b=g(e,t,a,o,p):b=g(e,t,a,o),b&&typeof b.then=="function"?b.then(v=>m(null,v)).catch(m):m(null,b)}catch(b){m(b)}else g(e,t,a,o,m,p)}!e||!e[0]||this.store.addResource(e[0],t,a,o)}}}const M0=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let e={};if(typeof s[1]=="object"&&(e=s[1]),ut(s[1])&&(e.defaultValue=s[1]),ut(s[2])&&(e.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const t=s[3]||s[2];Object.keys(t).forEach(a=>{e[a]=t[a]})}return e},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),sw=s=>(ut(s.ns)&&(s.ns=[s.ns]),ut(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),ut(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs?.indexOf?.("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s),Vh=()=>{},u4=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(t=>{typeof s[t]=="function"&&(s[t]=s[t].bind(s))})};class _u extends Xf{constructor(e={},t){if(super(),this.options=sw(e),this.services={},this.logger=va,this.modules={external:[]},u4(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(ut(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const a=M0();this.options={...a,...this.options,...sw(e)},this.options.interpolation={...a.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=a.overloadTranslationOptionHandler);const o=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?va.init(o(this.modules.logger),this.options):va.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=o4;const b=new X1(this.options);this.store=new Q1(this.options.resources,this.options);const v=this.services;v.logger=va,v.resourceStore=this.store,v.languageUtils=b,v.pluralResolver=new r4(b,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),g&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(v.formatter=o(g),v.formatter.init&&v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new ew(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new c4(o(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",(I,...B)=>{this.emit(I,...B)}),this.modules.languageDetector&&(v.languageDetector=o(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=o(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new pf(this.services,this.options),this.translator.on("*",(I,...B)=>{this.emit(I,...B)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Vh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=(...b)=>this.store[g](...b)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=(...b)=>(this.store[g](...b),this)});const m=fu(),p=()=>{const g=(b,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),m.resolve(v),t(b,v)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),m}loadResources(e,t=Vh){let a=t;const o=ut(e)?e:this.language;if(typeof e=="function"&&(a=e),!this.options.resources||this.options.partialBundledLanguages){if(o?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const c=[],d=m=>{if(!m||m==="cimode")return;this.services.languageUtils.toResolveHierarchy(m).forEach(g=>{g!=="cimode"&&c.indexOf(g)<0&&c.push(g)})};o?d(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>d(p)),this.options.preload?.forEach?.(m=>d(m)),this.services.backendConnector.load(c,this.options.ns,m=>{!m&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(m)})}else a(null)}reloadResources(e,t,a){const o=fu();return typeof e=="function"&&(a=e,e=void 0),typeof t=="function"&&(a=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),a||(a=Vh),this.services.backendConnector.reload(e,t,c=>{o.resolve(),a(c)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&NN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const a=this.languages[t];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const a=fu();this.emit("languageChanging",e);const o=m=>{this.language=m,this.languages=this.services.languageUtils.toResolveHierarchy(m),this.resolvedLanguage=void 0,this.setResolvedLanguage(m)},c=(m,p)=>{p?this.isLanguageChangingTo===e&&(o(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,a.resolve((...g)=>this.t(...g)),t&&t(m,(...g)=>this.t(...g))},d=m=>{!e&&!m&&this.services.languageDetector&&(m=[]);const p=ut(m)?m:m&&m[0],g=this.store.hasLanguageSomeTranslations(p)?p:this.services.languageUtils.getBestMatchFromCodes(ut(m)?[m]:m);g&&(this.language||o(g),this.translator.language||this.translator.changeLanguage(g),this.services.languageDetector?.cacheUserLanguage?.(g)),this.loadResources(g,b=>{c(b,g)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(e),a}getFixedT(e,t,a){const o=(c,d,...m)=>{let p;typeof d!="object"?p=this.options.overloadTranslationOptionHandler([c,d].concat(m)):p={...d},p.lng=p.lng||o.lng,p.lngs=p.lngs||o.lngs,p.ns=p.ns||o.ns,p.keyPrefix!==""&&(p.keyPrefix=p.keyPrefix||a||o.keyPrefix);const g=this.options.keySeparator||".";let b;return p.keyPrefix&&Array.isArray(c)?b=c.map(v=>(typeof v=="function"&&(v=lg(v,{...this.options,...d})),`${p.keyPrefix}${g}${v}`)):(typeof c=="function"&&(c=lg(c,{...this.options,...d})),b=p.keyPrefix?`${p.keyPrefix}${g}${c}`:c),this.t(b,p)};return ut(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=a,o}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=t.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const d=(m,p)=>{const g=this.services.backendConnector.state[`${m}|${p}`];return g===-1||g===0||g===2};if(t.precheck){const m=t.precheck(this,d);if(m!==void 0)return m}return!!(this.hasResourceBundle(a,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(a,e)&&(!o||d(c,e)))}loadNamespaces(e,t){const a=fu();return this.options.ns?(ut(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{a.resolve(),t&&t(o)}),a):(t&&t(),Promise.resolve())}loadLanguages(e,t){const a=fu();ut(e)&&(e=[e]);const o=this.options.preload||[],c=e.filter(d=>o.indexOf(d)<0&&this.services.languageUtils.isSupportedCode(d));return c.length?(this.options.preload=o.concat(c),this.loadResources(d=>{a.resolve(),t&&t(d)}),a):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const o=new Intl.Locale(e);if(o&&o.getTextInfo){const c=o.getTextInfo();if(c&&c.direction)return c.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services?.languageUtils||new X1(M0());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(a.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const a=new _u(e,t);return a.createInstance=_u.createInstance,a}cloneInstance(e={},t=Vh){const a=e.forkResourceStore;a&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},c=new _u(o);if((e.debug!==void 0||e.prefix!==void 0)&&(c.logger=c.logger.clone(e)),["store","services","language"].forEach(m=>{c[m]=this[m]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},a){const m=Object.keys(this.store.data).reduce((p,g)=>(p[g]={...this.store.data[g]},p[g]=Object.keys(p[g]).reduce((b,v)=>(b[v]={...p[g][v]},b),p[g]),p),{});c.store=new Q1(m,o),c.services.resourceStore=c.store}if(e.interpolation){const p={...M0().interpolation,...this.options.interpolation,...e.interpolation},g={...o,interpolation:p};c.services.interpolator=new ew(g)}return c.translator=new pf(c.services,o),c.translator.on("*",(m,...p)=>{c.emit(m,...p)}),c.init(o,t),c.translator.options=o,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Un=_u.createInstance();Un.createInstance;Un.dir;Un.init;Un.loadResources;Un.reloadResources;Un.use;Un.changeLanguage;Un.getFixedT;Un.t;Un.exists;Un.setDefaultNamespace;Un.hasLoadedNamespace;Un.loadNamespaces;Un.loadLanguages;const d4=(s,e,t,a)=>{const o=[t,{code:e,...a||{}}];if(s?.services?.logger?.forward)return s.services.logger.forward(o,"warn","react-i18next::",!0);Zo(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),s?.services?.logger?.warn?s.services.logger.warn(...o):console?.warn&&console.warn(...o)},nw={},jN=(s,e,t,a)=>{Zo(t)&&nw[t]||(Zo(t)&&(nw[t]=new Date),d4(s,e,t,a))},EN=(s,e)=>()=>{if(s.isInitialized)e();else{const t=()=>{setTimeout(()=>{s.off("initialized",t)},0),e()};s.on("initialized",t)}},cg=(s,e,t)=>{s.loadNamespaces(e,EN(s,t))},rw=(s,e,t,a)=>{if(Zo(t)&&(t=[t]),s.options.preload&&s.options.preload.indexOf(e)>-1)return cg(s,t,a);t.forEach(o=>{s.options.ns.indexOf(o)<0&&s.options.ns.push(o)}),s.loadLanguages(e,EN(s,a))},h4=(s,e,t={})=>!e.languages||!e.languages.length?(jN(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(s,{lng:t.lng,precheck:(a,o)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,s))return!1}}),Zo=s=>typeof s=="string",f4=s=>typeof s=="object"&&s!==null,m4=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,p4={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},g4=s=>p4[s],x4=s=>s.replace(m4,g4);let ug={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:x4,transDefaultProps:void 0};const b4=(s={})=>{ug={...ug,...s}},y4=()=>ug;let SN;const v4=s=>{SN=s},w4=()=>SN,N4={type:"3rdParty",init(s){b4(s.options.react),v4(s)}},_4=N.createContext();class j4{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var O0={exports:{}},P0={};var aw;function E4(){if(aw)return P0;aw=1;var s=Yf();function e(v,j){return v===j&&(v!==0||1/v===1/j)||v!==v&&j!==j}var t=typeof Object.is=="function"?Object.is:e,a=s.useState,o=s.useEffect,c=s.useLayoutEffect,d=s.useDebugValue;function m(v,j){var I=j(),B=a({inst:{value:I,getSnapshot:j}}),O=B[0].inst,L=B[1];return c(function(){O.value=I,O.getSnapshot=j,p(O)&&L({inst:O})},[v,I,j]),o(function(){return p(O)&&L({inst:O}),v(function(){p(O)&&L({inst:O})})},[v]),d(I),I}function p(v){var j=v.getSnapshot;v=v.value;try{var I=j();return!t(v,I)}catch{return!0}}function g(v,j){return j()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:m;return P0.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:b,P0}var iw;function S4(){return iw||(iw=1,O0.exports=E4()),O0.exports}var T4=S4();const k4=(s,e)=>Zo(e)?e:f4(e)&&Zo(e.defaultValue)?e.defaultValue:Array.isArray(s)?s[s.length-1]:s,A4={t:k4,ready:!1},C4=()=>()=>{},ed=(s,e={})=>{const{i18n:t}=e,{i18n:a,defaultNS:o}=N.useContext(_4)||{},c=t||a||w4();c&&!c.reportNamespaces&&(c.reportNamespaces=new j4),c||jN(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=N.useMemo(()=>({...y4(),...c?.options?.react,...e}),[c,e]),{useSuspense:m,keyPrefix:p}=d,g=o||c?.options?.defaultNS,b=Zo(g)?[g]:g||["translation"],v=N.useMemo(()=>b,b);c?.reportNamespaces?.addUsedNamespaces?.(v);const j=N.useRef(0),I=N.useCallback(A=>{if(!c)return C4;const{bindI18n:z,bindI18nStore:$}=d,q=()=>{j.current+=1,A()};return z&&c.on(z,q),$&&c.store.on($,q),()=>{z&&z.split(" ").forEach(k=>c.off(k,q)),$&&$.split(" ").forEach(k=>c.store.off(k,q))}},[c,d]),B=N.useRef(),O=N.useCallback(()=>{if(!c)return A4;const A=!!(c.isInitialized||c.initializedStoreOnce)&&v.every(_e=>h4(_e,c,d)),z=e.lng||c.language,$=j.current,q=B.current;if(q&&q.ready===A&&q.lng===z&&q.keyPrefix===p&&q.revision===$)return q;const ue={t:c.getFixedT(z,d.nsMode==="fallback"?v:v[0],p),ready:A,lng:z,keyPrefix:p,revision:$};return B.current=ue,ue},[c,v,p,d,e.lng]),[L,se]=N.useState(0),{t:W,ready:re}=T4.useSyncExternalStore(I,O,O);N.useEffect(()=>{if(c&&!re&&!m){const A=()=>se(z=>z+1);e.lng?rw(c,e.lng,v,A):cg(c,v,A)}},[c,e.lng,v,re,m,L]);const me=c||{},xe=N.useRef(null),Te=N.useRef(),D=A=>{const z=Object.getOwnPropertyDescriptors(A);z.__original&&delete z.__original;const $=Object.create(Object.getPrototypeOf(A),z);if(!Object.prototype.hasOwnProperty.call($,"__original"))try{Object.defineProperty($,"__original",{value:A,writable:!1,enumerable:!1,configurable:!1})}catch{}return $},T=N.useMemo(()=>{const A=me,z=A?.language;let $=A;A&&(xe.current&&xe.current.__original===A?Te.current!==z?($=D(A),xe.current=$,Te.current=z):$=xe.current:($=D(A),xe.current=$,Te.current=z));const q=[W,$,re];return q.t=W,q.i18n=$,q.ready=re,q},[W,me,re,me.resolvedLanguage,me.language,me.languages]);if(c&&m&&!re)throw new Promise(A=>{const z=()=>A();e.lng?rw(c,e.lng,v,z):cg(c,v,z)});return T},R4={dashboard:"Dashboard",projects:"Projects",settings:"Settings",login:"Login",logout:"Logout"},I4={welcome:"Welcome back",active_projects:"Active Projects",todays_posts:"Today's Posts"},D4={mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},M4={title:"Posting Schedule",add_slot:"Add Slot",start_time:"Start",end_time:"End",duration:"Duration",scenes:"Scenes (1-10)",platforms:"Platforms (1-4)",calculated_end:"Est. End",overlap_error:"Time slot overlap detected!",saving:"Saving...",saved:"Saved",login_required:"Please login to save",no_slots:"No slots added for this day",remove:"Remove"},O4={common:R4,dashboard:I4,days:D4,timeslot:M4},P4={dashboard:"",projects:"",settings:"",login:"",logout:""},L4={welcome:"",active_projects:"",todays_posts:""},z4={mon:"",tue:"",wed:"",thu:"",fri:"",sat:"",sun:""},V4={title:"",add_slot:"",start_time:"",end_time:"",duration:"",scenes:" (1-10)",platforms:" (1-4)",calculated_end:"",overlap_error:"!",saving:"...",saved:"",login_required:"",no_slots:"",remove:""},U4={common:P4,dashboard:L4,days:z4,timeslot:V4},B4={dashboard:"",projects:"",settings:"",login:"",logout:""},$4={welcome:"",active_projects:"",todays_posts:""},F4={common:B4,dashboard:$4};Un.use(N4).init({resources:{en:{translation:O4},th:{translation:U4},zh:{translation:F4}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var ow="popstate";function H4(s={}){function e(a,o){let{pathname:c,search:d,hash:m}=a.location;return dg("",{pathname:c,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(a,o){return typeof o=="string"?o:Bu(o)}return G4(e,t,null,s)}function ws(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function br(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q4(){return Math.random().toString(36).substring(2,10)}function lw(s,e){return{usr:s.state,key:s.key,idx:e}}function dg(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?fc(e):e,state:t,key:e&&e.key||a||q4()}}function Bu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function fc(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function G4(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,m="POP",p=null,g=b();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function b(){return(d.state||{idx:null}).idx}function v(){m="POP";let L=b(),se=L==null?null:L-g;g=L,p&&p({action:m,location:O.location,delta:se})}function j(L,se){m="PUSH";let W=dg(O.location,L,se);g=b()+1;let re=lw(W,g),me=O.createHref(W);try{d.pushState(re,"",me)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;o.location.assign(me)}c&&p&&p({action:m,location:O.location,delta:1})}function I(L,se){m="REPLACE";let W=dg(O.location,L,se);g=b();let re=lw(W,g),me=O.createHref(W);d.replaceState(re,"",me),c&&p&&p({action:m,location:O.location,delta:0})}function B(L){return K4(L)}let O={get action(){return m},get location(){return s(o,d)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(ow,v),p=L,()=>{o.removeEventListener(ow,v),p=null}},createHref(L){return e(o,L)},createURL:B,encodeLocation(L){let se=B(L);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:j,replace:I,go(L){return d.go(L)}};return O}function K4(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ws(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Bu(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function TN(s,e,t="/"){return Q4(s,e,t,!1)}function Q4(s,e,t,a){let o=typeof e=="string"?fc(e):e,c=ci(o.pathname||"/",t);if(c==null)return null;let d=kN(s);Y4(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=iT(c);m=rT(d[p],g,a)}return m}function kN(s,e=[],t=[],a="",o=!1){let c=(d,m,p=o,g)=>{let b={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(a)&&p)return;ws(b.relativePath.startsWith(a),`Absolute route path "${b.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(a.length)}let v=ii([a,b.relativePath]),j=t.concat(b);d.children&&d.children.length>0&&(ws(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),kN(d.children,e,j,v,p)),!(d.path==null&&!d.index)&&e.push({path:v,score:sT(v,d.index),routesMeta:j})};return s.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let p of AN(d.path))c(d,m,!0,p)}),e}function AN(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=AN(a.join("/")),m=[];return m.push(...d.map(p=>p===""?c:[c,p].join("/"))),o&&m.push(...d),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function Y4(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:nT(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var X4=/^:[\w-]+$/,W4=3,J4=2,Z4=1,eT=10,tT=-2,cw=s=>s==="*";function sT(s,e){let t=s.split("/"),a=t.length;return t.some(cw)&&(a+=tT),e&&(a+=J4),t.filter(o=>!cw(o)).reduce((o,c)=>o+(X4.test(c)?W4:c===""?Z4:eT),a)}function nT(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function rT(s,e,t=!1){let{routesMeta:a}=s,o={},c="/",d=[];for(let m=0;m<a.length;++m){let p=a[m],g=m===a.length-1,b=c==="/"?e:e.slice(c.length)||"/",v=gf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},b),j=p.route;if(!v&&g&&t&&!a[a.length-1].route.index&&(v=gf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},b)),!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:ii([c,v.pathname]),pathnameBase:uT(ii([c,v.pathnameBase])),route:j}),v.pathnameBase!=="/"&&(c=ii([c,v.pathnameBase]))}return d}function gf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=aT(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((g,{paramName:b,isOptional:v},j)=>{if(b==="*"){let B=m[j]||"";d=c.slice(0,c.length-B.length).replace(/(.)\/+$/,"$1")}const I=m[j];return v&&!I?g[b]=void 0:g[b]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:s}}function aT(s,e=!1,t=!0){br(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function iT(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return br(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ci(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var CN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oT=s=>CN.test(s);function lT(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?fc(s):s,c;if(t)if(oT(t))c=t;else{if(t.includes("//")){let d=t;t=t.replace(/\/\/+/g,"/"),br(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${t}`)}t.startsWith("/")?c=uw(t.substring(1),"/"):c=uw(t,e)}else c=e;return{pathname:c,search:dT(a),hash:hT(o)}}function uw(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function L0(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cT(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wg(s){let e=cT(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Jg(s,e,t,a=!1){let o;typeof s=="string"?o=fc(s):(o={...s},ws(!o.pathname||!o.pathname.includes("?"),L0("?","pathname","search",o)),ws(!o.pathname||!o.pathname.includes("#"),L0("#","pathname","hash",o)),ws(!o.search||!o.search.includes("#"),L0("#","search","hash",o)));let c=s===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=t;else{let v=e.length-1;if(!a&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),v-=1;o.pathname=j.join("/")}m=v>=0?e[v]:"/"}let p=lT(o,m),g=d&&d!=="/"&&d.endsWith("/"),b=(c||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||b)&&(p.pathname+="/"),p}var ii=s=>s.join("/").replace(/\/\/+/g,"/"),uT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),dT=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,hT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,fT=class{constructor(s,e,t,a=!1){this.status=s,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function mT(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function pT(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var RN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function IN(s,e){let t=s;if(typeof t!="string"||!CN.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,o=!1;if(RN)try{let c=new URL(window.location.href),d=t.startsWith("//")?new URL(c.protocol+t):new URL(t),m=ci(d.pathname,e);d.origin===c.origin&&m!=null?t=m+d.search+d.hash:o=!0}catch{br(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var DN=["POST","PUT","PATCH","DELETE"];new Set(DN);var gT=["GET",...DN];new Set(gT);var mc=N.createContext(null);mc.displayName="DataRouter";var Wf=N.createContext(null);Wf.displayName="DataRouterState";var xT=N.createContext(!1),MN=N.createContext({isTransitioning:!1});MN.displayName="ViewTransition";var bT=N.createContext(new Map);bT.displayName="Fetchers";var yT=N.createContext(null);yT.displayName="Await";var yr=N.createContext(null);yr.displayName="Navigation";var td=N.createContext(null);td.displayName="Location";var Ca=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ca.displayName="Route";var Zg=N.createContext(null);Zg.displayName="RouteError";var ON="REACT_ROUTER_ERROR",vT="REDIRECT",wT="ROUTE_ERROR_RESPONSE";function NT(s){if(s.startsWith(`${ON}:${vT}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function _T(s){if(s.startsWith(`${ON}:${wT}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new fT(e.status,e.statusText,e.data)}catch{}}function jT(s,{relative:e}={}){ws(pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=N.useContext(yr),{hash:o,pathname:c,search:d}=sd(s,{relative:e}),m=c;return t!=="/"&&(m=c==="/"?t:ii([t,c])),a.createHref({pathname:m,search:d,hash:o})}function pc(){return N.useContext(td)!=null}function Vr(){return ws(pc(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(td).location}var PN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LN(s){N.useContext(yr).static||N.useLayoutEffect(s)}function ex(){let{isDataRoute:s}=N.useContext(Ca);return s?LT():ET()}function ET(){ws(pc(),"useNavigate() may be used only in the context of a <Router> component.");let s=N.useContext(mc),{basename:e,navigator:t}=N.useContext(yr),{matches:a}=N.useContext(Ca),{pathname:o}=Vr(),c=JSON.stringify(Wg(a)),d=N.useRef(!1);return LN(()=>{d.current=!0}),N.useCallback((p,g={})=>{if(br(d.current,PN),!d.current)return;if(typeof p=="number"){t.go(p);return}let b=Jg(p,JSON.parse(c),o,g.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:ii([e,b.pathname])),(g.replace?t.replace:t.push)(b,g.state,g)},[e,t,c,o,s])}N.createContext(null);function sd(s,{relative:e}={}){let{matches:t}=N.useContext(Ca),{pathname:a}=Vr(),o=JSON.stringify(Wg(t));return N.useMemo(()=>Jg(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function ST(s,e){return zN(s,e)}function zN(s,e,t,a,o){ws(pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=N.useContext(yr),{matches:d}=N.useContext(Ca),m=d[d.length-1],p=m?m.params:{},g=m?m.pathname:"/",b=m?m.pathnameBase:"/",v=m&&m.route;{let W=v&&v.path||"";UN(g,!v||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let j=Vr(),I;if(e){let W=typeof e=="string"?fc(e):e;ws(b==="/"||W.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${W.pathname}" was given in the \`location\` prop.`),I=W}else I=j;let B=I.pathname||"/",O=B;if(b!=="/"){let W=b.replace(/^\//,"").split("/");O="/"+B.replace(/^\//,"").split("/").slice(W.length).join("/")}let L=TN(s,{pathname:O});br(v||L!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),br(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let se=RT(L&&L.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:ii([b,c.encodeLocation?c.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?b:ii([b,c.encodeLocation?c.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),d,t,a,o);return e&&se?N.createElement(td.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},se):se}function TT(){let s=PT(),e=mT(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:c},"ErrorBoundary")," or"," ",N.createElement("code",{style:c},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:o},t):null,d)}var kT=N.createElement(TT,null),VN=class extends N.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=_T(s.digest);t&&(s=t)}let e=s!==void 0?N.createElement(Ca.Provider,{value:this.props.routeContext},N.createElement(Zg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?N.createElement(AT,{error:s},e):e}};VN.contextType=xT;var z0=new WeakMap;function AT({children:s,error:e}){let{basename:t}=N.useContext(yr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=NT(e.digest);if(a){let o=z0.get(e);if(o)throw o;let c=IN(a.location,t);if(RN&&!z0.get(e))if(c.isExternal||a.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:a.replace}));throw z0.set(e,d),d}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function CT({routeContext:s,match:e,children:t}){let a=N.useContext(mc);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Ca.Provider,{value:s},t)}function RT(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let c=s,d=t?.errors;if(d!=null){let b=c.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);ws(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let m=!1,p=-1;if(t)for(let b=0;b<c.length;b++){let v=c[b];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=b),v.route.id){let{loaderData:j,errors:I}=t,B=v.route.loader&&!j.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||B){m=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let g=t&&a?(b,v)=>{a(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:pT(t.matches),errorInfo:v})}:void 0;return c.reduceRight((b,v,j)=>{let I,B=!1,O=null,L=null;t&&(I=d&&v.route.id?d[v.route.id]:void 0,O=v.route.errorElement||kT,m&&(p<0&&j===0?(UN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,L=null):p===j&&(B=!0,L=v.route.hydrateFallbackElement||null)));let se=e.concat(c.slice(0,j+1)),W=()=>{let re;return I?re=O:B?re=L:v.route.Component?re=N.createElement(v.route.Component,null):v.route.element?re=v.route.element:re=b,N.createElement(CT,{match:v,routeContext:{outlet:b,matches:se,isDataRoute:t!=null},children:re})};return t&&(v.route.ErrorBoundary||v.route.errorElement||j===0)?N.createElement(VN,{location:t.location,revalidation:t.revalidation,component:O,error:I,children:W(),routeContext:{outlet:null,matches:se,isDataRoute:!0},onError:g}):W()},null)}function tx(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IT(s){let e=N.useContext(mc);return ws(e,tx(s)),e}function DT(s){let e=N.useContext(Wf);return ws(e,tx(s)),e}function MT(s){let e=N.useContext(Ca);return ws(e,tx(s)),e}function sx(s){let e=MT(s),t=e.matches[e.matches.length-1];return ws(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function OT(){return sx("useRouteId")}function PT(){let s=N.useContext(Zg),e=DT("useRouteError"),t=sx("useRouteError");return s!==void 0?s:e.errors?.[t]}function LT(){let{router:s}=IT("useNavigate"),e=sx("useNavigate"),t=N.useRef(!1);return LN(()=>{t.current=!0}),N.useCallback(async(o,c={})=>{br(t.current,PN),t.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var dw={};function UN(s,e,t){!e&&!dw[s]&&(dw[s]=!0,br(!1,t))}N.memo(zT);function zT({routes:s,future:e,state:t,onError:a}){return zN(s,void 0,t,a,e)}function VT({to:s,replace:e,state:t,relative:a}){ws(pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(yr);br(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=N.useContext(Ca),{pathname:d}=Vr(),m=ex(),p=Jg(s,Wg(c),d,a==="path"),g=JSON.stringify(p);return N.useEffect(()=>{m(JSON.parse(g),{replace:e,state:t,relative:a})},[m,g,a,e,t]),null}function Pn(s){ws(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UT({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:c=!1,unstable_useTransitions:d}){ws(!pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),p=N.useMemo(()=>({basename:m,navigator:o,static:c,unstable_useTransitions:d,future:{}}),[m,o,c,d]);typeof t=="string"&&(t=fc(t));let{pathname:g="/",search:b="",hash:v="",state:j=null,key:I="default"}=t,B=N.useMemo(()=>{let O=ci(g,m);return O==null?null:{location:{pathname:O,search:b,hash:v,state:j,key:I},navigationType:a}},[m,g,b,v,j,I,a]);return br(B!=null,`<Router basename="${m}"> is not able to match the URL "${g}${b}${v}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:N.createElement(yr.Provider,{value:p},N.createElement(td.Provider,{children:e,value:B}))}function BT({children:s,location:e}){return ST(hg(s),e)}function hg(s,e=[]){let t=[];return N.Children.forEach(s,(a,o)=>{if(!N.isValidElement(a))return;let c=[...e,o];if(a.type===N.Fragment){t.push.apply(t,hg(a.props.children,c));return}ws(a.type===Pn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ws(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=hg(a.props.children,c)),t.push(d)}),t}var Zh="get",ef="application/x-www-form-urlencoded";function Jf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function $T(s){return Jf(s)&&s.tagName.toLowerCase()==="button"}function FT(s){return Jf(s)&&s.tagName.toLowerCase()==="form"}function HT(s){return Jf(s)&&s.tagName.toLowerCase()==="input"}function qT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function GT(s,e){return s.button===0&&(!e||e==="_self")&&!qT(s)}function fg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let a=s[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function KT(s,e){let t=fg(s);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}var Uh=null;function QT(){if(Uh===null)try{new FormData(document.createElement("form"),0),Uh=!1}catch{Uh=!0}return Uh}var YT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V0(s){return s!=null&&!YT.has(s)?(br(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ef}"`),null):s}function XT(s,e){let t,a,o,c,d;if(FT(s)){let m=s.getAttribute("action");a=m?ci(m,e):null,t=s.getAttribute("method")||Zh,o=V0(s.getAttribute("enctype"))||ef,c=new FormData(s)}else if($T(s)||HT(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||m.getAttribute("action");if(a=p?ci(p,e):null,t=s.getAttribute("formmethod")||m.getAttribute("method")||Zh,o=V0(s.getAttribute("formenctype"))||V0(m.getAttribute("enctype"))||ef,c=new FormData(m,s),!QT()){let{name:g,type:b,value:v}=s;if(b==="image"){let j=g?`${g}.`:"";c.append(`${j}x`,"0"),c.append(`${j}y`,"0")}else g&&c.append(g,v)}}else{if(Jf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zh,a=null,o=ef,d=s}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nx(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function WT(s,e,t,a){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:e&&ci(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function JT(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function ek(s,e,t){let a=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await JT(c,t);return d.links?d.links():[]}return[]}));return rk(a.flat(1).filter(ZT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function hw(s,e,t,a,o,c){let d=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,m=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,g)=>d(p,g)||m(p,g)):c==="data"?e.filter((p,g)=>{let b=a.routes[p.route.id];if(!b||!b.hasLoader)return!1;if(d(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function tk(s,e,{includeHydrateFallback:t}={}){return sk(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function sk(s){return[...new Set(s)]}function nk(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function rk(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let c=JSON.stringify(nk(o));return t.has(c)||(t.add(c),a.push({key:c,link:o})),a},[])}function BN(){let s=N.useContext(mc);return nx(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function ak(){let s=N.useContext(Wf);return nx(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var rx=N.createContext(void 0);rx.displayName="FrameworkContext";function $N(){let s=N.useContext(rx);return nx(s,"You must render this element inside a <HydratedRouter> element"),s}function ik(s,e){let t=N.useContext(rx),[a,o]=N.useState(!1),[c,d]=N.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:b,onTouchStart:v}=e,j=N.useRef(null);N.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let O=se=>{se.forEach(W=>{d(W.isIntersecting)})},L=new IntersectionObserver(O,{threshold:.5});return j.current&&L.observe(j.current),()=>{L.disconnect()}}},[s]),N.useEffect(()=>{if(a){let O=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(O)}}},[a]);let I=()=>{o(!0)},B=()=>{o(!1),d(!1)};return t?s!=="intent"?[c,j,{}]:[c,j,{onFocus:mu(m,I),onBlur:mu(p,B),onMouseEnter:mu(g,I),onMouseLeave:mu(b,B),onTouchStart:mu(v,I)}]:[!1,j,{}]}function mu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function ok({page:s,...e}){let{router:t}=BN(),a=N.useMemo(()=>TN(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?N.createElement(ck,{page:s,matches:a,...e}):null}function lk(s){let{manifest:e,routeModules:t}=$N(),[a,o]=N.useState([]);return N.useEffect(()=>{let c=!1;return ek(s,e,t).then(d=>{c||o(d)}),()=>{c=!0}},[s,e,t]),a}function ck({page:s,matches:e,...t}){let a=Vr(),{future:o,manifest:c,routeModules:d}=$N(),{basename:m}=BN(),{loaderData:p,matches:g}=ak(),b=N.useMemo(()=>hw(s,e,g,c,a,"data"),[s,e,g,c,a]),v=N.useMemo(()=>hw(s,e,g,c,a,"assets"),[s,e,g,c,a]),j=N.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let O=new Set,L=!1;if(e.forEach(W=>{let re=c.routes[W.route.id];!re||!re.hasLoader||(!b.some(me=>me.route.id===W.route.id)&&W.route.id in p&&d[W.route.id]?.shouldRevalidate||re.hasClientLoader?L=!0:O.add(W.route.id))}),O.size===0)return[];let se=WT(s,m,o.unstable_trailingSlashAwareDataRequests,"data");return L&&O.size>0&&se.searchParams.set("_routes",e.filter(W=>O.has(W.route.id)).map(W=>W.route.id).join(",")),[se.pathname+se.search]},[m,o.unstable_trailingSlashAwareDataRequests,p,a,c,b,e,s,d]),I=N.useMemo(()=>tk(v,c),[v,c]),B=lk(v);return N.createElement(N.Fragment,null,j.map(O=>N.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),I.map(O=>N.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),B.map(({key:O,link:L})=>N.createElement("link",{key:O,nonce:t.nonce,...L})))}function uk(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var dk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dk&&(window.__reactRouterVersion="7.12.0")}catch{}function hk({basename:s,children:e,unstable_useTransitions:t,window:a}){let o=N.useRef();o.current==null&&(o.current=H4({window:a,v5Compat:!0}));let c=o.current,[d,m]=N.useState({action:c.action,location:c.location}),p=N.useCallback(g=>{t===!1?m(g):N.startTransition(()=>m(g))},[t]);return N.useLayoutEffect(()=>c.listen(p),[c,p]),N.createElement(UT,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:t})}var FN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xo=N.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:m,target:p,to:g,preventScrollReset:b,viewTransition:v,unstable_defaultShouldRevalidate:j,...I},B){let{basename:O,unstable_useTransitions:L}=N.useContext(yr),se=typeof g=="string"&&FN.test(g),W=IN(g,O);g=W.to;let re=jT(g,{relative:o}),[me,xe,Te]=ik(a,I),D=gk(g,{replace:d,state:m,target:p,preventScrollReset:b,relative:o,viewTransition:v,unstable_defaultShouldRevalidate:j,unstable_useTransitions:L});function T(z){e&&e(z),z.defaultPrevented||D(z)}let A=N.createElement("a",{...I,...Te,href:W.absoluteURL||re,onClick:W.isExternal||c?e:T,ref:uk(B,xe),target:p,"data-discover":!se&&t==="render"?"true":void 0});return me&&!se?N.createElement(N.Fragment,null,A,N.createElement(ok,{page:re})):A});Xo.displayName="Link";var fk=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:m,children:p,...g},b){let v=sd(d,{relative:g.relative}),j=Vr(),I=N.useContext(Wf),{navigator:B,basename:O}=N.useContext(yr),L=I!=null&&Nk(v)&&m===!0,se=B.encodeLocation?B.encodeLocation(v).pathname:v.pathname,W=j.pathname,re=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(W=W.toLowerCase(),re=re?re.toLowerCase():null,se=se.toLowerCase()),re&&O&&(re=ci(re,O)||re);const me=se!=="/"&&se.endsWith("/")?se.length-1:se.length;let xe=W===se||!o&&W.startsWith(se)&&W.charAt(me)==="/",Te=re!=null&&(re===se||!o&&re.startsWith(se)&&re.charAt(se.length)==="/"),D={isActive:xe,isPending:Te,isTransitioning:L},T=xe?e:void 0,A;typeof a=="function"?A=a(D):A=[a,xe?"active":null,Te?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let z=typeof c=="function"?c(D):c;return N.createElement(Xo,{...g,"aria-current":T,className:A,ref:b,style:z,to:d,viewTransition:m},typeof p=="function"?p(D):p)});fk.displayName="NavLink";var mk=N.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:c,method:d=Zh,action:m,onSubmit:p,relative:g,preventScrollReset:b,viewTransition:v,unstable_defaultShouldRevalidate:j,...I},B)=>{let{unstable_useTransitions:O}=N.useContext(yr),L=vk(),se=wk(m,{relative:g}),W=d.toLowerCase()==="get"?"get":"post",re=typeof m=="string"&&FN.test(m),me=xe=>{if(p&&p(xe),xe.defaultPrevented)return;xe.preventDefault();let Te=xe.nativeEvent.submitter,D=Te?.getAttribute("formmethod")||d,T=()=>L(Te||xe.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:o,state:c,relative:g,preventScrollReset:b,viewTransition:v,unstable_defaultShouldRevalidate:j});O&&t!==!1?N.startTransition(()=>T()):T()};return N.createElement("form",{ref:B,method:W,action:se,onSubmit:a?p:me,...I,"data-discover":!re&&s==="render"?"true":void 0})});mk.displayName="Form";function pk(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HN(s){let e=N.useContext(mc);return ws(e,pk(s)),e}function gk(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:p}={}){let g=ex(),b=Vr(),v=sd(s,{relative:c});return N.useCallback(j=>{if(GT(j,e)){j.preventDefault();let I=t!==void 0?t:Bu(b)===Bu(v),B=()=>g(s,{replace:I,state:a,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m});p?N.startTransition(()=>B()):B()}},[b,g,v,t,a,e,s,o,c,d,m,p])}function xk(s){br(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=N.useRef(fg(s)),t=N.useRef(!1),a=Vr(),o=N.useMemo(()=>KT(a.search,t.current?null:e.current),[a.search]),c=ex(),d=N.useCallback((m,p)=>{const g=fg(typeof m=="function"?m(new URLSearchParams(o)):m);t.current=!0,c("?"+g,p)},[c,o]);return[o,d]}var bk=0,yk=()=>`__${String(++bk)}__`;function vk(){let{router:s}=HN("useSubmit"),{basename:e}=N.useContext(yr),t=OT(),a=s.fetch,o=s.navigate;return N.useCallback(async(c,d={})=>{let{action:m,method:p,encType:g,formData:b,body:v}=XT(c,e);if(d.navigate===!1){let j=d.fetcherKey||yk();await a(j,t,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:v,formMethod:d.method||p,formEncType:d.encType||g,flushSync:d.flushSync})}else await o(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:v,formMethod:d.method||p,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,e,t])}function wk(s,{relative:e}={}){let{basename:t}=N.useContext(yr),a=N.useContext(Ca);ws(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...sd(s||".",{relative:e})},d=Vr();if(s==null){c.search=d.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(b=>b==="")){m.delete("index"),p.filter(v=>v).forEach(v=>m.append("index",v));let b=m.toString();c.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:ii([t,c.pathname])),Bu(c)}function Nk(s,{relative:e}={}){let t=N.useContext(MN);ws(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=HN("useViewTransitionState"),o=sd(s,{relative:e});if(!t.isTransitioning)return!1;let c=ci(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=ci(t.nextLocation.pathname,a)||t.nextLocation.pathname;return gf(o.pathname,d)!=null||gf(o.pathname,c)!=null}var qN=vN();const _k=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jk=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),fw=s=>{const e=jk(s);return e.charAt(0).toUpperCase()+e.slice(1)},GN=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),Ek=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Sk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tk=N.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:d,...m},p)=>N.createElement("svg",{ref:p,...Sk,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:GN("lucide",o),...!c&&!Ek(m)&&{"aria-hidden":"true"},...m},[...d.map(([g,b])=>N.createElement(g,b)),...Array.isArray(c)?c:[c]]));const je=(s,e)=>{const t=N.forwardRef(({className:a,...o},c)=>N.createElement(Tk,{ref:c,iconNode:e,className:GN(`lucide-${_k(fw(s))}`,`lucide-${s}`,a),...o}));return t.displayName=fw(s),t};const kk=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],mw=je("activity",kk);const Ak=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],qo=je("arrow-down-right",Ak);const Ck=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Rk=je("arrow-down",Ck);const Ik=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Dk=je("arrow-left",Ik);const Mk=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ax=je("arrow-right",Mk);const Ok=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],ni=je("arrow-up-right",Ok);const Pk=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Lk=je("arrow-up",Pk);const zk=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Vk=je("book-open",zk);const Uk=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Bk=je("bot",Uk);const $k=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],pw=je("box",$k);const Fk=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],tf=je("brain",Fk);const Hk=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Fo=je("building-2",Hk);const qk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Gk=je("calendar-days",qk);const Kk=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Qk=je("calendar-range",Kk);const Yk=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mg=je("calendar",Yk);const Xk=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ix=je("camera",Xk);const Wk=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sf=je("chart-column",Wk);const Jk=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Zk=je("chart-pie",Jk);const eA=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_a=je("check",eA);const tA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tr=je("chevron-down",tA);const sA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nA=je("chevron-left",sA);const rA=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ju=je("chevron-right",rA);const aA=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],pg=je("chevron-up",aA);const iA=[["path",{d:"m7 20 5-5 5 5",key:"13a0gw"}],["path",{d:"m7 4 5 5 5-5",key:"1kwcof"}]],oA=je("chevrons-down-up",iA);const lA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Eu=je("circle-alert",lA);const cA=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ln=je("circle-check-big",cA);const uA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ox=je("circle-check",uA);const dA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hA=je("circle-question-mark",dA);const fA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],mA=je("circle-user",fA);const pA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xf=je("circle-x",pA);const gA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ks=je("clock",gA);const xA=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],bf=je("coins",xA);const bA=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Xi=je("copy",bA);const yA=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gg=je("credit-card",yA);const vA=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],U0=je("database",vA);const wA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]],NA=je("disc-3",wA);const _A=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yf=je("download",_A);const jA=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EA=je("ellipsis-vertical",jA);const SA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Su=je("external-link",SA);const TA=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vf=je("eye",TA);const kA=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],$u=je("facebook",kA);const AA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xg=je("file-text",AA);const CA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],nf=je("film",CA);const RA=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],IA=je("flask-conical",RA);const DA=[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]],bg=je("folder-kanban",DA);const MA=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],B0=je("folder-plus",MA);const OA=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],gw=je("folder",OA);const PA=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lx=je("funnel",PA);const LA=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ql=je("gift",LA);const zA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],cx=je("globe",zA);const VA=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Tu=je("grip-vertical",VA);const UA=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],xw=je("hard-drive",UA);const BA=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],$A=je("hash",BA);const FA=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],KN=je("headphones",FA);const HA=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],$0=je("heart",HA);const qA=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],yg=je("history",qA);const GA=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],KA=je("image",GA);const QA=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],wf=je("instagram",QA);const YA=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],XA=je("key",YA);const WA=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ji=je("layers",WA);const JA=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],QN=je("layout-dashboard",JA);const ZA=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ku=je("layout-grid",ZA);const e3=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],t3=je("link-2",e3);const s3=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],bw=je("list",s3);const n3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ot=je("loader-circle",n3);const r3=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],a3=je("log-in",r3);const i3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],o3=je("log-out",i3);const l3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],c3=je("menu",l3);const u3=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],d3=je("message-circle",u3);const h3=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],vg=je("mic",h3);const f3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],YN=je("monitor",f3);const m3=[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]],Bh=je("move-right",m3);const p3=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],g3=je("music-2",p3);const x3=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],b3=je("music",x3);const y3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gl=je("package",y3);const v3=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],w3=je("paperclip",v3);const N3=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],_3=je("pause",N3);const j3=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Go=je("pen-line",j3);const E3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],yw=je("pen",E3);const S3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],nc=je("pencil",S3);const T3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ta=je("play",T3);const k3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vn=je("plus",k3);const A3=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],C3=je("radio",A3);const R3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],XN=je("refresh-cw",R3);const I3=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],F0=je("rocket",I3);const D3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],WN=je("rotate-ccw",D3);const M3=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],O3=je("rotate-cw",M3);const P3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zf=je("save",P3);const L3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nd=je("search",L3);const z3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Nf=je("send",z3);const V3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JN=je("settings",V3);const U3=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],si=je("share-2",U3);const B3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wg=je("shield",B3);const $3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],em=je("shopping-bag",$3);const F3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],H3=je("shopping-cart",F3);const q3=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],G3=je("skull",q3);const K3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],bs=je("sparkles",K3);const Q3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_f=je("star",Q3);const Y3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Au=je("store",Y3);const X3=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],vw=je("test-tube",X3);const W3=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],J3=je("text-align-start",W3);const Z3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xs=je("trash-2",Z3);const eC=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],tC=je("trending-down",eC);const sC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ZN=je("trending-up",sC);const nC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],e_=je("triangle-alert",nC);const rC=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],ww=je("twitter",rC);const aC=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],t_=je("type",aC);const iC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jf=je("upload",iC);const oC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lC=je("user",oC);const cC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],wa=je("users",cC);const uC=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],rd=je("video",uC);const dC=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],hC=je("volume-2",dC);const fC=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],rc=je("wallet",fC);const mC=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],s_=je("wand-sparkles",mC);const pC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qs=je("x",pC);const gC=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Fu=je("youtube",gC);const xC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],tm=je("zap",xC),bC=()=>{};var Nw={};const n_=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},yC=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[t++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[t++],d=s[t++],m=s[t++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const c=s[t++],d=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},r_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const c=s[o],d=o+1<s.length,m=d?s[o+1]:0,p=o+2<s.length,g=p?s[o+2]:0,b=c>>2,v=(c&3)<<4|m>>4;let j=(m&15)<<2|g>>6,I=g&63;p||(I=64,d||(j=64)),a.push(t[b],t[v],t[j],t[I])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(n_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):yC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const c=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const g=o<s.length?t[s.charAt(o)]:64;++o;const v=o<s.length?t[s.charAt(o)]:64;if(++o,c==null||m==null||g==null||v==null)throw new vC;const j=c<<2|m>>4;if(a.push(j),g!==64){const I=m<<4&240|g>>2;if(a.push(I),v!==64){const B=g<<6&192|v;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class vC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wC=function(s){const e=n_(s);return r_.encodeByteArray(e,!0)},Ef=function(s){return wC(s).replace(/\./g,"")},a_=function(s){try{return r_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _C=()=>NC().__FIREBASE_DEFAULTS__,jC=()=>{if(typeof process>"u"||typeof Nw>"u")return;const s=Nw.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},EC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&a_(s[1]);return e&&JSON.parse(e)},sm=()=>{try{return bC()||_C()||jC()||EC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},i_=s=>sm()?.emulatorHosts?.[s],ux=s=>{const e=i_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},o_=()=>sm()?.config,l_=s=>sm()?.[`_${s}`];class SC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}function Ra(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nm(s){return(await fetch(s,{credentials:"include"})).ok}function c_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Ef(JSON.stringify(t)),Ef(JSON.stringify(d)),""].join(".")}const Cu={};function TC(){const s={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?s.emulator.push(e):s.prod.push(e);return s}function kC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let _w=!1;function rm(s,e){if(typeof window>"u"||typeof document>"u"||!Ra(window.location.host)||Cu[s]===e||Cu[s]||_w)return;Cu[s]=e;function t(j){return`__firebase__banner__${j}`}const a="__firebase__banner",c=TC().prod.length>0;function d(){const j=document.getElementById(a);j&&j.remove()}function m(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function p(j,I){j.setAttribute("width","24"),j.setAttribute("id",I),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function g(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{_w=!0,d()},j}function b(j,I){j.setAttribute("id",I),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function v(){const j=kC(a),I=t("text"),B=document.getElementById(I)||document.createElement("span"),O=t("learnmore"),L=document.getElementById(O)||document.createElement("a"),se=t("preprendIcon"),W=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const re=j.element;m(re),b(L,O);const me=g();p(W,se),re.append(W,B,L,me),document.body.appendChild(re)}c?(B.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function CC(){const s=sm()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function DC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MC(){const s=Cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function OC(){return!CC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PC(){try{return typeof indexedDB=="object"}catch{return!1}}function LC(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const zC="FirebaseError";class ta extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=zC,Object.setPrototypeOf(this,ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ad.prototype.create)}}class ad{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?VC(c,a):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new ta(o,m,a)}}function VC(s,e){return s.replace(UC,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const UC=/\{\$([^}]+)}/g;function BC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function el(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const c=s[o],d=e[o];if(jw(c)&&jw(d)){if(!el(c,d))return!1}else if(c!==d)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function jw(s){return s!==null&&typeof s=="object"}function id(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function $C(s,e){const t=new FC(s,e);return t.subscribe.bind(t)}class FC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");HC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=H0),o.error===void 0&&(o.error=H0),o.complete===void 0&&(o.complete=H0);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function H0(){}function as(s){return s&&s._delegate?s._delegate:s}class ui{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ho="[DEFAULT]";class qC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new SC;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KC(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&d.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:GC(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GC(s){return s===Ho?void 0:s}function KC(s){return s.instantiationMode==="EAGER"}class QC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var At;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(At||(At={}));const YC={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},XC=At.INFO,WC={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},JC=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=WC[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dx{constructor(e){this.name=e,this._logLevel=XC,this._logHandler=JC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const ZC=(s,e)=>e.some(t=>s instanceof t);let Ew,Sw;function eR(){return Ew||(Ew=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tR(){return Sw||(Sw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u_=new WeakMap,Ng=new WeakMap,d_=new WeakMap,q0=new WeakMap,hx=new WeakMap;function sR(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{t(Zi(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&u_.set(t,s)}).catch(()=>{}),hx.set(e,s),e}function nR(s){if(Ng.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});Ng.set(s,e)}let _g={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Ng.get(s);if(e==="objectStoreNames")return s.objectStoreNames||d_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Zi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function rR(s){_g=s(_g)}function aR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(G0(this),e,...t);return d_.set(a,e.sort?e.sort():[e]),Zi(a)}:tR().includes(s)?function(...e){return s.apply(G0(this),e),Zi(u_.get(this))}:function(...e){return Zi(s.apply(G0(this),e))}}function iR(s){return typeof s=="function"?aR(s):(s instanceof IDBTransaction&&nR(s),ZC(s,eR())?new Proxy(s,_g):s)}function Zi(s){if(s instanceof IDBRequest)return sR(s);if(q0.has(s))return q0.get(s);const e=iR(s);return e!==s&&(q0.set(s,e),hx.set(e,s)),e}const G0=s=>hx.get(s);function oR(s,e,{blocked:t,upgrade:a,blocking:o,terminated:c}={}){const d=indexedDB.open(s,e),m=Zi(d);return a&&d.addEventListener("upgradeneeded",p=>{a(Zi(d.result),p.oldVersion,p.newVersion,Zi(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const lR=["get","getKey","getAll","getAllKeys","count"],cR=["put","add","delete","clear"],K0=new Map;function Tw(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(K0.get(e))return K0.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=cR.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||lR.includes(t)))return;const c=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),o&&p.done]))[0]};return K0.set(e,c),c}rR(s=>({...s,get:(e,t,a)=>Tw(e,t)||s.get(e,t,a),has:(e,t)=>!!Tw(e,t)||s.has(e,t)}));class uR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dR(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function dR(s){return s.getComponent()?.type==="VERSION"}const jg="@firebase/app",kw="0.14.6";const di=new dx("@firebase/app"),hR="@firebase/app-compat",fR="@firebase/analytics-compat",mR="@firebase/analytics",pR="@firebase/app-check-compat",gR="@firebase/app-check",xR="@firebase/auth",bR="@firebase/auth-compat",yR="@firebase/database",vR="@firebase/data-connect",wR="@firebase/database-compat",NR="@firebase/functions",_R="@firebase/functions-compat",jR="@firebase/installations",ER="@firebase/installations-compat",SR="@firebase/messaging",TR="@firebase/messaging-compat",kR="@firebase/performance",AR="@firebase/performance-compat",CR="@firebase/remote-config",RR="@firebase/remote-config-compat",IR="@firebase/storage",DR="@firebase/storage-compat",MR="@firebase/firestore",OR="@firebase/ai",PR="@firebase/firestore-compat",LR="firebase",zR="12.6.0";const Eg="[DEFAULT]",VR={[jg]:"fire-core",[hR]:"fire-core-compat",[mR]:"fire-analytics",[fR]:"fire-analytics-compat",[gR]:"fire-app-check",[pR]:"fire-app-check-compat",[xR]:"fire-auth",[bR]:"fire-auth-compat",[yR]:"fire-rtdb",[vR]:"fire-data-connect",[wR]:"fire-rtdb-compat",[NR]:"fire-fn",[_R]:"fire-fn-compat",[jR]:"fire-iid",[ER]:"fire-iid-compat",[SR]:"fire-fcm",[TR]:"fire-fcm-compat",[kR]:"fire-perf",[AR]:"fire-perf-compat",[CR]:"fire-rc",[RR]:"fire-rc-compat",[IR]:"fire-gcs",[DR]:"fire-gcs-compat",[MR]:"fire-fst",[PR]:"fire-fst-compat",[OR]:"fire-vertex","fire-js":"fire-js",[LR]:"fire-js-all"};const Sf=new Map,UR=new Map,Sg=new Map;function Aw(s,e){try{s.container.addComponent(e)}catch(t){di.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function no(s){const e=s.name;if(Sg.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Sg.set(e,s);for(const t of Sf.values())Aw(t,s);for(const t of UR.values())Aw(t,s);return!0}function od(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function mr(s){return s==null?!1:s.settings!==void 0}const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new ad("app","Firebase",BR);class $R{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}const il=zR;function h_(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:Eg,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw eo.create("bad-app-name",{appName:String(o)});if(t||(t=o_()),!t)throw eo.create("no-options");const c=Sf.get(o);if(c){if(el(t,c.options)&&el(a,c.config))return c;throw eo.create("duplicate-app",{appName:o})}const d=new QC(o);for(const p of Sg.values())d.addComponent(p);const m=new $R(t,a,d);return Sf.set(o,m),m}function am(s=Eg){const e=Sf.get(s);if(!e&&s===Eg&&o_())return h_();if(!e)throw eo.create("no-app",{appName:s});return e}function zr(s,e,t){let a=VR[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(d.join(" "));return}no(new ui(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const FR="firebase-heartbeat-database",HR=1,Hu="firebase-heartbeat-store";let Q0=null;function f_(){return Q0||(Q0=oR(FR,HR,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Hu)}catch(t){console.warn(t)}}}}).catch(s=>{throw eo.create("idb-open",{originalErrorMessage:s.message})})),Q0}async function qR(s){try{const t=(await f_()).transaction(Hu),a=await t.objectStore(Hu).get(m_(s));return await t.done,a}catch(e){if(e instanceof ta)di.warn(e.message);else{const t=eo.create("idb-get",{originalErrorMessage:e?.message});di.warn(t.message)}}}async function Cw(s,e){try{const a=(await f_()).transaction(Hu,"readwrite");await a.objectStore(Hu).put(e,m_(s)),await a.done}catch(t){if(t instanceof ta)di.warn(t.message);else{const a=eo.create("idb-set",{originalErrorMessage:t?.message});di.warn(a.message)}}}function m_(s){return`${s.name}!${s.options.appId}`}const GR=1024,KR=30;class QR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XR(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Rw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>KR){const o=WR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){di.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Rw(),{heartbeatsToSend:t,unsentEntries:a}=YR(this._heartbeatsCache.heartbeats),o=Ef(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return di.warn(e),""}}}function Rw(){return new Date().toISOString().substring(0,10)}function YR(s,e=GR){const t=[];let a=s.slice();for(const o of s){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Iw(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Iw(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class XR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PC()?LC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Iw(s){return Ef(JSON.stringify({version:2,heartbeats:s})).length}function WR(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}function JR(s){no(new ui("platform-logger",e=>new uR(e),"PRIVATE")),no(new ui("heartbeat",e=>new QR(e),"PRIVATE")),zr(jg,kw,s),zr(jg,kw,"esm2020"),zr("fire-js","")}JR("");var ZR="firebase",eI="12.7.0";zr(ZR,eI,"app");function p_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tI=p_,g_=new ad("auth","Firebase",p_());const Tf=new dx("@firebase/auth");function sI(s,...e){Tf.logLevel<=At.WARN&&Tf.warn(`Auth (${il}): ${s}`,...e)}function rf(s,...e){Tf.logLevel<=At.ERROR&&Tf.error(`Auth (${il}): ${s}`,...e)}function ka(s,...e){throw mx(s,...e)}function Xr(s,...e){return mx(s,...e)}function fx(s,e,t){const a={...tI(),[e]:t};return new ad("auth","Firebase",a).create(e,{appName:s.name})}function Wo(s){return fx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nI(s,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&ka(s,"argument-error"),fx(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mx(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return g_.create(s,...e)}function ct(s,e,...t){if(!s)throw mx(e,...t)}function ri(s){const e="INTERNAL ASSERTION FAILED: "+s;throw rf(e),new Error(e)}function hi(s,e){s||ri(e)}function Tg(){return typeof self<"u"&&self.location?.href||""}function rI(){return Dw()==="http:"||Dw()==="https:"}function Dw(){return typeof self<"u"&&self.location?.protocol||null}function aI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rI()||IC()||"connection"in navigator)?navigator.onLine:!0}function iI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class ld{constructor(e,t){this.shortDelay=e,this.longDelay=t,hi(t>e,"Short delay should be less than long delay!"),this.isMobile=AC()||DC()}get(){return aI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function px(s,e){hi(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class x_{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const lI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cI=new ld(3e4,6e4);function gx(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function gc(s,e,t,a,o={}){return b_(s,o,async()=>{let c={},d={};a&&(e==="GET"?d=a:c={body:JSON.stringify(a)});const m=id({key:s.config.apiKey,...d}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:p,...c};return RC()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&Ra(s.emulatorConfig.host)&&(g.credentials="include"),x_.fetch()(await y_(s,s.config.apiHost,t,m),g)})}async function b_(s,e,t){s._canInitEmulator=!1;const a={...oI,...e};try{const o=new dI(s),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw $h(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw $h(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw $h(s,"user-disabled",d);const b=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw fx(s,b,g);ka(s,b)}}catch(o){if(o instanceof ta)throw o;ka(s,"network-request-failed",{message:String(o)})}}async function uI(s,e,t,a,o={}){const c=await gc(s,e,t,a,o);return"mfaPendingCredential"in c&&ka(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function y_(s,e,t,a){const o=`${e}${t}?${a}`,c=s,d=c.config.emulator?px(s.config,o):`${s.config.apiScheme}://${o}`;return lI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class dI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Xr(this.auth,"network-request-failed")),cI.get())})}}function $h(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Xr(s,e,a);return o.customData._tokenResponse=t,o}async function hI(s,e){return gc(s,"POST","/v1/accounts:delete",e)}async function kf(s,e){return gc(s,"POST","/v1/accounts:lookup",e)}function Ru(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fI(s,e=!1){const t=as(s),a=await t.getIdToken(e),o=xx(a);ct(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:a,authTime:Ru(Y0(o.auth_time)),issuedAtTime:Ru(Y0(o.iat)),expirationTime:Ru(Y0(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Y0(s){return Number(s)*1e3}function xx(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{const o=a_(t);return o?JSON.parse(o):(rf("Failed to decode base64 JWT payload"),null)}catch(o){return rf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Mw(s){const e=xx(s);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qu(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ta&&mI(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function mI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class pI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class kg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Af(s){const e=s.auth,t=await s.getIdToken(),a=await qu(s,kf(e,{idToken:t}));ct(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?v_(o.providerUserInfo):[],d=xI(s.providerData,c),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!d?.length,g=m?p:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new kg(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(s,b)}async function gI(s){const e=as(s);await Af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xI(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function v_(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function bI(s,e){const t=await b_(s,{},async()=>{const a=id({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,d=await y_(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:a};return s.emulatorConfig&&Ra(s.emulatorConfig.host)&&(p.credentials="include"),x_.fetch()(d,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yI(s,e){return gc(s,"POST","/v2/accounts:revokeToken",gx(s,e))}class Zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const t=Mw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:c}=await bI(e,t);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:c}=t,d=new Zl;return a&&(ct(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(ct(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(ct(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zl,this.toJSON())}_performRefresh(){return ri("not implemented")}}function Fi(s,e){ct(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Yr{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new pI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new kg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await qu(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fI(this,e)}reload(){return gI(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Af(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mr(this.auth.app))return Promise.reject(Wo(this.auth));const e=await this.getIdToken();return await qu(this,hI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:v,emailVerified:j,isAnonymous:I,providerData:B,stsTokenManager:O}=t;ct(v&&O,e,"internal-error");const L=Zl.fromJSON(this.name,O);ct(typeof v=="string",e,"internal-error"),Fi(a,e.name),Fi(o,e.name),ct(typeof j=="boolean",e,"internal-error"),ct(typeof I=="boolean",e,"internal-error"),Fi(c,e.name),Fi(d,e.name),Fi(m,e.name),Fi(p,e.name),Fi(g,e.name),Fi(b,e.name);const se=new Yr({uid:v,auth:e,email:o,emailVerified:j,displayName:a,isAnonymous:I,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:L,createdAt:g,lastLoginAt:b});return B&&Array.isArray(B)&&(se.providerData=B.map(W=>({...W}))),p&&(se._redirectEventId=p),se}static async _fromIdTokenResponse(e,t,a=!1){const o=new Zl;o.updateFromServerResponse(t);const c=new Yr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Af(c),c}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];ct(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?v_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new Zl;m.updateFromIdToken(a);const p=new Yr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new kg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,g),p}}const Ow=new Map;function ai(s){hi(s instanceof Function,"Expected a class definition");let e=Ow.get(s);return e?(hi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Ow.set(s,e),e)}class w_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}w_.type="NONE";const Pw=w_;function af(s,e,t){return`firebase:${s}:${e}:${t}`}class ec{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=af(this.userKey,o.apiKey,c),this.fullPersistenceKey=af("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kf(this.auth,{idToken:e}).catch(()=>{});return t?Yr._fromGetAccountInfoResponse(this.auth,t,e):null}return Yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new ec(ai(Pw),e,a);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||ai(Pw);const d=af(a,e.config.apiKey,e.name);let m=null;for(const g of t)try{const b=await g._get(d);if(b){let v;if(typeof b=="string"){const j=await kf(e,{idToken:b}).catch(()=>{});if(!j)break;v=await Yr._fromGetAccountInfoResponse(e,j,b)}else v=Yr._fromJSON(e,b);g!==c&&(m=v),c=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new ec(c,e,a):(c=p[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new ec(c,e,a))}}function Lw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T_(e))return"Blackberry";if(k_(e))return"Webos";if(__(e))return"Safari";if((e.includes("chrome/")||j_(e))&&!e.includes("edge/"))return"Chrome";if(S_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if(a?.length===2)return a[1]}return"Other"}function N_(s=Cn()){return/firefox\//i.test(s)}function __(s=Cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j_(s=Cn()){return/crios\//i.test(s)}function E_(s=Cn()){return/iemobile/i.test(s)}function S_(s=Cn()){return/android/i.test(s)}function T_(s=Cn()){return/blackberry/i.test(s)}function k_(s=Cn()){return/webos/i.test(s)}function bx(s=Cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function vI(s=Cn()){return bx(s)&&!!window.navigator?.standalone}function wI(){return MC()&&document.documentMode===10}function A_(s=Cn()){return bx(s)||S_(s)||k_(s)||T_(s)||/windows phone/i.test(s)||E_(s)}function C_(s,e=[]){let t;switch(s){case"Browser":t=Lw(Cn());break;case"Worker":t=`${Lw(Cn())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${il}/${a}`}class NI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=c=>new Promise((d,m)=>{try{const p=e(c);d(p)}catch(p){m(p)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function _I(s,e={}){return gc(s,"GET","/v2/passwordPolicy",gx(s,e))}const jI=6;class EI{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class SI{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zw(this),this.idTokenSubscription=new zw(this),this.beforeStateQueue=new NI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ec.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kf(this,{idToken:e}),a=await Yr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Af(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mr(this.app))return Promise.reject(Wo(this));const t=e?as(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mr(this.app)?Promise.reject(Wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mr(this.app)?Promise.reject(Wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _I(this),t=new EI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ad("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await yI(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ai(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await ec.create(this,[ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,o);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function im(s){return as(s)}class zw{constructor(e){this.auth=e,this.observer=null,this.addObserver=$C(t=>this.observer=t)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TI(s){yx=s}function kI(s){return yx.loadJS(s)}function AI(){return yx.gapiScript}function CI(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function RI(s,e){const t=od(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(el(c,e??{}))return o;ka(o,"already-initialized")}return t.initialize({options:e})}function II(s,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(ai);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function DI(s,e,t){const a=im(s);ct(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,c=R_(e),{host:d,port:m}=MI(e),p=m===null?"":`:${m}`,g={url:`${c}//${d}${p}/`},b=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){ct(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ct(el(g,a.config.emulator)&&el(b,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=b,a.settings.appVerificationDisabledForTesting=!0,Ra(d)?(nm(`${c}//${d}${p}`),rm("Auth",!0)):OI()}function R_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function MI(s){const e=R_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:Vw(a.substr(c.length+1))}}else{const[c,d]=a.split(":");return{host:c,port:Vw(d)}}}function Vw(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function OI(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class I_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,t){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}async function tc(s,e){return uI(s,"POST","/v1/accounts:signInWithIdp",gx(s,e))}const PI="http://localhost";class tl extends I_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new tl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ka("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...c}=t;if(!a||!o)return null;const d=new tl(a,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return tc(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,tc(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tc(e,t)}buildRequest(){const e={requestUri:PI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=id(t)}return e}}class vx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cd extends vx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qi extends cd{constructor(){super("facebook.com")}static credential(e){return tl._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";class ya extends cd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return tl._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return ya.credential(t,a)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";class Gi extends cd{constructor(){super("github.com")}static credential(e){return tl._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gi.credential(e.oauthAccessToken)}catch{return null}}}Gi.GITHUB_SIGN_IN_METHOD="github.com";Gi.PROVIDER_ID="github.com";class Ki extends cd{constructor(){super("twitter.com")}static credential(e,t){return tl._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Ki.credential(t,a)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";class ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const c=await Yr._fromIdTokenResponse(e,a,o),d=Uw(a);return new ac({user:c,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=Uw(a);return new ac({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function Uw(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Cf extends ta{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new Cf(e,t,a,o)}}function D_(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(s,c,e,a):c})}async function LI(s,e,t=!1){const a=await qu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return ac._forOperation(s,"link",a)}async function zI(s,e,t=!1){const{auth:a}=s;if(mr(a.app))return Promise.reject(Wo(a));const o="reauthenticate";try{const c=await qu(s,D_(a,o,e,s),t);ct(c.idToken,a,"internal-error");const d=xx(c.idToken);ct(d,a,"internal-error");const{sub:m}=d;return ct(s.uid===m,a,"user-mismatch"),ac._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ka(a,"user-mismatch"),c}}async function VI(s,e,t=!1){if(mr(s.app))return Promise.reject(Wo(s));const a="signIn",o=await D_(s,a,e),c=await ac._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(c.user),c}function UI(s,e,t,a){return as(s).onIdTokenChanged(e,t,a)}function BI(s,e,t){return as(s).beforeAuthStateChanged(e,t)}function Ia(s,e,t,a){return as(s).onAuthStateChanged(e,t,a)}function $I(s){return as(s).signOut()}const Rf="__sak";class M_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const FI=1e3,HI=10;class O_ extends M_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},c=this.storage.getItem(a);wI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HI):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},FI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}O_.type="LOCAL";const qI=O_;class P_ extends M_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}P_.type="SESSION";const L_=P_;function GI(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class om{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new om(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const m=Array.from(d).map(async g=>g(t.origin,c)),p=await GI(m);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}om.receivers=[];function wx(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}class KI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,p)=>{const g=wx("",20);o.port1.start();const b=setTimeout(()=>{p(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(v){const j=v;if(j.data.eventId===g)switch(j.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(j.data.response);break;default:clearTimeout(b),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ja(){return window}function QI(s){ja().location.href=s}function z_(){return typeof ja().WorkerGlobalScope<"u"&&typeof ja().importScripts=="function"}async function YI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XI(){return navigator?.serviceWorker?.controller||null}function WI(){return z_()?self:null}const V_="firebaseLocalStorageDb",JI=1,If="firebaseLocalStorage",U_="fbase_key";class ud{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lm(s,e){return s.transaction([If],e?"readwrite":"readonly").objectStore(If)}function ZI(){const s=indexedDB.deleteDatabase(V_);return new ud(s).toPromise()}function Ag(){const s=indexedDB.open(V_,JI);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(If,{keyPath:U_})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(If)?e(a):(a.close(),await ZI(),e(await Ag()))})})}async function Bw(s,e,t){const a=lm(s,!0).put({[U_]:e,value:t});return new ud(a).toPromise()}async function e6(s,e){const t=lm(s,!1).get(e),a=await new ud(t).toPromise();return a===void 0?null:a.value}function $w(s,e){const t=lm(s,!0).delete(e);return new ud(t).toPromise()}const t6=800,s6=3;class B_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ag(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>s6)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=om._getInstance(WI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YI(),!this.activeServiceWorker)return;this.sender=new KI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ag();return await Bw(e,Rf,"1"),await $w(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Bw(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>e6(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$w(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=lm(o,!1).getAll();return new ud(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B_.type="LOCAL";const n6=B_;new ld(3e4,6e4);function $_(s,e){return e?ai(e):(ct(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Nx extends I_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function r6(s){return VI(s.auth,new Nx(s),s.bypassAuthState)}function a6(s){const{auth:e,user:t}=s;return ct(t,e,"internal-error"),zI(t,new Nx(s),s.bypassAuthState)}async function i6(s){const{auth:e,user:t}=s;return ct(t,e,"internal-error"),LI(t,new Nx(s),s.bypassAuthState)}class F_{constructor(e,t,a,o,c=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r6;case"linkViaPopup":case"linkViaRedirect":return i6;case"reauthViaPopup":case"reauthViaRedirect":return a6;default:ka(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const o6=new ld(2e3,1e4);async function H_(s,e,t){if(mr(s.app))return Promise.reject(Xr(s,"operation-not-supported-in-this-environment"));const a=im(s);nI(s,e,vx);const o=$_(a,t);return new Ko(a,"signInViaPopup",e,o).executeNotNull()}class Ko extends F_{constructor(e,t,a,o,c){super(e,t,o,c),this.provider=a,this.authWindow=null,this.pollId=null,Ko.currentPopupAction&&Ko.currentPopupAction.cancel(),Ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=wx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,o6.get())};e()}}Ko.currentPopupAction=null;const l6="pendingRedirect",of=new Map;class c6 extends F_{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const a=await u6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u6(s,e){const t=f6(e),a=h6(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function d6(s,e){of.set(s._key(),e)}function h6(s){return ai(s._redirectPersistence)}function f6(s){return af(l6,s.config.apiKey,s.name)}async function m6(s,e,t=!1){if(mr(s.app))return Promise.reject(Wo(s));const a=im(s),o=$_(a,e),d=await new c6(a,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const p6=600*1e3;class g6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!x6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!q_(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Xr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=p6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fw(e))}saveEventToCache(e){this.cachedEventUids.add(Fw(e)),this.lastProcessedEventTime=Date.now()}}function Fw(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function q_({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function x6(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q_(s);default:return!1}}async function b6(s,e={}){return gc(s,"GET","/v1/projects",e)}const y6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v6=/^https?/;async function w6(s){if(s.config.emulator)return;const{authorizedDomains:e}=await b6(s);for(const t of e)try{if(N6(t))return}catch{}ka(s,"unauthorized-domain")}function N6(s){const e=Tg(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!v6.test(t))return!1;if(y6.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const _6=new ld(3e4,6e4);function Hw(){const s=ja().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function j6(s){return new Promise((e,t)=>{function a(){Hw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hw(),t(Xr(s,"network-request-failed"))},timeout:_6.get()})}if(ja().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ja().gapi?.load)a();else{const o=CI("iframefcb");return ja()[o]=()=>{gapi.load?a():t(Xr(s,"network-request-failed"))},kI(`${AI()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw lf=null,e})}let lf=null;function E6(s){return lf=lf||j6(s),lf}const S6=new ld(5e3,15e3),T6="__/auth/iframe",k6="emulator/auth/iframe",A6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R6(s){const e=s.config;ct(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?px(e,k6):`https://${s.config.authDomain}/${T6}`,a={apiKey:e.apiKey,appName:s.name,v:il},o=C6.get(s.config.apiHost);o&&(a.eid=o);const c=s._getFrameworks();return c.length&&(a.fw=c.join(",")),`${t}?${id(a).slice(1)}`}async function I6(s){const e=await E6(s),t=ja().gapi;return ct(t,s,"internal-error"),e.open({where:document.body,url:R6(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A6,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const d=Xr(s,"network-request-failed"),m=ja().setTimeout(()=>{c(d)},S6.get());function p(){ja().clearTimeout(m),o(a)}a.ping(p).then(p,()=>{c(d)})}))}const D6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M6=500,O6=600,P6="_blank",L6="http://localhost";class qw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z6(s,e,t,a=M6,o=O6){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const p={...D6,width:a.toString(),height:o.toString(),top:c,left:d},g=Cn().toLowerCase();t&&(m=j_(g)?P6:t),N_(g)&&(e=e||L6,p.scrollbars="yes");const b=Object.entries(p).reduce((j,[I,B])=>`${j}${I}=${B},`,"");if(vI(g)&&m!=="_self")return V6(e||"",m),new qw(null);const v=window.open(e||"",m,b);ct(v,s,"popup-blocked");try{v.focus()}catch{}return new qw(v)}function V6(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}const U6="__/auth/handler",B6="emulator/auth/handler",$6=encodeURIComponent("fac");async function Gw(s,e,t,a,o,c){ct(s.config.authDomain,s,"auth-domain-config-required"),ct(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:il,eventId:o};if(e instanceof vx){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",BC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,v]of Object.entries({}))d[b]=v}if(e instanceof cd){const b=e.getScopes().filter(v=>v!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const p=await s._getAppCheckToken(),g=p?`#${$6}=${encodeURIComponent(p)}`:"";return`${F6(s)}?${id(m).slice(1)}${g}`}function F6({config:s}){return s.emulator?px(s,B6):`https://${s.authDomain}/${U6}`}const X0="webStorageSupport";class H6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L_,this._completeRedirectFn=m6,this._overrideRedirectResult=d6}async _openPopup(e,t,a,o){hi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Gw(e,t,a,Tg(),o);return z6(e,c,wx())}async _openRedirect(e,t,a,o){await this._originValidation(e);const c=await Gw(e,t,a,Tg(),o);return QI(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(hi(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await I6(e),a=new g6(e);return t.register("authEvent",o=>(ct(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(X0,{type:X0},o=>{const c=o?.[0]?.[X0];c!==void 0&&t(!!c),ka(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=w6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return A_()||__()||bx()}}const q6=H6;var Kw="@firebase/auth",Qw="1.12.0";class G6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function K6(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q6(s){no(new ui("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=a.options;ct(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C_(s)},g=new SI(a,o,c,p);return II(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),no(new ui("auth-internal",e=>{const t=im(e.getProvider("auth").getImmediate());return(a=>new G6(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zr(Kw,Qw,K6(s)),zr(Kw,Qw,"esm2020")}const Y6=300,X6=l_("authIdTokenMaxAge")||Y6;let Yw=null;const W6=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>X6)return;const o=t?.token;Yw!==o&&(Yw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function J6(s=am()){const e=od(s,"auth");if(e.isInitialized())return e.getImmediate();const t=RI(s,{popupRedirectResolver:q6,persistence:[n6,qI,L_]}),a=l_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const d=W6(c.toString());BI(t,d,()=>d(t.currentUser)),UI(t,m=>d(m))}}const o=i_("auth");return o&&DI(t,`http://${o}`),t}function Z6(){return document.getElementsByTagName("head")?.[0]??document}TI({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const c=Xr("internal-error");c.customData=o,t(c)},a.type="text/javascript",a.charset="UTF-8",Z6().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q6("Browser");var Xw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var to,G_;(function(){var s;function e(D,T){function A(){}A.prototype=T.prototype,D.F=T.prototype,D.prototype=new A,D.prototype.constructor=D,D.D=function(z,$,q){for(var k=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)k[ue-2]=arguments[ue];return T.prototype[$].apply(z,k)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,T,A){A||(A=0);const z=Array(16);if(typeof T=="string")for(var $=0;$<16;++$)z[$]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for($=0;$<16;++$)z[$]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=D.g[0],A=D.g[1],$=D.g[2];let q=D.g[3],k;k=T+(q^A&($^q))+z[0]+3614090360&4294967295,T=A+(k<<7&4294967295|k>>>25),k=q+($^T&(A^$))+z[1]+3905402710&4294967295,q=T+(k<<12&4294967295|k>>>20),k=$+(A^q&(T^A))+z[2]+606105819&4294967295,$=q+(k<<17&4294967295|k>>>15),k=A+(T^$&(q^T))+z[3]+3250441966&4294967295,A=$+(k<<22&4294967295|k>>>10),k=T+(q^A&($^q))+z[4]+4118548399&4294967295,T=A+(k<<7&4294967295|k>>>25),k=q+($^T&(A^$))+z[5]+1200080426&4294967295,q=T+(k<<12&4294967295|k>>>20),k=$+(A^q&(T^A))+z[6]+2821735955&4294967295,$=q+(k<<17&4294967295|k>>>15),k=A+(T^$&(q^T))+z[7]+4249261313&4294967295,A=$+(k<<22&4294967295|k>>>10),k=T+(q^A&($^q))+z[8]+1770035416&4294967295,T=A+(k<<7&4294967295|k>>>25),k=q+($^T&(A^$))+z[9]+2336552879&4294967295,q=T+(k<<12&4294967295|k>>>20),k=$+(A^q&(T^A))+z[10]+4294925233&4294967295,$=q+(k<<17&4294967295|k>>>15),k=A+(T^$&(q^T))+z[11]+2304563134&4294967295,A=$+(k<<22&4294967295|k>>>10),k=T+(q^A&($^q))+z[12]+1804603682&4294967295,T=A+(k<<7&4294967295|k>>>25),k=q+($^T&(A^$))+z[13]+4254626195&4294967295,q=T+(k<<12&4294967295|k>>>20),k=$+(A^q&(T^A))+z[14]+2792965006&4294967295,$=q+(k<<17&4294967295|k>>>15),k=A+(T^$&(q^T))+z[15]+1236535329&4294967295,A=$+(k<<22&4294967295|k>>>10),k=T+($^q&(A^$))+z[1]+4129170786&4294967295,T=A+(k<<5&4294967295|k>>>27),k=q+(A^$&(T^A))+z[6]+3225465664&4294967295,q=T+(k<<9&4294967295|k>>>23),k=$+(T^A&(q^T))+z[11]+643717713&4294967295,$=q+(k<<14&4294967295|k>>>18),k=A+(q^T&($^q))+z[0]+3921069994&4294967295,A=$+(k<<20&4294967295|k>>>12),k=T+($^q&(A^$))+z[5]+3593408605&4294967295,T=A+(k<<5&4294967295|k>>>27),k=q+(A^$&(T^A))+z[10]+38016083&4294967295,q=T+(k<<9&4294967295|k>>>23),k=$+(T^A&(q^T))+z[15]+3634488961&4294967295,$=q+(k<<14&4294967295|k>>>18),k=A+(q^T&($^q))+z[4]+3889429448&4294967295,A=$+(k<<20&4294967295|k>>>12),k=T+($^q&(A^$))+z[9]+568446438&4294967295,T=A+(k<<5&4294967295|k>>>27),k=q+(A^$&(T^A))+z[14]+3275163606&4294967295,q=T+(k<<9&4294967295|k>>>23),k=$+(T^A&(q^T))+z[3]+4107603335&4294967295,$=q+(k<<14&4294967295|k>>>18),k=A+(q^T&($^q))+z[8]+1163531501&4294967295,A=$+(k<<20&4294967295|k>>>12),k=T+($^q&(A^$))+z[13]+2850285829&4294967295,T=A+(k<<5&4294967295|k>>>27),k=q+(A^$&(T^A))+z[2]+4243563512&4294967295,q=T+(k<<9&4294967295|k>>>23),k=$+(T^A&(q^T))+z[7]+1735328473&4294967295,$=q+(k<<14&4294967295|k>>>18),k=A+(q^T&($^q))+z[12]+2368359562&4294967295,A=$+(k<<20&4294967295|k>>>12),k=T+(A^$^q)+z[5]+4294588738&4294967295,T=A+(k<<4&4294967295|k>>>28),k=q+(T^A^$)+z[8]+2272392833&4294967295,q=T+(k<<11&4294967295|k>>>21),k=$+(q^T^A)+z[11]+1839030562&4294967295,$=q+(k<<16&4294967295|k>>>16),k=A+($^q^T)+z[14]+4259657740&4294967295,A=$+(k<<23&4294967295|k>>>9),k=T+(A^$^q)+z[1]+2763975236&4294967295,T=A+(k<<4&4294967295|k>>>28),k=q+(T^A^$)+z[4]+1272893353&4294967295,q=T+(k<<11&4294967295|k>>>21),k=$+(q^T^A)+z[7]+4139469664&4294967295,$=q+(k<<16&4294967295|k>>>16),k=A+($^q^T)+z[10]+3200236656&4294967295,A=$+(k<<23&4294967295|k>>>9),k=T+(A^$^q)+z[13]+681279174&4294967295,T=A+(k<<4&4294967295|k>>>28),k=q+(T^A^$)+z[0]+3936430074&4294967295,q=T+(k<<11&4294967295|k>>>21),k=$+(q^T^A)+z[3]+3572445317&4294967295,$=q+(k<<16&4294967295|k>>>16),k=A+($^q^T)+z[6]+76029189&4294967295,A=$+(k<<23&4294967295|k>>>9),k=T+(A^$^q)+z[9]+3654602809&4294967295,T=A+(k<<4&4294967295|k>>>28),k=q+(T^A^$)+z[12]+3873151461&4294967295,q=T+(k<<11&4294967295|k>>>21),k=$+(q^T^A)+z[15]+530742520&4294967295,$=q+(k<<16&4294967295|k>>>16),k=A+($^q^T)+z[2]+3299628645&4294967295,A=$+(k<<23&4294967295|k>>>9),k=T+($^(A|~q))+z[0]+4096336452&4294967295,T=A+(k<<6&4294967295|k>>>26),k=q+(A^(T|~$))+z[7]+1126891415&4294967295,q=T+(k<<10&4294967295|k>>>22),k=$+(T^(q|~A))+z[14]+2878612391&4294967295,$=q+(k<<15&4294967295|k>>>17),k=A+(q^($|~T))+z[5]+4237533241&4294967295,A=$+(k<<21&4294967295|k>>>11),k=T+($^(A|~q))+z[12]+1700485571&4294967295,T=A+(k<<6&4294967295|k>>>26),k=q+(A^(T|~$))+z[3]+2399980690&4294967295,q=T+(k<<10&4294967295|k>>>22),k=$+(T^(q|~A))+z[10]+4293915773&4294967295,$=q+(k<<15&4294967295|k>>>17),k=A+(q^($|~T))+z[1]+2240044497&4294967295,A=$+(k<<21&4294967295|k>>>11),k=T+($^(A|~q))+z[8]+1873313359&4294967295,T=A+(k<<6&4294967295|k>>>26),k=q+(A^(T|~$))+z[15]+4264355552&4294967295,q=T+(k<<10&4294967295|k>>>22),k=$+(T^(q|~A))+z[6]+2734768916&4294967295,$=q+(k<<15&4294967295|k>>>17),k=A+(q^($|~T))+z[13]+1309151649&4294967295,A=$+(k<<21&4294967295|k>>>11),k=T+($^(A|~q))+z[4]+4149444226&4294967295,T=A+(k<<6&4294967295|k>>>26),k=q+(A^(T|~$))+z[11]+3174756917&4294967295,q=T+(k<<10&4294967295|k>>>22),k=$+(T^(q|~A))+z[2]+718787259&4294967295,$=q+(k<<15&4294967295|k>>>17),k=A+(q^($|~T))+z[9]+3951481745&4294967295,D.g[0]=D.g[0]+T&4294967295,D.g[1]=D.g[1]+($+(k<<21&4294967295|k>>>11))&4294967295,D.g[2]=D.g[2]+$&4294967295,D.g[3]=D.g[3]+q&4294967295}a.prototype.v=function(D,T){T===void 0&&(T=D.length);const A=T-this.blockSize,z=this.C;let $=this.h,q=0;for(;q<T;){if($==0)for(;q<=A;)o(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<T;)if(z[$++]=D.charCodeAt(q++),$==this.blockSize){o(this,z),$=0;break}}else for(;q<T;)if(z[$++]=D[q++],$==this.blockSize){o(this,z),$=0;break}}this.h=$,this.o+=T},a.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var T=1;T<D.length-8;++T)D[T]=0;T=this.o*8;for(var A=D.length-8;A<D.length;++A)D[A]=T&255,T/=256;for(this.v(D),D=Array(16),T=0,A=0;A<4;++A)for(let z=0;z<32;z+=8)D[T++]=this.g[A]>>>z&255;return D};function c(D,T){var A=m;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=T(D)}function d(D,T){this.h=T;const A=[];let z=!0;for(let $=D.length-1;$>=0;$--){const q=D[$]|0;z&&q==T||(A[$]=q,z=!1)}this.g=A}var m={};function p(D){return-128<=D&&D<128?c(D,function(T){return new d([T|0],T<0?-1:0)}):new d([D|0],D<0?-1:0)}function g(D){if(isNaN(D)||!isFinite(D))return v;if(D<0)return L(g(-D));const T=[];let A=1;for(let z=0;D>=A;z++)T[z]=D/A|0,A*=4294967296;return new d(T,0)}function b(D,T){if(D.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(D.charAt(0)=="-")return L(b(D.substring(1),T));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(T,8));let z=v;for(let q=0;q<D.length;q+=8){var $=Math.min(8,D.length-q);const k=parseInt(D.substring(q,q+$),T);$<8?($=g(Math.pow(T,$)),z=z.j($).add(g(k))):(z=z.j(A),z=z.add(g(k)))}return z}var v=p(0),j=p(1),I=p(16777216);s=d.prototype,s.m=function(){if(O(this))return-L(this).m();let D=0,T=1;for(let A=0;A<this.g.length;A++){const z=this.i(A);D+=(z>=0?z:4294967296+z)*T,T*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(B(this))return"0";if(O(this))return"-"+L(this).toString(D);const T=g(Math.pow(D,6));var A=this;let z="";for(;;){const $=me(A,T).g;A=se(A,$.j(T));let q=((A.g.length>0?A.g[0]:A.h)>>>0).toString(D);if(A=$,B(A))return q+z;for(;q.length<6;)q="0"+q;z=q+z}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function B(D){if(D.h!=0)return!1;for(let T=0;T<D.g.length;T++)if(D.g[T]!=0)return!1;return!0}function O(D){return D.h==-1}s.l=function(D){return D=se(this,D),O(D)?-1:B(D)?0:1};function L(D){const T=D.g.length,A=[];for(let z=0;z<T;z++)A[z]=~D.g[z];return new d(A,~D.h).add(j)}s.abs=function(){return O(this)?L(this):this},s.add=function(D){const T=Math.max(this.g.length,D.g.length),A=[];let z=0;for(let $=0;$<=T;$++){let q=z+(this.i($)&65535)+(D.i($)&65535),k=(q>>>16)+(this.i($)>>>16)+(D.i($)>>>16);z=k>>>16,q&=65535,k&=65535,A[$]=k<<16|q}return new d(A,A[A.length-1]&-2147483648?-1:0)};function se(D,T){return D.add(L(T))}s.j=function(D){if(B(this)||B(D))return v;if(O(this))return O(D)?L(this).j(L(D)):L(L(this).j(D));if(O(D))return L(this.j(L(D)));if(this.l(I)<0&&D.l(I)<0)return g(this.m()*D.m());const T=this.g.length+D.g.length,A=[];for(var z=0;z<2*T;z++)A[z]=0;for(z=0;z<this.g.length;z++)for(let $=0;$<D.g.length;$++){const q=this.i(z)>>>16,k=this.i(z)&65535,ue=D.i($)>>>16,_e=D.i($)&65535;A[2*z+2*$]+=k*_e,W(A,2*z+2*$),A[2*z+2*$+1]+=q*_e,W(A,2*z+2*$+1),A[2*z+2*$+1]+=k*ue,W(A,2*z+2*$+1),A[2*z+2*$+2]+=q*ue,W(A,2*z+2*$+2)}for(D=0;D<T;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=T;D<2*T;D++)A[D]=0;return new d(A,0)};function W(D,T){for(;(D[T]&65535)!=D[T];)D[T+1]+=D[T]>>>16,D[T]&=65535,T++}function re(D,T){this.g=D,this.h=T}function me(D,T){if(B(T))throw Error("division by zero");if(B(D))return new re(v,v);if(O(D))return T=me(L(D),T),new re(L(T.g),L(T.h));if(O(T))return T=me(D,L(T)),new re(L(T.g),T.h);if(D.g.length>30){if(O(D)||O(T))throw Error("slowDivide_ only works with positive integers.");for(var A=j,z=T;z.l(D)<=0;)A=xe(A),z=xe(z);var $=Te(A,1),q=Te(z,1);for(z=Te(z,2),A=Te(A,2);!B(z);){var k=q.add(z);k.l(D)<=0&&($=$.add(A),q=k),z=Te(z,1),A=Te(A,1)}return T=se(D,$.j(T)),new re($,T)}for($=v;D.l(T)>=0;){for(A=Math.max(1,Math.floor(D.m()/T.m())),z=Math.ceil(Math.log(A)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),q=g(A),k=q.j(T);O(k)||k.l(D)>0;)A-=z,q=g(A),k=q.j(T);B(q)&&(q=j),$=$.add(q),D=se(D,k)}return new re($,D)}s.B=function(D){return me(this,D).h},s.and=function(D){const T=Math.max(this.g.length,D.g.length),A=[];for(let z=0;z<T;z++)A[z]=this.i(z)&D.i(z);return new d(A,this.h&D.h)},s.or=function(D){const T=Math.max(this.g.length,D.g.length),A=[];for(let z=0;z<T;z++)A[z]=this.i(z)|D.i(z);return new d(A,this.h|D.h)},s.xor=function(D){const T=Math.max(this.g.length,D.g.length),A=[];for(let z=0;z<T;z++)A[z]=this.i(z)^D.i(z);return new d(A,this.h^D.h)};function xe(D){const T=D.g.length+1,A=[];for(let z=0;z<T;z++)A[z]=D.i(z)<<1|D.i(z-1)>>>31;return new d(A,D.h)}function Te(D,T){const A=T>>5;T%=32;const z=D.g.length-A,$=[];for(let q=0;q<z;q++)$[q]=T>0?D.i(q+A)>>>T|D.i(q+A+1)<<32-T:D.i(q+A);return new d($,D.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,G_=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=b,to=d}).apply(typeof Xw<"u"?Xw:typeof self<"u"?self:typeof window<"u"?window:{});var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var K_,bu,Q_,cf,Cg,Y_,X_,W_;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fh=="object"&&Fh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=t(this);function o(h,y){if(y)e:{var _=a;h=h.split(".");for(var R=0;R<h.length-1;R++){var ae=h[R];if(!(ae in _))break e;_=_[ae]}h=h[h.length-1],R=_[h],y=y(R),y!=R&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var _=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&_.push([R,y[R]]);return _}});var c=c||{},d=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,_){return h.call.apply(h.bind,arguments)}function g(h,y,_){return g=p,g.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function v(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(R,ae,he){for(var Oe=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)Oe[gt-2]=arguments[gt];return y.prototype[ae].apply(R,Oe)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function I(h){const y=h.length;if(y>0){const _=Array(y);for(let R=0;R<y;R++)_[R]=h[R];return _}return[]}function B(h,y){for(let R=1;R<arguments.length;R++){const ae=arguments[R];var _=typeof ae;if(_=_!="object"?_:ae?Array.isArray(ae)?"array":_:"null",_=="array"||_=="object"&&typeof ae.length=="number"){_=h.length||0;const he=ae.length||0;h.length=_+he;for(let Oe=0;Oe<he;Oe++)h[_+Oe]=ae[Oe]}else h.push(ae)}}class O{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(h){d.setTimeout(()=>{throw h},0)}function se(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class W{constructor(){this.h=this.g=null}add(y,_){const R=re.get();R.set(y,_),this.h?this.h.next=R:this.g=R,this.h=R}}var re=new O(()=>new me,h=>h.reset());class me{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,Te=!1,D=new W,T=()=>{const h=Promise.resolve(void 0);xe=()=>{h.then(A)}};function A(){for(var h;h=se();){try{h.h.call(h.g)}catch(_){L(_)}var y=re;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Te=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function k(h){return/^[\s\xa0]*$/.test(h)}function ue(h,y){$.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}v(ue,$),ue.prototype.init=function(h,y){const _=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),P=0;function M(h,y,_,R,ae){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!R,this.ha=ae,this.key=++P,this.da=this.fa=!1}function F(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Q(h,y,_){for(const R in h)y.call(_,h[R],R,h)}function de(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function C(h){const y={};for(const _ in h)y[_]=h[_];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(h,y){let _,R;for(let ae=1;ae<arguments.length;ae++){R=arguments[ae];for(_ in R)h[_]=R[_];for(let he=0;he<J.length;he++)_=J[he],Object.prototype.hasOwnProperty.call(R,_)&&(h[_]=R[_])}}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,y,_,R,ae){const he=h.toString();h=this.g[he],h||(h=this.g[he]=[],this.h++);const Oe=De(h,y,R,ae);return Oe>-1?(y=h[Oe],_||(y.fa=!1)):(y=new M(y,this.src,he,!!R,ae),y.fa=_,h.push(y)),y};function Ie(h,y){const _=y.type;if(_ in h.g){var R=h.g[_],ae=Array.prototype.indexOf.call(R,y,void 0),he;(he=ae>=0)&&Array.prototype.splice.call(R,ae,1),he&&(F(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function De(h,y,_,R){for(let ae=0;ae<h.length;++ae){const he=h[ae];if(!he.da&&he.listener==y&&he.capture==!!_&&he.ha==R)return ae}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),qe={};function be(h,y,_,R,ae){if(Array.isArray(y)){for(let he=0;he<y.length;he++)be(h,y[he],_,R,ae);return null}return _=bt(_),h&&h[_e]?h.J(y,_,m(R)?!!R.capture:!1,ae):H(h,y,_,!1,R,ae)}function H(h,y,_,R,ae,he){if(!y)throw Error("Invalid event type");const Oe=m(ae)?!!ae.capture:!!ae;let gt=ve(h);if(gt||(h[Ce]=gt=new ge(h)),_=gt.add(y,_,R,Oe,he),_.proxy)return _;if(R=Me(),_.proxy=R,R.src=h,R.listener=_,h.addEventListener)q||(ae=Oe),ae===void 0&&(ae=!1),h.addEventListener(y.toString(),R,ae);else if(h.attachEvent)h.attachEvent(Fe(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Me(){function h(_){return y.call(h.src,h.listener,_)}const y=Z;return h}function Le(h,y,_,R,ae){if(Array.isArray(y))for(var he=0;he<y.length;he++)Le(h,y[he],_,R,ae);else R=m(R)?!!R.capture:!!R,_=bt(_),h&&h[_e]?(h=h.i,he=String(y).toString(),he in h.g&&(y=h.g[he],_=De(y,_,R,ae),_>-1&&(F(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[he],h.h--)))):h&&(h=ve(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,_,R,ae)),(_=h>-1?y[h]:null)&&We(_))}function We(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[_e])Ie(y.i,h);else{var _=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(_,R,h.capture):y.detachEvent?y.detachEvent(Fe(_),R):y.addListener&&y.removeListener&&y.removeListener(R),(_=ve(y))?(Ie(_,h),_.h==0&&(_.src=null,y[Ce]=null)):F(h)}}}function Fe(h){return h in qe?qe[h]:qe[h]="on"+h}function Z(h,y){if(h.da)h=!0;else{y=new ue(y,this);const _=h.listener,R=h.ha||h.src;h.fa&&We(h),h=_.call(R,y)}return h}function ve(h){return h=h[Ce],h instanceof ge?h:null}var et="__closure_events_fn_"+(Math.random()*1e9>>>0);function bt(h){return typeof h=="function"?h:(h[et]||(h[et]=function(y){return h.handleEvent(y)}),h[et])}function lt(){z.call(this),this.i=new ge(this),this.M=this,this.G=null}v(lt,z),lt.prototype[_e]=!0,lt.prototype.removeEventListener=function(h,y,_,R){Le(this,h,y,_,R)};function mt(h,y){var _,R=h.G;if(R)for(_=[];R;R=R.G)_.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new $(y,h);else if(y instanceof $)y.target=y.target||h;else{var ae=y;y=new $(R,h),te(y,ae)}ae=!0;let he,Oe;if(_)for(Oe=_.length-1;Oe>=0;Oe--)he=y.g=_[Oe],ae=Pt(he,R,!0,y)&&ae;if(he=y.g=h,ae=Pt(he,R,!0,y)&&ae,ae=Pt(he,R,!1,y)&&ae,_)for(Oe=0;Oe<_.length;Oe++)he=y.g=_[Oe],ae=Pt(he,R,!1,y)&&ae}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let R=0;R<_.length;R++)F(_[R]);delete h.g[y],h.h--}}this.G=null},lt.prototype.J=function(h,y,_,R){return this.i.add(String(h),y,!1,_,R)},lt.prototype.K=function(h,y,_,R){return this.i.add(String(h),y,!0,_,R)};function Pt(h,y,_,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let ae=!0;for(let he=0;he<y.length;++he){const Oe=y[he];if(Oe&&!Oe.da&&Oe.capture==_){const gt=Oe.listener,Ds=Oe.ha||Oe.src;Oe.fa&&Ie(h.i,Oe),ae=gt.call(Ds,R)!==!1&&ae}}return ae&&!R.defaultPrevented}function Ws(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Bn(h){h.g=Ws(()=>{h.g=null,h.i&&(h.i=!1,Bn(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class is extends z{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Bn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(h){z.call(this),this.h=h,this.g={}}v(sn,z);var Rs=[];function xn(h){Q(h.g,function(y,_){this.g.hasOwnProperty(_)&&We(y)},h),h.g={}}sn.prototype.N=function(){sn.Z.N.call(this),xn(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=d.JSON.stringify,$n=d.JSON.parse,ds=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Vs(){}function sr(){}var U={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ae(){$.call(this,"d")}v(Ae,$);function Ve(){$.call(this,"c")}v(Ve,$);var ze={},nt=null;function pt(){return nt=nt||new lt}ze.Ia="serverreachability";function Is(h){$.call(this,ze.Ia,h)}v(Is,$);function Lt(h){const y=pt();mt(y,new Is(y))}ze.STAT_EVENT="statevent";function K(h,y){$.call(this,ze.STAT_EVENT,h),this.stat=y}v(K,$);function le(h){const y=pt();mt(y,new K(y,h))}ze.Ja="timingevent";function V(h,y){$.call(this,ze.Ja,h),this.size=y}v(V,$);function Y(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Se(){this.g=!0}Se.prototype.ua=function(){this.g=!1};function Ue(h,y,_,R,ae,he){h.info(function(){if(h.g)if(he){var Oe="",gt=he.split("&");for(let Ft=0;Ft<gt.length;Ft++){var Ds=gt[Ft].split("=");if(Ds.length>1){const ps=Ds[0];Ds=Ds[1];const Tr=ps.split("_");Oe=Tr.length>=2&&Tr[1]=="type"?Oe+(ps+"="+Ds+"&"):Oe+(ps+"=redacted&")}}}else Oe=null;else Oe=he;return"XMLHTTP REQ ("+R+") [attempt "+ae+"]: "+y+`
`+_+`
`+Oe})}function Ke(h,y,_,R,ae,he,Oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+ae+"]: "+y+`
`+_+`
`+he+" "+Oe})}function ht(h,y,_,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+yt(h,_)+(R?" "+R:"")})}function Wt(h,y){h.info(function(){return"TIMEOUT: "+y})}Se.prototype.info=function(){};function yt(h,y){if(!h.g)return y;if(!y)return null;try{const he=JSON.parse(y);if(he){for(h=0;h<he.length;h++)if(Array.isArray(he[h])){var _=he[h];if(!(_.length<2)){var R=_[1];if(Array.isArray(R)&&!(R.length<1)){var ae=R[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Oe=1;Oe<R.length;Oe++)R[Oe]=""}}}}return Xt(he)}catch{return y}}var hs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},St={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},os;function ns(){}v(ns,Vs),ns.prototype.g=function(){return new XMLHttpRequest},os=new ns;function cn(h){return encodeURIComponent(String(h))}function nr(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function Us(h,y,_,R){this.j=h,this.i=y,this.l=_,this.S=R||1,this.V=new sn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ls}function ls(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function Bs(h,y,_){h.M=1,h.A=Pa(js(y)),h.u=_,h.R=!0,Ma(h,null)}function Ma(h,y){h.F=Date.now(),bn(h),h.B=js(h.A);var _=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),bi(_.i,"t",R),h.C=0,_=h.j.L,h.h=new ls,h.g=Id(h.j,_?y:null,!h.u),h.P>0&&(h.O=new is(g(h.Y,h,h.g),h.P)),y=h.V,_=h.g,R=h.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Rs[0]=ae.toString()),ae=Rs);for(let he=0;he<ae.length;he++){const Oe=be(_,ae[he],R||y.handleEvent,!1,y.h||y);if(!Oe)break;y.g[Oe.key]=Oe}y=h.J?C(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Lt(),Ue(h.i,h.v,h.B,h.l,h.S,h.u)}Us.prototype.ba=function(h){h=h.target;const y=this.O;y&&ee(h)==3?y.j():this.Y(h)},Us.prototype.Y=function(h){try{if(h==this.g)e:{const gt=ee(this.g),Ds=this.g.ya(),Ft=this.g.ca();if(!(gt<3)&&(gt!=3||this.g&&(this.h.h||this.g.la()||Re(this.g)))){this.K||gt!=4||Ds==7||(Ds==8||Ft<=0?Lt(3):Lt(2)),rr(this);var y=this.g.ca();this.X=y;var _=cl(this);if(this.o=y==200,Ke(this.i,this.v,this.B,this.l,this.S,gt,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,ae=this.g;if((R=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(R)){var he=R;break t}}he=null}if(h=he)ht(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ar(this,h);else{this.o=!1,this.m=3,le(12),vn(this),yn(this);break e}}if(this.R){h=!0;let ps;for(;!this.K&&this.C<_.length;)if(ps=Ur(this,_),ps==Bt){gt==4&&(this.m=4,le(14),h=!1),ht(this.i,this.l,null,"[Incomplete Response]");break}else if(ps==It){this.m=4,le(15),ht(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else ht(this.i,this.l,ps,null),ar(this,ps);if(sa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||_.length!=0||this.h.h||(this.m=1,le(16),h=!1),this.o=this.o&&h,!h)ht(this.i,this.l,_,"[Invalid Chunked Response]"),vn(this),yn(this);else if(_.length>0&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.aa&&!Oe.P&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),kc(Oe),Oe.P=!0,le(11))}}else ht(this.i,this.l,_,null),ar(this,_);gt==4&&vn(this),this.o&&!this.K&&(gt==4?kd(this.j,this):(this.o=!1,bn(this)))}else $e(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,le(12)):(this.m=0,le(13)),vn(this),yn(this)}}}catch{}};function cl(h){if(!sa(h))return h.g.la();const y=Re(h.g);if(y==="")return"";let _="";const R=y.length,ae=ee(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return vn(h),yn(h),"";h.h.i=new d.TextDecoder}for(let he=0;he<R;he++)h.h.h=!0,_+=h.h.i.decode(y[he],{stream:!(ae&&he==R-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function sa(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ur(h,y){var _=h.C,R=y.indexOf(`
`,_);return R==-1?Bt:(_=Number(y.substring(_,R)),isNaN(_)?It:(R+=1,R+_>y.length?Bt:(y=y.slice(R,R+_),h.C=R+_,y)))}Us.prototype.cancel=function(){this.K=!0,vn(this)};function bn(h){h.T=Date.now()+h.H,Br(h,h.H)}function Br(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Y(g(h.aa,h),y)}function rr(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Us.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Wt(this.i,this.B),this.M!=2&&(Lt(),le(17)),vn(this),this.m=2,yn(this)):Br(this,this.T-h)};function yn(h){h.j.I==0||h.K||kd(h.j,h)}function vn(h){rr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,xn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ar(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||wr(_.h,h))){if(!h.L&&wr(_.h,h)&&_.I==3){try{var R=_.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var ae=R;if(ae[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)fl(_),zt(_);else break e;jo(_),le(18)}}else _.xa=ae[1],0<_.xa-_.K&&ae[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Y(g(_.Va,_),6e3));vr(_.h)<=1&&_.ta&&(_.ta=void 0)}else ha(_,11)}else if((h.L||_.g==h)&&fl(_),!k(y))for(ae=_.Ba.g.parse(y),y=0;y<ae.length;y++){let Ft=ae[y];const ps=Ft[0];if(!(ps<=_.K))if(_.K=ps,Ft=Ft[1],_.I==2)if(Ft[0]=="c"){_.M=Ft[1],_.ba=Ft[2];const Tr=Ft[3];Tr!=null&&(_.ka=Tr,_.j.info("VER="+_.ka));const fa=Ft[4];fa!=null&&(_.za=fa,_.j.info("SVER="+_.za));const Fr=Ft[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(R=1.5*Fr,_.O=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const Hr=h.g;if(Hr){const Eo=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var he=R.h;he.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(po(he,he.h),he.h=null))}if(R.G){const ml=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;ml&&(R.wa=ml,$t(R.J,R.G,ml))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),R=_;var Oe=h;if(R.na=Rd(R,R.L?R.ba:null,R.W),Oe.L){Fn(R.h,Oe);var gt=Oe,Ds=R.O;Ds&&(gt.H=Ds),gt.D&&(rr(gt),bn(gt)),R.g=Oe}else Sd(R);_.i.length>0&&_n(_)}else Ft[0]!="stop"&&Ft[0]!="close"||ha(_,7);else _.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?ha(_,7):Es(_):Ft[0]!="noop"&&_.l&&_.l.qa(Ft),_.A=0)}}Lt(4)}catch{}}var _s=class{constructor(h,y){this.g=h,this.map=y}};function fo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vr(h){return h.h?1:h.g?h.g.size:0}function wr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function po(h,y){h.g?h.g.add(y):h.h=y}function Fn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}fo.prototype.cancel=function(){if(this.i=go(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function go(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return I(h.i)}var xo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oa(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const R=h[_].indexOf("=");let ae,he=null;R>=0?(ae=h[_].substring(0,R),he=h[_].substring(R+1)):ae=h[_],y(ae,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function Rn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Rn?(this.l=h.l,$s(this,h.j),this.o=h.o,this.g=h.g,na(this,h.u),this.h=h.h,bo(this,hl(h.i)),this.m=h.m):h&&(y=String(h).match(xo))?(this.l=!1,$s(this,y[1]||"",!0),this.o=Nr(y[2]||""),this.g=Nr(y[3]||"",!0),na(this,y[4]),this.h=Nr(y[5]||"",!0),bo(this,y[6]||"",!0),this.m=Nr(y[7]||"")):(this.l=!1,this.i=new ia(null,this.l))}Rn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ra(y,pi,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ra(y,pi,!0),"@"),h.push(cn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(ra(_,_.charAt(0)=="/"?yo:ul,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",ra(_,dl)),h.join("")},Rn.prototype.resolve=function(h){const y=js(this);let _=!!h.j;_?$s(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var R=h.h;if(_)na(y,h.u);else if(_=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var ae=y.h.lastIndexOf("/");ae!=-1&&(R=y.h.slice(0,ae+1)+R)}if(ae=R,ae==".."||ae==".")R="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){R=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const he=[];for(let Oe=0;Oe<ae.length;){const gt=ae[Oe++];gt=="."?R&&Oe==ae.length&&he.push(""):gt==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),R&&Oe==ae.length&&he.push("")):(he.push(gt),R=!0)}R=he.join("/")}else R=ae}return _?y.h=R:_=h.i.toString()!=="",_?bo(y,hl(h.i)):_=!!h.m,_&&(y.m=h.m),y};function js(h){return new Rn(h)}function $s(h,y,_){h.j=_?Nr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function na(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function bo(h,y,_){y instanceof ia?(h.i=y,yi(h.i,h.l)):(_||(y=ra(y,aa)),h.i=new ia(y,h.l))}function $t(h,y,_){h.i.set(y,_)}function Pa(h){return $t(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Nr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ra(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,wn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function wn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var pi=/[#\/\?@]/g,ul=/[#\?:]/g,yo=/[#\?]/g,aa=/[#\?@]/g,dl=/#/g;function ia(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Nn(h){h.g||(h.g=new Map,h.h=0,h.i&&Oa(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=ia.prototype,s.add=function(h,y){Nn(this),this.i=null,h=oa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function vo(h,y){Nn(h),y=oa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function gi(h,y){return Nn(h),y=oa(h,y),h.g.has(y)}s.forEach=function(h,y){Nn(this),this.g.forEach(function(_,R){_.forEach(function(ae){h.call(y,ae,R,this)},this)},this)};function xi(h,y){Nn(h);let _=[];if(typeof y=="string")gi(h,y)&&(_=_.concat(h.g.get(oa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}s.set=function(h,y){return Nn(this),this.i=null,h=oa(this,h),gi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=xi(this,h),h.length>0?String(h[0]):y):y};function bi(h,y,_){vo(h,y),_.length>0&&(h.i=null,h.g.set(oa(h,y),I(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var _=y[R];const ae=cn(_);_=xi(this,_);for(let he=0;he<_.length;he++){let Oe=ae;_[he]!==""&&(Oe+="="+cn(_[he])),h.push(Oe)}}return this.i=h.join("&")};function hl(h){const y=new ia;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function oa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function yi(h,y){y&&!h.j&&(Nn(h),h.i=null,h.g.forEach(function(_,R){const ae=R.toLowerCase();R!=ae&&(vo(this,R),bi(this,ae,_))},h)),h.j=y}function Hn(h,y){const _=new Se;if(d.Image){const R=new Image;R.onload=b(In,_,"TestLoadImage: loaded",!0,y,R),R.onerror=b(In,_,"TestLoadImage: error",!1,y,R),R.onabort=b(In,_,"TestLoadImage: abort",!1,y,R),R.ontimeout=b(In,_,"TestLoadImage: timeout",!1,y,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function la(h,y){const _=new Se,R=new AbortController,ae=setTimeout(()=>{R.abort(),In(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(he=>{clearTimeout(ae),he.ok?In(_,"TestPingServer: ok",!0,y):In(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(ae),In(_,"TestPingServer: error",!1,y)})}function In(h,y,_,R,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),R(_)}catch{}}function ca(){this.g=new ds}function _r(h){this.i=h.Sb||null,this.h=h.ab||!1}v(_r,Vs),_r.prototype.g=function(){return new jr(this.i,this.h)};function jr(h,y){lt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(jr,lt),s=jr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ir(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ua(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$r(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function $r(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?ua(this):ir(this),this.readyState==3&&$r(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,ua(this))},s.Na=function(h){this.g&&(this.response=h,ua(this))},s.ga=function(){this.g&&ua(this)};function ua(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ir(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(jr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qn(h){let y="";return Q(h,function(_,R){y+=R,y+=":",y+=_,y+=`\r
`}),y}function La(h,y,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=qn(_),typeof h=="string"?_!=null&&cn(_):$t(h,y,_))}function qt(h){lt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(qt,lt);var Er=/^https?$/i,wo=["POST","PUT"];s=qt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():os.g(),this.g.onreadystatechange=j(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(he){za(this,he);return}if(h=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var ae in R)_.set(ae,R[ae]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const he of R.keys())_.set(he,R.get(he));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(he=>he.toLowerCase()=="content-type"),ae=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(wo,y,void 0)>=0)||R||ae||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Oe]of _)this.g.setRequestHeader(he,Oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(he){za(this,he)}};function za(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,No(h),E(h)}function No(h){h.A||(h.A=!0,mt(h,"complete"),mt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,mt(this,"complete"),mt(this,"abort"),E(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),E(this,!0)),qt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?da(this):this.Xa())},s.Xa=function(){da(this)};function da(h){if(h.h&&typeof c<"u"){if(h.v&&ee(h)==4)setTimeout(h.Ca.bind(h),0);else if(mt(h,"readystatechange"),ee(h)==4){h.h=!1;try{const he=h.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var R;if(R=he===0){let Oe=String(h.D).match(xo)[1]||null;!Oe&&d.self&&d.self.location&&(Oe=d.self.location.protocol.slice(0,-1)),R=!Er.test(Oe?Oe.toLowerCase():"")}_=R}if(_)mt(h,"complete"),mt(h,"success");else{h.o=6;try{var ae=ee(h)>2?h.g.statusText:""}catch{ae=""}h.l=ae+" ["+h.ca()+"]",No(h)}}finally{E(h)}}}}function E(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||mt(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ee(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ee(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),$n(y)}};function Re(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $e(h){const y={};h=(h.g&&ee(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(k(h[R]))continue;var _=nr(h[R]);const ae=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const he=y[ae]||[];y[ae]=he,he.push(_)}de(y,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nt(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function _t(h){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nt("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nt("baseRetryDelayMs",5e3,h),this.Za=Nt("retryDelaySeedMs",1e4,h),this.Ta=Nt("forwardChannelMaxRetries",2,h),this.va=Nt("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new fo(h&&h.concurrentRequestLimit),this.Ba=new ca,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=_t.prototype,s.ka=8,s.I=1,s.connect=function(h,y,_,R){le(0),this.W=h,this.H=y||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.J=Rd(this,null,this.W),_n(this)};function Es(h){if(Gn(h),h.I==3){var y=h.V++,_=js(h.J);if($t(_,"SID",h.M),$t(_,"RID",y),$t(_,"TYPE","terminate"),_o(h,_),y=new Us(h,h.j,y),y.M=2,y.A=Pa(js(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Id(y.j,null),y.g.ea(y.A)),y.F=Date.now(),bn(y)}Cd(h)}function zt(h){h.g&&(kc(h),h.g.cancel(),h.g=null)}function Gn(h){zt(h),h.v&&(d.clearTimeout(h.v),h.v=null),fl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function _n(h){if(!mo(h.h)&&!h.m){h.m=!0;var y=h.Ea;xe||T(),Te||(xe(),Te=!0),D.add(y,h),h.D=0}}function Sr(h,y){return vr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Y(g(h.Ea,h,y),Ad(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ae=new Us(this,this.j,h);let he=this.o;if(this.U&&(he?(he=C(he),te(he,this.U)):he=this.U),this.u!==null||this.R||(ae.J=he,he=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Ed(this,ae,y),_=js(this.J),$t(_,"RID",h),$t(_,"CVER",22),this.G&&$t(_,"X-HTTP-Session-Id",this.G),_o(this,_),he&&(this.R?y="headers="+cn(qn(he))+"&"+y:this.u&&La(_,this.u,he)),po(this.h,ae),this.Ra&&$t(_,"TYPE","init"),this.S?($t(_,"$req",y),$t(_,"SID","null"),ae.U=!0,Bs(ae,_,null)):Bs(ae,_,y),this.I=2}}else this.I==3&&(h?Tc(this,h):this.i.length==0||mo(this.h)||Tc(this))};function Tc(h,y){var _;y?_=y.l:_=h.V++;const R=js(h.J);$t(R,"SID",h.M),$t(R,"RID",_),$t(R,"AID",h.K),_o(h,R),h.u&&h.o&&La(R,h.u,h.o),_=new Us(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Ed(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),po(h.h,_),Bs(_,R,y)}function _o(h,y){h.H&&Q(h.H,function(_,R){$t(y,R,_)}),h.l&&Q({},function(_,R){$t(y,R,_)})}function Ed(h,y,_){_=Math.min(h.i.length,_);const R=h.l?g(h.l.Ka,h.l,h):null;e:{var ae=h.i;let gt=-1;for(;;){const Ds=["count="+_];gt==-1?_>0?(gt=ae[0].g,Ds.push("ofs="+gt)):gt=0:Ds.push("ofs="+gt);let Ft=!0;for(let ps=0;ps<_;ps++){var he=ae[ps].g;const Tr=ae[ps].map;if(he-=gt,he<0)gt=Math.max(0,ae[ps].g-100),Ft=!1;else try{he="req"+he+"_"||"";try{var Oe=Tr instanceof Map?Tr:Object.entries(Tr);for(const[fa,Fr]of Oe){let Hr=Fr;m(Fr)&&(Hr=Xt(Fr)),Ds.push(he+fa+"="+encodeURIComponent(Hr))}}catch(fa){throw Ds.push(he+"type="+encodeURIComponent("_badmap")),fa}}catch{R&&R(Tr)}}if(Ft){Oe=Ds.join("&");break e}}Oe=void 0}return h=h.i.splice(0,_),y.G=h,Oe}function Sd(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;xe||T(),Te||(xe(),Te=!0),D.add(y,h),h.A=0}}function jo(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Y(g(h.Da,h),Ad(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Td(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Y(g(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,le(10),zt(this),Td(this))};function kc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Td(h){h.g=new Us(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=js(h.na);$t(y,"RID","rpc"),$t(y,"SID",h.M),$t(y,"AID",h.K),$t(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&$t(y,"TO",h.ia),$t(y,"TYPE","xmlhttp"),_o(h,y),h.u&&h.o&&La(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Pa(js(y)),_.u=null,_.R=!0,Ma(_,h)}s.Va=function(){this.C!=null&&(this.C=null,zt(this),jo(this),le(19))};function fl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function kd(h,y){var _=null;if(h.g==y){fl(h),kc(h),h.g=null;var R=2}else if(wr(h.h,y))_=y.G,Fn(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var ae=h.D;R=pt(),mt(R,new V(R,_)),_n(h)}else Sd(h);else if(ae=y.m,ae==3||ae==0&&y.X>0||!(R==1&&Sr(h,y)||R==2&&jo(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),ae){case 1:ha(h,5);break;case 4:ha(h,10);break;case 3:ha(h,6);break;default:ha(h,2)}}}function Ad(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function ha(h,y){if(h.j.info("Error code "+y),y==2){var _=g(h.bb,h),R=h.Ua;const ae=!R;R=new Rn(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||$s(R,"https"),Pa(R),ae?Hn(R.toString(),_):la(R.toString(),_)}else le(2);h.I=0,h.l&&h.l.pa(y),Cd(h),Gn(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Cd(h){if(h.I=0,h.ja=[],h.l){const y=go(h.h);(y.length!=0||h.i.length!=0)&&(B(h.ja,y),B(h.ja,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.oa()}}function Rd(h,y,_){var R=_ instanceof Rn?js(_):new Rn(_);if(R.g!="")y&&(R.g=y+"."+R.g),na(R,R.u);else{var ae=d.location;R=ae.protocol,y=y?y+"."+ae.hostname:ae.hostname,ae=+ae.port;const he=new Rn(null);R&&$s(he,R),y&&(he.g=y),ae&&na(he,ae),_&&(he.h=_),R=he}return _=h.G,y=h.wa,_&&y&&$t(R,_,y),$t(R,"VER",h.ka),_o(h,R),R}function Id(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new qt(new _r({ab:_})):new qt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dd(){}s=Dd.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function vi(){}vi.prototype.g=function(h,y){return new Dn(h,y)};function Dn(h,y){lt.call(this),this.g=new _t(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!k(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Va(this)}v(Dn,lt),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Es(this.g)},Dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Xt(h),h=_);y.i.push(new _s(y.Ya++,h)),y.I==3&&_n(y)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Es(this.g),delete this.g,Dn.Z.N.call(this)};function Md(h){Ae.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}v(Md,Ae);function Od(){Ve.call(this),this.status=1}v(Od,Ve);function Va(h){this.g=h}v(Va,Dd),Va.prototype.ra=function(){mt(this.g,"a")},Va.prototype.qa=function(h){mt(this.g,new Md(h))},Va.prototype.pa=function(h){mt(this.g,new Od)},Va.prototype.oa=function(){mt(this.g,"b")},vi.prototype.createWebChannel=vi.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,W_=function(){return new vi},X_=function(){return pt()},Y_=ze,Cg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,cf=hs,St.COMPLETE="complete",Q_=St,sr.EventType=U,U.OPEN="a",U.CLOSE="b",U.ERROR="c",U.MESSAGE="d",lt.prototype.listen=lt.prototype.J,bu=sr,qt.prototype.listenOnce=qt.prototype.K,qt.prototype.getLastError=qt.prototype.Ha,qt.prototype.getLastErrorCode=qt.prototype.ya,qt.prototype.getStatus=qt.prototype.ca,qt.prototype.getResponseJson=qt.prototype.La,qt.prototype.getResponseText=qt.prototype.la,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Fa,K_=qt}).apply(typeof Fh<"u"?Fh:typeof self<"u"?self:typeof window<"u"?window:{});const Ww="@firebase/firestore",Jw="4.9.3";class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");let xc="12.7.0";const sl=new dx("@firebase/firestore");function Yl(){return sl.logLevel}function Ge(s,...e){if(sl.logLevel<=At.DEBUG){const t=e.map(_x);sl.debug(`Firestore (${xc}): ${s}`,...t)}}function fi(s,...e){if(sl.logLevel<=At.ERROR){const t=e.map(_x);sl.error(`Firestore (${xc}): ${s}`,...t)}}function nl(s,...e){if(sl.logLevel<=At.WARN){const t=e.map(_x);sl.warn(`Firestore (${xc}): ${s}`,...t)}}function _x(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function rt(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,J_(s,a,t)}function J_(s,e,t){let a=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw fi(a),new Error(a)}function Ot(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||J_(e,o,a)}function dt(s,e){return s}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends ta{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Z_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ej{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Tn.UNAUTHENTICATED)))}shutdown(){}}class eD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class tD{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ot(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let c=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ea,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ea)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Ot(typeof a.accessToken=="string",31837,{l:a}),new Z_(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ot(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class sD{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nD{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new sD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ot(this.o===void 0,3512);const a=c=>{c.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,Ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const o=c=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Zw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function aD(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class cm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=aD(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<t&&(a+=e.charAt(o[c]%62))}return a}}function Ct(s,e){return s<e?-1:s>e?1:0}function Rg(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),c=e.charAt(a);if(o!==c)return W0(o)===W0(c)?Ct(o,c):W0(o)?1:-1}return Ct(s.length,e.length)}const iD=55296,oD=57343;function W0(s){const e=s.charCodeAt(0);return e>=iD&&e<=oD}function ic(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}const e2="__name__";class ba{constructor(e,t,a){t===void 0?t=0:t>e.length&&rt(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&rt(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return ba.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ba?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const c=ba.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Ct(e.length,t.length)}static compareSegments(e,t){const a=ba.isNumericId(e),o=ba.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?ba.extractNumericId(e).compare(ba.extractNumericId(t)):Rg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}}class ss extends ba{construct(e,t,a){return new ss(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Pe(we.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new ss(t)}static emptyPath(){return new ss([])}}const lD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ba{construct(e,t,a){return new on(e,t,a)}static isValidIdentifier(e){return lD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e2}static keyField(){return new on([e2])}static fromServerFormat(e){const t=[];let a="",o=0;const c=()=>{if(a.length===0)throw new Pe(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Pe(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Pe(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(a+=m,o++):(c(),o++)}if(c(),d)throw new Pe(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(ss.fromString(e))}static fromName(e){return new Ze(ss.fromString(e).popFirst(5))}static empty(){return new Ze(ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ss.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ss.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new ss(e.slice()))}}function tj(s,e,t){if(!t)throw new Pe(we.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function sj(s,e,t,a){if(e===!0&&a===!0)throw new Pe(we.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function t2(s){if(!Ze.isDocumentKey(s))throw new Pe(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function s2(s){if(Ze.isDocumentKey(s))throw new Pe(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function nj(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function um(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":rt(12329,{type:typeof s})}function An(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Pe(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=um(s);throw new Pe(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function cD(s,e){if(e<=0)throw new Pe(we.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function Xs(s,e){const t={typeString:s};return e&&(t.value=e),t}function dd(s,e){if(!nj(s))throw new Pe(we.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){t=`Expected '${a}' field to equal '${c.value}'`;break}}if(t)throw new Pe(we.INVALID_ARGUMENT,t);return!0}const n2=-62135596800,r2=1e6;class us{static now(){return us.fromMillis(Date.now())}static fromDate(e){return us.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*r2);return new us(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<n2)throw new Pe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r2}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:us._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dd(e,us._jsonSchema))return new us(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-n2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}us._jsonSchemaVersion="firestore/timestamp/1.0",us._jsonSchema={type:Xs("string",us._jsonSchemaVersion),seconds:Xs("number"),nanoseconds:Xs("number")};class it{static fromTimestamp(e){return new it(e)}static min(){return new it(new us(0,0))}static max(){return new it(new us(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gu=-1;function uD(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=it.fromTimestamp(a===1e9?new us(t+1,0):new us(t,a));return new ro(o,Ze.empty(),e)}function dD(s){return new ro(s.readTime,s.key,Gu)}class ro{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ro(it.min(),Ze.empty(),Gu)}static max(){return new ro(it.max(),Ze.empty(),Gu)}}function hD(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Ze.comparator(s.documentKey,e.documentKey),t!==0?t:Ct(s.largestBatchId,e.largestBatchId))}const fD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function bc(s){if(s.code!==we.FAILED_PRECONDITION||s.message!==fD)throw s;Ge("LocalStore","Unexpectedly lost primary lease")}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke(((a,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(a,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ke.reject(t)}static resolve(e){return new ke(((t,a)=>{t(e)}))}static reject(e){return new ke(((t,a)=>{a(e)}))}static waitFor(e){return new ke(((t,a)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&t()}),(p=>a(p)))})),d=!0,c===o&&t()}))}static or(e){let t=ke.resolve(!1);for(const a of e)t=t.next((o=>o?ke.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,c)=>{a.push(t.call(this,o,c))})),this.waitFor(a)}static mapArray(e,t){return new ke(((a,o)=>{const c=e.length,d=new Array(c);let m=0;for(let p=0;p<c;p++){const g=p;t(e[g]).next((b=>{d[g]=b,++m,m===c&&a(d)}),(b=>o(b)))}}))}static doWhile(e,t){return new ke(((a,o)=>{const c=()=>{e()===!0?t().next((()=>{c()}),o):a()};c()}))}}function pD(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yc(s){return s.name==="IndexedDbTransactionError"}class dm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dm.ce=-1;const jx=-1;function hd(s){return s==null}function Df(s){return s===0&&1/s==-1/0}function gD(s){return typeof s=="number"&&Number.isInteger(s)&&!Df(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const rj="";function xD(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=a2(e)),e=bD(s.get(t),e);return a2(e)}function bD(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const c=s.charAt(o);switch(c){case"\0":t+="";break;case rj:t+="";break;default:t+=c}}return t}function a2(s){return s+rj+""}function i2(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function uo(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function aj(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Ns{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new Ns(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Ns(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hh(this.root,e,this.comparator,!0)}}class Hh{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?a(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,a,o,c){this.key=e,this.value=t,this.color=a??mn.RED,this.left=o??mn.EMPTY,this.right=c??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,c){return new mn(e??this.key,t??this.value,a??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const c=a(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,a),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return mn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,t,a,o,c){return this}insert(e,t,a){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new Ns(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new o2(this.data.getIterator())}getIteratorFrom(e){return new o2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=a.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class o2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class pr{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new pr([])}unionWith(e){let t=new tn(on.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}class ij extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new ij("Invalid base64 string: "+c):c}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const yD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(s){if(Ot(!!s,39018),typeof s=="string"){let e=0;const t=yD.exec(s);if(Ot(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ls(s.seconds),nanos:Ls(s.nanos)}}function Ls(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function io(s){return typeof s=="string"?ln.fromBase64String(s):ln.fromUint8Array(s)}const oj="server_timestamp",lj="__type__",cj="__previous_value__",uj="__local_write_time__";function Ex(s){return(s?.mapValue?.fields||{})[lj]?.stringValue===oj}function hm(s){const e=s.mapValue.fields[cj];return Ex(e)?hm(e):e}function Ku(s){const e=ao(s.mapValue.fields[uj].timestampValue);return new us(e.seconds,e.nanos)}class vD{constructor(e,t,a,o,c,d,m,p,g,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=b}}const Mf="(default)";class oc{constructor(e,t){this.projectId=e,this.database=t||Mf}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}const dj="__type__",wD="__max__",qh={mapValue:{}},hj="__vector__",Of="value";function oo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ex(s)?4:_D(s)?9007199254740991:ND(s)?10:11:rt(28295,{value:s})}function Aa(s,e){if(s===e)return!0;const t=oo(s);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ku(s).isEqual(Ku(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=ao(o.timestampValue),m=ao(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return io(o.bytesValue).isEqual(io(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ls(o.geoPointValue.latitude)===Ls(c.geoPointValue.latitude)&&Ls(o.geoPointValue.longitude)===Ls(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ls(o.integerValue)===Ls(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Ls(o.doubleValue),m=Ls(c.doubleValue);return d===m?Df(d)===Df(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return ic(s.arrayValue.values||[],e.arrayValue.values||[],Aa);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(i2(d)!==i2(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Aa(d[p],m[p])))return!1;return!0})(s,e);default:return rt(52216,{left:s})}}function Qu(s,e){return(s.values||[]).find((t=>Aa(t,e)))!==void 0}function lc(s,e){if(s===e)return 0;const t=oo(s),a=oo(e);if(t!==a)return Ct(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ct(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Ls(c.integerValue||c.doubleValue),p=Ls(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(s,e);case 3:return l2(s.timestampValue,e.timestampValue);case 4:return l2(Ku(s),Ku(e));case 5:return Rg(s.stringValue,e.stringValue);case 6:return(function(c,d){const m=io(c),p=io(d);return m.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),p=d.split("/");for(let g=0;g<m.length&&g<p.length;g++){const b=Ct(m[g],p[g]);if(b!==0)return b}return Ct(m.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Ct(Ls(c.latitude),Ls(d.latitude));return m!==0?m:Ct(Ls(c.longitude),Ls(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return c2(s.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},p=d.fields||{},g=m[Of]?.arrayValue,b=p[Of]?.arrayValue,v=Ct(g?.values?.length||0,b?.values?.length||0);return v!==0?v:c2(g,b)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===qh.mapValue&&d===qh.mapValue)return 0;if(c===qh.mapValue)return 1;if(d===qh.mapValue)return-1;const m=c.fields||{},p=Object.keys(m),g=d.fields||{},b=Object.keys(g);p.sort(),b.sort();for(let v=0;v<p.length&&v<b.length;++v){const j=Rg(p[v],b[v]);if(j!==0)return j;const I=lc(m[p[v]],g[b[v]]);if(I!==0)return I}return Ct(p.length,b.length)})(s.mapValue,e.mapValue);default:throw rt(23264,{he:t})}}function l2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ct(s,e);const t=ao(s),a=ao(e),o=Ct(t.seconds,a.seconds);return o!==0?o:Ct(t.nanos,a.nanos)}function c2(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const c=lc(t[o],a[o]);if(c)return c}return Ct(t.length,a.length)}function cc(s){return Ig(s)}function Ig(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=ao(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return io(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Ze.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const c of t.values||[])o?o=!1:a+=",",a+=Ig(c);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of a)c?c=!1:o+=",",o+=`${d}:${Ig(t.fields[d])}`;return o+"}"})(s.mapValue):rt(61005,{value:s})}function uf(s){switch(oo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hm(s);return e?16+uf(e):16;case 5:return 2*s.stringValue.length;case 6:return io(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,c)=>o+uf(c)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return uo(a.fields,((c,d)=>{o+=c.length+uf(d)})),o})(s.mapValue);default:throw rt(13486,{value:s})}}function u2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Dg(s){return!!s&&"integerValue"in s}function Sx(s){return!!s&&"arrayValue"in s}function d2(s){return!!s&&"nullValue"in s}function h2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function df(s){return!!s&&"mapValue"in s}function ND(s){return(s?.mapValue?.fields||{})[dj]?.stringValue===hj}function Iu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return uo(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Iu(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iu(s.arrayValue.values[t]);return e}return{...s}}function _D(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===wD}class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!df(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(t)}setAll(e){let t=on.emptyPath(),a={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,a,o),a={},o=[],t=m.popLast()}d?a[m.lastSegment()]=Iu(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,a,o)}delete(e){const t=this.field(e.popLast());df(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];df(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){uo(t,((o,c)=>e[o]=c));for(const o of a)delete e[o]}clone(){return new zn(Iu(this.value))}}function fj(s){const e=[];return uo(s.fields,((t,a)=>{const o=new on([t]);if(df(a)){const c=fj(a.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new pr(e)}class an{constructor(e,t,a,o,c,d,m){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new an(e,0,it.min(),it.min(),it.min(),zn.empty(),0)}static newFoundDocument(e,t,a,o){return new an(e,1,t,it.min(),a,o,0)}static newNoDocument(e,t){return new an(e,2,t,it.min(),it.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new an(e,3,t,it.min(),it.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Pf{constructor(e,t){this.position=e,this.inclusive=t}}function f2(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const c=e[o],d=s.position[o];if(c.field.isKeyField()?a=Ze.comparator(Ze.fromName(d.referenceValue),t.key):a=lc(d,t.data.field(c.field)),c.dir==="desc"&&(a*=-1),a!==0)break}return a}function m2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Aa(s.position[t],e.position[t]))return!1;return!0}class Yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function jD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class mj{}class Ys extends mj{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new SD(e,t,a):t==="array-contains"?new AD(e,a):t==="in"?new CD(e,a):t==="not-in"?new RD(e,a):t==="array-contains-any"?new ID(e,a):new Ys(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new TD(e,a):new kD(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(lc(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(lc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends mj{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zr(e,t)}matches(e){return pj(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pj(s){return s.op==="and"}function gj(s){return ED(s)&&pj(s)}function ED(s){for(const e of s.filters)if(e instanceof Zr)return!1;return!0}function Mg(s){if(s instanceof Ys)return s.field.canonicalString()+s.op.toString()+cc(s.value);if(gj(s))return s.filters.map((e=>Mg(e))).join(",");{const e=s.filters.map((t=>Mg(t))).join(",");return`${s.op}(${e})`}}function xj(s,e){return s instanceof Ys?(function(a,o){return o instanceof Ys&&a.op===o.op&&a.field.isEqual(o.field)&&Aa(a.value,o.value)})(s,e):s instanceof Zr?(function(a,o){return o instanceof Zr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((c,d,m)=>c&&xj(d,o.filters[m])),!0):!1})(s,e):void rt(19439)}function bj(s){return s instanceof Ys?(function(t){return`${t.field.canonicalString()} ${t.op} ${cc(t.value)}`})(s):s instanceof Zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(bj).join(" ,")+"}"})(s):"Filter"}class SD extends Ys{constructor(e,t,a){super(e,t,a),this.key=Ze.fromName(a.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class TD extends Ys{constructor(e,t){super(e,"in",t),this.keys=yj("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class kD extends Ys{constructor(e,t){super(e,"not-in",t),this.keys=yj("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yj(s,e){return(e.arrayValue?.values||[]).map((t=>Ze.fromName(t.referenceValue)))}class AD extends Ys{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sx(t)&&Qu(t.arrayValue,this.value)}}class CD extends Ys{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}}class RD extends Ys{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Qu(this.value.arrayValue,t)}}class ID extends Ys{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sx(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Qu(this.value.arrayValue,a)))}}class DD{constructor(e,t=null,a=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function p2(s,e=null,t=[],a=[],o=null,c=null,d=null){return new DD(s,e,t,a,o,c,d)}function Tx(s){const e=dt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Mg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(c){return c.field.canonicalString()+c.dir})(a))).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>cc(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>cc(a))).join(",")),e.Te=t}return e.Te}function kx(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!jD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!xj(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!m2(s.startAt,e.startAt)&&m2(s.endAt,e.endAt)}function Og(s){return Ze.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class vc{constructor(e,t=null,a=[],o=[],c=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MD(s,e,t,a,o,c,d,m){return new vc(s,e,t,a,o,c,d,m)}function fm(s){return new vc(s)}function g2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function vj(s){return s.collectionGroup!==null}function Du(s){const e=dt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new tn(on.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Yu(c,a))})),t.has(on.keyField().canonicalString())||e.Ie.push(new Yu(on.keyField(),a))}return e.Ie}function Sa(s){const e=dt(s);return e.Ee||(e.Ee=OD(e,Du(s))),e.Ee}function OD(s,e){if(s.limitType==="F")return p2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Yu(o.field,c)}));const t=s.endAt?new Pf(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Pf(s.startAt.position,s.startAt.inclusive):null;return p2(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function Pg(s,e){const t=s.filters.concat([e]);return new vc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Lf(s,e,t){return new vc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function mm(s,e){return kx(Sa(s),Sa(e))&&s.limitType===e.limitType}function wj(s){return`${Tx(Sa(s))}|lt:${s.limitType}`}function Xl(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>bj(o))).join(", ")}]`),hd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>cc(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>cc(o))).join(",")),`Target(${a})`})(Sa(s))}; limitType=${s.limitType})`}function pm(s,e){return e.isFoundDocument()&&(function(a,o){const c=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(c):Ze.isDocumentKey(a.path)?a.path.isEqual(c):a.path.isImmediateParentOf(c)})(s,e)&&(function(a,o){for(const c of Du(a))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const c of a.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,m,p){const g=f2(d,m,p);return d.inclusive?g<=0:g<0})(a.startAt,Du(a),o)||a.endAt&&!(function(d,m,p){const g=f2(d,m,p);return d.inclusive?g>=0:g>0})(a.endAt,Du(a),o))})(s,e)}function PD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Nj(s){return(e,t)=>{let a=!1;for(const o of Du(s)){const c=LD(o,e,t);if(c!==0)return c;a=a||o.field.isKeyField()}return 0}}function LD(s,e,t){const a=s.field.isKeyField()?Ze.comparator(e.key,t.key):(function(c,d,m){const p=d.data.field(c),g=m.data.field(c);return p!==null&&g!==null?lc(p,g):rt(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return rt(19790,{direction:s.dir})}}class ol{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,c]of a)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,((t,a)=>{for(const[o,c]of a)e(o,c)}))}isEmpty(){return aj(this.inner)}size(){return this.innerSize}}const zD=new Ns(Ze.comparator);function mi(){return zD}const _j=new Ns(Ze.comparator);function yu(...s){let e=_j;for(const t of s)e=e.insert(t.key,t);return e}function jj(s){let e=_j;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Qo(){return Mu()}function Ej(){return Mu()}function Mu(){return new ol((s=>s.toString()),((s,e)=>s.isEqual(e)))}const VD=new Ns(Ze.comparator),UD=new tn(Ze.comparator);function Rt(...s){let e=UD;for(const t of s)e=e.add(t);return e}const BD=new tn(Ct);function $D(){return BD}function Ax(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Df(e)?"-0":e}}function Sj(s){return{integerValue:""+s}}function Tj(s,e){return gD(e)?Sj(e):Ax(s,e)}class gm{constructor(){this._=void 0}}function FD(s,e,t){return s instanceof Xu?(function(o,c){const d={fields:{[lj]:{stringValue:oj},[uj]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Ex(c)&&(c=hm(c)),c&&(d.fields[cj]=c),{mapValue:d}})(t,e):s instanceof Wu?Aj(s,e):s instanceof Ju?Cj(s,e):(function(o,c){const d=kj(o,c),m=x2(d)+x2(o.Ae);return Dg(d)&&Dg(o.Ae)?Sj(m):Ax(o.serializer,m)})(s,e)}function HD(s,e,t){return s instanceof Wu?Aj(s,e):s instanceof Ju?Cj(s,e):t}function kj(s,e){return s instanceof Zu?(function(a){return Dg(a)||(function(c){return!!c&&"doubleValue"in c})(a)})(e)?e:{integerValue:0}:null}class Xu extends gm{}class Wu extends gm{constructor(e){super(),this.elements=e}}function Aj(s,e){const t=Rj(e);for(const a of s.elements)t.some((o=>Aa(o,a)))||t.push(a);return{arrayValue:{values:t}}}class Ju extends gm{constructor(e){super(),this.elements=e}}function Cj(s,e){let t=Rj(e);for(const a of s.elements)t=t.filter((o=>!Aa(o,a)));return{arrayValue:{values:t}}}class Zu extends gm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function x2(s){return Ls(s.integerValue||s.doubleValue)}function Rj(s){return Sx(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Ij{constructor(e,t){this.field=e,this.transform=t}}function qD(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Wu&&o instanceof Wu||a instanceof Ju&&o instanceof Ju?ic(a.elements,o.elements,Aa):a instanceof Zu&&o instanceof Zu?Aa(a.Ae,o.Ae):a instanceof Xu&&o instanceof Xu})(s.transform,e.transform)}class GD{constructor(e,t){this.version=e,this.transformResults=t}}class pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class xm{}function Dj(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new bm(s.key,pn.none()):new fd(s.key,s.data,pn.none());{const t=s.data,a=zn.empty();let o=new tn(on.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?a.delete(c):a.set(c,d),o=o.add(c)}return new ho(s.key,a,new pr(o.toArray()),pn.none())}}function KD(s,e,t){s instanceof fd?(function(o,c,d){const m=o.value.clone(),p=y2(o.fieldTransforms,c,d.transformResults);m.setAll(p),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,t):s instanceof ho?(function(o,c,d){if(!hf(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=y2(o.fieldTransforms,c,d.transformResults),p=c.data;p.setAll(Mj(o)),p.setAll(m),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Ou(s,e,t,a){return s instanceof fd?(function(c,d,m,p){if(!hf(c.precondition,d))return m;const g=c.value.clone(),b=v2(c.fieldTransforms,p,d);return g.setAll(b),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(s,e,t,a):s instanceof ho?(function(c,d,m,p){if(!hf(c.precondition,d))return m;const g=v2(c.fieldTransforms,p,d),b=d.data;return b.setAll(Mj(c)),b.setAll(g),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((v=>v.field)))})(s,e,t,a):(function(c,d,m){return hf(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,t)}function QD(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),c=kj(a.transform,o||null);c!=null&&(t===null&&(t=zn.empty()),t.set(a.field,c))}return t||null}function b2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&ic(a,o,((c,d)=>qD(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fd extends xm{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ho extends xm{constructor(e,t,a,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Mj(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function y2(s,e,t){const a=new Map;Ot(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const c=s[o],d=c.transform,m=e.data.field(c.field);a.set(c.field,HD(d,m,t[o]))}return a}function v2(s,e,t){const a=new Map;for(const o of s){const c=o.transform,d=t.data.field(o.field);a.set(o.field,FD(c,d,e))}return a}class bm extends xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Oj extends xm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YD{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&KD(c,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Ou(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Ou(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Ej();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const p=Dj(d,m);p!==null&&a.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(it.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Rt())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,((t,a)=>b2(t,a)))&&ic(this.baseMutations,e.baseMutations,((t,a)=>b2(t,a)))}}class Cx{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){Ot(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return VD})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,a[d].version);return new Cx(e,t,a,o)}}class XD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WD{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ks,Mt;function Pj(s){switch(s){case we.OK:return rt(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return rt(15467,{code:s})}}function Lj(s){if(s===void 0)return fi("GRPC error has no .code"),we.UNKNOWN;switch(s){case Ks.OK:return we.OK;case Ks.CANCELLED:return we.CANCELLED;case Ks.UNKNOWN:return we.UNKNOWN;case Ks.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Ks.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Ks.INTERNAL:return we.INTERNAL;case Ks.UNAVAILABLE:return we.UNAVAILABLE;case Ks.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Ks.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Ks.NOT_FOUND:return we.NOT_FOUND;case Ks.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Ks.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Ks.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Ks.ABORTED:return we.ABORTED;case Ks.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Ks.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Ks.DATA_LOSS:return we.DATA_LOSS;default:return rt(39323,{code:s})}}(Mt=Ks||(Ks={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";function JD(){return new TextEncoder}const ZD=new to([4294967295,4294967295],0);function w2(s){const e=JD().encode(s),t=new G_;return t.update(e),new Uint8Array(t.digest())}function N2(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new to([t,a],0),new to([o,c],0)]}class Rx{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(a<0)throw new vu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=to.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(to.fromNumber(a)));return o.compare(ZD)===1&&(o=new to([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=w2(e),[a,o]=N2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,o,c);if(!this.we(d))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Rx(c,o,t);return a.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=w2(e),[a,o]=N2(t);for(let c=0;c<this.hashCount;c++){const d=this.ye(a,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ym{constructor(e,t,a,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,md.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new ym(it.min(),o,new Ns(Ct),mi(),Rt())}}class md{constructor(e,t,a,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new md(a,t,Rt(),Rt(),Rt())}}class ff{constructor(e,t,a,o){this.be=e,this.removedTargetIds=t,this.key=a,this.De=o}}class zj{constructor(e,t){this.targetId=e,this.Ce=t}}class Vj{constructor(e,t,a=ln.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class _2{constructor(){this.ve=0,this.Fe=j2(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Rt(),t=Rt(),a=Rt();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:rt(38017,{changeType:c})}})),new md(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=j2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ot(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eM{constructor(e){this.Ge=e,this.ze=new Map,this.je=mi(),this.Je=Gh(),this.He=Gh(),this.Ye=new Ns(Ct)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(Og(c))if(a===0){const d=new Ze(c.path);this.et(t,d,an.newNoDocument(d,it.min()))}else Ot(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=io(a).toUint8Array()}catch(p){if(p instanceof ij)return nl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Rx(d,o,c)}catch(p){return nl(p instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(t,c,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&Og(m.target)){const p=new Ze(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,an.newNoDocument(p,e))}c.Be&&(t.set(d,c.ke()),c.qe())}}));let a=Rt();this.He.forEach(((c,d)=>{let m=!0;d.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new ym(e,t,this.Ye,this.je,a);return this.je=mi(),this.Je=Gh(),this.He=Gh(),this.Ye=new Ns(Ct),o}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _2,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tn(Ct),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tn(Ct),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gh(){return new Ns(Ze.comparator)}function j2(){return new Ns(Ze.comparator)}const tM={asc:"ASCENDING",desc:"DESCENDING"},sM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nM={and:"AND",or:"OR"};class rM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lg(s,e){return s.useProto3Json||hd(e)?e:{value:e}}function zf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uj(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function aM(s,e){return zf(s,e.toTimestamp())}function xr(s){return Ot(!!s,49232),it.fromTimestamp((function(t){const a=ao(t);return new us(a.seconds,a.nanos)})(s))}function Ix(s,e){return zg(s,e).canonicalString()}function zg(s,e){const t=(function(o){return new ss(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Bj(s){const e=ss.fromString(s);return Ot(Kj(e),10190,{key:e.toString()}),e}function Vf(s,e){return Ix(s.databaseId,e.path)}function Pu(s,e){const t=Bj(e);if(t.get(1)!==s.databaseId.projectId)throw new Pe(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Pe(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Ze(Fj(t))}function $j(s,e){return Ix(s.databaseId,e)}function iM(s){const e=Bj(s);return e.length===4?ss.emptyPath():Fj(e)}function Vg(s){return new ss(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Fj(s){return Ot(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function E2(s,e,t){return{name:Vf(s,e),fields:t.value.mapValue.fields}}function oM(s,e){return"found"in e?(function(a,o){Ot(!!o.found,43571),o.found.name,o.found.updateTime;const c=Pu(a,o.found.name),d=xr(o.found.updateTime),m=o.found.createTime?xr(o.found.createTime):it.min(),p=new zn({mapValue:{fields:o.found.fields}});return an.newFoundDocument(c,d,m,p)})(s,e):"missing"in e?(function(a,o){Ot(!!o.missing,3894),Ot(!!o.readTime,22933);const c=Pu(a,o.missing),d=xr(o.readTime);return an.newNoDocument(c,d)})(s,e):rt(7234,{result:e})}function lM(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:rt(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(g,b){return g.useProto3Json?(Ot(b===void 0||typeof b=="string",58123),ln.fromBase64String(b||"")):(Ot(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),ln.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(g){const b=g.code===void 0?we.UNKNOWN:Lj(g.code);return new Pe(b,g.message||"")})(d);t=new Vj(a,o,c,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Pu(s,a.document.name),c=xr(a.document.updateTime),d=a.document.createTime?xr(a.document.createTime):it.min(),m=new zn({mapValue:{fields:a.document.fields}}),p=an.newFoundDocument(o,c,d,m),g=a.targetIds||[],b=a.removedTargetIds||[];t=new ff(g,b,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Pu(s,a.document),c=a.readTime?xr(a.readTime):it.min(),d=an.newNoDocument(o,c),m=a.removedTargetIds||[];t=new ff([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Pu(s,a.document),c=a.removedTargetIds||[];t=new ff([],c,o,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:c}=a,d=new WD(o,c),m=a.targetId;t=new zj(m,d)}}return t}function Hj(s,e){let t;if(e instanceof fd)t={update:E2(s,e.key,e.value)};else if(e instanceof bm)t={delete:Vf(s,e.key)};else if(e instanceof ho)t={update:E2(s,e.key,e.data),updateMask:xM(e.fieldMask)};else{if(!(e instanceof Oj))return rt(16599,{Vt:e.type});t={verify:Vf(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(c,d){const m=d.transform;if(m instanceof Xu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Wu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ju)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Zu)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw rt(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:aM(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:rt(27497)})(s,e.precondition)),t}function cM(s,e){return s&&s.length>0?(Ot(e!==void 0,14353),s.map((t=>(function(o,c){let d=o.updateTime?xr(o.updateTime):xr(c);return d.isEqual(it.min())&&(d=xr(c)),new GD(d,o.transformResults||[])})(t,e)))):[]}function uM(s,e){return{documents:[$j(s,e.path)]}}function dM(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=$j(s,o);const c=(function(g){if(g.length!==0)return Gj(Zr.create(g,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((b=>(function(j){return{field:Wl(j.field),direction:mM(j.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Lg(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function hM(s){let e=iM(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){Ot(a===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let c=[];t.where&&(c=(function(v){const j=qj(v);return j instanceof Zr&&gj(j)?j.getFilters():[j]})(t.where));let d=[];t.orderBy&&(d=(function(v){return v.map((j=>(function(B){return new Yu(Jl(B.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(j)))})(t.orderBy));let m=null;t.limit&&(m=(function(v){let j;return j=typeof v=="object"?v.value:v,hd(j)?null:j})(t.limit));let p=null;t.startAt&&(p=(function(v){const j=!!v.before,I=v.values||[];return new Pf(I,j)})(t.startAt));let g=null;return t.endAt&&(g=(function(v){const j=!v.before,I=v.values||[];return new Pf(I,j)})(t.endAt)),MD(e,o,d,c,m,"F",p,g)}function fM(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qj(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Jl(t.unaryFilter.field);return Ys.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Jl(t.unaryFilter.field);return Ys.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Jl(t.unaryFilter.field);return Ys.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Jl(t.unaryFilter.field);return Ys.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ys.create(Jl(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Zr.create(t.compositeFilter.filters.map((a=>qj(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return rt(1026)}})(t.compositeFilter.op))})(s):rt(30097,{filter:s})}function mM(s){return tM[s]}function pM(s){return sM[s]}function gM(s){return nM[s]}function Wl(s){return{fieldPath:s.canonicalString()}}function Jl(s){return on.fromServerFormat(s.fieldPath)}function Gj(s){return s instanceof Ys?(function(t){if(t.op==="=="){if(h2(t.value))return{unaryFilter:{field:Wl(t.field),op:"IS_NAN"}};if(d2(t.value))return{unaryFilter:{field:Wl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(h2(t.value))return{unaryFilter:{field:Wl(t.field),op:"IS_NOT_NAN"}};if(d2(t.value))return{unaryFilter:{field:Wl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(t.field),op:pM(t.op),value:t.value}}})(s):s instanceof Zr?(function(t){const a=t.getFilters().map((o=>Gj(o)));return a.length===1?a[0]:{compositeFilter:{op:gM(t.op),filters:a}}})(s):rt(54877,{filter:s})}function xM(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Kj(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Wi{constructor(e,t,a,o,c=it.min(),d=it.min(),m=ln.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bM{constructor(e){this.yt=e}}function yM(s){const e=hM({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Lf(e,e.limit,"L"):e}class vM{constructor(){this.Cn=new wM}addToCollectionParentIndex(e,t){return this.Cn.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(ro.min())}updateCollectionGroup(e,t,a){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class wM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new tn(ss.comparator),c=!o.has(a);return this.index[t]=o.add(a),c}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new tn(ss.comparator)).toArray()}}const S2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qj=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(Qj,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);class uc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new uc(0)}static cr(){return new uc(-1)}}const T2="LruGarbageCollector",NM=1048576;function k2([s,e],[t,a]){const o=Ct(s,t);return o===0?Ct(e,a):o}class _M{constructor(e){this.Ir=e,this.buffer=new tn(k2),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();k2(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ge(T2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yc(t)?Ge(T2,"Ignoring IndexedDB error during garbage collection: ",t):await bc(t)}await this.Vr(3e5)}))}}class EM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ke.resolve(dm.ce);const a=new _M(t);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(S2)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S2):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,o,c,d,m,p,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),o=this.params.maximumSequenceNumbersToCollect):o=v,d=Date.now(),this.nthSequenceNumber(e,o)))).next((v=>(a=v,m=Date.now(),this.removeTargets(e,a,t)))).next((v=>(c=v,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((v=>(g=Date.now(),Yl()<=At.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(p-m)+`ms
	Removed ${v} documents in `+(g-p)+`ms
Total Duration: ${g-b}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:v}))))}}function SM(s,e){return new EM(s,e)}class TM{constructor(){this.changes=new ol((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ke.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class kM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class AM{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&Ou(a.mutation,o,pr.empty(),us.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,Rt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=Rt()){const o=Qo();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((c=>{let d=yu();return c.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=Qo();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,Rt())))}populateOverlays(e,t,a){const o=[];return a.forEach((c=>{t.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,a,o){let c=mi();const d=Mu(),m=(function(){return Mu()})();return t.forEach(((p,g)=>{const b=a.get(g.key);o.has(g.key)&&(b===void 0||b.mutation instanceof ho)?c=c.insert(g.key,g):b!==void 0?(d.set(g.key,b.mutation.getFieldMask()),Ou(b.mutation,g,b.mutation.getFieldMask(),us.now())):d.set(g.key,pr.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((g,b)=>d.set(g,b))),t.forEach(((g,b)=>m.set(g,new kM(b,d.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,t){const a=Mu();let o=new Ns(((d,m)=>d-m)),c=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let b=a.get(p)||pr.empty();b=m.applyToLocalView(g,b),a.set(p,b);const v=(o.get(m.batchId)||Rt()).add(p);o=o.insert(m.batchId,v)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,b=p.value,v=Ej();b.forEach((j=>{if(!c.has(j)){const I=Dj(t.get(j),a.get(j));I!==null&&v.set(j,I),c=c.add(j)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,v))}return ke.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return(function(d){return Ze.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-c.size):ke.resolve(Qo());let m=Gu,p=c;return d.next((g=>ke.forEach(g,((b,v)=>(m<v.largestBatchId&&(m=v.largestBatchId),c.get(b)?ke.resolve():this.remoteDocumentCache.getEntry(e,b).next((j=>{p=p.insert(b,j)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,p,g,Rt()))).next((b=>({batchId:m,changes:jj(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next((a=>{let o=yu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const c=t.collectionGroup;let d=yu();return this.indexManager.getCollectionParents(e,c).next((m=>ke.forEach(m,(p=>{const g=(function(v,j){return new vc(j,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,a,o).next((b=>{b.forEach(((v,j)=>{d=d.insert(v,j)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c,o)))).next((d=>{c.forEach(((p,g)=>{const b=g.getKey();d.get(b)===null&&(d=d.insert(b,an.newInvalidDocument(b)))}));let m=yu();return d.forEach(((p,g)=>{const b=c.get(p);b!==void 0&&Ou(b.mutation,g,pr.empty(),us.now()),pm(t,g)&&(m=m.insert(p,g))})),m}))}}class CM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ke.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:xr(o.createTime)}})(t)),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:yM(o.bundledQuery),readTime:xr(o.readTime)}})(t)),ke.resolve()}}class RM{constructor(){this.overlays=new Ns(Ze.comparator),this.qr=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Qo();return ke.forEach(t,(o=>this.getOverlay(e,o).next((c=>{c!==null&&a.set(o,c)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,c)=>{this.St(e,t,c)})),ke.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(a)),ke.resolve()}getOverlaysForCollection(e,t,a){const o=Qo(),c=t.length+1,d=new Ze(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===c&&p.largestBatchId>a&&o.set(p.getKey(),p)}return ke.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let c=new Ns(((g,b)=>g-b));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let b=c.get(g.largestBatchId);b===null&&(b=Qo(),c=c.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const m=Qo(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,b)=>m.set(g,b))),!(m.size()>=o)););return ke.resolve(m)}St(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new XD(t,a));let c=this.qr.get(t);c===void 0&&(c=Rt(),this.qr.set(t,c)),this.qr.set(t,c.add(a.key))}}class IM{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ke.resolve()}}class Dx{constructor(){this.Qr=new tn(rn.$r),this.Ur=new tn(rn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new rn(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new rn(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new Ze(new ss([])),a=new rn(t,e),o=new rn(t,e+1),c=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ze(new ss([])),a=new rn(t,e),o=new rn(t,e+1);let c=Rt();return this.Ur.forEachInRange([a,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const t=new rn(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class rn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ze.comparator(e.key,t.key)||Ct(e.Yr,t.Yr)}static Kr(e,t){return Ct(e.Yr,t.Yr)||Ze.comparator(e.key,t.key)}}class DM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tn(rn.$r)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new YD(c,t,a,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new rn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ke.resolve(d)}lookupMutationBatch(e,t){return ke.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.ei(a),c=o<0?0:o;return ke.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?jx:this.tr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new rn(t,0),o=new rn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([a,o],(d=>{const m=this.Xr(d.Yr);c.push(m)})),ke.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new tn(Ct);return t.forEach((o=>{const c=new rn(o,0),d=new rn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(m=>{a=a.add(m.Yr)}))})),ke.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let c=a;Ze.isDocumentKey(c)||(c=c.child(""));const d=new rn(new Ze(c),0);let m=new tn(Ct);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Yr)),!0)}),d),ke.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ot(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ke.forEach(t.mutations,(o=>{const c=new rn(o.key,t.batchId);return a=a.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new rn(t,0),o=this.Zr.firstAfterOrEqual(a);return ke.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MM{constructor(e){this.ri=e,this.docs=(function(){return new Ns(Ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),c=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ke.resolve(a?a.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let a=mi();return t.forEach((o=>{const c=this.docs.get(o);a=a.insert(o,c?c.document.mutableCopy():an.newInvalidDocument(o))})),ke.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let c=mi();const d=t.path,m=new Ze(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:b}}=p.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||hD(dD(b),a)<=0||(o.has(b.key)||pm(t,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ke.resolve(c)}getAllFromCollectionGroup(e,t,a,o){rt(9500)}ii(e,t){return ke.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new OM(this)}getSize(e){return ke.resolve(this.size)}}class OM extends TM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ke.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class PM{constructor(e){this.persistence=e,this.si=new ol((t=>Tx(t)),kx),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new Dx,this.targetCount=0,this.ai=uc.ur()}forEachTarget(e,t){return this.si.forEach(((a,o)=>t(o))),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),ke.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Pr(t),ke.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,a){let o=0;const c=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ke.waitFor(c).next((()=>o))}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return ke.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),ke.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),ke.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return ke.resolve(a)}containsKey(e,t){return ke.resolve(this._i.containsKey(t))}}class Yj{constructor(e,t){this.ui={},this.overlays={},this.ci=new dm(0),this.li=!1,this.li=!0,this.hi=new IM,this.referenceDelegate=e(this),this.Pi=new PM(this),this.indexManager=new vM,this.remoteDocumentCache=(function(o){return new MM(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new bM(t),this.Ii=new CM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new DM(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){Ge("MemoryPersistence","Starting transaction:",e);const o=new LM(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,t){return ke.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class LM extends mD{constructor(e){super(),this.currentSequenceNumber=e}}class Mx{constructor(e){this.persistence=e,this.Ri=new Dx,this.Vi=null}static mi(e){return new Mx(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),ke.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.fi,(a=>{const o=Ze.fromPath(a);return this.gi(e,o).next((c=>{c||t.removeEntry(o,it.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ke.or([()=>ke.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Uf{constructor(e,t){this.persistence=e,this.pi=new ol((a=>xD(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=SM(this,t)}static mi(e,t){return new Uf(e,t)}Ei(){}di(e){return ke.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return ke.forEach(this.pi,((a,o)=>this.br(e,a,o).next((c=>c?ke.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(a++,c.removeEntry(d,it.min()))})))).next((()=>c.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ke.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ke.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),ke.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ke.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uf(e.data.value)),t}br(e,t,a){return ke.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ke.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ox{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=o}static As(e,t){let a=Rt(),o=Rt();for(const c of t.docChanges)switch(c.type){case 0:a=a.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ox(e,t.fromCache,a,o)}}class zM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class VM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return OC()?8:pD(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const c={result:null};return this.ys(e,t).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,t,o,a).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new zM;return this.Ss(e,t,d).next((m=>{if(c.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>c.result))}bs(e,t,a,o){return a.documentReadCount<this.fs?(Yl()<=At.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ke.resolve()):(Yl()<=At.DEBUG&&Ge("QueryEngine","Query:",Xl(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Yl()<=At.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sa(t))):ke.resolve())}ys(e,t){if(g2(t))return ke.resolve(null);let a=Sa(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Lf(t,null,"F"),a=Sa(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((c=>{const d=Rt(...c);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.Ds(t,m);return this.Cs(t,g,d,p.readTime)?this.ys(e,Lf(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,a,o){return g2(t)||o.isEqual(it.min())?ke.resolve(null):this.ps.getDocuments(e,a).next((c=>{const d=this.Ds(t,c);return this.Cs(t,d,a,o)?ke.resolve(null):(Yl()<=At.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Xl(t)),this.vs(e,d,t,uD(o,Gu)).next((m=>m)))}))}Ds(e,t){let a=new tn(Nj(e));return t.forEach(((o,c)=>{pm(e,c)&&(a=a.add(c))})),a}Cs(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,a){return Yl()<=At.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Xl(t)),this.ps.getDocumentsMatchingQuery(e,t,ro.min(),a)}vs(e,t,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((c=>(t.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const Px="LocalStore",UM=3e8;class BM{constructor(e,t,a,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ns(Ct),this.xs=new ol((c=>Tx(c)),kx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $M(s,e,t,a){return new BM(s,e,t,a)}async function Xj(s,e){const t=dt(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((c=>{const d=[],m=[];let p=Rt();for(const g of o){d.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}for(const g of c){m.push(g.batchId);for(const b of g.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:m})))}))}))}function FM(s,e){const t=dt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,b){const v=g.batch,j=v.keys();let I=ke.resolve();return j.forEach((B=>{I=I.next((()=>b.getEntry(p,B))).next((O=>{const L=g.docVersions.get(B);Ot(L!==null,48541),O.version.compareTo(L)<0&&(v.applyToRemoteDocument(O,g),O.isValidDocument()&&(O.setReadTime(g.commitVersion),b.addEntry(O)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(p,v)))})(t,a,e,c).next((()=>c.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let p=Rt();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function Wj(s){const e=dt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HM(s,e){const t=dt(s),a=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((b,v)=>{const j=o.get(v);if(!j)return;m.push(t.Pi.removeMatchingKeys(c,b.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(c,b.addedDocuments,v))));let I=j.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(ln.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):b.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(b.resumeToken,a)),o=o.insert(v,I),(function(O,L,se){return O.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=UM?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(j,I,b)&&m.push(t.Pi.updateTargetData(c,I))}));let p=mi(),g=Rt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,b))})),m.push(qM(c,d,e.documentUpdates).next((b=>{p=b.ks,g=b.qs}))),!a.isEqual(it.min())){const b=t.Pi.getLastRemoteSnapshotVersion(c).next((v=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,a)));m.push(b)}return ke.waitFor(m).next((()=>d.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,g))).next((()=>p))})).then((c=>(t.Ms=o,c)))}function qM(s,e,t){let a=Rt(),o=Rt();return t.forEach((c=>a=a.add(c))),e.getEntries(s,a).next((c=>{let d=mi();return t.forEach(((m,p)=>{const g=c.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(it.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):Ge(Px,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function GM(s,e){const t=dt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=jx),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function KM(s,e){const t=dt(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.Pi.getTargetData(a,e).next((c=>c?(o=c,ke.resolve(o)):t.Pi.allocateTargetId(a).next((d=>(o=new Wi(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function Ug(s,e,t){const a=dt(s),o=a.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",c,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!yc(d))throw d;Ge(Px,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function A2(s,e,t){const a=dt(s);let o=it.min(),c=Rt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,g,b){const v=dt(p),j=v.xs.get(b);return j!==void 0?ke.resolve(v.Ms.get(j)):v.Pi.getTargetData(g,b)})(a,d,Sa(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{c=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,t?o:it.min(),t?c:Rt()))).next((m=>(QM(a,PD(e),m),{documents:m,Qs:c})))))}function QM(s,e,t){let a=s.Os.get(e)||it.min();t.forEach(((o,c)=>{c.readTime.compareTo(a)>0&&(a=c.readTime)})),s.Os.set(e,a)}class C2{constructor(){this.activeTargetIds=$D()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YM{constructor(){this.Mo=new C2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new C2,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XM{Oo(e){}shutdown(){}}const R2="ConnectivityMonitor";class I2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ge(R2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ge(R2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kh=null;function Bg(){return Kh===null?Kh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kh++,"0x"+Kh.toString(16)}const J0="RestConnection",WM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Mf?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,t,a,o,c){const d=Bg(),m=this.zo(e,t.toUriEncodedString());Ge(J0,`Sending RPC '${e}' ${d}:`,m,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:g}=new URL(m),b=Ra(g);return this.Jo(e,m,p,a,b).then((v=>(Ge(J0,`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw nl(J0,`RPC '${e}' ${d} failed with error: `,v,"url: ",m,"request:",a),v}))}Ho(e,t,a,o,c,d){return this.Go(e,t,a,o,c)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,c)=>e[c]=o)),a&&a.headers.forEach(((o,c)=>e[c]=o))}zo(e,t){const a=WM[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}class ZM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const En="WebChannelConnection";class eO extends JM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,o,c){const d=Bg();return new Promise(((m,p)=>{const g=new K_;g.setWithCredentials(!0),g.listenOnce(Q_.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case cf.NO_ERROR:const v=g.getResponseJson();Ge(En,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(v)),m(v);break;case cf.TIMEOUT:Ge(En,`RPC '${e}' ${d} timed out`),p(new Pe(we.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const j=g.getStatus();if(Ge(En,`RPC '${e}' ${d} failed with status:`,j,"response text:",g.getResponseText()),j>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const B=I?.error;if(B&&B.status&&B.message){const O=(function(se){const W=se.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(W)>=0?W:we.UNKNOWN})(B.status);p(new Pe(O,B.message))}else p(new Pe(we.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Pe(we.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ge(En,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);Ge(En,`RPC '${e}' ${d} sending request:`,o),g.send(t,"POST",b,a,15)}))}T_(e,t,a){const o=Bg(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=W_(),m=X_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,a),p.encodeInitMessageHeaders=!0;const b=c.join("");Ge(En,`Creating RPC '${e}' stream ${o}: ${b}`,p);const v=d.createWebChannel(b,p);this.I_(v);let j=!1,I=!1;const B=new ZM({Yo:L=>{I?Ge(En,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(j||(Ge(En,`Opening RPC '${e}' stream ${o} transport.`),v.open(),j=!0),Ge(En,`RPC '${e}' stream ${o} sending:`,L),v.send(L))},Zo:()=>v.close()}),O=(L,se,W)=>{L.listen(se,(re=>{try{W(re)}catch(me){setTimeout((()=>{throw me}),0)}}))};return O(v,bu.EventType.OPEN,(()=>{I||(Ge(En,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),O(v,bu.EventType.CLOSE,(()=>{I||(I=!0,Ge(En,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(v))})),O(v,bu.EventType.ERROR,(L=>{I||(I=!0,nl(En,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),B.a_(new Pe(we.UNAVAILABLE,"The operation could not be completed")))})),O(v,bu.EventType.MESSAGE,(L=>{if(!I){const se=L.data[0];Ot(!!se,16349);const W=se,re=W?.error||W[0]?.error;if(re){Ge(En,`RPC '${e}' stream ${o} received error:`,re);const me=re.status;let xe=(function(T){const A=Ks[T];if(A!==void 0)return Lj(A)})(me),Te=re.message;xe===void 0&&(xe=we.INTERNAL,Te="Unknown error status: "+me+" with message "+re.message),I=!0,B.a_(new Pe(xe,Te)),v.close()}else Ge(En,`RPC '${e}' stream ${o} received:`,se),B.u_(se)}})),O(m,Y_.STAT_EVENT,(L=>{L.stat===Cg.PROXY?Ge(En,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===Cg.NOPROXY&&Ge(En,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Z0(){return typeof document<"u"?document:null}function vm(s){return new rM(s,!0)}class Lx{constructor(e,t,a=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&Ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const D2="PersistentStream";class Jj{constructor(e,t,a,o,c,d,m,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new Pe(we.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(D2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ge(D2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tO extends Jj{constructor(e,t,a,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,d),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lM(this.serializer,e),a=(function(c){if(!("targetChange"in c))return it.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?it.min():d.readTime?xr(d.readTime):it.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=Vg(this.serializer),t.addTarget=(function(c,d){let m;const p=d.target;if(m=Og(p)?{documents:uM(c,p)}:{query:dM(c,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Uj(c,d.resumeToken);const g=Lg(c,d.expectedCount);g!==null&&(m.expectedCount=g)}else if(d.snapshotVersion.compareTo(it.min())>0){m.readTime=zf(c,d.snapshotVersion.toTimestamp());const g=Lg(c,d.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const a=fM(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=Vg(this.serializer),t.removeTarget=e,this.q_(t)}}class sO extends Jj{constructor(e,t,a,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=cM(e.writeResults,e.commitTime),a=xr(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Vg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>Hj(this.serializer,a)))};this.q_(t)}}class nO{}class rO extends nO{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Pe(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,zg(t,a),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Pe(we.UNKNOWN,c.toString())}))}Ho(e,t,a,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,zg(t,a),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Pe(we.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(t),this.aa=!1):Ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const rl="RemoteStore";class iO{constructor(e,t,a,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{ll(this)&&(Ge(rl,"Restarting streams for network reachability change."),await(async function(p){const g=dt(p);g.Ea.add(4),await pd(g),g.Ra.set("Unknown"),g.Ea.delete(4),await wm(g)})(this))}))})),this.Ra=new aO(a,o)}}async function wm(s){if(ll(s))for(const e of s.da)await e(!0)}async function pd(s){for(const e of s.da)await e(!1)}function Zj(s,e){const t=dt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bx(t)?Ux(t):wc(t).O_()&&Vx(t,e))}function zx(s,e){const t=dt(s),a=wc(t);t.Ia.delete(e),a.O_()&&eE(t,e),t.Ia.size===0&&(a.O_()?a.L_():ll(t)&&t.Ra.set("Unknown"))}function Vx(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(it.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wc(s).Y_(e)}function eE(s,e){s.Va.Ue(e),wc(s).Z_(e)}function Ux(s){s.Va=new eM({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),wc(s).start(),s.Ra.ua()}function Bx(s){return ll(s)&&!wc(s).x_()&&s.Ia.size>0}function ll(s){return dt(s).Ea.size===0}function tE(s){s.Va=void 0}async function oO(s){s.Ra.set("Online")}async function lO(s){s.Ia.forEach(((e,t)=>{Vx(s,e)}))}async function cO(s,e){tE(s),Bx(s)?(s.Ra.ha(e),Ux(s)):s.Ra.set("Unknown")}async function uO(s,e,t){if(s.Ra.set("Online"),e instanceof Vj&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(a){Ge(rl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Bf(s,a)}else if(e instanceof ff?s.Va.Ze(e):e instanceof zj?s.Va.st(e):s.Va.tt(e),!t.isEqual(it.min()))try{const a=await Wj(s.localStore);t.compareTo(a)>=0&&await(function(c,d){const m=c.Va.Tt(d);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const b=c.Ia.get(g);b&&c.Ia.set(g,b.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,g)=>{const b=c.Ia.get(p);if(!b)return;c.Ia.set(p,b.withResumeToken(ln.EMPTY_BYTE_STRING,b.snapshotVersion)),eE(c,p);const v=new Wi(b.target,p,g,b.sequenceNumber);Vx(c,v)})),c.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(a){Ge(rl,"Failed to raise snapshot:",a),await Bf(s,a)}}async function Bf(s,e,t){if(!yc(e))throw e;s.Ea.add(1),await pd(s),s.Ra.set("Offline"),t||(t=()=>Wj(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ge(rl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await wm(s)}))}function sE(s,e){return e().catch((t=>Bf(s,t,e)))}async function Nm(s){const e=dt(s),t=lo(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jx;for(;dO(e);)try{const o=await GM(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,hO(e,o)}catch(o){await Bf(e,o)}nE(e)&&rE(e)}function dO(s){return ll(s)&&s.Ta.length<10}function hO(s,e){s.Ta.push(e);const t=lo(s);t.O_()&&t.X_&&t.ea(e.mutations)}function nE(s){return ll(s)&&!lo(s).x_()&&s.Ta.length>0}function rE(s){lo(s).start()}async function fO(s){lo(s).ra()}async function mO(s){const e=lo(s);for(const t of s.Ta)e.ea(t.mutations)}async function pO(s,e,t){const a=s.Ta.shift(),o=Cx.from(a,e,t);await sE(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Nm(s)}async function gO(s,e){e&&lo(s).X_&&await(async function(a,o){if((function(d){return Pj(d)&&d!==we.ABORTED})(o.code)){const c=a.Ta.shift();lo(a).B_(),await sE(a,(()=>a.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Nm(a)}})(s,e),nE(s)&&rE(s)}async function M2(s,e){const t=dt(s);t.asyncQueue.verifyOperationInProgress(),Ge(rl,"RemoteStore received new credentials");const a=ll(t);t.Ea.add(3),await pd(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wm(t)}async function xO(s,e){const t=dt(s);e?(t.Ea.delete(2),await wm(t)):e||(t.Ea.add(2),await pd(t),t.Ra.set("Unknown"))}function wc(s){return s.ma||(s.ma=(function(t,a,o){const c=dt(t);return c.sa(),new tO(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:oO.bind(null,s),t_:lO.bind(null,s),r_:cO.bind(null,s),H_:uO.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Bx(s)?Ux(s):s.Ra.set("Unknown")):(await s.ma.stop(),tE(s))}))),s.ma}function lo(s){return s.fa||(s.fa=(function(t,a,o){const c=dt(t);return c.sa(),new sO(a,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:fO.bind(null,s),r_:gO.bind(null,s),ta:mO.bind(null,s),na:pO.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Nm(s)):(await s.fa.stop(),s.Ta.length>0&&(Ge(rl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class $x{constructor(e,t,a,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,c){const d=Date.now()+a,m=new $x(e,t,d,o,c);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pe(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fx(s,e){if(fi("AsyncQueue",`${e}: ${s}`),yc(s))return new Pe(we.UNAVAILABLE,`${e}: ${s}`);throw s}class sc{static emptySet(e){return new sc(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ze.comparator(t.key,a.key):(t,a)=>Ze.comparator(t.key,a.key),this.keyedMap=yu(),this.sortedSet=new Ns(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=a.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new sc;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class O2{constructor(){this.ga=new Ns(Ze.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class dc{constructor(e,t,a,o,c,d,m,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,o,c){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new dc(e,t,sc.emptySet(t),d,a,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}class bO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class yO{constructor(){this.queries=P2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=dt(t),c=o.queries;o.queries=P2(),c.forEach(((d,m)=>{for(const p of m.Sa)p.onError(a)}))})(this,new Pe(we.ABORTED,"Firestore shutting down"))}}function P2(){return new ol((s=>wj(s)),mm)}async function Hx(s,e){const t=dt(s);let a=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(a=2):(c=new bO,a=e.Da()?0:1);try{switch(a){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Fx(d,`Initialization of query '${Xl(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Gx(t)}async function qx(s,e){const t=dt(s),a=e.query;let o=3;const c=t.queries.get(a);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function vO(s,e){const t=dt(s);let a=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Fa(o)&&(a=!0);d.wa=o}}a&&Gx(t)}function wO(s,e,t){const a=dt(s),o=a.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);a.queries.delete(e)}function Gx(s){s.Ca.forEach((e=>{e.next()}))}var $g,L2;(L2=$g||($g={})).Ma="default",L2.Cache="cache";class Kx{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new dc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$g.Cache}}class aE{constructor(e){this.key=e}}class iE{constructor(e){this.key=e}}class NO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Rt(),this.mutatedKeys=Rt(),this.eu=Nj(e),this.tu=new sc(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new O2,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,v)=>{const j=o.get(b),I=pm(this.query,v)?v:null,B=!!j&&this.mutatedKeys.has(j.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let L=!1;j&&I?j.data.isEqual(I.data)?B!==O&&(a.track({type:3,doc:I}),L=!0):this.su(j,I)||(a.track({type:2,doc:I}),L=!0,(p&&this.eu(I,p)>0||g&&this.eu(I,g)<0)&&(m=!0)):!j&&I?(a.track({type:0,doc:I}),L=!0):j&&!I&&(a.track({type:1,doc:j}),L=!0,(p||g)&&(m=!0)),L&&(I?(d=d.add(I),c=O?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),a.track({type:1,doc:b})}return{tu:d,iu:a,Cs:m,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,v)=>(function(I,B){const O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:L})}};return O(I)-O(B)})(b.type,v.type)||this.eu(b.doc,v.doc))),this.ou(a),o=o??!1;const m=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,d.length!==0||g?{snapshot:new dc(this.query,e.tu,c,d,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Rt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new iE(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new aE(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=Rt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qx="SyncEngine";class _O{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class jO{constructor(e){this.key=e,this.hu=!1}}class EO{constructor(e,t,a,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ol((m=>wj(m)),mm),this.Iu=new Map,this.Eu=new Set,this.du=new Ns(Ze.comparator),this.Au=new Map,this.Ru=new Dx,this.Vu={},this.mu=new Map,this.fu=uc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SO(s,e,t=!0){const a=hE(s);let o;const c=a.Tu.get(e);return c?(a.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await oE(a,e,t,!0),o}async function TO(s,e){const t=hE(s);await oE(t,e,!0,!1)}async function oE(s,e,t,a){const o=await KM(s.localStore,Sa(e)),c=o.targetId,d=s.sharedClientState.addLocalQueryTarget(c,t);let m;return a&&(m=await kO(s,e,c,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&Zj(s.remoteStore,o),m}async function kO(s,e,t,a,o){s.pu=(v,j,I)=>(async function(O,L,se,W){let re=L.view.ru(se);re.Cs&&(re=await A2(O.localStore,L.query,!1).then((({documents:D})=>L.view.ru(D,re))));const me=W&&W.targetChanges.get(L.targetId),xe=W&&W.targetMismatches.get(L.targetId)!=null,Te=L.view.applyChanges(re,O.isPrimaryClient,me,xe);return V2(O,L.targetId,Te.au),Te.snapshot})(s,v,j,I);const c=await A2(s.localStore,e,!0),d=new NO(e,c.Qs),m=d.ru(c.documents),p=md.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),g=d.applyChanges(m,s.isPrimaryClient,p);V2(s,t,g.au);const b=new _O(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),g.snapshot}async function AO(s,e,t){const a=dt(s),o=a.Tu.get(e),c=a.Iu.get(o.targetId);if(c.length>1)return a.Iu.set(o.targetId,c.filter((d=>!mm(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await Ug(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&zx(a.remoteStore,o.targetId),Fg(a,o.targetId)})).catch(bc)):(Fg(a,o.targetId),await Ug(a.localStore,o.targetId,!0))}async function CO(s,e){const t=dt(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),zx(t.remoteStore,a.targetId))}async function RO(s,e,t){const a=zO(s);try{const o=await(function(d,m){const p=dt(d),g=us.now(),b=m.reduce(((I,B)=>I.add(B.key)),Rt());let v,j;return p.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let B=mi(),O=Rt();return p.Ns.getEntries(I,b).next((L=>{B=L,B.forEach(((se,W)=>{W.isValidDocument()||(O=O.add(se))}))})).next((()=>p.localDocuments.getOverlayedDocuments(I,B))).next((L=>{v=L;const se=[];for(const W of m){const re=QD(W,v.get(W.key).overlayedDocument);re!=null&&se.push(new ho(W.key,re,fj(re.value.mapValue),pn.exists(!0)))}return p.mutationQueue.addMutationBatch(I,g,se,m)})).next((L=>{j=L;const se=L.applyToLocalDocumentSet(v,O);return p.documentOverlayCache.saveOverlays(I,L.batchId,se)}))})).then((()=>({batchId:j.batchId,changes:jj(v)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,m,p){let g=d.Vu[d.currentUser.toKey()];g||(g=new Ns(Ct)),g=g.insert(m,p),d.Vu[d.currentUser.toKey()]=g})(a,o.batchId,t),await gd(a,o.changes),await Nm(a.remoteStore)}catch(o){const c=Fx(o,"Failed to persist write");t.reject(c)}}async function lE(s,e){const t=dt(s);try{const a=await HM(t.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=t.Au.get(c);d&&(Ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Ot(d.hu,14607):o.removedDocuments.size>0&&(Ot(d.hu,42227),d.hu=!1))})),await gd(t,a,e)}catch(a){await bc(a)}}function z2(s,e,t){const a=dt(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=dt(d);p.onlineState=m;let g=!1;p.queries.forEach(((b,v)=>{for(const j of v.Sa)j.va(m)&&(g=!0)})),g&&Gx(p)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function IO(s,e,t){const a=dt(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),c=o&&o.key;if(c){let d=new Ns(Ze.comparator);d=d.insert(c,an.newNoDocument(c,it.min()));const m=Rt().add(c),p=new ym(it.min(),new Map,new Ns(Ct),d,m);await lE(a,p),a.du=a.du.remove(c),a.Au.delete(e),Yx(a)}else await Ug(a.localStore,e,!1).then((()=>Fg(a,e,t))).catch(bc)}async function DO(s,e){const t=dt(s),a=e.batch.batchId;try{const o=await FM(t.localStore,e);uE(t,a,null),cE(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await gd(t,o)}catch(o){await bc(o)}}async function MO(s,e,t){const a=dt(s);try{const o=await(function(d,m){const p=dt(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let b;return p.mutationQueue.lookupMutationBatch(g,m).next((v=>(Ot(v!==null,37113),b=v.keys(),p.mutationQueue.removeMutationBatch(g,v)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,b,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b))).next((()=>p.localDocuments.getDocuments(g,b)))}))})(a.localStore,e);uE(a,e,t),cE(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await gd(a,o)}catch(o){await bc(o)}}function cE(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function uE(s,e,t){const a=dt(s);let o=a.Vu[a.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function Fg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||dE(s,a)}))}function dE(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(zx(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Yx(s))}function V2(s,e,t){for(const a of t)a instanceof aE?(s.Ru.addReference(a.key,e),OO(s,a)):a instanceof iE?(Ge(Qx,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||dE(s,a.key)):rt(19791,{wu:a})}function OO(s,e){const t=e.key,a=t.path.canonicalString();s.du.get(t)||s.Eu.has(a)||(Ge(Qx,"New document in limbo: "+t),s.Eu.add(a),Yx(s))}function Yx(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Ze(ss.fromString(e)),a=s.fu.next();s.Au.set(a,new jO(t)),s.du=s.du.insert(t,a),Zj(s.remoteStore,new Wi(Sa(fm(t.path)),a,"TargetPurposeLimboResolution",dm.ce))}}async function gd(s,e,t){const a=dt(s),o=[],c=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,p)=>{d.push(a.pu(p,e,t).then((g=>{if((g||t)&&a.isPrimaryClient){const b=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(g){o.push(g);const b=Ox.As(p.targetId,g);c.push(b)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(p,g){const b=dt(p);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ke.forEach(g,(j=>ke.forEach(j.Es,(I=>b.persistence.referenceDelegate.addReference(v,j.targetId,I))).next((()=>ke.forEach(j.ds,(I=>b.persistence.referenceDelegate.removeReference(v,j.targetId,I)))))))))}catch(v){if(!yc(v))throw v;Ge(Px,"Failed to update sequence numbers: "+v)}for(const v of g){const j=v.targetId;if(!v.fromCache){const I=b.Ms.get(j),B=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(B);b.Ms=b.Ms.insert(j,O)}}})(a.localStore,c))}async function PO(s,e){const t=dt(s);if(!t.currentUser.isEqual(e)){Ge(Qx,"User change. New user:",e.toKey());const a=await Xj(t.localStore,e);t.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((p=>{p.reject(new Pe(we.CANCELLED,d))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await gd(t,a.Ls)}}function LO(s,e){const t=dt(s),a=t.Au.get(e);if(a&&a.hu)return Rt().add(a.key);{let o=Rt();const c=t.Iu.get(e);if(!c)return o;for(const d of c){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function hE(s){const e=dt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=lE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IO.bind(null,e),e.Pu.H_=vO.bind(null,e.eventManager),e.Pu.yu=wO.bind(null,e.eventManager),e}function zO(s){const e=dt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MO.bind(null,e),e}class $f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $M(this.persistence,new VM,e.initialUser,this.serializer)}Cu(e){return new Yj(Mx.mi,this.serializer)}Du(e){return new YM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$f.provider={build:()=>new $f};class VO extends $f{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ot(this.persistence.referenceDelegate instanceof Uf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new jM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new Yj((a=>Uf.mi(a,t)),this.serializer)}}class Hg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>z2(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=PO.bind(null,this.syncEngine),await xO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yO})()}createDatastore(e){const t=vm(e.databaseInfo.databaseId),a=(function(c){return new eO(c)})(e.databaseInfo);return(function(c,d,m,p){return new rO(c,d,m,p)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,c,d,m){return new iO(a,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>z2(this.syncEngine,t,0)),(function(){return I2.v()?new I2:new XM})())}createSyncEngine(e,t){return(function(o,c,d,m,p,g,b){const v=new EO(o,c,d,m,p,g);return b&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=dt(t);Ge(rl,"RemoteStore shutting down."),a.Ea.add(5),await pd(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hg.provider={build:()=>new Hg};class Xx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class UO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Pe(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(o,c){const d=dt(o),m={documents:c.map((v=>Vf(d.serializer,v)))},p=await d.Ho("BatchGetDocuments",d.serializer.databaseId,ss.emptyPath(),m,c.length),g=new Map;p.forEach((v=>{const j=oM(d.serializer,v);g.set(j.key.toString(),j)}));const b=[];return c.forEach((v=>{const j=g.get(v.toString());Ot(!!j,55234,{key:v}),b.push(j)})),b})(this.datastore,e);return t.forEach((a=>this.recordVersion(a))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastTransactionError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new bm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,a)=>{const o=Ze.fromPath(a);this.mutations.push(new Oj(o,this.precondition(o)))})),await(async function(a,o){const c=dt(a),d={writes:o.map((m=>Hj(c.serializer,m)))};await c.Go("Commit",c.serializer.databaseId,ss.emptyPath(),d)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt(50498,{Gu:e.constructor.name});t=it.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Pe(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(it.min())?pn.exists(!1):pn.updateTime(t):pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(it.min()))throw new Pe(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pn.updateTime(t)}return pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class BO{constructor(e,t,a,o,c){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=o,this.deferred=c,this.zu=a.maxAttempts,this.M_=new Lx(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new UO(this.datastore),t=this.Hu(e);t&&t.then((a=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(a)})).catch((o=>{this.Yu(o)}))))})).catch((a=>{this.Yu(a)}))}))}Hu(e){try{const t=this.updateFunction(e);return!hd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Pj(t)}return!1}}const co="FirestoreClient";class $O{constructor(e,t,a,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=o,this.user=Tn.UNAUTHENTICATED,this.clientId=cm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(a,(async d=>{Ge(co,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(Ge(co,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Fx(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function eg(s,e){s.asyncQueue.verifyOperationInProgress(),Ge(co,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await Xj(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function U2(s,e){s.asyncQueue.verifyOperationInProgress();const t=await FO(s);Ge(co,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>M2(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>M2(e.remoteStore,o))),s._onlineComponents=e}async function FO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ge(co,"Using user provided OfflineComponentProvider");try{await eg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===we.FAILED_PRECONDITION||o.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;nl("Error using user provided cache. Falling back to memory cache: "+t),await eg(s,new $f)}}else Ge(co,"Using default OfflineComponentProvider"),await eg(s,new VO(void 0));return s._offlineComponents}async function Wx(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ge(co,"Using user provided OnlineComponentProvider"),await U2(s,s._uninitializedComponentsProvider._online)):(Ge(co,"Using default OnlineComponentProvider"),await U2(s,new Hg))),s._onlineComponents}function HO(s){return Wx(s).then((e=>e.syncEngine))}function qO(s){return Wx(s).then((e=>e.datastore))}async function Ff(s){const e=await Wx(s),t=e.eventManager;return t.onListen=SO.bind(null,e.syncEngine),t.onUnlisten=AO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CO.bind(null,e.syncEngine),t}function GO(s,e,t={}){const a=new Ea;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,g){const b=new Xx({next:j=>{b.Nu(),d.enqueueAndForget((()=>qx(c,v)));const I=j.docs.has(m);!I&&j.fromCache?g.reject(new Pe(we.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&j.fromCache&&p&&p.source==="server"?g.reject(new Pe(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(j)},error:j=>g.reject(j)}),v=new Kx(fm(m.path),b,{includeMetadataChanges:!0,qa:!0});return Hx(c,v)})(await Ff(s),s.asyncQueue,e,t,a))),a.promise}function KO(s,e,t={}){const a=new Ea;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,p,g){const b=new Xx({next:j=>{b.Nu(),d.enqueueAndForget((()=>qx(c,v))),j.fromCache&&p.source==="server"?g.reject(new Pe(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(j)},error:j=>g.reject(j)}),v=new Kx(m,b,{includeMetadataChanges:!0,qa:!0});return Hx(c,v)})(await Ff(s),s.asyncQueue,e,t,a))),a.promise}function fE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const B2=new Map;const mE="firestore.googleapis.com",$2=!0;class F2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Pe(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mE,this.ssl=$2}else this.host=e.host,this.ssl=e.ssl??$2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NM)throw new Pe(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fE(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Pe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Pe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Pe(we.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _m{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pe(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new ej;switch(a.type){case"firstParty":return new nD(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Pe(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=B2.get(t);a&&(Ge("ComponentProvider","Removing Datastore"),B2.delete(t),a.terminate())})(this),Promise.resolve()}}function pE(s,e,t,a={}){s=An(s,_m);const o=Ra(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(nm(`https://${m}`),rm("Firestore",!0)),c.host!==mE&&c.host!==m&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:m,ssl:o,emulatorOptions:a};if(!el(p,d)&&(s._setSettings(p),a.mockUserToken)){let g,b;if(typeof a.mockUserToken=="string")g=a.mockUserToken,b=Tn.MOCK_USER;else{g=c_(a.mockUserToken,s._app?.options.projectId);const v=a.mockUserToken.sub||a.mockUserToken.user_id;if(!v)throw new Pe(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Tn(v)}s._authCredentials=new eD(new Z_(g,b))}}class Da{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class vs{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vs(this.firestore,e,this._key)}toJSON(){return{type:vs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(dd(t,vs._jsonSchema))return new vs(e,a||null,new Ze(ss.fromString(t.referencePath)))}}vs._jsonSchemaVersion="firestore/documentReference/1.0",vs._jsonSchema={type:Xs("string",vs._jsonSchemaVersion),referencePath:Xs("string")};class oi extends Da{constructor(e,t,a){super(e,t,fm(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vs(this.firestore,null,new Ze(e))}withConverter(e){return new oi(this.firestore,e,this._path)}}function He(s,e,...t){if(s=as(s),tj("collection","path",e),s instanceof _m){const a=ss.fromString(e,...t);return s2(a),new oi(s,null,a)}{if(!(s instanceof vs||s instanceof oi))throw new Pe(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ss.fromString(e,...t));return s2(a),new oi(s.firestore,null,a)}}function Be(s,e,...t){if(s=as(s),arguments.length===1&&(e=cm.newId()),tj("doc","path",e),s instanceof _m){const a=ss.fromString(e,...t);return t2(a),new vs(s,null,new Ze(a))}{if(!(s instanceof vs||s instanceof oi))throw new Pe(we.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ss.fromString(e,...t));return t2(a),new vs(s.firestore,s instanceof oi?s.converter:null,new Ze(a))}}const H2="AsyncQueue";class q2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lx(this,"async_queue_retry"),this._c=()=>{const a=Z0();a&&Ge(H2,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Z0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Z0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yc(e))throw e;Ge(H2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",G2(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=$x.createAndSchedule(this,e,t,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&rt(47125,{Pc:G2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function G2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function K2(s){return(function(t,a){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of a)if(c in o&&typeof o[c]=="function")return!0;return!1})(s,["next","error","complete"])}class ea extends _m{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new q2,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q2(e),this._firestoreClient=void 0,await e}}}function gE(s,e){const t=typeof s=="object"?s:am(),a=typeof s=="string"?s:Mf,o=od(t,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=ux("firestore");c&&pE(o,...c)}return o}function Nc(s){if(s._terminated)throw new Pe(we.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||QO(s),s._firestoreClient}function QO(s){const e=s._freezeSettings(),t=(function(o,c,d,m){return new vD(o,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,fE(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new $O(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(ln.fromBase64String(e))}catch(t){throw new Pe(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dd(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Xs("string",Zn._jsonSchemaVersion),bytes:Xs("string")};class _c{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Pe(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jc{constructor(e){this._methodName=e}}class Wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(e){if(dd(e,Wr._jsonSchema))return new Wr(e.latitude,e.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:Xs("string",Wr._jsonSchemaVersion),latitude:Xs("number"),longitude:Xs("number")};class Jr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dd(e,Jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Jr(e.vectorValues);throw new Pe(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:Xs("string",Jr._jsonSchemaVersion),vectorValues:Xs("object")};const YO=/^__.*__$/;class XO{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new fd(e,this.data,t,this.fieldTransforms)}}class xE{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:s})}}class Jx{constructor(e,t,a,o,c,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bE(this.Ac)&&YO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WO{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||vm(e)}Cc(e,t,a,o=!1){return new Jx({Ac:e,methodName:t,Dc:a,path:on.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(s){const e=s._freezeSettings(),t=vm(s._databaseId);return new WO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Zx(s,e,t,a,o,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,t,o);sb("Data must be an object, but it was:",d,a);const m=wE(a,d);let p,g;if(c.merge)p=new pr(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const v of c.mergeFields){const j=qg(e,v,t);if(!d.contains(j))throw new Pe(we.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);_E(b,j)||b.push(j)}p=new pr(b),g=d.fieldTransforms.filter((v=>p.covers(v.field)))}else p=null,g=d.fieldTransforms;return new XO(new zn(m),p,g)}class jm extends jc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jm}}class eb extends jc{_toFieldTransform(e){return new Ij(e.path,new Xu)}isEqual(e){return e instanceof eb}}class tb extends jc{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Zu(e.serializer,Tj(e.serializer,this.Fc));return new Ij(e.path,t)}isEqual(e){return e instanceof tb&&this.Fc===e.Fc}}function yE(s,e,t,a){const o=s.Cc(1,e,t);sb("Data must be an object, but it was:",o,a);const c=[],d=zn.empty();uo(a,((p,g)=>{const b=nb(e,p,t);g=as(g);const v=o.yc(b);if(g instanceof jm)c.push(b);else{const j=bd(g,v);j!=null&&(c.push(b),d.set(b,j))}}));const m=new pr(c);return new xE(d,m,o.fieldTransforms)}function vE(s,e,t,a,o,c){const d=s.Cc(1,e,t),m=[qg(e,a,t)],p=[o];if(c.length%2!=0)throw new Pe(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<c.length;j+=2)m.push(qg(e,c[j])),p.push(c[j+1]);const g=[],b=zn.empty();for(let j=m.length-1;j>=0;--j)if(!_E(g,m[j])){const I=m[j];let B=p[j];B=as(B);const O=d.yc(I);if(B instanceof jm)g.push(I);else{const L=bd(B,O);L!=null&&(g.push(I),b.set(I,L))}}const v=new pr(g);return new xE(b,v,d.fieldTransforms)}function JO(s,e,t,a=!1){return bd(t,s.Cc(a?4:3,e))}function bd(s,e){if(NE(s=as(s)))return sb("Unsupported field value:",e,s),wE(s,e);if(s instanceof jc)return(function(a,o){if(!bE(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const c=a._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const c=[];let d=0;for(const m of a){let p=bd(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),d++}return{arrayValue:{values:c}}})(s,e)}return(function(a,o){if((a=as(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Tj(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const c=us.fromDate(a);return{timestampValue:zf(o.serializer,c)}}if(a instanceof us){const c=new us(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:zf(o.serializer,c)}}if(a instanceof Wr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Zn)return{bytesValue:Uj(o.serializer,a._byteString)};if(a instanceof vs){const c=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ix(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Jr)return(function(d,m){return{mapValue:{fields:{[dj]:{stringValue:hj},[Of]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ax(m.serializer,g)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${um(a)}`)})(s,e)}function wE(s,e){const t={};return aj(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(s,((a,o)=>{const c=bd(o,e.mc(a));c!=null&&(t[a]=c)})),{mapValue:{fields:t}}}function NE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof us||s instanceof Wr||s instanceof Zn||s instanceof vs||s instanceof jc||s instanceof Jr)}function sb(s,e,t){if(!NE(t)||!nj(t)){const a=um(t);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function qg(s,e,t){if((e=as(e))instanceof _c)return e._internalPath;if(typeof e=="string")return nb(s,e);throw Hf("Field path arguments must be of type string or ",s,!1,void 0,t)}const ZO=new RegExp("[~\\*/\\[\\]]");function nb(s,e,t){if(e.search(ZO)>=0)throw Hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new _c(...e.split("."))._internalPath}catch{throw Hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Hf(s,e,t,a,o){const c=a&&!a.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(c||d)&&(p+=" (found",c&&(p+=` in field ${a}`),d&&(p+=` in document ${o}`),p+=")"),new Pe(we.INVALID_ARGUMENT,m+s+p)}function _E(s,e){return s.some((t=>t.isEqual(e)))}class qf{constructor(e,t,a,o,c){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new vs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Em("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eP extends qf{data(){return super.data()}}function Em(s,e){return typeof e=="string"?nb(s,e):e instanceof _c?e._internalPath:e._delegate._internalPath}function jE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Pe(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rb{}class Sm extends rb{}function ys(s,e,...t){let a=[];e instanceof rb&&a.push(e),a=a.concat(t),(function(c){const d=c.filter((p=>p instanceof Tm)).length,m=c.filter((p=>p instanceof yd)).length;if(d>1||d>0&&m>0)throw new Pe(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class yd extends Sm{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new yd(e,t,a)}_apply(e){const t=this._parse(e);return EE(e._query,t),new Da(e.firestore,e.converter,Pg(e._query,t))}_parse(e){const t=xd(e.firestore);return(function(c,d,m,p,g,b,v){let j;if(g.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Pe(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Y2(v,b);const B=[];for(const O of v)B.push(Q2(p,c,O));j={arrayValue:{values:B}}}else j=Q2(p,c,v)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Y2(v,b),j=JO(m,d,v,b==="in"||b==="not-in");return Ys.create(g,b,j)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Qi(s,e,t){const a=e,o=Em("where",s);return yd._create(o,a,t)}class Tm extends rb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tm(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const p of m)EE(d,p),d=Pg(d,p)})(e._query,t),new Da(e.firestore,e.converter,Pg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class km extends Sm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new km(e,t)}_apply(e){const t=(function(o,c,d){if(o.startAt!==null)throw new Pe(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Pe(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yu(c,d)})(e._query,this._field,this._direction);return new Da(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new vc(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function en(s,e="asc"){const t=e,a=Em("orderBy",s);return km._create(a,t)}class Am extends Sm{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new Am(e,t,a)}_apply(e){return new Da(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function Cm(s){return cD("limit",s),Am._create("limit",s,"F")}function Q2(s,e,t){if(typeof(t=as(t))=="string"){if(t==="")throw new Pe(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vj(e)&&t.indexOf("/")!==-1)throw new Pe(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(ss.fromString(t));if(!Ze.isDocumentKey(a))throw new Pe(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return u2(s,new Ze(a))}if(t instanceof vs)return u2(s,t._key);throw new Pe(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${um(t)}.`)}function Y2(s,e){if(!Array.isArray(s)||s.length===0)throw new Pe(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EE(s,e){const t=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Pe(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pe(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ab{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ls(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return uo(e,((o,c)=>{a[o]=this.convertValue(c,t)})),a}convertVectorValue(e){const t=e.fields?.[Of].arrayValue?.values?.map((a=>Ls(a.doubleValue)));return new Jr(t)}convertGeoPoint(e){return new Wr(Ls(e.latitude),Ls(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=hm(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const t=ao(e);return new us(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=ss.fromString(e);Ot(Kj(a),9688,{name:e});const o=new oc(a.get(1),a.get(3)),c=new Ze(a.popFirst(5));return o.isEqual(t)||fi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function ib(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class tP extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vs(this.firestore,null,t)}}class Yo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends qf{constructor(e,t,a,o,c,d){super(e,t,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Em("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=li._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:Xs("string",li._jsonSchemaVersion),bundleSource:Xs("string","DocumentSnapshot"),bundleName:Xs("string"),bundle:Xs("string")};class Lu extends li{data(e={}){return super.data(e)}}class so{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Yo(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Lu(this._firestore,this._userDataWriter,a.key,a,new Yo(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new Lu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Yo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const p=new Lu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Yo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,b=-1;return m.type!==0&&(g=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),b=d.indexOf(m.doc.key)),{type:sP(m.type),doc:p,oldIndex:g,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Pe(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sP(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:s})}}function Qr(s){s=An(s,vs);const e=An(s.firestore,ea);return GO(Nc(e),s._key).then((t=>SE(e,s,t)))}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:Xs("string",so._jsonSchemaVersion),bundleSource:Xs("string","QuerySnapshot"),bundleName:Xs("string"),bundle:Xs("string")};class Rm extends ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vs(this.firestore,null,t)}}function kn(s){s=An(s,Da);const e=An(s.firestore,ea),t=Nc(e),a=new Rm(e);return jE(s._query),KO(t,s._query).then((o=>new so(e,a,s,o)))}function cs(s,e,t){s=An(s,vs);const a=An(s.firestore,ea),o=ib(s.converter,e,t);return vd(a,[Zx(xd(a),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,pn.none())])}function Ps(s,e,t,...a){s=An(s,vs);const o=An(s.firestore,ea),c=xd(o);let d;return d=typeof(e=as(e))=="string"||e instanceof _c?vE(c,"updateDoc",s._key,e,t,a):yE(c,"updateDoc",s._key,e),vd(o,[d.toMutation(s._key,pn.exists(!0))])}function Sn(s){return vd(An(s.firestore,ea),[new bm(s._key,pn.none())])}function ts(s,e){const t=An(s.firestore,ea),a=Be(s),o=ib(s.converter,e);return vd(t,[Zx(xd(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,pn.exists(!1))]).then((()=>a))}function Gt(s,...e){s=as(s);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||K2(e[a])||(t=e[a++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(K2(e[a])){const p=e[a];e[a]=p.next?.bind(p),e[a+1]=p.error?.bind(p),e[a+2]=p.complete?.bind(p)}let c,d,m;if(s instanceof vs)d=An(s.firestore,ea),m=fm(s._key.path),c={next:p=>{e[a]&&e[a](SE(d,s,p))},error:e[a+1],complete:e[a+2]};else{const p=An(s,Da);d=An(p.firestore,ea),m=p._query;const g=new Rm(d);c={next:b=>{e[a]&&e[a](new so(d,g,p,b))},error:e[a+1],complete:e[a+2]},jE(s._query)}return(function(g,b,v,j){const I=new Xx(j),B=new Kx(b,I,v);return g.asyncQueue.enqueueAndForget((async()=>Hx(await Ff(g),B))),()=>{I.Nu(),g.asyncQueue.enqueueAndForget((async()=>qx(await Ff(g),B)))}})(Nc(d),m,o,c)}function vd(s,e){return(function(a,o){const c=new Ea;return a.asyncQueue.enqueueAndForget((async()=>RO(await HO(a),o,c))),c.promise})(Nc(s),e)}function SE(s,e,t){const a=t.docs.get(e._key),o=new Rm(s);return new li(s,o,e._key,a,new Yo(t.hasPendingWrites,t.fromCache),e.converter)}const nP={maxAttempts:5};function wu(s,e){if((s=as(s)).firestore!==e)throw new Pe(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}class rP{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xd(e)}get(e){const t=wu(e,this._firestore),a=new tP(this._firestore);return this._transaction.lookup([t._key]).then((o=>{if(!o||o.length!==1)return rt(24041);const c=o[0];if(c.isFoundDocument())return new qf(this._firestore,a,c.key,c,t.converter);if(c.isNoDocument())return new qf(this._firestore,a,t._key,null,t.converter);throw rt(18433,{doc:c})}))}set(e,t,a){const o=wu(e,this._firestore),c=ib(o.converter,t,a),d=Zx(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,a);return this._transaction.set(o._key,d),this}update(e,t,a,...o){const c=wu(e,this._firestore);let d;return d=typeof(t=as(t))=="string"||t instanceof _c?vE(this._dataReader,"Transaction.update",c._key,t,a,o):yE(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=wu(e,this._firestore);return this._transaction.delete(t._key),this}}class TE extends rP{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wu(e,this._firestore),a=new Rm(this._firestore);return super.get(e).then((o=>new li(this._firestore,a,t._key,o._document,new Yo(!1,!1),t.converter)))}}function Gg(s,e,t){s=An(s,ea);const a={...nP,...t};return(function(c){if(c.maxAttempts<1)throw new Pe(we.INVALID_ARGUMENT,"Max attempts must be at least 1")})(a),(function(c,d,m){const p=new Ea;return c.asyncQueue.enqueueAndForget((async()=>{const g=await qO(c);new BO(c.asyncQueue,g,m,d,p).ju()})),p.promise})(Nc(s),(o=>e(new TE(s,o))),a)}function st(){return new eb("serverTimestamp")}function zu(s){return new tb("increment",s)}(function(e,t=!0){(function(o){xc=o})(il),no(new ui("firestore",((a,{instanceIdentifier:o,options:c})=>{const d=a.getProvider("app").getImmediate(),m=new ea(new tD(a.getProvider("auth-internal")),new rD(d,a.getProvider("app-check-internal")),(function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Pe(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(g.options.projectId,b)})(d,o),d);return c={useFetchStreams:t,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),zr(Ww,Jw,e),zr(Ww,Jw,"esm2020")})();const aP=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ab,Bytes:Zn,CollectionReference:oi,DocumentReference:vs,DocumentSnapshot:li,FieldPath:_c,FieldValue:jc,Firestore:ea,FirestoreError:Pe,GeoPoint:Wr,Query:Da,QueryCompositeFilterConstraint:Tm,QueryConstraint:Sm,QueryDocumentSnapshot:Lu,QueryFieldFilterConstraint:yd,QueryLimitConstraint:Am,QueryOrderByConstraint:km,QuerySnapshot:so,SnapshotMetadata:Yo,Timestamp:us,Transaction:TE,VectorValue:Jr,_AutoId:cm,_ByteString:ln,_DatabaseId:oc,_DocumentKey:Ze,_EmptyAuthCredentialsProvider:ej,_FieldPath:on,_cast:An,_logWarn:nl,_validateIsNotUsedTogether:sj,addDoc:ts,collection:He,connectFirestoreEmulator:pE,deleteDoc:Sn,doc:Be,ensureFirestoreConfigured:Nc,executeWrite:vd,getDoc:Qr,getDocs:kn,getFirestore:gE,increment:zu,limit:Cm,onSnapshot:Gt,orderBy:en,query:ys,runTransaction:Gg,serverTimestamp:st,setDoc:cs,updateDoc:Ps,where:Qi},Symbol.toStringTag,{value:"Module"}));const kE="firebasestorage.googleapis.com",AE="storageBucket",iP=120*1e3,oP=600*1e3;class Cs extends ta{constructor(e,t,a=0){super(tg(e),`Firebase Storage: ${t} (${tg(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var As;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(As||(As={}));function tg(s){return"storage/"+s}function ob(){const s="An unknown error occurred, please check the error payload for server response.";return new Cs(As.UNKNOWN,s)}function lP(s){return new Cs(As.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function cP(s){return new Cs(As.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function uP(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Cs(As.UNAUTHENTICATED,s)}function dP(){return new Cs(As.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hP(s){return new Cs(As.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function fP(){return new Cs(As.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mP(){return new Cs(As.CANCELED,"User canceled the upload/download.")}function pP(s){return new Cs(As.INVALID_URL,"Invalid URL '"+s+"'.")}function gP(s){return new Cs(As.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function xP(){return new Cs(As.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AE+"' property when initializing the app?")}function bP(){return new Cs(As.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yP(){return new Cs(As.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vP(s){return new Cs(As.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kg(s){return new Cs(As.INVALID_ARGUMENT,s)}function CE(){return new Cs(As.APP_DELETED,"The Firebase app was deleted.")}function wP(s){return new Cs(As.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vu(s,e){return new Cs(As.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function pu(s){throw new Cs(As.INTERNAL_ERROR,"Internal error: "+s)}class gr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=gr.makeFromUrl(e,t)}catch{return new gr(e,"")}if(a.path==="")return a;throw gP(e)}static makeFromUrl(e,t){let a=null;const o="([A-Za-z0-9.\\-_]+)";function c(me){me.path.charAt(me.path.length-1)==="/"&&(me.path_=me.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),p={bucket:1,path:3};function g(me){me.path_=decodeURIComponent(me.path)}const b="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",I=new RegExp(`^https?://${v}/${b}/b/${o}/o${j}`,"i"),B={bucket:1,path:3},O=t===kE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",se=new RegExp(`^https?://${O}/${o}/${L}`,"i"),re=[{regex:m,indices:p,postModify:c},{regex:I,indices:B,postModify:g},{regex:se,indices:{bucket:1,path:2},postModify:g}];for(let me=0;me<re.length;me++){const xe=re[me],Te=xe.regex.exec(e);if(Te){const D=Te[xe.indices.bucket];let T=Te[xe.indices.path];T||(T=""),a=new gr(D,T),xe.postModify(a);break}}if(a==null)throw pP(e);return a}}class NP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function _P(s,e,t){let a=1,o=null,c=null,d=!1,m=0;function p(){return m===2}let g=!1;function b(...L){g||(g=!0,e.apply(null,L))}function v(L){o=setTimeout(()=>{o=null,s(I,p())},L)}function j(){c&&clearTimeout(c)}function I(L,...se){if(g){j();return}if(L){j(),b.call(null,L,...se);return}if(p()||d){j(),b.call(null,L,...se);return}a<64&&(a*=2);let re;m===1?(m=2,re=0):re=(a+Math.random())*1e3,v(re)}let B=!1;function O(L){B||(B=!0,j(),!g&&(o!==null?(L||(m=2),clearTimeout(o),v(0)):L||(m=1)))}return v(0),c=setTimeout(()=>{d=!0,O(!0)},t),O}function jP(s){s(!1)}function EP(s){return s!==void 0}function SP(s){return typeof s=="object"&&!Array.isArray(s)}function lb(s){return typeof s=="string"||s instanceof String}function X2(s){return cb()&&s instanceof Blob}function cb(){return typeof Blob<"u"}function W2(s,e,t,a){if(a<e)throw Kg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw Kg(`Invalid value for '${s}'. Expected ${t} or less.`)}function ub(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function RE(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);t=t+o+"&"}return t=t.slice(0,-1),t}var Jo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Jo||(Jo={}));function TP(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return t||o||c}class kP{constructor(e,t,a,o,c,d,m,p,g,b,v,j=!0,I=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=b,this.connectionFactory_=v,this.retry=j,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,O)=>{this.resolve_=B,this.reject_=O,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Qh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Jo.NO_ERROR,p=c.getStatus();if(!m||TP(p,this.additionalRetryCodes_)&&this.retry){const b=c.getErrorCode()===Jo.ABORT;a(!1,new Qh(!1,null,b));return}const g=this.successCodes_.indexOf(p)!==-1;a(!0,new Qh(g,c))})},t=(a,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());EP(p)?c(p):c()}catch(p){d(p)}else if(m!==null){const p=ob();p.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,p)):d(p)}else if(o.canceled){const p=this.appDelete_?CE():mP();d(p)}else{const p=fP();d(p)}};this.canceled_?t(!1,new Qh(!1,null,!0)):this.backoffId_=_P(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qh{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function AP(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function CP(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RP(s,e){e&&(s["X-Firebase-GMPID"]=e)}function IP(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function DP(s,e,t,a,o,c,d=!0,m=!1){const p=RE(s.urlParams),g=s.url+p,b=Object.assign({},s.headers);return RP(b,e),AP(b,t),CP(b,c),IP(b,a),new kP(g,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,m)}function MP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OP(...s){const e=MP();if(e!==void 0){const t=new e;for(let a=0;a<s.length;a++)t.append(s[a]);return t.getBlob()}else{if(cb())return new Blob(s);throw new Cs(As.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PP(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function LP(s){if(typeof atob>"u")throw vP("base-64");return atob(s)}const Na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sg{constructor(e,t){this.data=e,this.contentType=t||null}}function zP(s,e){switch(s){case Na.RAW:return new sg(IE(e));case Na.BASE64:case Na.BASE64URL:return new sg(DE(s,e));case Na.DATA_URL:return new sg(UP(e),BP(e))}throw ob()}function IE(s){const e=[];for(let t=0;t<s.length;t++){let a=s.charCodeAt(t);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=a,d=s.charCodeAt(++t);a=65536|(c&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function VP(s){let e;try{e=decodeURIComponent(s)}catch{throw Vu(Na.DATA_URL,"Malformed data URL.")}return IE(e)}function DE(s,e){switch(s){case Na.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw Vu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Na.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw Vu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=LP(e)}catch(o){throw o.message.includes("polyfill")?o:Vu(s,"Invalid character found")}const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a}class ME{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Vu(Na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=t[1]||null;a!=null&&(this.base64=$P(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function UP(s){const e=new ME(s);return e.base64?DE(Na.BASE64,e.rest):VP(e.rest)}function BP(s){return new ME(s).contentType}function $P(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Yi{constructor(e,t){let a=0,o="";X2(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(X2(this.data_)){const a=this.data_,o=PP(a,e,t);return o===null?null:new Yi(o)}else{const a=new Uint8Array(this.data_.buffer,e,t-e);return new Yi(a,!0)}}static getBlob(...e){if(cb()){const t=e.map(a=>a instanceof Yi?a.data_:a);return new Yi(OP.apply(null,t))}else{const t=e.map(d=>lb(d)?zP(Na.RAW,d).data:d.data_);let a=0;t.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let c=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[c++]=d[m]}),new Yi(o,!0)}}uploadData(){return this.data_}}function OE(s){let e;try{e=JSON.parse(s)}catch{return null}return SP(e)?e:null}function FP(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function HP(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function PE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function qP(s,e){return e}class On{constructor(e,t,a,o){this.server=e,this.local=t||e,this.writable=!!a,this.xform=o||qP}}let Yh=null;function GP(s){return!lb(s)||s.length<2?s:PE(s)}function LE(){if(Yh)return Yh;const s=[];s.push(new On("bucket")),s.push(new On("generation")),s.push(new On("metageneration")),s.push(new On("name","fullPath",!0));function e(c,d){return GP(d)}const t=new On("name");t.xform=e,s.push(t);function a(c,d){return d!==void 0?Number(d):d}const o=new On("size");return o.xform=a,s.push(o),s.push(new On("timeCreated")),s.push(new On("updated")),s.push(new On("md5Hash",null,!0)),s.push(new On("cacheControl",null,!0)),s.push(new On("contentDisposition",null,!0)),s.push(new On("contentEncoding",null,!0)),s.push(new On("contentLanguage",null,!0)),s.push(new On("contentType",null,!0)),s.push(new On("metadata","customMetadata",!0)),Yh=s,Yh}function KP(s,e){function t(){const a=s.bucket,o=s.fullPath,c=new gr(a,o);return e._makeStorageReference(c)}Object.defineProperty(s,"ref",{get:t})}function QP(s,e,t){const a={};a.type="file";const o=t.length;for(let c=0;c<o;c++){const d=t[c];a[d.local]=d.xform(a,e[d.server])}return KP(a,s),a}function zE(s,e,t){const a=OE(e);return a===null?null:QP(s,a,t)}function YP(s,e,t,a){const o=OE(e);if(o===null||!lb(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(g=>{const b=s.bucket,v=s.fullPath,j="/b/"+d(b)+"/o/"+d(v),I=ub(j,t,a),B=RE({alt:"media",token:g});return I+B})[0]}function XP(s,e){const t={},a=e.length;for(let o=0;o<a;o++){const c=e[o];c.writable&&(t[c.server]=s[c.local])}return JSON.stringify(t)}class VE{constructor(e,t,a,o){this.url=e,this.method=t,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function UE(s){if(!s)throw ob()}function WP(s,e){function t(a,o){const c=zE(s,o,e);return UE(c!==null),c}return t}function JP(s,e){function t(a,o){const c=zE(s,o,e);return UE(c!==null),YP(c,o,s.host,s._protocol)}return t}function BE(s){function e(t,a){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=dP():o=uP():t.getStatus()===402?o=cP(s.bucket):t.getStatus()===403?o=hP(s.path):o=a,o.status=t.getStatus(),o.serverResponse=a.serverResponse,o}return e}function ZP(s){const e=BE(s);function t(a,o){let c=e(a,o);return a.getStatus()===404&&(c=lP(s.path)),c.serverResponse=o.serverResponse,c}return t}function eL(s,e,t){const a=e.fullServerUrl(),o=ub(a,s.host,s._protocol),c="GET",d=s.maxOperationRetryTime,m=new VE(o,c,JP(s,t),d);return m.errorHandler=ZP(e),m}function tL(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function sL(s,e,t){const a=Object.assign({},t);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=tL(null,e)),a}function nL(s,e,t,a,o){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let re="";for(let me=0;me<2;me++)re=re+Math.random().toString().slice(2);return re}const p=m();d["Content-Type"]="multipart/related; boundary="+p;const g=sL(e,a,o),b=XP(g,t),v="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,j=`\r
--`+p+"--",I=Yi.getBlob(v,a,j);if(I===null)throw bP();const B={name:g.fullPath},O=ub(c,s.host,s._protocol),L="POST",se=s.maxUploadRetryTime,W=new VE(O,L,WP(s,t),se);return W.urlParams=B,W.headers=d,W.body=I.uploadData(),W.errorHandler=BE(e),W}class rL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,o,c){if(this.sent_)throw pu("cannot .send() more than once");if(Ra(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const d in c)c.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,c[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class aL extends rL{initXhr(){this.xhr_.responseType="text"}}function $E(){return new aL}class al{constructor(e,t){this._service=e,t instanceof gr?this._location=t:this._location=gr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new al(e,t)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PE(this._location.path)}get storage(){return this._service}get parent(){const e=FP(this._location.path);if(e===null)return null;const t=new gr(this._location.bucket,e);return new al(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wP(e)}}function iL(s,e,t){s._throwIfRoot("uploadBytes");const a=nL(s.storage,s._location,LE(),new Yi(e,!0),t);return s.storage.makeRequestWithTokens(a,$E).then(o=>({metadata:o,ref:s}))}function oL(s){s._throwIfRoot("getDownloadURL");const e=eL(s.storage,s._location,LE());return s.storage.makeRequestWithTokens(e,$E).then(t=>{if(t===null)throw yP();return t})}function lL(s,e){const t=HP(s._location.path,e),a=new gr(s._location.bucket,t);return new al(s.storage,a)}function cL(s){return/^[A-Za-z]+:\/\//.test(s)}function uL(s,e){return new al(s,e)}function FE(s,e){if(s instanceof db){const t=s;if(t._bucket==null)throw xP();const a=new al(t,t._bucket);return e!=null?FE(a,e):a}else return e!==void 0?lL(s,e):s}function dL(s,e){if(e&&cL(e)){if(s instanceof db)return uL(s,e);throw Kg("To use ref(service, url), the first argument must be a Storage instance.")}else return FE(s,e)}function J2(s,e){const t=e?.[AE];return t==null?null:gr.makeFromBucketSpec(t,s)}function hL(s,e,t,a={}){s.host=`${e}:${t}`;const o=Ra(e);o&&(nm(`https://${s.host}/b`),rm("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=a;c&&(s._overrideAuthToken=typeof c=="string"?c:c_(c,s.app.options.projectId))}class db{constructor(e,t,a,o,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=kE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iP,this._maxUploadRetryTime=oP,this._requests=new Set,o!=null?this._bucket=gr.makeFromBucketSpec(o,this._host):this._bucket=J2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=J2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(mr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new al(this,e)}_makeRequest(e,t,a,o,c=!0){if(this._deleted)return new NP(CE());{const d=DP(e,this._appId,a,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,o).getPromise()}}const Z2="@firebase/storage",eN="0.14.0";const HE="storage";function wd(s,e,t){return s=as(s),iL(s,e,t)}function Nd(s){return s=as(s),oL(s)}function _d(s,e){return s=as(s),dL(s,e)}function fL(s=am(),e){s=as(s);const a=od(s,HE).getImmediate({identifier:e}),o=ux("storage");return o&&mL(a,...o),a}function mL(s,e,t,a={}){hL(s,e,t,a)}function pL(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new db(t,a,o,e,il)}function gL(){no(new ui(HE,pL,"PUBLIC").setMultipleInstances(!0)),zr(Z2,eN,""),zr(Z2,eN,"esm2020")}gL();const xL="type.googleapis.com/google.protobuf.Int64Value",bL="type.googleapis.com/google.protobuf.UInt64Value";function qE(s,e){const t={};for(const a in s)s.hasOwnProperty(a)&&(t[a]=e(s[a]));return t}function Gf(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>Gf(e));if(typeof s=="function"||typeof s=="object")return qE(s,e=>Gf(e));throw new Error("Data cannot be encoded in JSON: "+s)}function hc(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case xL:case bL:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>hc(e)):typeof s=="function"||typeof s=="object"?qE(s,e=>hc(e)):s}const hb="functions";const tN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class er extends ta{constructor(e,t,a){super(`${hb}/${e}`,t||""),this.details=a,Object.setPrototypeOf(this,er.prototype)}}function yL(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Kf(s,e){let t=yL(s),a=t,o;try{const c=e&&e.error;if(c){const d=c.status;if(typeof d=="string"){if(!tN[d])return new er("internal","internal");t=tN[d],a=d}const m=c.message;typeof m=="string"&&(a=m),o=c.details,o!==void 0&&(o=hc(o))}}catch{}return t==="ok"?null:new er(t,a,o)}class vL{constructor(e,t,a,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,mr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=a.getImmediate({optional:!0}),this.auth||t.get().then(c=>this.auth=c,()=>{}),this.messaging||a.get().then(c=>this.messaging=c,()=>{}),this.appCheck||o?.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),a=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:a,appCheckToken:o}}}const Qg="us-central1",wL=/^data: (.*?)(?:\n|$)/;function NL(s){let e=null;return{promise:new Promise((t,a)=>{e=setTimeout(()=>{a(new er("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class _L{constructor(e,t,a,o,c=Qg,d=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new vL(e,t,a,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(c);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=Qg}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function jL(s,e,t){const a=Ra(e);s.emulatorOrigin=`http${a?"s":""}://${e}:${t}`,a&&(nm(s.emulatorOrigin+"/backends"),rm("Functions",!0))}function EL(s,e,t){const a=o=>TL(s,e,o,{});return a.stream=(o,c)=>AL(s,e,o,c),a}function GE(s){return s.emulatorOrigin&&Ra(s.emulatorOrigin)?"include":void 0}async function SL(s,e,t,a,o){t["Content-Type"]="application/json";let c;try{c=await a(s,{method:"POST",body:JSON.stringify(e),headers:t,credentials:GE(o)})}catch{return{status:0,json:null}}let d=null;try{d=await c.json()}catch{}return{status:c.status,json:d}}async function KE(s,e){const t={},a=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return a.authToken&&(t.Authorization="Bearer "+a.authToken),a.messagingToken&&(t["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=a.appCheckToken),t}function TL(s,e,t,a){const o=s._url(e);return kL(s,o,t,a)}async function kL(s,e,t,a){t=Gf(t);const o={data:t},c=await KE(s,a),d=a.timeout||7e4,m=NL(d),p=await Promise.race([SL(e,o,c,s.fetchImpl,s),m.promise,s.cancelAllRequests]);if(m.cancel(),!p)throw new er("cancelled","Firebase Functions instance was deleted.");const g=Kf(p.status,p.json);if(g)throw g;if(!p.json)throw new er("internal","Response is not valid JSON object.");let b=p.json.data;if(typeof b>"u"&&(b=p.json.result),typeof b>"u")throw new er("internal","Response is missing data field.");return{data:hc(b)}}function AL(s,e,t,a){const o=s._url(e);return CL(s,o,t,a||{})}async function CL(s,e,t,a){t=Gf(t);const o={data:t},c=await KE(s,a);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:c,signal:a?.signal,credentials:GE(s)})}catch(j){if(j instanceof Error&&j.name==="AbortError"){const B=new er("cancelled","Request was cancelled.");return{data:Promise.reject(B),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(B)}}}}}}const I=Kf(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let m,p;const g=new Promise((j,I)=>{m=j,p=I});a?.signal?.addEventListener("abort",()=>{const j=new er("cancelled","Request was cancelled.");p(j)});const b=d.body.getReader(),v=RL(b,m,p,a?.signal);return{stream:{[Symbol.asyncIterator](){const j=v.getReader();return{async next(){const{value:I,done:B}=await j.read();return{value:I,done:B}},async return(){return await j.cancel(),{done:!0,value:void 0}}}}},data:g}}function RL(s,e,t,a){const o=(d,m)=>{const p=d.match(wL);if(!p)return;const g=p[1];try{const b=JSON.parse(g);if("result"in b){e(hc(b.result));return}if("message"in b){m.enqueue(hc(b.message));return}if("error"in b){const v=Kf(0,b);m.error(v),t(v);return}}catch(b){if(b instanceof er){m.error(b),t(b);return}}},c=new TextDecoder;return new ReadableStream({start(d){let m="";return p();async function p(){if(a?.aborted){const g=new er("cancelled","Request was cancelled");return d.error(g),t(g),Promise.resolve()}try{const{value:g,done:b}=await s.read();if(b){m.trim()&&o(m.trim(),d),d.close();return}if(a?.aborted){const j=new er("cancelled","Request was cancelled");d.error(j),t(j),await s.cancel();return}m+=c.decode(g,{stream:!0});const v=m.split(`
`);m=v.pop()||"";for(const j of v)j.trim()&&o(j.trim(),d);return p()}catch(g){const b=g instanceof er?g:Kf(0,null);d.error(b),t(b)}}},cancel(){return s.cancel()}})}const sN="@firebase/functions",nN="0.13.1";const IL="auth-internal",DL="app-check-internal",ML="messaging-internal";function OL(s){const e=(t,{instanceIdentifier:a})=>{const o=t.getProvider("app").getImmediate(),c=t.getProvider(IL),d=t.getProvider(ML),m=t.getProvider(DL);return new _L(o,c,d,m,a)};no(new ui(hb,e,"PUBLIC").setMultipleInstances(!0)),zr(sN,nN,s),zr(sN,nN,"esm2020")}function PL(s=am(),e=Qg){const a=od(as(s),hb).getImmediate({identifier:e}),o=ux("functions");return o&&LL(a,...o),a}function LL(s,e,t){jL(as(s),e,t)}function Pr(s,e,t){return EL(as(s),e)}OL();const zL={apiKey:"AIzaSyDGEnGxtkor9PwWkgjiQvrr9SmZ_IHKapE",authDomain:"content-auto-post.firebaseapp.com",projectId:"content-auto-post",storageBucket:"content-auto-post.firebasestorage.app",messagingSenderId:"710780145350",appId:"1:710780145350:web:f15040b92353daa93ad1c7",measurementId:"G-XXMR04318T",databaseURL:"https://content-auto-post-default-rtdb.asia-southeast1.firebasedatabase.app"},Im=h_(zL),gn=J6(Im),fe=gE(Im),jd=fL(Im),Lr=PL(Im),VL=()=>{const[s,e]=N.useState(!1),[t,a]=N.useState({x:0,y:0}),[o,c]=N.useState(!1),[d,m]=N.useState(!1);N.useEffect(()=>{c(!0);const g=b=>{a({x:b.clientX,y:b.clientY})};return window.addEventListener("mousemove",g),()=>window.removeEventListener("mousemove",g)},[]);const p=async()=>{try{const g=new ya;await H_(gn,g)}catch(g){console.error("Login failed:",g)}};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 text-white overflow-hidden",children:[r.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute w-96 h-96 bg-red-500/20 rounded-full blur-3xl animate-pulse",style:{left:`${t.x*.05}px`,top:`${t.y*.05}px`,transition:"all 0.3s ease-out"}}),r.jsx("div",{className:"absolute w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse",style:{right:`${-t.x*.05}px`,bottom:`${-t.y*.05}px`,transition:"all 0.3s ease-out"}}),r.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((g,b)=>r.jsx("div",{className:"absolute w-1 h-1 bg-white/30 rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${3+Math.random()*2}s`}},b))})]}),r.jsxs("nav",{className:"relative z-10 px-6 py-4",children:[r.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[r.jsxs("div",{className:`flex items-center gap-2 transition-all duration-1000 ${o?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"}`,children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:r.jsx(nf,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-red-400 to-red-300 bg-clip-text text-transparent",children:"Content Auto Post"})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[r.jsx("a",{href:"#features",className:"text-gray-300 hover:text-white transition-colors",children:"Features"}),r.jsx("a",{href:"#how-it-works",className:"text-gray-300 hover:text-white transition-colors",children:"How it Works"}),r.jsx("a",{href:"#pricing",className:"text-gray-300 hover:text-white transition-colors",children:"Pricing"}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-6 py-2 bg-white text-slate-900 rounded-lg font-semibold hover:bg-slate-100 transition-all transform hover:scale-105 shadow-lg",children:[r.jsx(wg,{className:"w-4 h-4"}),"Sign In"]})]}),r.jsx("button",{onClick:()=>e(!s),className:"md:hidden p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:s?r.jsx(Qs,{className:"w-6 h-6"}):r.jsx(c3,{className:"w-6 h-6"})})]}),s&&r.jsx("div",{className:"md:hidden absolute top-full left-0 right-0 bg-slate-900/95 backdrop-blur-md border-t border-white/10",children:r.jsxs("div",{className:"px-6 py-4 flex flex-col gap-4",children:[r.jsx("a",{href:"#features",className:"text-gray-300 hover:text-white transition-colors",children:"Features"}),r.jsx("a",{href:"#how-it-works",className:"text-gray-300 hover:text-white transition-colors",children:"How it Works"}),r.jsx("a",{href:"#pricing",className:"text-gray-300 hover:text-white transition-colors",children:"Pricing"}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center justify-center gap-2 px-6 py-2 bg-white text-slate-900 rounded-lg font-semibold hover:bg-slate-100 transition-all",children:[r.jsx(wg,{className:"w-4 h-4"}),"Sign In"]})]})})]}),r.jsx("section",{className:"relative z-10 px-6 py-20 md:py-32",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:`transition-all duration-1000 delay-200 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[r.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6",children:[r.jsx("span",{className:"bg-gradient-to-r from-red-400 via-red-300 to-orange-400 bg-clip-text text-transparent",children:"AI-Powered Video"}),r.jsx("br",{}),r.jsx("span",{className:"text-white",children:"Content Automation"})]}),r.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Transform your ideas into captivating videos with AI. Create, schedule, and publish content automatically across platforms."})]}),r.jsxs("div",{className:`flex flex-col sm:flex-row gap-4 justify-center mb-12 transition-all duration-1000 delay-400 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 rounded-xl font-bold text-lg hover:from-red-600 hover:to-red-700 transition-all transform hover:scale-105 shadow-xl",children:[r.jsx(F0,{className:"w-5 h-5"}),"Start Creating Free"]}),r.jsxs("button",{className:"flex items-center justify-center gap-2 px-8 py-4 bg-white/10 backdrop-blur-md rounded-xl font-bold text-lg hover:bg-white/20 transition-all border border-white/20",children:[r.jsx(Ta,{className:"w-5 h-5"}),"Watch Demo"]})]}),r.jsxs("div",{className:`flex items-center justify-center gap-8 transition-all duration-1000 delay-600 ${o?"opacity-100":"opacity-0"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_f,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"}),r.jsx("span",{className:"text-gray-300",children:"4.9/5 Rating"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wa,{className:"w-5 h-5 text-blue-400"}),r.jsx("span",{className:"text-gray-300",children:"10,000+ Creators"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cx,{className:"w-5 h-5 text-green-400"}),r.jsx("span",{className:"text-gray-300",children:"50+ Countries"})]})]})]})})}),d&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>m(!1)}),r.jsxs("div",{className:"relative bg-gradient-to-br from-slate-900 to-slate-950 rounded-2xl border border-white/20 p-8 max-w-md w-full",children:[r.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:r.jsx(Qs,{className:"w-5 h-5 text-gray-400"})}),r.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Sign In"}),r.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center gap-3 px-6 py-3 bg-white text-slate-900 rounded-xl font-semibold hover:bg-slate-100 transition-all transform hover:scale-105 shadow-lg mb-4",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-white/20"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-slate-900 text-gray-400",children:"or continue with email"})})]}),r.jsxs("form",{className:"space-y-4",children:[r.jsx("div",{children:r.jsx("input",{type:"email",placeholder:"Email address",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:border-red-500/50 focus:outline-none transition-colors"})}),r.jsx("div",{children:r.jsx("input",{type:"password",placeholder:"Password",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:border-red-500/50 focus:outline-none transition-colors"})}),r.jsx("button",{type:"submit",className:"w-full px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 rounded-xl font-semibold hover:from-red-600 hover:to-red-700 transition-all transform hover:scale-105 shadow-lg",children:"Sign In"})]}),r.jsxs("div",{className:"flex items-center justify-between mt-6",children:[r.jsx("a",{href:"#",className:"text-red-400 hover:text-red-300 transition-colors text-sm",children:"Forgot password?"}),r.jsx("a",{href:"#",className:"text-red-400 hover:text-red-300 transition-colors text-sm",children:"Sign up"})]})]})]}),r.jsx("section",{id:"features",className:"relative z-10 px-6 py-20 bg-white/5 backdrop-blur-sm",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:r.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Powerful Features"})}),r.jsx("p",{className:"text-xl text-gray-300",children:"Everything you need to automate your video content"})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"group relative p-8 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 hover:bg-white/15 transition-all transform hover:scale-105",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/20 to-purple-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center mb-4",children:r.jsx(tf,{className:"w-7 h-7 text-white"})}),r.jsx("h3",{className:"text-2xl font-bold mb-3",children:"AI Story Director"}),r.jsx("p",{className:"text-gray-300",children:"Our AI helps you create compelling video narratives with smart scene generation and cinematic structure."})]})]}),r.jsxs("div",{className:"group relative p-8 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 hover:bg-white/15 transition-all transform hover:scale-105",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mb-4",children:r.jsx(bs,{className:"w-7 h-7 text-white"})}),r.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Smart Expander"}),r.jsx("p",{className:"text-gray-300",children:"Transform simple ideas into detailed cinematic prompts with AI-powered content expansion."})]})]}),r.jsxs("div",{className:"group relative p-8 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 hover:bg-white/15 transition-all transform hover:scale-105",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mb-4",children:r.jsx(tm,{className:"w-7 h-7 text-white"})}),r.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Auto Scheduling"}),r.jsx("p",{className:"text-gray-300",children:"Schedule your content across multiple platforms automatically with optimal timing."})]})]})]})]})}),r.jsx("section",{id:"how-it-works",className:"relative z-10 px-6 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:r.jsx("span",{className:"bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent",children:"How It Works"})}),r.jsx("p",{className:"text-xl text-gray-300",children:"Create amazing videos in 4 simple steps"})]}),r.jsx("div",{className:"grid md:grid-cols-4 gap-8",children:[{icon:s_,title:"Create Mode",desc:"Design your video template with AI assistance"},{icon:bs,title:"Add Expander",desc:"Enhance with cinematic details and effects"},{icon:nf,title:"Generate Content",desc:"AI creates your video scenes automatically"},{icon:F0,title:"Publish Everywhere",desc:"Schedule and post across platforms"}].map((g,b)=>r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"relative mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto",children:r.jsx(g.icon,{className:"w-10 h-10 text-white"})}),r.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-sm font-bold",children:b+1})]}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:g.title}),r.jsx("p",{className:"text-gray-300",children:g.desc})]},b))})]})}),r.jsx("section",{id:"pricing",className:"relative z-10 px-6 py-20 bg-white/5 backdrop-blur-sm",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:r.jsx("span",{className:"bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Simple Pricing"})}),r.jsx("p",{className:"text-xl text-gray-300",children:"Start free, upgrade when you need more"})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[r.jsxs("div",{className:"p-8 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 hover:border-white/20 transition-all",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Free"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("span",{className:"text-4xl font-bold",children:"$0"}),r.jsx("span",{className:"text-gray-400",children:"/month"})]}),r.jsx("ul",{className:"space-y-3 mb-8",children:["3 Projects","10 Videos/month","Basic AI Features","Community Support"].map((g,b)=>r.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[r.jsx(_a,{className:"w-5 h-5 text-green-400"}),g]},b))}),r.jsx("button",{onClick:()=>m(!0),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-all font-semibold",children:"Get Started"})]}),r.jsxs("div",{className:"relative p-8 bg-gradient-to-br from-red-500/20 to-purple-500/20 backdrop-blur-md rounded-2xl border-2 border-red-500/50 hover:border-red-400 transition-all transform scale-105",children:[r.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-red-500 to-red-600 rounded-full text-sm font-bold",children:"POPULAR"}),r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pro"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("span",{className:"text-4xl font-bold",children:"$29"}),r.jsx("span",{className:"text-gray-400",children:"/month"})]}),r.jsx("ul",{className:"space-y-3 mb-8",children:["Unlimited Projects","100 Videos/month","Advanced AI Features","Priority Support","Custom Branding"].map((g,b)=>r.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[r.jsx(_a,{className:"w-5 h-5 text-green-400"}),g]},b))}),r.jsx("button",{onClick:()=>m(!0),className:"w-full py-3 rounded-xl bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 transition-all font-semibold",children:"Start Free Trial"})]}),r.jsxs("div",{className:"p-8 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10 hover:border-white/20 transition-all",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Enterprise"}),r.jsx("div",{className:"mb-6",children:r.jsx("span",{className:"text-4xl font-bold",children:"Custom"})}),r.jsx("ul",{className:"space-y-3 mb-8",children:["Unlimited Everything","Dedicated Account Manager","Custom AI Training","SLA & 24/7 Support","API Access"].map((g,b)=>r.jsxs("li",{className:"flex items-center gap-2 text-gray-300",children:[r.jsx(_a,{className:"w-5 h-5 text-green-400"}),g]},b))}),r.jsx("button",{className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-all font-semibold",children:"Contact Sales"})]})]})]})}),r.jsx("section",{className:"relative z-10 px-6 py-20",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:r.jsx("span",{className:"bg-gradient-to-r from-pink-400 to-red-400 bg-clip-text text-transparent",children:"Loved by Creators"})}),r.jsx("p",{className:"text-xl text-gray-300",children:"See what our users are saying"})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{name:"Sarah Chen",role:"Content Creator",avatar:"",quote:"This tool has revolutionized my workflow. I can now create 10x more content in half the time!"},{name:"Mike Johnson",role:"YouTube Creator",avatar:"",quote:"The AI Story Director is incredible. It understands exactly what kind of videos I want to create."},{name:"Lisa Park",role:"Marketing Agency",avatar:"",quote:"We've increased our client output by 300% since using Content Auto Post. Game changer!"}].map((g,b)=>r.jsxs("div",{className:"p-6 bg-white/10 backdrop-blur-md rounded-2xl border border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-purple-500 rounded-full flex items-center justify-center text-2xl",children:g.avatar}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold",children:g.name}),r.jsx("p",{className:"text-sm text-gray-400",children:g.role})]})]}),r.jsxs("p",{className:"text-gray-300 italic",children:['"',g.quote,'"']}),r.jsx("div",{className:"flex gap-1 mt-4",children:[...Array(5)].map((v,j)=>r.jsx(_f,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"},j))})]},b))})]})}),r.jsx("section",{className:"relative z-10 px-6 py-16 bg-white/5 backdrop-blur-sm",children:r.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[r.jsx("p",{className:"text-gray-400 mb-8 uppercase tracking-wider text-sm font-semibold",children:"Publish to your favorite platforms"}),r.jsx("div",{className:"flex flex-wrap items-center justify-center gap-8 md:gap-16",children:[{icon:Fu,name:"YouTube",color:"text-red-500"},{icon:wf,name:"Instagram",color:"text-pink-500"},{icon:$u,name:"Facebook",color:"text-blue-500"},{icon:ww,name:"TikTok",color:"text-cyan-400"}].map((g,b)=>r.jsxs("div",{className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(g.icon,{className:`w-8 h-8 ${g.color}`}),r.jsx("span",{className:"text-lg font-semibold",children:g.name})]},b))})]})}),r.jsx("section",{className:"relative z-10 px-6 py-20",children:r.jsxs("div",{className:"max-w-3xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:r.jsx("span",{className:"bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"FAQ"})}),r.jsx("p",{className:"text-xl text-gray-300",children:"Frequently asked questions"})]}),r.jsx("div",{className:"space-y-4",children:[{q:"How does the AI generate videos?",a:"Our AI analyzes your content templates and uses advanced machine learning to create unique, engaging video scripts and scenes tailored to your brand."},{q:"Can I customize the AI's output?",a:"Yes! You can create custom 'Modes' and 'Expanders' to guide the AI's creative direction and ensure consistency with your brand voice."},{q:"What platforms are supported?",a:"We support YouTube, Instagram, Facebook, TikTok, and more. You can schedule and publish content to multiple platforms simultaneously."},{q:"Is there a free trial?",a:"Yes! Start with our free plan to explore the features. Upgrade to Pro anytime for unlimited access and advanced features."}].map((g,b)=>r.jsx("div",{className:"p-6 bg-white/10 backdrop-blur-md rounded-xl border border-white/10",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(hA,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-lg mb-2",children:g.q}),r.jsx("p",{className:"text-gray-300",children:g.a})]})]})},b))})]})}),r.jsx("section",{className:"relative z-10 px-6 py-20",children:r.jsx("div",{className:"max-w-4xl mx-auto text-center",children:r.jsxs("div",{className:"p-12 bg-gradient-to-br from-red-500/20 to-purple-500/20 backdrop-blur-md rounded-3xl border border-white/10",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Ready to Transform Your Content?"}),r.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Join thousands of creators using AI to automate their video production"}),r.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 rounded-xl font-bold text-lg hover:from-red-600 hover:to-red-700 transition-all transform hover:scale-105 shadow-xl",children:[r.jsx(F0,{className:"w-5 h-5"}),"Start Free Today",r.jsx(ju,{className:"w-5 h-5"})]})]})})}),r.jsx("footer",{className:"relative z-10 px-6 py-12 border-t border-white/10",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:r.jsx(nf,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"text-xl font-bold",children:"Content Auto Post"})]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"AI-powered video content automation platform for modern creators."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:"Product"}),r.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#features",className:"hover:text-white transition-colors",children:"Features"})}),r.jsx("li",{children:r.jsx("a",{href:"#pricing",className:"hover:text-white transition-colors",children:"Pricing"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Changelog"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Careers"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:"Legal"}),r.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Cookie Policy"})})]})]})]}),r.jsxs("div",{className:"pt-8 border-t border-white/10 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsx("p",{className:"text-gray-400 text-sm",children:" 2024 Content Auto Post. All rights reserved."}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx(Fu,{className:"w-5 h-5"})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx(wf,{className:"w-5 h-5"})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx($u,{className:"w-5 h-5"})}),r.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:r.jsx(ww,{className:"w-5 h-5"})})]})]})]})})]})},UL=(s,e)=>{const t=new Array(s.length+e.length);for(let a=0;a<s.length;a++)t[a]=s[a];for(let a=0;a<e.length;a++)t[s.length+a]=e[a];return t},BL=(s,e)=>({classGroupId:s,validator:e}),QE=(s=new Map,e=null,t)=>({nextPart:s,validators:e,classGroupId:t}),Qf="-",rN=[],$L="arbitrary..",FL=s=>{const e=qL(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return HL(d);const m=d.split(Qf),p=m[0]===""&&m.length>1?1:0;return YE(m,p,e)},getConflictingClassGroupIds:(d,m)=>{if(m){const p=a[d],g=t[d];return p?g?UL(g,p):p:g||rN}return t[d]||rN}}},YE=(s,e,t)=>{if(s.length-e===0)return t.classGroupId;const o=s[e],c=t.nextPart.get(o);if(c){const g=YE(s,e+1,c);if(g)return g}const d=t.validators;if(d===null)return;const m=e===0?s.join(Qf):s.slice(e).join(Qf),p=d.length;for(let g=0;g<p;g++){const b=d[g];if(b.validator(m))return b.classGroupId}},HL=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=s.slice(1,-1),t=e.indexOf(":"),a=e.slice(0,t);return a?$L+a:void 0})(),qL=s=>{const{theme:e,classGroups:t}=s;return GL(t,e)},GL=(s,e)=>{const t=QE();for(const a in s){const o=s[a];fb(o,t,a,e)}return t},fb=(s,e,t,a)=>{const o=s.length;for(let c=0;c<o;c++){const d=s[c];KL(d,e,t,a)}},KL=(s,e,t,a)=>{if(typeof s=="string"){QL(s,e,t);return}if(typeof s=="function"){YL(s,e,t,a);return}XL(s,e,t,a)},QL=(s,e,t)=>{const a=s===""?e:XE(e,s);a.classGroupId=t},YL=(s,e,t,a)=>{if(WL(s)){fb(s(a),e,t,a);return}e.validators===null&&(e.validators=[]),e.validators.push(BL(t,s))},XL=(s,e,t,a)=>{const o=Object.entries(s),c=o.length;for(let d=0;d<c;d++){const[m,p]=o[d];fb(p,XE(e,m),t,a)}},XE=(s,e)=>{let t=s;const a=e.split(Qf),o=a.length;for(let c=0;c<o;c++){const d=a[c];let m=t.nextPart.get(d);m||(m=QE(),t.nextPart.set(d,m)),t=m}return t},WL=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,JL=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),a=Object.create(null);const o=(c,d)=>{t[c]=d,e++,e>s&&(e=0,a=t,t=Object.create(null))};return{get(c){let d=t[c];if(d!==void 0)return d;if((d=a[c])!==void 0)return o(c,d),d},set(c,d){c in t?t[c]=d:o(c,d)}}},Yg="!",aN=":",ZL=[],iN=(s,e,t,a,o)=>({modifiers:s,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:a,isExternal:o}),e8=s=>{const{prefix:e,experimentalParseClassName:t}=s;let a=o=>{const c=[];let d=0,m=0,p=0,g;const b=o.length;for(let O=0;O<b;O++){const L=o[O];if(d===0&&m===0){if(L===aN){c.push(o.slice(p,O)),p=O+1;continue}if(L==="/"){g=O;continue}}L==="["?d++:L==="]"?d--:L==="("?m++:L===")"&&m--}const v=c.length===0?o:o.slice(p);let j=v,I=!1;v.endsWith(Yg)?(j=v.slice(0,-1),I=!0):v.startsWith(Yg)&&(j=v.slice(1),I=!0);const B=g&&g>p?g-p:void 0;return iN(c,I,j,B)};if(e){const o=e+aN,c=a;a=d=>d.startsWith(o)?c(d.slice(o.length)):iN(ZL,!1,d,void 0,!0)}if(t){const o=a;a=c=>t({className:c,parseClassName:o})}return a},t8=s=>{const e=new Map;return s.orderSensitiveModifiers.forEach((t,a)=>{e.set(t,1e6+a)}),t=>{const a=[];let o=[];for(let c=0;c<t.length;c++){const d=t[c],m=d[0]==="[",p=e.has(d);m||p?(o.length>0&&(o.sort(),a.push(...o),o=[]),a.push(d)):o.push(d)}return o.length>0&&(o.sort(),a.push(...o)),a}},s8=s=>({cache:JL(s.cacheSize),parseClassName:e8(s),sortModifiers:t8(s),...FL(s)}),n8=/\s+/,r8=(s,e)=>{const{parseClassName:t,getClassGroupId:a,getConflictingClassGroupIds:o,sortModifiers:c}=e,d=[],m=s.trim().split(n8);let p="";for(let g=m.length-1;g>=0;g-=1){const b=m[g],{isExternal:v,modifiers:j,hasImportantModifier:I,baseClassName:B,maybePostfixModifierPosition:O}=t(b);if(v){p=b+(p.length>0?" "+p:p);continue}let L=!!O,se=a(L?B.substring(0,O):B);if(!se){if(!L){p=b+(p.length>0?" "+p:p);continue}if(se=a(B),!se){p=b+(p.length>0?" "+p:p);continue}L=!1}const W=j.length===0?"":j.length===1?j[0]:c(j).join(":"),re=I?W+Yg:W,me=re+se;if(d.indexOf(me)>-1)continue;d.push(me);const xe=o(se,L);for(let Te=0;Te<xe.length;++Te){const D=xe[Te];d.push(re+D)}p=b+(p.length>0?" "+p:p)}return p},a8=(...s)=>{let e=0,t,a,o="";for(;e<s.length;)(t=s[e++])&&(a=WE(t))&&(o&&(o+=" "),o+=a);return o},WE=s=>{if(typeof s=="string")return s;let e,t="";for(let a=0;a<s.length;a++)s[a]&&(e=WE(s[a]))&&(t&&(t+=" "),t+=e);return t},i8=(s,...e)=>{let t,a,o,c;const d=p=>{const g=e.reduce((b,v)=>v(b),s());return t=s8(g),a=t.cache.get,o=t.cache.set,c=m,m(p)},m=p=>{const g=a(p);if(g)return g;const b=r8(p,t);return o(p,b),b};return c=d,(...p)=>c(a8(...p))},o8=[],Zs=s=>{const e=t=>t[s]||o8;return e.isThemeGetter=!0,e},JE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ZE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,l8=/^\d+\/\d+$/,c8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,d8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,h8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kl=s=>l8.test(s),wt=s=>!!s&&!Number.isNaN(Number(s)),Hi=s=>!!s&&Number.isInteger(Number(s)),ng=s=>s.endsWith("%")&&wt(s.slice(0,-1)),ti=s=>c8.test(s),m8=()=>!0,p8=s=>u8.test(s)&&!d8.test(s),e5=()=>!1,g8=s=>h8.test(s),x8=s=>f8.test(s),b8=s=>!Ye(s)&&!Xe(s),y8=s=>Ec(s,n5,e5),Ye=s=>JE.test(s),Bo=s=>Ec(s,r5,p8),rg=s=>Ec(s,j8,wt),oN=s=>Ec(s,t5,e5),v8=s=>Ec(s,s5,x8),Xh=s=>Ec(s,a5,g8),Xe=s=>ZE.test(s),gu=s=>Sc(s,r5),w8=s=>Sc(s,E8),lN=s=>Sc(s,t5),N8=s=>Sc(s,n5),_8=s=>Sc(s,s5),Wh=s=>Sc(s,a5,!0),Ec=(s,e,t)=>{const a=JE.exec(s);return a?a[1]?e(a[1]):t(a[2]):!1},Sc=(s,e,t=!1)=>{const a=ZE.exec(s);return a?a[1]?e(a[1]):t:!1},t5=s=>s==="position"||s==="percentage",s5=s=>s==="image"||s==="url",n5=s=>s==="length"||s==="size"||s==="bg-size",r5=s=>s==="length",j8=s=>s==="number",E8=s=>s==="family-name",a5=s=>s==="shadow",S8=()=>{const s=Zs("color"),e=Zs("font"),t=Zs("text"),a=Zs("font-weight"),o=Zs("tracking"),c=Zs("leading"),d=Zs("breakpoint"),m=Zs("container"),p=Zs("spacing"),g=Zs("radius"),b=Zs("shadow"),v=Zs("inset-shadow"),j=Zs("text-shadow"),I=Zs("drop-shadow"),B=Zs("blur"),O=Zs("perspective"),L=Zs("aspect"),se=Zs("ease"),W=Zs("animate"),re=()=>["auto","avoid","all","avoid-page","page","left","right","column"],me=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],xe=()=>[...me(),Xe,Ye],Te=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],T=()=>[Xe,Ye,p],A=()=>[Kl,"full","auto",...T()],z=()=>[Hi,"none","subgrid",Xe,Ye],$=()=>["auto",{span:["full",Hi,Xe,Ye]},Hi,Xe,Ye],q=()=>[Hi,"auto",Xe,Ye],k=()=>["auto","min","max","fr",Xe,Ye],ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_e=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...T()],M=()=>[Kl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],F=()=>[s,Xe,Ye],Q=()=>[...me(),lN,oN,{position:[Xe,Ye]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],C=()=>["auto","cover","contain",N8,y8,{size:[Xe,Ye]}],J=()=>[ng,gu,Bo],te=()=>["","none","full",g,Xe,Ye],ge=()=>["",wt,gu,Bo],Ie=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[wt,ng,lN,oN],qe=()=>["","none",B,Xe,Ye],be=()=>["none",wt,Xe,Ye],H=()=>["none",wt,Xe,Ye],Me=()=>[wt,Xe,Ye],Le=()=>[Kl,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ti],breakpoint:[ti],color:[m8],container:[ti],"drop-shadow":[ti],ease:["in","out","in-out"],font:[b8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ti],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ti],shadow:[ti],spacing:["px",wt],text:[ti],"text-shadow":[ti],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Kl,Ye,Xe,L]}],container:["container"],columns:[{columns:[wt,Ye,Xe,m]}],"break-after":[{"break-after":re()}],"break-before":[{"break-before":re()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:xe()}],overflow:[{overflow:Te()}],"overflow-x":[{"overflow-x":Te()}],"overflow-y":[{"overflow-y":Te()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[Hi,"auto",Xe,Ye]}],basis:[{basis:[Kl,"full","auto",m,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[wt,Kl,"auto","initial","none",Ye]}],grow:[{grow:["",wt,Xe,Ye]}],shrink:[{shrink:["",wt,Xe,Ye]}],order:[{order:[Hi,"first","last","none",Xe,Ye]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...ue(),"normal"]}],"justify-items":[{"justify-items":[..._e(),"normal"]}],"justify-self":[{"justify-self":["auto",..._e()]}],"align-content":[{content:["normal",...ue()]}],"align-items":[{items:[..._e(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._e(),{baseline:["","last"]}]}],"place-content":[{"place-content":ue()}],"place-items":[{"place-items":[..._e(),"baseline"]}],"place-self":[{"place-self":["auto",..._e()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:M()}],w:[{w:[m,"screen",...M()]}],"min-w":[{"min-w":[m,"screen","none",...M()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[d]},...M()]}],h:[{h:["screen","lh",...M()]}],"min-h":[{"min-h":["screen","lh","none",...M()]}],"max-h":[{"max-h":["screen","lh",...M()]}],"font-size":[{text:["base",t,gu,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Xe,rg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ng,Ye]}],"font-family":[{font:[w8,Ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,Xe,Ye]}],"line-clamp":[{"line-clamp":[wt,"none",Xe,rg]}],leading:[{leading:[c,...T()]}],"list-image":[{"list-image":["none",Xe,Ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Xe,Ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[wt,"from-font","auto",Xe,Bo]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[wt,"auto",Xe,Ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe,Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe,Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:C()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hi,Xe,Ye],radial:["",Xe,Ye],conic:[Hi,Xe,Ye]},_8,v8]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ie(),"hidden","none"]}],"divide-style":[{divide:[...Ie(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...Ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[wt,Xe,Ye]}],"outline-w":[{outline:["",wt,gu,Bo]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",b,Wh,Xh]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",v,Wh,Xh]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[wt,Bo]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",j,Wh,Xh]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[wt,Xe,Ye]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[wt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Xe,Ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":me()}],"mask-image-conic-pos":[{"mask-conic":[wt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:C()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Xe,Ye]}],filter:[{filter:["","none",Xe,Ye]}],blur:[{blur:qe()}],brightness:[{brightness:[wt,Xe,Ye]}],contrast:[{contrast:[wt,Xe,Ye]}],"drop-shadow":[{"drop-shadow":["","none",I,Wh,Xh]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",wt,Xe,Ye]}],"hue-rotate":[{"hue-rotate":[wt,Xe,Ye]}],invert:[{invert:["",wt,Xe,Ye]}],saturate:[{saturate:[wt,Xe,Ye]}],sepia:[{sepia:["",wt,Xe,Ye]}],"backdrop-filter":[{"backdrop-filter":["","none",Xe,Ye]}],"backdrop-blur":[{"backdrop-blur":qe()}],"backdrop-brightness":[{"backdrop-brightness":[wt,Xe,Ye]}],"backdrop-contrast":[{"backdrop-contrast":[wt,Xe,Ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",wt,Xe,Ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[wt,Xe,Ye]}],"backdrop-invert":[{"backdrop-invert":["",wt,Xe,Ye]}],"backdrop-opacity":[{"backdrop-opacity":[wt,Xe,Ye]}],"backdrop-saturate":[{"backdrop-saturate":[wt,Xe,Ye]}],"backdrop-sepia":[{"backdrop-sepia":["",wt,Xe,Ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Xe,Ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[wt,"initial",Xe,Ye]}],ease:[{ease:["linear","initial",se,Xe,Ye]}],delay:[{delay:[wt,Xe,Ye]}],animate:[{animate:["none",W,Xe,Ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[O,Xe,Ye]}],"perspective-origin":[{"perspective-origin":xe()}],rotate:[{rotate:be()}],"rotate-x":[{"rotate-x":be()}],"rotate-y":[{"rotate-y":be()}],"rotate-z":[{"rotate-z":be()}],scale:[{scale:H()}],"scale-x":[{"scale-x":H()}],"scale-y":[{"scale-y":H()}],"scale-z":[{"scale-z":H()}],"scale-3d":["scale-3d"],skew:[{skew:Me()}],"skew-x":[{"skew-x":Me()}],"skew-y":[{"skew-y":Me()}],transform:[{transform:[Xe,Ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:xe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe,Ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe,Ye]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[wt,gu,Bo,rg]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Yt=i8(S8);function zs({value:s,onChange:e,options:t,placeholder:a="",buttonClassName:o="",menuClassName:c="",optionClassName:d="",disabled:m=!1,minWidth:p=256,onAddNew:g=null,addNewPlaceholder:b="..."}){const[v,j]=N.useState(!1),[I,B]=N.useState({top:0,left:0,width:0}),[O,L]=N.useState(""),se=N.useRef(null),W=N.useRef(null),re=N.useRef(null),me=N.useMemo(()=>t.find(D=>D.value===s),[t,s]),xe=()=>{O.trim()&&g&&(g(O.trim()),L(""))},Te=N.useCallback(()=>{if(!se.current)return;const D=se.current.getBoundingClientRect();B({top:D.bottom+8,left:D.left,width:D.width})},[]);return N.useEffect(()=>{if(!v)return;const D=T=>{!W.current||!se.current||!W.current.contains(T.target)&&!se.current.contains(T.target)&&j(!1)};return Te(),window.addEventListener("resize",Te),window.addEventListener("scroll",Te,!0),document.addEventListener("mousedown",D),()=>{window.removeEventListener("resize",Te),window.removeEventListener("scroll",Te,!0),document.removeEventListener("mousedown",D)}},[v,Te]),r.jsxs("div",{className:"relative",children:[r.jsx("button",{ref:se,type:"button",disabled:m,onClick:()=>{m||(Te(),j(D=>!D))},className:Yt(o,m&&"opacity-50 cursor-not-allowed"),children:me?.label??a}),v&&qN.createPortal(r.jsxs("div",{ref:W,className:Yt("fixed bg-gradient-to-b from-slate-800/90 to-slate-900/95 backdrop-blur-[28px] border border-white/15 rounded-2xl shadow-[0_32px_100px_rgba(0,0,0,0.95)] ring-1 ring-white/10 z-[999999] overflow-hidden",c),style:{top:I.top,left:I.left,width:Math.max(p,I.width)},children:[r.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.map(D=>r.jsx("button",{type:"button",disabled:D.disabled,onClick:()=>{D.disabled||(e(D.value),j(!1))},className:Yt("w-full flex items-center gap-3 px-3 py-2 text-left leading-tight hover:bg-white/10 transition-colors",s===D.value?"bg-yellow-500/20 text-yellow-300 font-bold":"text-white",D.disabled&&"opacity-50 cursor-not-allowed",d),children:D.label},D.value))}),g&&r.jsx("div",{className:"border-t border-white/10 p-1.5",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("input",{ref:re,type:"text",value:O,onChange:D=>L(D.target.value),onKeyDown:D=>D.key==="Enter"&&xe(),placeholder:b,className:"flex-1 min-w-0 px-2 py-1 bg-black/40 border border-white/10 rounded text-white text-xs placeholder-slate-500 focus:outline-none focus:border-green-500"}),r.jsx("button",{type:"button",onClick:xe,disabled:!O.trim(),className:"flex-shrink-0 w-7 h-7 flex items-center justify-center bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Vn,{size:14})})]})})]}),document.body)]})}const cN=({platform:s,size:e=16})=>({facebook:r.jsx($u,{size:e,className:"text-blue-400"}),instagram:r.jsx(wf,{size:e,className:"text-pink-400"}),youtube:r.jsx(Fu,{size:e,className:"text-red-400"}),tiktok:r.jsx(rd,{size:e,className:"text-cyan-400"})})[s?.toLowerCase()]||r.jsx(si,{size:e,className:"text-slate-400"}),xu=({icon:s,label:e,value:t,subValue:a,trend:o,trendUp:c,color:d,loading:m})=>r.jsxs("div",{className:`group relative bg-gradient-to-br from-${d}-900/30 to-slate-900/50 backdrop-blur-xl rounded-3xl border border-white/10 p-5 hover:border-${d}-500/30 hover:scale-[1.03] transition-all duration-500 cursor-pointer overflow-hidden`,children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-${d}-500/0 via-${d}-500/5 to-${d}-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000`}),r.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 bg-${d}-500/10 rounded-full blur-3xl group-hover:bg-${d}-500/20 transition-all duration-500`}),r.jsxs("div",{className:"flex items-start justify-between relative",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br from-${d}-400 to-${d}-600 flex items-center justify-center shadow-lg shadow-${d}-500/30 group-hover:scale-110 group-hover:rotate-3 transition-all duration-300`,children:r.jsx(s,{className:"text-white",size:28})}),r.jsxs("div",{children:[m?r.jsx(ot,{size:24,className:"animate-spin text-slate-400"}):r.jsx("p",{className:"text-3xl font-black text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-${color}-200 transition-all",children:t}),r.jsx("p",{className:"text-sm text-slate-400 font-medium",children:e}),a&&r.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:a})]})]}),o!==void 0&&r.jsxs("div",{className:`flex items-center gap-1 px-2.5 py-1.5 rounded-xl text-xs font-bold ${c?"bg-green-500/20 text-green-400 shadow-lg shadow-green-500/20":"bg-red-500/20 text-red-400 shadow-lg shadow-red-500/20"}`,children:[c?r.jsx(ni,{size:14}):r.jsx(qo,{size:14}),o,"%"]})]})]});function T8(){const{t:s}=ed(),[e,t]=N.useState(null),[a,o]=N.useState(!0),[c,d]=N.useState(0),[m,p]=N.useState([]),[g,b]=N.useState([]),[v,j]=N.useState([]),[I,B]=N.useState([]),[O,L]=N.useState([]),[se,W]=N.useState("all"),[re,me]=N.useState(""),[xe,Te]=N.useState("7d"),[D,T]=N.useState(null),[A,z]=N.useState({start:"",end:""}),[$,q]=N.useState(!1);N.useEffect(()=>{const M=Ia(gn,F=>{t(F),F||o(!1)});return()=>M()},[]),N.useEffect(()=>{if(!e)return;const M=[];return M.push(Gt(Be(fe,"users",e.uid,"wallet","main"),F=>{d(F.exists()&&F.data().balance||0)})),M.push(Gt(He(fe,"users",e.uid,"accounts"),F=>{p(F.docs.map(Q=>({id:Q.id,...Q.data()})))})),M.push(Gt(ys(He(fe,"users",e.uid,"projects"),en("createdAt","desc")),F=>{b(F.docs.map(Q=>({id:Q.id,...Q.data()})))})),M.push(Gt(He(fe,"users",e.uid,"expanders"),F=>{j(F.docs.map(Q=>({id:Q.id,...Q.data()})))})),M.push(Gt(ys(He(fe,"users",e.uid,"transactions"),en("date","desc"),Cm(10)),F=>{B(F.docs.map(Q=>({id:Q.id,...Q.data()})))})),M.push(Gt(He(fe,"users",e.uid,"content_queue"),F=>{L(F.docs.map(Q=>({id:Q.id,...Q.data()})))})),o(!1),()=>M.forEach(F=>F())},[e]);const k=N.useMemo(()=>{const M=m.length,F=m.reduce((Ce,qe)=>Ce+(qe.followers||0),0),Q=m.reduce((Ce,qe)=>Ce+(qe.videoCount||0),0),de=g.length,C=g.filter(Ce=>Ce.status==="active").length,J=v.length,te=v.filter(Ce=>Ce.isPublished||Ce.isPublishedFree).length,ge=O.filter(Ce=>Ce.status==="pending").length,Ie=O.filter(Ce=>{if(!Ce.scheduledAt)return!1;const qe=Ce.scheduledAt.seconds?new Date(Ce.scheduledAt.seconds*1e3):new Date(Ce.scheduledAt),be=new Date;return qe.toDateString()===be.toDateString()}).length,De={};return m.forEach(Ce=>{const qe=Ce.platform?.toLowerCase()||"other";De[qe]||(De[qe]={count:0,followers:0,videos:0}),De[qe].count++,De[qe].followers+=Ce.followers||0,De[qe].videos+=Ce.videoCount||0}),{totalAccounts:M,totalFollowers:F,totalVideos:Q,totalProjects:de,activeProjects:C,totalExpanders:J,publishedExpanders:te,pendingQueue:ge,todayPosts:Ie,platformStats:De}},[m,g,v,O]),ue=N.useMemo(()=>{let M=[...m];if(se!=="all"&&(M=M.filter(F=>F.platform?.toLowerCase()===se)),re.trim()){const F=re.toLowerCase();M=M.filter(Q=>Q.name?.toLowerCase().includes(F)||Q.platform?.toLowerCase().includes(F))}return M},[m,se,re]),_e=N.useMemo(()=>{let M=[],F=[],Q=[];switch(xe){case"1d":M=Array.from({length:24},(J,te)=>`${String(te).padStart(2,"0")}:00`),F=Array.from({length:24},()=>Math.floor(Math.random()*10)),Q=Array.from({length:24},()=>Math.floor(Math.random()*50));break;case"7d":M=["","","","","","",""],F=[12,19,8,25,15,22,18],Q=[150,220,180,350,280,420,380];break;case"1m":M=[" 1"," 2"," 3"," 4"],F=[85,92,78,110],Q=[1200,1450,980,1680];break;case"1y":M=["..","..","..","..","..","..","..","..","..","..","..",".."],F=[320,280,350,420,380,450,520,480,390,410,460,500],Q=[4500,5200,4800,6100,5800,7200,8100,7500,6800,7100,7800,8500];break;case"custom":M=[""],F=[Math.floor(Math.random()*100)],Q=[Math.floor(Math.random()*1e3)];break;default:M=["","","","","","",""],F=[12,19,8,25,15,22,18],Q=[150,220,180,350,280,420,380]}const de=Math.max(...F,1),C=Math.max(...Q,1);return{labels:M,postsData:F,followersData:Q,maxPosts:de,maxFollowers:C}},[xe,A]),P=[{value:"1d",label:"1 ",icon:ks},{value:"7d",label:"7 ",icon:Gk},{value:"1m",label:"1 ",icon:mg},{value:"1y",label:"1 ",icon:Qk},{value:"custom",label:"",icon:lx}];return r.jsxs("div",{className:"min-h-screen flex flex-col p-8 gap-6 bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 text-white font-sans overflow-auto relative",children:[r.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-red-900/10 via-transparent to-transparent"})]}),r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden z-10",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(QN,{className:"text-white",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:"Dashboard"}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),""]})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"px-4 py-2 bg-black/30 backdrop-blur-xl rounded-xl border border-white/10 text-sm text-slate-300",children:[r.jsx(mg,{size:16,className:"inline mr-2 text-orange-400"}),new Date().toLocaleDateString("th-TH",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4 relative z-10",children:[r.jsx(xu,{icon:rc,label:"",value:`${c.toLocaleString()} `,color:"red",loading:a}),r.jsx(xu,{icon:bg,label:"",value:k.totalProjects,subValue:`${k.activeProjects} `,color:"red",loading:a}),r.jsx(xu,{icon:si,label:"",value:k.totalAccounts,subValue:`${k.totalFollowers.toLocaleString()} `,color:"orange",loading:a}),r.jsx(xu,{icon:Ji,label:"Expanders",value:k.totalExpanders,subValue:`${k.publishedExpanders} /`,color:"orange",loading:a}),r.jsx(xu,{icon:ks,label:"",value:k.pendingQueue,subValue:`${k.todayPosts} `,color:"amber",loading:a})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 relative z-10",children:[r.jsxs("div",{className:"lg:col-span-2 group relative bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-6 hover:border-orange-500/30 transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-orange-500/3 to-orange-500/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/30",children:r.jsx(sf,{size:20,className:"text-white"})}),""]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:""})]}),r.jsx("div",{className:"flex flex-wrap items-center gap-2",children:P.map(M=>{const F=M.icon,Q=xe===M.value;return r.jsxs("button",{onClick:()=>{Te(M.value),M.value==="custom"?q(!0):q(!1)},className:`group/btn relative flex items-center gap-1.5 px-3 py-2 rounded-xl text-xs font-semibold transition-all duration-300 ${Q?"bg-gradient-to-r from-red-600 to-orange-500 text-white shadow-lg shadow-orange-500/30":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white border border-white/5 hover:border-white/20"}`,children:[r.jsx(F,{size:14,className:`transition-transform duration-300 ${Q?"animate-pulse":"group-hover/btn:rotate-12"}`}),M.label,Q&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]},M.value)})})]}),$&&xe==="custom"&&r.jsxs("div",{className:"flex items-center gap-3 mb-4 p-3 bg-black/30 rounded-xl border border-white/10",children:[r.jsx("input",{type:"date",value:A.start,onChange:M=>z(F=>({...F,start:M.target.value})),className:"px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500"}),r.jsx("span",{className:"text-slate-500",children:""}),r.jsx("input",{type:"date",value:A.end,onChange:M=>z(F=>({...F,end:M.target.value})),className:"px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:border-blue-500"})]}),r.jsxs("div",{className:"flex items-center gap-6 mb-4 text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-4 h-4 bg-gradient-to-t from-blue-600 to-blue-400 rounded shadow-lg shadow-blue-500/30"}),r.jsx("span",{className:"text-slate-300",children:""})]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-4 h-4 bg-gradient-to-t from-emerald-600 to-emerald-400 rounded shadow-lg shadow-emerald-500/30"}),r.jsx("span",{className:"text-slate-300",children:""})]})]}),r.jsx("div",{className:"flex items-end justify-between h-48 px-2 gap-1",children:_e.labels.map((M,F)=>r.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group/bar",onMouseEnter:()=>T(F),onMouseLeave:()=>T(null),children:[D===F&&r.jsxs("div",{className:"absolute -top-2 left-1/2 transform -translate-x-1/2 bg-black/90 backdrop-blur-xl px-4 py-3 rounded-xl border border-white/20 shadow-2xl z-50 whitespace-nowrap animate-fadeIn",children:[r.jsx("p",{className:"text-xs text-slate-400 mb-1",children:M}),r.jsxs("p",{className:"text-sm font-bold text-blue-400 flex items-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),": ",_e.postsData[F]]}),r.jsxs("p",{className:"text-sm font-bold text-emerald-400 flex items-center gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),": +",_e.followersData[F].toLocaleString()]})]}),r.jsxs("div",{className:"relative flex items-end gap-1 h-36 w-full justify-center",children:[r.jsx("div",{className:`w-5 bg-gradient-to-t from-blue-600 via-blue-500 to-blue-400 rounded-t-lg transition-all duration-500 cursor-pointer shadow-lg ${D===F?"shadow-blue-500/50 scale-110 opacity-100":"shadow-blue-500/20 opacity-80 hover:opacity-100"}`,style:{height:`${_e.postsData[F]/_e.maxPosts*100}%`,minHeight:"12px",transform:D===F?"scaleY(1.05)":"scaleY(1)",transformOrigin:"bottom"}}),r.jsx("div",{className:`w-5 bg-gradient-to-t from-emerald-600 via-emerald-500 to-emerald-400 rounded-t-lg transition-all duration-500 cursor-pointer shadow-lg ${D===F?"shadow-emerald-500/50 scale-110 opacity-100":"shadow-emerald-500/20 opacity-80 hover:opacity-100"}`,style:{height:`${_e.followersData[F]/_e.maxFollowers*100}%`,minHeight:"12px",transform:D===F?"scaleY(1.05)":"scaleY(1)",transformOrigin:"bottom"}})]}),r.jsx("span",{className:`text-xs transition-all duration-300 ${D===F?"text-white font-bold scale-110":"text-slate-500"}`,children:M})]},F))}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-blue-500/10 rounded-xl border border-blue-500/20",children:[r.jsx("p",{className:"text-2xl font-black text-blue-400",children:_e.postsData.reduce((M,F)=>M+F,0)}),r.jsx("p",{className:"text-xs text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 bg-emerald-500/10 rounded-xl border border-emerald-500/20",children:[r.jsxs("p",{className:"text-2xl font-black text-emerald-400",children:["+",_e.followersData.reduce((M,F)=>M+F,0).toLocaleString()]}),r.jsx("p",{className:"text-xs text-slate-400",children:""})]}),r.jsxs("div",{className:"text-center p-3 bg-purple-500/10 rounded-xl border border-purple-500/20",children:[r.jsx("p",{className:"text-2xl font-black text-purple-400",children:Math.round(_e.postsData.reduce((M,F)=>M+F,0)/_e.labels.length)}),r.jsx("p",{className:"text-xs text-slate-400",children:"/"})]}),r.jsxs("div",{className:"text-center p-3 bg-orange-500/10 rounded-xl border border-orange-500/20",children:[r.jsx("p",{className:"text-2xl font-black text-orange-400",children:Math.max(..._e.postsData)}),r.jsx("p",{className:"text-xs text-slate-400",children:""})]})]})]}),r.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-900/30 to-slate-900/50 backdrop-blur-xl rounded-3xl border border-white/10 p-6 hover:border-purple-500/30 transition-all duration-500 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/5 to-purple-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-5",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/30 group-hover:animate-pulse",children:r.jsx(Zk,{size:20,className:"text-white"})}),""]}),r.jsx("div",{className:"space-y-4",children:Object.entries(k.platformStats).length>0?Object.entries(k.platformStats).map(([M,F])=>{const de={facebook:"blue",instagram:"pink",youtube:"red",tiktok:"cyan"}[M]||"slate",C=k.totalAccounts>0?Math.round(F.count/k.totalAccounts*100):0;return r.jsxs("div",{className:"group/item p-3 bg-black/20 rounded-xl hover:bg-black/30 transition-all duration-300 cursor-pointer hover:scale-[1.02]",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg bg-${de}-500/20 flex items-center justify-center`,children:r.jsx(cN,{platform:M,size:18})}),r.jsx("span",{className:"text-sm font-semibold text-white capitalize",children:M})]}),r.jsxs("span",{className:"text-sm font-bold text-white",children:[C,"%"]})]}),r.jsx("div",{className:"h-2.5 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full bg-gradient-to-r from-${de}-600 to-${de}-400 rounded-full transition-all duration-500 group-hover/item:shadow-lg group-hover/item:shadow-${de}-500/30`,style:{width:`${C}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(wa,{size:12})," ",F.followers?.toLocaleString()||0]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(rd,{size:12})," ",F.videos||0," "]})]})]},M)}):r.jsxs("div",{className:"text-center py-10 text-slate-500",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-white/5 flex items-center justify-center",children:r.jsx(si,{size:32,className:"opacity-50"})}),r.jsx("p",{className:"text-sm mb-2",children:""}),r.jsxs(Xo,{to:"/platforms",className:"inline-flex items-center gap-1 text-purple-400 text-sm hover:underline font-semibold",children:[" ",r.jsx(ni,{size:14})]})]})})]})]}),r.jsxs("div",{className:"group relative bg-gradient-to-br from-green-900/20 to-slate-900/50 backdrop-blur-xl rounded-3xl border border-white/10 p-6 hover:border-green-500/30 transition-all duration-500 overflow-hidden z-10",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/0 via-green-500/5 to-green-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-lg shadow-green-500/30",children:r.jsx(si,{size:20,className:"text-white"})}),""]}),r.jsx("p",{className:"text-sm text-slate-400 mt-1",children:""})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(nd,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{type:"text",placeholder:"...",value:re,onChange:M=>me(M.target.value),className:"pl-10 pr-4 py-2.5 bg-black/40 border border-white/10 rounded-xl text-white placeholder-slate-500 text-sm focus:outline-none focus:border-green-500 transition-all w-48"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zs,{value:se,onChange:W,options:[{value:"all",label:""},{value:"facebook",label:"Facebook"},{value:"instagram",label:"Instagram"},{value:"youtube",label:"YouTube"},{value:"tiktok",label:"TikTok"}],buttonClassName:"appearance-none pl-4 pr-10 py-2.5 bg-black/40 border border-white/10 rounded-xl text-white text-sm focus:outline-none focus:border-green-500 cursor-pointer"}),r.jsx(tr,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none"})]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-white/10",children:[r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-400",children:""}),r.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-slate-400",children:""}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-400",children:""}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-400",children:""}),r.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-slate-400",children:""}),r.jsx("th",{className:"text-center py-3 px-4 text-sm font-semibold text-slate-400",children:""})]})}),r.jsx("tbody",{children:a?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"py-12 text-center",children:r.jsx(ot,{size:32,className:"animate-spin mx-auto text-slate-400"})})}):ue.length>0?ue.map(M=>r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors group",children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:M.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(M.name||"A")}&background=random`,alt:M.name,className:"w-10 h-10 rounded-xl border border-white/10 group-hover:border-green-500/50 transition-all"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-white",children:M.name||"Unnamed"}),r.jsx("p",{className:"text-xs text-slate-500",children:M.username||M.id})]})]})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cN,{platform:M.platform,size:18}),r.jsx("span",{className:"text-sm text-slate-300 capitalize",children:M.platform||"Unknown"})]})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsx("span",{className:"text-white font-semibold",children:(M.followers||0).toLocaleString()})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsxs("span",{className:`font-semibold ${(M.followersToday||0)>0?"text-green-400":"text-slate-500"}`,children:[(M.followersToday||0)>0?"+":"",(M.followersToday||0).toLocaleString()]})}),r.jsx("td",{className:"py-4 px-4 text-right",children:r.jsx("span",{className:"text-white",children:(M.videoCount||0).toLocaleString()})}),r.jsx("td",{className:"py-4 px-4 text-center",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-green-500/20 text-green-400 text-xs font-semibold rounded-lg",children:[r.jsx(Ln,{size:12})," "]})})]},M.id)):r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"py-12 text-center text-slate-500",children:[r.jsx(si,{size:40,className:"mx-auto mb-3 opacity-30"}),r.jsx("p",{className:"text-lg font-semibold mb-1",children:""}),r.jsx("p",{className:"text-sm",children:re?"":""}),!re&&r.jsxs(Xo,{to:"/platforms",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 bg-green-500/20 text-green-400 rounded-xl text-sm font-semibold hover:bg-green-500/30 transition-all",children:[r.jsx(si,{size:16})," "]})]})})})]})})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 relative z-10",children:[{to:"/projects",icon:bg,label:"",color:"blue",desc:""},{to:"/platforms",icon:si,label:"",color:"green",desc:""},{to:"/expander",icon:Ji,label:" Expander",color:"orange",desc:""},{to:"/marketplace",icon:em,label:"Marketplace",color:"purple",desc:" Expander"}].map((M,F)=>r.jsxs(Xo,{to:M.to,className:`group relative flex flex-col gap-3 p-5 bg-gradient-to-br from-${M.color}-900/30 to-slate-900/50 backdrop-blur-xl rounded-3xl border border-white/10 hover:border-${M.color}-500/50 transition-all duration-500 hover:scale-[1.03] hover:shadow-2xl hover:shadow-${M.color}-500/20 overflow-hidden`,children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-${M.color}-500/0 via-${M.color}-500/10 to-${M.color}-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000`}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br from-${M.color}-400 to-${M.color}-600 flex items-center justify-center shadow-lg shadow-${M.color}-500/30 group-hover:scale-110 group-hover:rotate-3 transition-all duration-300`,children:r.jsx(M.icon,{className:"text-white",size:28})}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-white text-lg block",children:M.label}),r.jsx("span",{className:"text-xs text-slate-400",children:M.desc})]})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsxs("span",{className:`inline-flex items-center gap-1 text-${M.color}-400 text-sm font-semibold group-hover:translate-x-1 transition-transform`,children:[" ",r.jsx(ni,{size:16})]})})]},F))})]})}const k8="modulepreload",A8=function(s){return"/"+s},uN={},C8=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){let g=function(b){return Promise.all(b.map(v=>Promise.resolve(v).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};var d=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");o=g(t.map(b=>{if(b=A8(b),b in uN)return;uN[b]=!0;const v=b.endsWith(".css"),j=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${j}`))return;const I=document.createElement("link");if(I.rel=v?"stylesheet":k8,v||(I.as="script"),I.crossOrigin="",I.href=b,p&&I.setAttribute("nonce",p),document.head.appendChild(I),v)return new Promise((B,O)=>{I.addEventListener("load",B),I.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return o.then(m=>{for(const p of m||[])p.status==="rejected"&&c(p.reason);return e().catch(c)})},R8=["mon","tue","wed","thu","fri","sat","sun"],I8=[{id:"facebook",label:"Facebook"},{id:"tiktok",label:"TikTok"},{id:"instagram",label:"Instagram"},{id:"youtube",label:"YouTube"}],D8=({slots:s})=>{const e=c=>{const[d,m]=c.split(":").map(Number);return d*60+m},t=N.useMemo(()=>{const c=[];let d=0;return[...s||[]].sort((p,g)=>p.start.localeCompare(g.start)).forEach(p=>{const g=e(p.start),b=e(p.end);g>d&&c.push({type:"free",start:d,end:g,duration:g-d}),c.push({type:"booked",start:g,end:b,duration:b-g,data:p}),d=Math.max(d,b)}),d<1440&&c.push({type:"free",start:d,end:1440,duration:1440-d}),c},[s]),a=c=>{const d=Math.floor(c/60),m=c%60;return`${String(d).padStart(2,"0")}:${String(m).padStart(2,"0")}`},o=[0,1,3,5,7,9,11,13,15,17,19,21,23,24];return r.jsxs("div",{className:"w-full mb-8 select-none",children:[r.jsx("div",{className:"w-full h-8 flex rounded bg-gray-800 relative overflow-hidden mb-2 shadow-inner border border-white/5",children:t.map((c,d)=>r.jsx("div",{style:{width:`${c.duration/1440*100}%`},className:Yt("h-full transition-all duration-300 relative group",c.type==="booked"?"bg-red-500/80 hover:bg-red-400 cursor-pointer":"bg-green-500/10 hover:bg-green-400/20"),title:`${a(c.start)} - ${a(c.end)} : ${c.type==="booked"?"Scheduled":"Free"}`,children:c.type==="booked"&&r.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(45deg,rgba(0,0,0,0.2)_25%,transparent_25%,transparent_50%,rgba(0,0,0,0.2)_50%,rgba(0,0,0,0.2)_75%,transparent_75%,transparent)] bg-[length:10px_10px] opacity-30"})},d))}),r.jsx("div",{className:"w-full relative h-6",children:o.map(c=>r.jsxs("div",{className:"absolute flex flex-col items-center",style:{left:`${c/24*100}%`},children:[r.jsx("div",{className:"w-px h-1 bg-gray-600 mb-1 transform -translate-x-1/2"}),r.jsx("span",{className:"text-sm text-white font-mono transform -translate-x-1/2",children:c===24?"00":String(c).padStart(2,"0")})]},c))})]})};function M8({projectId:s,modeScenes:e=null}){const{t}=ed(),a=N.useRef(null),[o,c]=N.useState("mon"),[d,m]=N.useState({mon:[],tue:[],wed:[],thu:[],fri:[],sat:[],sun:[]}),[p,g]=N.useState(null),[b,v]=N.useState([]),[j,I]=N.useState(!1),[B,O]=N.useState(null),[L,se]=N.useState(null),[W,re]=N.useState(null),[me,xe]=N.useState({start:"09:00",scenes:e||1,sceneDuration:8,platforms:[]});N.useEffect(()=>{e&&e>0&&xe(Q=>({...Q,scenes:e}))},[e]),N.useEffect(()=>{const Q=Ia(gn,de=>{if(g(de),de&&s){const C=He(fe,"users",de.uid,"projects",s,"slots"),J=Gt(C,Ie=>{const De={mon:[],tue:[],wed:[],thu:[],fri:[],sat:[],sun:[]};Ie.forEach(Ce=>{const qe=Ce.data();qe._docId=Ce.id,De[qe.day]&&De[qe.day].push(qe)}),Object.keys(De).forEach(Ce=>{De[Ce].sort((qe,be)=>qe.start.localeCompare(be.start))}),m(De)}),te=He(fe,"users",de.uid,"accounts"),ge=Gt(te,Ie=>{const De=[];Ie.forEach(Ce=>De.push({id:Ce.id,...Ce.data()})),v(De)});return()=>{J(),ge()}}else if(m({mon:[],tue:[],wed:[],thu:[],fri:[],sat:[],sun:[]}),!s&&de){const C=He(fe,"users",de.uid,"accounts"),J=Gt(C,te=>{const ge=[];te.forEach(Ie=>ge.push({id:Ie.id,...Ie.data()})),v(ge)});return()=>J()}});return()=>Q()},[s]),N.useEffect(()=>{function Q(de){a.current&&!a.current.contains(de.target)&&re(null)}return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const Te=(Q,de)=>{const[C,J]=Q.split(":").map(Number),te=new Date;return te.setHours(C,J+de),te.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})},D=(Q,de)=>Q*5+de*3+15,T=N.useMemo(()=>D(me.scenes,me.platforms.length),[me.scenes,me.platforms]),A=N.useMemo(()=>Te(me.start,T),[me.start,T]),z=(Q,de,C,J=null)=>C.some(te=>J&&te._docId===J?!1:Q<te.end&&de>te.start),$=async Q=>{if(!(!p||!s)){I(!0);try{const de=`${Q.day}_${Q.start.replace(":","")}`,C=Be(fe,"users",p.uid,"projects",s,"slots",de);await cs(C,Q)}catch(de){console.error("Error saving slot:",de),O(de.message)}finally{I(!1)}}},q=async Q=>{if(!(!p||!s))try{const{deleteDoc:de}=await C8(async()=>{const{deleteDoc:J}=await Promise.resolve().then(()=>aP);return{deleteDoc:J}},[]),C=Be(fe,"users",p.uid,"projects",s,"slots",Q);await de(C)}catch(de){console.error("Error deleting slot:",de)}},k=Q=>{se(Q._docId),xe({start:Q.start,scenes:Q.scenes,sceneDuration:Q.sceneDuration||8,platforms:Q.platforms||[]}),window.scrollTo({top:0,behavior:"smooth"})},ue=()=>{se(null),xe({start:"09:00",scenes:1,sceneDuration:8,platforms:[]}),O(null)},_e=(Q,de)=>{if(O(null),me.platforms.some(J=>J.platformId===Q)){xe(J=>({...J,platforms:J.platforms.filter(te=>te.platformId!==Q)}));return}const C=b.filter(J=>J.platform===Q);if(C.length===0){O(`No connected ${Q} account found. Please go to Platforms page.`);return}if(C.length===1){const J=C[0];P({platformId:Q,accountId:J.id,name:J.name,avatar:J.avatar});return}re({platformId:Q,accounts:C})},P=Q=>{xe(de=>({...de,platforms:[...de.platforms,Q]})),re(null)},M=async()=>{if(O(null),!p){O(t("timeslot.login_required"));return}if(me.platforms.length===0){O("Please select at least one platform");return}const Q=d[o]||[];if(z(me.start,A,Q,L)){O(t("timeslot.overlap_error"));return}const de={day:o,start:me.start,end:A,scenes:me.scenes,sceneDuration:me.sceneDuration,platformsCount:me.platforms.length,platforms:me.platforms,duration:T,createdAt:new Date().toISOString()};if(L){const C=`${o}_${me.start.replace(":","")}`;L!==C&&await q(L)}await $(de),L&&ue()},F=async Q=>{await q(Q._docId||`${o}_${Q.start.replace(":","")}`)};return r.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl p-8 shadow-2xl border border-white/10 w-full relative",children:[W&&r.jsxs("div",{ref:a,className:"absolute z-50 bg-slate-800 border border-white/20 rounded-xl shadow-2xl p-2 w-64 animate-in fade-in zoom-in-95 duration-200",style:{top:"40%",left:"50%",transform:"translate(-50%, -50%)"},children:[r.jsx("div",{className:"p-2 border-b border-white/10 mb-2",children:r.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:["Select ",W.platformId," Account"]})}),r.jsx("div",{className:"flex flex-col gap-1",children:W.accounts.map(Q=>r.jsxs("button",{onClick:()=>P({platformId:W.platformId,accountId:Q.id,name:Q.name,avatar:Q.avatar}),className:"flex items-center gap-3 w-full p-2 hover:bg-white/10 rounded-lg text-left transition-colors",children:[r.jsx("img",{src:Q.avatar,alt:Q.name,className:"w-8 h-8 rounded-full border border-white/10"}),r.jsx("span",{className:"text-sm text-white font-medium truncate",children:Q.name})]},Q.id))})]}),r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 text-white",children:[r.jsx(ks,{size:28,className:"text-red-400"}),r.jsx("h2",{className:"text-2xl font-bold tracking-wide",children:t("timeslot.title")})]}),j&&r.jsxs("div",{className:"text-sm text-white/70 flex items-center gap-2",children:[r.jsx(ot,{className:"animate-spin",size:16})," ",t("timeslot.saving")]})]}),B&&r.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-xl flex items-center gap-3 text-red-200 text-sm shadow-lg backdrop-blur-sm animate-pulse",children:[r.jsx(e_,{size:18,className:"text-red-500"}),B]}),r.jsxs("div",{className:`rounded-2xl p-6 border mb-8 transition-colors ${L?"bg-blue-900/10 border-blue-500/30":"bg-black/20 border-white/10"}`,children:[L&&r.jsxs("div",{className:"flex items-center gap-2 mb-4 text-blue-400 font-bold text-sm uppercase tracking-wider animate-in fade-in slide-in-from-left-2",children:[r.jsx(nc,{size:16})," Edit Mode Active"]}),r.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-end gap-4",children:[r.jsxs("div",{className:"flex-shrink-0",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-2 block uppercase tracking-wider font-semibold",children:t("timeslot.start_time")}),r.jsx("input",{type:"time",value:me.start,onChange:Q=>xe({...me,start:Q.target.value}),className:"w-32 h-12 bg-white/5 border border-white/10 rounded-xl px-3 text-lg text-white placeholder-white/20 focus:ring-2 focus:ring-red-500/50 focus:border-red-500/50 outline-none transition-all"})]}),r.jsxs("div",{className:"flex-shrink-0",children:[r.jsxs("label",{className:"text-xs text-gray-400 mb-2 block uppercase tracking-wider font-semibold",children:["Scenes ",e?r.jsx("span",{className:"text-purple-400",children:"(Mode)"}):""]}),r.jsx("input",{type:"number",min:"1",max:"20",value:e||me.scenes,onChange:Q=>!e&&xe({...me,scenes:Number(Q.target.value)}),readOnly:!!e,className:Yt("w-20 h-12 border rounded-xl px-3 text-lg text-white text-center placeholder-white/20 outline-none transition-all",e?"bg-purple-500/10 border-purple-500/30 cursor-not-allowed":"bg-white/5 border-white/10 focus:ring-2 focus:ring-red-500/50 focus:border-red-500/50")})]}),r.jsxs("div",{className:"flex-shrink-0",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-2 block uppercase tracking-wider font-semibold",children:"/"}),r.jsx("input",{type:"number",min:"5",max:"60",value:me.sceneDuration,onChange:Q=>xe({...me,sceneDuration:Number(Q.target.value)}),className:"w-20 h-12 bg-purple-500/10 border border-purple-500/30 rounded-xl px-3 text-lg text-white text-center placeholder-white/20 focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 outline-none transition-all",placeholder:"8"})]})]}),r.jsx("div",{className:"flex-grow"}),r.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[L&&r.jsx("button",{onClick:ue,className:"h-12 px-4 bg-white/10 hover:bg-white/20 text-gray-300 rounded-xl transition-all",title:"Cancel Edit",children:r.jsx(Qs,{size:20})}),r.jsxs("button",{onClick:M,disabled:j||!p,className:Yt("h-12 px-6 font-bold rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",L?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white"),children:[L?r.jsx(Zf,{size:18}):r.jsx(Vn,{size:18}),L?"Update":t("timeslot.add_slot")]})]})]}),r.jsxs("div",{className:"flex items-end justify-between gap-4",children:[r.jsxs("div",{className:"flex-shrink-0",children:[r.jsxs("label",{className:"text-xs text-gray-400 mb-2 block uppercase tracking-wider font-semibold",children:[t("timeslot.platforms")," (1-4)"]}),r.jsx("div",{className:"flex gap-2",children:I8.map(Q=>{const de=me.platforms.find(J=>J.platformId===Q.id),C=!!de;return r.jsxs("button",{onClick:J=>_e(Q.id),className:Yt("w-24 h-12 rounded-xl text-xs font-bold transition-all border flex flex-col items-center justify-center relative overflow-hidden",C?"bg-green-500/20 border-green-500 text-white shadow-[0_0_10px_rgba(34,197,94,0.3)]":"bg-white/5 border-transparent text-gray-400 hover:bg-white/10 hover:text-white hover:border-white/20"),children:[r.jsx("div",{className:"z-10 flex items-center gap-1",children:C?r.jsx("span",{className:"truncate max-w-full text-xs",children:de.name?.split(" ")[0]||Q.label}):Q.label}),C&&r.jsx(_a,{size:12,className:"absolute top-0.5 right-0.5 text-green-400"})]},Q.id)})})]}),r.jsxs("div",{className:"flex-shrink-0 px-4 h-12 bg-white/5 rounded-xl border border-white/10 flex items-center gap-2",children:[r.jsx("span",{className:"text-xs text-gray-400 uppercase",children:"Duration"}),r.jsxs("span",{className:"text-white font-bold text-lg",children:[T,"m"]})]})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide border-b border-white/10",children:R8.map(Q=>r.jsxs("button",{onClick:()=>c(Q),className:Yt("px-6 py-3 rounded-t-xl font-medium transition-all whitespace-nowrap relative top-[1px]",o===Q?"bg-white/10 text-white border-x border-t border-white/10":"text-gray-400 hover:text-white hover:bg-white/5"),children:[t(`days.${Q}`),(d[Q]?.length||0)>0&&r.jsx("span",{className:Yt("ml-2 px-1.5 py-0.5 text-xs rounded-full",o===Q?"bg-red-500 text-white":"bg-white/10 text-gray-400"),children:d[Q].length})]},Q))}),r.jsx(D8,{slots:d[o]}),r.jsx("div",{className:"space-y-3",children:(d[o]?.length||0)===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-white/20 border-2 border-dashed border-white/10 rounded-xl",children:[r.jsx(ks,{size:48,className:"mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:t("timeslot.no_slots")})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d[o]?.map((Q,de)=>r.jsxs("div",{className:Yt("flex flex-col p-5 bg-white/5 rounded-2xl border transition-all shadow-sm relative overflow-hidden group",L===Q._docId?"border-blue-500/50 bg-blue-500/5 ring-1 ring-blue-500/20":"border-white/5 hover:bg-white/10 hover:border-white/20"),children:[r.jsx("div",{className:"absolute top-0 left-0 h-1 bg-gradient-to-r from-red-500 to-purple-500",style:{width:`${Math.min(Q.duration,100)}%`}}),r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"font-mono text-2xl font-bold text-white",children:Q.start}),r.jsx("span",{className:"text-white/30",children:""}),r.jsx("span",{className:"font-mono text-xl text-white/60",children:Q.end})]}),r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>k(Q),className:"p-2 text-gray-500 hover:text-white hover:bg-blue-500/20 rounded-lg transition-all",title:"Edit Slot",children:r.jsx(nc,{size:18})}),r.jsx("button",{onClick:()=>F(Q),className:"p-2 text-gray-500 hover:text-white hover:bg-red-500 rounded-lg transition-all",title:t("timeslot.remove"),children:r.jsx(xs,{size:18})})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs font-medium",children:[r.jsxs("span",{className:"px-2 py-1 bg-blue-500/10 text-blue-300 rounded border border-blue-500/20",children:[Q.scenes," Scenes"]}),r.jsxs("span",{className:"px-2 py-1 bg-green-500/10 text-green-300 rounded border border-green-500/20",children:[Q.platforms?Q.platforms.length:Q.platformsCount," Platforms"]}),r.jsxs("span",{className:"px-2 py-1 bg-purple-500/10 text-purple-300 rounded border border-purple-500/20",children:[Q.duration," min"]})]}),Q.platforms&&Array.isArray(Q.platforms)&&r.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:Q.platforms.map((C,J)=>r.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-white/5 border border-white/5 text-[10px] text-gray-400",children:[r.jsxs("span",{children:[C.platformId.slice(0,2).toUpperCase(),":"]}),r.jsx("span",{className:"text-white",children:C.name||"Account"})]},J))})]},de))})})]})]})}function O8({projectId:s}){const[e,t]=N.useState("ALL"),[a,o]=N.useState("ALL"),[c,d]=N.useState("ALL"),[m,p]=N.useState([]);N.useEffect(()=>{if(!s||!gn.currentUser)return;const j=He(fe,"users",gn.currentUser.uid,"projects",s,"logs"),I=ys(j,en("timestamp","desc"),Cm(100)),B=Gt(I,O=>{const L=[];O.forEach(se=>{const W=se.data();let re=new Date;W.timestamp?.toDate?re=W.timestamp.toDate():W.timestamp&&(re=new Date),L.push({id:se.id,...W,rawDate:re,timestamp:re.toLocaleString("th-TH",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit",hour12:!1}),scenes:W.sceneCount||W.scenes||"-",videoLength:W.totalLength?`${W.totalLength}s`:W.videoLength||"-",duration:W.sceneDuration?`${W.sceneDuration}s/scene`:W.duration||"-"})}),p(L)});return()=>B()},[s]);const g=j=>{switch(j){case"success":return r.jsx(ox,{size:14,className:"text-green-400"});case"error":return r.jsx(xf,{size:14,className:"text-red-400"});case"warning":return r.jsx(e_,{size:14,className:"text-yellow-400"});default:return r.jsx(mw,{size:14,className:"text-gray-400"})}},b=j=>{switch(j){case"TIKTOK":return r.jsx(rd,{size:14});case"FACEBOOK":return r.jsx($u,{size:14});case"YOUTUBE":return r.jsx(Fu,{size:14});default:return r.jsx(mw,{size:14})}},v=m.filter(j=>{const I=e==="ALL"||j.status===e.toLowerCase(),B=a==="ALL"||j.platform===a;let O=!0;if(c!=="ALL"){const W=(new Date-j.rawDate)/(1e3*60*60);c==="24H"?O=W<=24:c==="7D"?O=W<=168:c==="30D"&&(O=W<=720)}return I&&B&&O});return r.jsxs("div",{className:"w-full h-full flex flex-col animate-in fade-in",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4 p-4 bg-black/20 rounded-xl border border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-lg border border-white/10",children:[r.jsx(mg,{size:14,className:"text-gray-400"}),r.jsx("span",{className:"text-xs font-bold text-gray-300 uppercase",children:"Time:"}),r.jsx(zs,{value:c,onChange:d,options:[{value:"ALL",label:"ALL TIME"},{value:"24H",label:"LAST 24 HOURS"},{value:"7D",label:"LAST 7 DAYS"},{value:"30D",label:"LAST 30 DAYS"}],buttonClassName:"bg-transparent text-white text-xs font-bold outline-none cursor-pointer"})]}),r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 rounded-lg border border-white/10",children:[r.jsx(lx,{size:14,className:"text-gray-400"}),r.jsx("span",{className:"text-xs font-bold text-gray-300 uppercase",children:"Status:"}),r.jsx(zs,{value:e,onChange:t,options:[{value:"ALL",label:"ALL EVENTS"},{value:"SUCCESS",label:" SUCCESS"},{value:"ERROR",label:" ERRORS"}],buttonClassName:"bg-transparent text-white text-xs font-bold outline-none cursor-pointer"})]}),r.jsx("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/5",children:["ALL","TIKTOK","FACEBOOK","YOUTUBE"].map(j=>r.jsx("button",{onClick:()=>o(j),className:`px-3 py-1 rounded text-[10px] font-bold uppercase transition-all ${a===j?"bg-white/20 text-white shadow-sm":"text-gray-500 hover:text-white"}`,children:j},j))})]}),r.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["Showing ",v.length," records"]})]}),r.jsxs("div",{className:"flex-1 overflow-hidden rounded-xl border border-white/10 bg-black/40 flex flex-col",children:[r.jsxs("div",{className:"grid grid-cols-12 gap-4 px-4 py-3 bg-white/5 border-b border-white/5 text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:[r.jsx("div",{className:"col-span-2",children:"Time"}),r.jsx("div",{className:"col-span-2",children:"Platform"}),r.jsx("div",{className:"col-span-1 text-center",children:"Status"}),r.jsx("div",{className:"col-span-4",children:"Details"}),r.jsx("div",{className:"col-span-1 text-center",children:"Scenes"}),r.jsx("div",{className:"col-span-1 text-center",children:"Length"}),r.jsx("div",{className:"col-span-1 text-right",children:"Exec."})]}),r.jsxs("div",{className:"overflow-y-auto flex-1 p-2 space-y-1 scrollbar-thin scrollbar-thumb-white/10",children:[v.map(j=>r.jsxs("div",{className:Yt("grid grid-cols-12 gap-4 px-3 py-2.5 rounded-lg items-center text-xs transition-colors border border-transparent",j.status==="error"?"bg-red-500/5 hover:bg-red-500/10 border-red-500/10":"hover:bg-white/5"),children:[r.jsx("div",{className:"col-span-2 text-gray-500 font-mono text-[10px]",children:j.timestamp}),r.jsxs("div",{className:"col-span-2 flex items-center gap-2 font-bold text-gray-300",children:[r.jsx("span",{className:Yt("p-1.5 rounded-md bg-white/5",j.platform==="TIKTOK"&&"text-pink-400 bg-pink-500/10",j.platform==="FACEBOOK"&&"text-blue-400 bg-blue-500/10",j.platform==="YOUTUBE"&&"text-red-400 bg-red-500/10"),children:b(j.platform)}),j.platform]}),r.jsx("div",{className:"col-span-1 flex justify-center",children:g(j.status)}),r.jsx("div",{className:Yt("col-span-4 truncate font-medium",j.status==="error"?"text-red-300":"text-gray-300"),children:j.message}),r.jsx("div",{className:"col-span-1 text-center text-gray-400 font-mono",children:j.scenes}),r.jsx("div",{className:"col-span-1 text-center text-gray-400 font-mono",children:j.videoLength}),r.jsx("div",{className:"col-span-1 text-right text-gray-600 font-mono text-[10px]",children:j.duration})]},j.id)),v.length===0&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-500",children:[r.jsx(nd,{size:24,className:"mb-2 opacity-50"}),r.jsx("p",{children:"No logs found matching filters"})]})]})]})]})}const P8=({projectId:s})=>{const[e,t]=N.useState(null),[a,o]=N.useState([]),[c,d]=N.useState([]),[m,p]=N.useState(!0),[g,b]=N.useState(!1),[v,j]=N.useState("queue"),[I,B]=N.useState(!1),[O,L]=N.useState(""),[se,W]=N.useState([{role:"assistant",content:`!  AI Episode Director 

  Episode List 

: " 10 "`}]),[re,me]=N.useState(!1),xe=N.useRef(null),[Te,D]=N.useState({title:"",description:""});N.useEffect(()=>{let P=null,M=null;const F=Ia(gn,Q=>{if(t(Q),P&&(P(),P=null),M&&(M(),M=null),Q&&s){const de=He(fe,"users",Q.uid,"projects",s,"episodes"),C=ys(de,en("order","asc"));P=Gt(C,ge=>{const Ie=[];ge.forEach(De=>{Ie.push({id:De.id,...De.data()})}),o(Ie),p(!1)},ge=>{console.warn("ContentQueue: Firebase listener error:",ge.code),o([]),p(!1)});const J=He(fe,"users",Q.uid,"projects",s,"episodeHistory"),te=ys(J,en("usedAt","desc"));M=Gt(te,ge=>{const Ie=[];ge.forEach(De=>{Ie.push({id:De.id,...De.data()})}),d(Ie)},ge=>{console.warn("ContentQueue: History listener error:",ge.code),d([])})}else o([]),d([]),p(!1)});return()=>{F(),P&&P(),M&&M()}},[s]),N.useEffect(()=>{xe.current?.scrollIntoView({behavior:"smooth"})},[se]);const T=async()=>{if(!(!Te.title.trim()||!e)){b(!0);try{const P=`ep_${Date.now()}`,M=Be(fe,"users",e.uid,"projects",s,"episodes",P);await cs(M,{title:Te.title.trim(),description:Te.description.trim(),status:"pending",order:a.length,createdAt:st()}),D({title:"",description:""})}catch(P){console.error("Error adding episode:",P)}finally{b(!1)}}},A=async P=>{if(e)try{await Sn(Be(fe,"users",e.uid,"projects",s,"episodes",P))}catch(M){console.error("Error deleting episode:",M)}},z=async P=>{if(e)try{const M=Be(fe,"users",e.uid,"projects",s,"episodes",P.id);await cs(M,{status:P.status==="completed"?"pending":"completed"},{merge:!0})}catch(M){console.error("Error toggling status:",M)}},$=async()=>{if(!O.trim()||re)return;const P=O.trim();W(M=>[...M,{role:"user",content:P}]),L(""),me(!0);try{const F=await Pr(Lr,"generateEpisodes")({prompt:P});if(F.data?.episodes){const Q=F.data.episodes.map((de,C)=>`${C+1}. **${de.title}**
   ${de.description}`).join(`

`);W(de=>[...de,{role:"assistant",content:`  ${F.data.episodes.length} Episodes:

${Q}

  ""  Queue`,episodes:F.data.episodes}])}else W(Q=>[...Q,{role:"assistant",content:"  Episodes  "}])}catch(M){console.error("AI Error:",M),W(F=>[...F,{role:"assistant",content:` : ${M.message}`}])}finally{me(!1)}},q=async P=>{if(!(!e||!P)){b(!0);try{for(let M=0;M<P.length;M++){const F=P[M],Q=`ep_${Date.now()}_${M}`,de=Be(fe,"users",e.uid,"projects",s,"episodes",Q);await cs(de,{title:F.title,description:F.description||"",status:"pending",order:a.length+M,createdAt:st()})}W(M=>[...M,{role:"assistant",content:`  ${P.length} Episodes  Queue !`}])}catch(M){console.error("Error adding AI episodes:",M)}finally{b(!1)}}},k=a.filter(P=>P.status==="pending").length,ue=a.filter(P=>P.status==="processing").length;a.filter(P=>P.status==="used").length;const _e=P=>{const M={pending:{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-500/30",label:" "},processing:{bg:"bg-blue-500/20",text:"text-blue-400",border:"border-blue-500/30",label:" "},used:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30",label:" "},completed:{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-500/30",label:" "}};return M[P]||M.pending};return m?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(ot,{className:"animate-spin text-yellow-400",size:32})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-yellow-500/5 border border-yellow-500/20 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:r.jsx(bs,{className:"text-yellow-400",size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:"Content Queue"}),r.jsx("p",{className:"text-xs text-yellow-400/70",children:"Episode List "})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-300 rounded-lg text-sm font-medium",children:[" ",k," "]}),ue>0&&r.jsxs("span",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm font-medium",children:[" ",ue," "]}),r.jsxs("span",{className:"px-3 py-1 bg-green-500/20 text-green-300 rounded-lg text-sm font-medium",children:[" ",c.length," "]})]})]}),r.jsx("p",{className:"text-sm text-white/60",children:'  Schedule   Episode  ""   Mode Template + Expander '})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>j("queue"),className:Yt("flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",v==="queue"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"bg-white/5 text-gray-400 border border-white/10 hover:bg-white/10"),children:[r.jsx(bs,{size:16}),"Queue (",k+ue,")"]}),r.jsxs("button",{onClick:()=>j("history"),className:Yt("flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",v==="history"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-gray-400 border border-white/10 hover:bg-white/10"),children:[r.jsx(yg,{size:16}),"History (",c.length,")"]})]}),r.jsx("button",{onClick:()=>B(!I),className:"w-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 rounded-xl p-4 hover:from-purple-500/30 hover:to-pink-500/30 transition-all group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-500/30 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(bs,{className:"text-purple-300",size:20})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h4",{className:"font-bold text-white",children:"AI Episode Director"}),r.jsx("p",{className:"text-xs text-purple-300/70",children:" AI  Episode List "})]})]}),r.jsx(tr,{className:Yt("text-purple-300 transition-transform",I&&"rotate-180"),size:20})]})}),I&&r.jsxs("div",{className:"bg-slate-900/80 border border-purple-500/20 rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"h-64 overflow-y-auto p-4 space-y-3",children:[se.map((P,M)=>r.jsx("div",{className:Yt("flex",P.role==="user"?"justify-end":"justify-start"),children:r.jsxs("div",{className:Yt("max-w-[80%] rounded-xl px-4 py-2 text-sm whitespace-pre-wrap",P.role==="user"?"bg-purple-500/30 text-white":"bg-white/10 text-gray-200"),children:[P.content,P.episodes&&r.jsx("button",{onClick:()=>q(P.episodes),disabled:g,className:"mt-3 w-full bg-green-500/20 text-green-400 border border-green-500/30 rounded-lg py-2 text-xs font-bold hover:bg-green-500/30 transition-colors disabled:opacity-50",children:g?r.jsx(ot,{className:"animate-spin mx-auto",size:14}):"  Queue"})]})},M)),re&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white/10 rounded-xl px-4 py-2",children:r.jsx(ot,{className:"animate-spin text-purple-400",size:16})})}),r.jsx("div",{ref:xe})]}),r.jsxs("div",{className:"border-t border-purple-500/20 p-3 flex gap-2",children:[r.jsx("input",{type:"text",value:O,onChange:P=>L(P.target.value),onKeyDown:P=>P.key==="Enter"&&$(),placeholder:"  ' 10 '",className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-sm text-white placeholder-gray-500 focus:border-purple-500 outline-none"}),r.jsx("button",{onClick:$,disabled:re||!O.trim(),className:"px-4 py-2 bg-purple-500/30 text-purple-300 rounded-lg hover:bg-purple-500/40 transition-colors disabled:opacity-50",children:r.jsx(Nf,{size:16})})]})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:[r.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-3",children:"  Episode "}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{type:"text",value:Te.title,onChange:P=>D({...Te,title:P.target.value}),placeholder:" Episode  ' Crossover'",className:"flex-1 bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-yellow-500 outline-none"}),r.jsx("button",{onClick:T,disabled:g||!Te.title.trim(),className:"px-6 py-3 bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 rounded-lg hover:bg-yellow-500/30 font-bold transition-colors disabled:opacity-50",children:g?r.jsx(ot,{className:"animate-spin",size:16}):r.jsx(Vn,{size:16})})]})]}),v==="queue"&&r.jsx("div",{className:"space-y-2",children:a.filter(P=>P.status!=="used").length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"text-lg mb-2",children:" Episode"}),r.jsx("p",{className:"text-sm",children:" Episode   AI "})]}):a.filter(P=>P.status!=="used").map((P,M)=>{const F=_e(P.status);return r.jsxs("div",{className:Yt("flex items-center gap-3 bg-white/5 border rounded-xl p-4 group transition-all",P.status==="processing"?"border-blue-500/30 bg-blue-500/5":"border-white/10 hover:border-yellow-500/30"),children:[r.jsx(Tu,{className:"text-gray-600 cursor-grab",size:16}),r.jsx("span",{className:Yt("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",F.bg,F.text),children:M+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"font-medium truncate text-white",children:P.title}),P.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.description})]}),r.jsx("span",{className:Yt("px-3 py-1 rounded-lg text-xs font-medium",F.bg,F.text),children:F.label}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>z(P),className:Yt("p-2 rounded-lg transition-colors",P.status==="completed"?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-green-500/20 text-green-400 hover:bg-green-500/30"),title:P.status==="completed"?"":"",children:r.jsx(_a,{size:14})}),r.jsx("button",{onClick:()=>A(P.id),className:"p-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",title:" Episode",children:r.jsx(xs,{size:14})})]})]},P.id)})}),v==="history"&&r.jsx("div",{className:"space-y-2",children:c.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx("p",{className:"text-lg mb-2",children:""}),r.jsx("p",{className:"text-sm",children:"Episode "})]}):c.map((P,M)=>r.jsxs("div",{className:"flex items-center gap-3 bg-green-500/5 border border-green-500/20 rounded-xl p-4",children:[r.jsx("span",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-green-500/20 text-green-400",children:M+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"font-medium truncate text-green-300",children:P.title}),P.description&&r.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.description}),P.usedAt&&r.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[": ",P.usedAt?.toDate?.()?.toLocaleDateString("th-TH")||"N/A"]})]}),r.jsx("span",{className:"px-3 py-1 rounded-lg text-xs font-medium bg-green-500/20 text-green-400",children:" "}),r.jsx("button",{onClick:async()=>{},className:"p-2 bg-yellow-500/20 text-yellow-400 rounded-lg hover:bg-yellow-500/30 transition-colors opacity-50 cursor-not-allowed",title:" Queue ( )",disabled:!0,children:r.jsx(WN,{size:14})})]},P.id))})]})};function L8(){const{t:s}=ed(),[e,t]=N.useState(null),[a,o]=N.useState([]),[c,d]=N.useState(null),[m,p]=N.useState("monitor"),[g,b]=N.useState(!1),[v,j]=N.useState(""),[I,B]=N.useState(!1),[O,L]=N.useState([]),[se,W]=N.useState(""),[re,me]=N.useState({}),[xe,Te]=N.useState([]),[D,T]=N.useState([]),[A,z]=N.useState(""),[$,q]=N.useState(!1),[k,ue]=N.useState(null),[_e,P]=N.useState(null),[M,F]=N.useState("Asia/Bangkok"),[Q,de]=N.useState(new Date),[C,J]=N.useState(!1),[te,ge]=N.useState({top:0,left:0,width:0}),Ie=N.useRef(null),De=N.useRef(null);N.useEffect(()=>{const V=setInterval(()=>de(new Date),1e3);return()=>clearInterval(V)},[]),N.useEffect(()=>{if(!C)return;const V=Ie.current,Y=()=>{if(!V)return;const Ue=V.getBoundingClientRect();ge({top:Ue.bottom+8,left:Ue.left,width:Ue.width})},Se=Ue=>{!De.current||!V||!De.current.contains(Ue.target)&&!V.contains(Ue.target)&&J(!1)};return Y(),window.addEventListener("resize",Y),window.addEventListener("scroll",Y,!0),document.addEventListener("mousedown",Se),()=>{window.removeEventListener("resize",Y),window.removeEventListener("scroll",Y,!0),document.removeEventListener("mousedown",Se)}},[C]),N.useEffect(()=>{if(!e)return;console.log(" Fetching Timezone for user:",e.uid),(async()=>{try{const Y=await Qr(Be(fe,"users",e.uid));if(Y.exists()){const Se=Y.data();console.log(" User Data:",Se),Se.timezone&&(F(Se.timezone),console.log(" Set User Timezone from DB:",Se.timezone))}else console.log(" User Document not found, creating placeholder...")}catch(Y){console.error("Error fetching user timezone:",Y)}})()},[e]);const Ce=async V=>{const Y=V.target.value;F(Y),e&&(console.log(" Saving Timezone:",Y),await cs(Be(fe,"users",e.uid),{timezone:Y},{merge:!0}),console.log(" Timezone saved successfully."))},[qe,be]=N.useState([]),[H,Me]=N.useState(!1),Le=N.useRef(!1);N.useEffect(()=>{const V=Be(fe,"projects","default-project"),Y=Gt(V,Se=>{if(Se.exists()){const Ue=Se.data();Ue.sequences&&(Le.current=!0,be(Ue.sequences))}});return()=>Y()},[]),N.useEffect(()=>{if(Le.current){Le.current=!1;return}const V=async()=>{Me(!0);try{await cs(Be(fe,"projects","default-project"),{sequences:qe,lastUpdated:st()},{merge:!0})}catch(Se){console.error("Error auto-saving sequences:",Se)}finally{setTimeout(()=>Me(!1),500)}},Y=setTimeout(()=>{V()},1e3);return()=>clearTimeout(Y)},[qe]),N.useEffect(()=>{const V=Ia(gn,Y=>{if(t(Y),Y){const Se=He(fe,"users",Y.uid,"projects"),Ue=ys(Se,en("createdAt","desc")),Ke=Gt(Ue,St=>{const os=[];St.forEach(ns=>{os.push({id:ns.id,...ns.data()})}),o(os)}),ht=He(fe,"users",Y.uid,"modes"),Wt=Gt(ht,St=>{const os=[];St.forEach(ns=>{os.push({id:ns.id,...ns.data()})}),L(os)}),yt=He(fe,"users",Y.uid,"expanders"),hs=Gt(yt,St=>{const os=[];St.forEach(ns=>{os.push({id:ns.id,...ns.data()})}),T(os)});return()=>{Ke(),Wt(),hs()}}else o([]),d(null),L([]),T([])});return()=>V()},[]);const We=async()=>{if(!(!v.trim()||!e)){B(!0);try{const V=v.toLowerCase().replace(/\s+/g,"-"),Y={name:v,createdAt:st(),status:"active"},Se=Be(He(fe,"users",e.uid,"projects"));await cs(Se,Y),j(""),b(!1),d({id:Se.id,...Y})}catch(V){console.error("Error creating project:",V)}finally{B(!1)}}},Fe=async()=>{if(!(!c||!e)&&window.confirm("Are you sure you want to clear all logs for this project?"))try{const V=He(fe,"users",e.uid,"projects",c.id,"logs"),Y=await kn(V);if(Y.empty)return;const Se=Y.docs.map(Ue=>Sn(Ue.ref));await Promise.all(Se),console.log(" Logs cleared successfully.")}catch(V){console.error("Error clearing logs:",V),alert("Failed to clear logs: "+V.message)}};N.useEffect(()=>{if(c){if(c.executionModeId&&O.length>0){const V=O.some(Y=>Y.id===c.executionModeId);W(V?c.executionModeId:O[0].id)}else O.length>0&&!c.executionModeId?W(O[0].id):W("");c.variableValues?me(c.variableValues):me({}),c.expanderId?z(c.expanderId):z("")}else W(""),me({}),z("")},[c,O]);const[Z,ve]=N.useState([]),[et,bt]=N.useState(!0),[lt,mt]=N.useState(null),[Pt,Ws]=N.useState("ALL");N.useEffect(()=>{if(!e||!c){ve([]);return}const V=He(fe,"users",e.uid,"projects",c.id,"logs"),Y=ys(V,en("timestamp","desc"),Cm(50)),Se=Gt(Y,Ue=>{console.log(` [Logs Listener] Received ${Ue.size} logs for project ${c.id}`);const Ke=[];Ue.forEach(ht=>{const Wt=ht.data();Ke.push({id:ht.id,...Wt,timestamp:Wt.timestamp?.toDate?Wt.timestamp.toDate().toLocaleString("th-TH",{timeZone:M||"Asia/Bangkok",hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit",year:"numeric",hour12:!1}):new Date().toLocaleString("th-TH")})}),console.log(" Firestore Logs Fetched:",Ke.length),ve(Ke),bt(!1)});return()=>Se()},[e,c?.id]),N.useEffect(()=>{if(!c||c.status!=="running"){mt(null);return}let V=null;const Y=async()=>{const Se=He(fe,"users",e.uid,"projects",c.id,"slots"),Ue=await kn(Se);if(Ue.empty){mt("No Slots");return}const Ke=Ue.docs.map(St=>St.data()),ht=M||"Asia/Bangkok",Wt=St=>{const ns={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}[St.day],[cn,nr]=St.start.split(":").map(Number),Us=new Date().toLocaleString("en-US",{timeZone:ht}),ls=new Date(Us);let It=new Date(ls);It.setHours(cn,nr,0,0);const Bt=ls.getDay();let Bs=ns-Bt;return Bs<0&&(Bs+=7),Bs===0&&It<=ls&&(Bs=7),It.setDate(ls.getDate()+Bs),It};let yt=null,hs="";if(Ke.forEach(St=>{const os=Wt(St);(!yt||os<yt)&&(yt=os,hs=`${St.day.toUpperCase()} ${St.start}`)}),!yt)mt("No Future Slots");else{const St=new Date().toLocaleString("en-US",{timeZone:ht}),os=new Date(St),ns=yt-os,cn=Math.floor(ns/(1e3*60*60*24)),nr=Math.floor(ns/(1e3*60*60)%24),Us=Math.floor(ns/(1e3*60)%60),ls=Math.floor(ns/1e3%60);let It="";cn>0&&(It+=`${cn}d `),nr>0&&(It+=`${nr}h `),Us>0&&(It+=`${Us}m `),It+=`${ls}s`,mt(`${hs} (in ${It})`)}};return Y(),V=setInterval(Y,1e3),()=>clearInterval(V)},[c?.id,c?.status,M]);const Bn=async(V=null)=>{const Y=V||c;if(!Y||!e)return;const Ue=Y.status==="running"?"idle":"running";try{const Ke=Be(fe,"users",e.uid,"projects",Y.id);await Ps(Ke,{status:Ue,lastUpdated:st()}),c?.id===Y.id&&d(ht=>({...ht,status:Ue}))}catch(Ke){console.error("Error toggling status:",Ke)}},is=O.find(V=>V.id===se),[sn,Rs]=N.useState(null),[xn,Xt]=N.useState(""),[$n,ds]=N.useState(null);N.useRef(null);const[Vs,sr]=N.useState(null),[U,Ae]=N.useState(!1),Ve=async()=>{if(!e){alert("No user logged in. Please reload the page.");return}if(confirm("This will generate a new key and invalidate any existing key. Continue?")){Ae(!0),console.log(" [KeyGen] Starting generation for:",e.uid,e.email);try{console.log(" [KeyGen] Calling Cloud Function 'generateUserKey'...");const Y=await Pr(Lr,"generateUserKey")({});console.log(" [KeyGen] Result:",Y),Y.data&&Y.data.success?(console.log(" [KeyGen] Success! Key:",Y.data.key),sr(Y.data.key)):(console.error(" [KeyGen] Failed:",Y),alert("Failed to generate key. Unexpected response format."))}catch(V){console.error(" [KeyGen] Error:",V),console.error(" [KeyGen] Code:",V.code),console.error(" [KeyGen] Msg:",V.message);let Y=V.message;V.code==="not-found"&&(Y="Cloud Function not found (Wait a moment or Deploy again)"),V.code==="failed-precondition"&&(Y="Precondition Failed (Check Database)"),V.code==="internal"&&(Y="Internal Server Error (Check Function Logs)"),alert(`Error: ${Y} (${V.code})`)}finally{Ae(!1)}}},ze=async()=>{if(!(!e||!c)){q(!0),ue(null);try{const Y=await Pr(Lr,"testPromptPipeline")({projectId:c.id});console.log(" Test Pipeline Result:",Y.data),ue(Y.data)}catch(V){console.error(" Test Pipeline Error:",V);let Y=V.message;V.code==="failed-precondition"&&(Y=V.message),V.code==="not-found"&&(Y="Mode  Project "),alert(`Error: ${Y}`)}finally{q(!1)}}},nt=(V,Y)=>{navigator.clipboard.writeText(V),P(Y),setTimeout(()=>P(null),2e3)},pt=()=>{if(!k?.prompts)return;const V=k.prompts.map((Y,Se)=>`[Scene ${Se+1}]
${Y.englishPrompt}`).join(`

`);navigator.clipboard.writeText(V),P("all"),setTimeout(()=>P(null),2e3)},Is=(V,Y)=>{V.stopPropagation(),Rs(Y.id),Xt(Y.name)},Lt=V=>{V.stopPropagation(),Rs(null),Xt("")},K=async(V,Y)=>{if(V.stopPropagation(),!(!xn.trim()||!e))try{const Se=Be(fe,"users",e.uid,"projects",Y);await cs(Se,{name:xn,lastUpdated:st()},{merge:!0}),c?.id===Y&&d(Ue=>({...Ue,name:xn})),Rs(null),Xt("")}catch(Se){console.error("Error renaming project:",Se)}},le=async(V,Y)=>{const Se=V.target.files[0];if(!Se||!e)return;const Ue=3*1024*1024;if(Se.size>Ue){alert(" !  3MB"),V.target.value="";return}ds(Y);try{const Ke=`project_thumbnails/${e.uid}/${Date.now()}_${Se.name}`,ht=_d(jd,Ke),Wt=await wd(ht,Se),yt=await Nd(Wt.ref),hs=Be(fe,"users",e.uid,"projects",Y);await cs(hs,{coverImage:yt,lastUpdated:st()},{merge:!0}),c?.id===Y&&d(St=>({...St,coverImage:yt})),console.log(" Project image uploaded:",yt)}catch(Ke){console.error("Error uploading project image:",Ke),alert(": "+Ke.message)}finally{ds(null),V.target.value=""}};return r.jsxs("div",{className:"p-8 max-w-6xl mx-auto min-h-screen",children:[r.jsxs("header",{className:"mb-8 relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(gw,{className:"text-white group-hover:rotate-12 transition-transform duration-300",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900 flex items-center justify-center",children:r.jsx("span",{className:"text-[8px] font-bold text-black",children:a.length})})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:s("common.projects")}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),""]})]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("div",{className:"flex items-center gap-3 bg-black/40 backdrop-blur-xl border border-white/10 rounded-xl p-2 pr-4 shadow-lg",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{ref:Ie,onClick:()=>{const V=Ie.current;if(V){const Y=V.getBoundingClientRect();ge({top:Y.bottom+8,left:Y.left,width:Y.width})}J(Y=>!Y)},className:"flex items-center gap-2 bg-white/5 rounded-lg px-3 py-2 text-sm text-yellow-400 font-bold cursor-pointer w-56 border border-yellow-500/20 hover:border-yellow-500/40 transition-colors",children:[r.jsx("img",{src:`https://flagcdn.com/24x18/${M==="Asia/Bangkok"?"th":M==="Europe/London"?"gb":M==="Asia/Shanghai"?"cn":M==="Asia/Seoul"?"kr":"tw"}.png`,alt:"flag",className:"w-6 h-4 object-cover rounded-sm"}),r.jsxs("span",{className:"flex-1 text-left",children:[M==="Asia/Bangkok"&&"Thailand (GMT+7)",M==="Europe/London"&&"UK (GMT+0)",M==="Asia/Shanghai"&&"China (GMT+8)",M==="Asia/Seoul"&&"Korea (GMT+9)",M==="Asia/Taipei"&&"Taiwan (GMT+8)"]}),r.jsx(tr,{size:14,className:`text-yellow-500 transition-transform ${C?"rotate-180":""}`})]}),C&&qN.createPortal(r.jsx("div",{ref:De,className:"fixed bg-slate-900/80 backdrop-blur-[28px] border border-white/15 rounded-2xl shadow-[0_32px_100px_rgba(0,0,0,0.95)] ring-1 ring-white/10 z-[999999] overflow-hidden",style:{top:te.top,left:te.left,width:Math.max(256,te.width)},children:[{value:"Asia/Bangkok",code:"th",label:"Thailand (GMT+7)"},{value:"Europe/London",code:"gb",label:"United Kingdom (GMT+0)"},{value:"Asia/Shanghai",code:"cn",label:"China (GMT+8)"},{value:"Asia/Seoul",code:"kr",label:"South Korea (GMT+9)"},{value:"Asia/Taipei",code:"tw",label:"Taiwan (GMT+8)"}].map(V=>r.jsxs("button",{onClick:()=>{Ce({target:{value:V.value}}),J(!1)},className:`w-full flex items-center gap-3 px-4 py-3 hover:bg-white/10 transition-colors ${M===V.value?"bg-yellow-500/20 text-yellow-300 font-bold":"text-white"}`,children:[r.jsx("img",{src:`https://flagcdn.com/24x18/${V.code}.png`,alt:"flag",className:"w-6 h-4 object-cover rounded-sm shadow-sm"}),r.jsx("span",{className:"text-sm font-medium",children:V.label})]},V.value))}),document.body)]}),r.jsx("div",{className:"w-[1px] h-6 bg-white/10"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:r.jsx(ks,{size:16,className:"text-green-400"})}),r.jsx("span",{suppressHydrationWarning:!0,className:"font-mono font-bold text-lg text-white",children:new Date().toLocaleTimeString("en-US",{timeZone:M,hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-8",children:[r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/20",children:r.jsx(ku,{size:20,className:"text-white"})}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white to-red-200",children:"Your Projects"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:Ve,disabled:U,className:"group relative flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-yellow-600/30 to-amber-600/30 backdrop-blur-xl text-yellow-300 border border-yellow-500/40 hover:border-yellow-400/60 rounded-2xl transition-all duration-300 text-sm font-bold hover:scale-105 shadow-lg shadow-yellow-500/20 hover:shadow-yellow-500/40 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/0 via-yellow-500/10 to-yellow-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),U?r.jsx(ot,{size:18,className:"animate-spin"}):r.jsx(XA,{size:18,className:"group-hover:rotate-12 transition-transform duration-300"}),r.jsx("span",{className:"relative",children:"Extension Key"})]}),g?r.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-right-4",children:[r.jsx("input",{type:"text",value:v,onChange:V=>j(V.target.value),placeholder:"Project Name...",className:"bg-black/40 border border-white/20 rounded-xl px-4 py-2.5 text-white text-sm focus:border-red-500 focus:ring-2 focus:ring-red-500/20 outline-none w-48 transition-all",autoFocus:!0,onKeyDown:V=>V.key==="Enter"&&We()}),r.jsx("button",{onClick:We,disabled:I,className:"px-4 py-2.5 bg-gradient-to-r from-green-600 to-green-500 text-white rounded-xl hover:from-green-500 hover:to-green-400 text-sm font-bold shadow-lg shadow-green-500/20 hover:scale-105 transition-all",children:I?r.jsx(ot,{size:14,className:"animate-spin"}):"SAVE"}),r.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2.5 bg-white/10 text-slate-300 rounded-xl hover:bg-white/20 text-sm font-medium transition-all",children:"CANCEL"})]}):r.jsxs("button",{onClick:()=>b(!0),className:"group relative flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white rounded-2xl transition-all duration-300 text-sm font-bold hover:scale-105 shadow-lg shadow-red-500/40 hover:shadow-red-500/60 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(Vn,{size:18,className:"group-hover:rotate-90 transition-transform duration-300"}),r.jsx("span",{className:"relative",children:"New Project"}),r.jsx("span",{className:"absolute inset-0 rounded-2xl bg-white/10 animate-pulse opacity-0 group-hover:opacity-100"})]})]})]}),a.length===0&&!g?r.jsx("div",{className:"bg-white/5 border border-white/10 border-dashed rounded-xl p-8 text-center text-gray-500",children:"No projects yet. Create one to get started."}):r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[!g&&r.jsxs("div",{onClick:()=>b(!0),className:"relative group h-full min-h-[180px] rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-[0_0_20px_rgba(34,197,94,0.2)]",children:[r.jsx("div",{className:"absolute inset-[-50%] bg-[conic-gradient(from_0deg,transparent_0deg,transparent_90deg,#22c55e_180deg,transparent_360deg)] animate-spin opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-0"}),r.jsx("div",{className:"absolute inset-[2px] bg-gray-950 rounded-xl z-10 flex flex-col items-center justify-center transition-colors",children:r.jsxs("div",{className:"flex flex-col items-center justify-center transition-transform duration-300 group-hover:scale-110",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-3 group-hover:bg-green-500/20 transition-colors duration-300",children:r.jsx(Vn,{size:32,className:"text-gray-600 group-hover:text-green-400 transition-all duration-300"})}),r.jsx("h3",{className:"text-gray-500 font-medium mt-2 group-hover:text-green-100 transition-colors duration-300",children:"New Project"})]})})]}),a.map(V=>{const Y=c?.id===V.id,Se=sn===V.id,Ue=V.status==="running";return r.jsxs("div",{onClick:()=>!Se&&d(V),className:Yt("flex flex-col items-start p-5 rounded-xl border transition-all relative text-left group cursor-pointer",Ue?"bg-green-500/10 border-green-500/50 shadow-[0_0_20px_rgba(74,222,128,0.3)]":"bg-red-500/10 border-red-500/20 hover:bg-red-500/20"),children:[(()=>{const Ke=O.find(yt=>yt.id===V.executionModeId||yt.name===V.executionMode),ht=V.coverImage||Ke?.coverImage,Wt=$n===V.id;return r.jsxs("div",{className:Yt("mb-3 rounded-lg overflow-hidden w-full relative group/media",ht?"h-32 p-0":"p-3 bg-white/5 flex justify-between items-start"),children:[ht?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover/media:bg-black/0 transition-colors z-10"}),r.jsx("img",{src:ht,alt:V.name,className:"w-full h-full object-cover transform group-hover/media:scale-105 transition-transform duration-500"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-60"})]}):r.jsx("div",{className:Yt("flex justify-between items-start w-full transition-colors",Y?"text-green-400":"text-gray-400 group-hover:text-white"),children:r.jsx(gw,{size:24})}),!Se&&r.jsxs("div",{className:"absolute top-2 right-2 z-20 flex gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[r.jsxs("label",{className:"p-1.5 bg-black/50 hover:bg-black/70 rounded-full cursor-pointer text-white backdrop-blur-sm",title:"Change Image",onClick:yt=>yt.stopPropagation(),children:[Wt?r.jsx(ot,{size:12,className:"animate-spin"}):r.jsx(ix,{size:12}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:yt=>le(yt,V.id),disabled:Wt})]}),r.jsx("button",{onClick:yt=>Is(yt,V),className:"p-1.5 bg-black/50 hover:bg-black/70 rounded-full text-white backdrop-blur-sm",title:"Rename Project",children:r.jsx(nc,{size:12})})]})]})})(),Se?r.jsxs("div",{className:"w-full flex items-center gap-1 mb-1 animate-in fade-in",children:[r.jsx("input",{type:"text",value:xn,onChange:Ke=>Xt(Ke.target.value),onClick:Ke=>Ke.stopPropagation(),className:"bg-black/50 border border-blue-500 rounded px-2 py-1 text-white text-sm font-bold outline-none w-full min-w-0",autoFocus:!0,onKeyDown:Ke=>{Ke.key==="Enter"&&K(Ke,V.id),Ke.key==="Escape"&&Lt(Ke)}}),r.jsx("button",{onClick:Ke=>K(Ke,V.id),className:"p-1 bg-green-500/20 text-green-400 rounded hover:bg-green-500/30 transition-colors",children:r.jsx(_a,{size:14})}),r.jsx("button",{onClick:Lt,className:"p-1 bg-red-500/10 text-red-400 rounded hover:bg-red-500/20 transition-colors",children:r.jsx(Qs,{size:14})})]}):r.jsx("h3",{className:Yt("font-bold text-lg mb-1 truncate w-full",Y?"text-white":"text-gray-200"),children:V.name}),r.jsx("div",{className:"text-xs text-gray-500",children:V.createdAt?.seconds?new Date(V.createdAt.seconds*1e3).toLocaleDateString():"Just now"}),Y&&!Se&&r.jsx("div",{className:"absolute top-4 right-4 animate-in fade-in zoom-in pointer-events-none",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.8)]"})}),r.jsx("div",{className:Yt("absolute bottom-3 right-3 z-20 transition-all duration-300",Ue?"opacity-100":"opacity-0 group-hover:opacity-100 translate-y-2 group-hover:translate-y-0"),children:r.jsx("div",{className:"bg-black/60 backdrop-blur-md border border-white/10 rounded-lg p-1 shadow-lg hover:scale-105 transition-transform",children:r.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),Bn(V)},className:Yt("font-bold px-4 py-1.5 rounded transition-all duration-300 text-xs tracking-wider uppercase",Ue?"bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30 shadow-[0_0_10px_rgba(239,68,68,0.2)]":"bg-green-500/20 text-green-400 border border-green-500/30 hover:bg-green-500/30 shadow-[0_0_10px_rgba(34,197,94,0.2)]"),children:Ue?"STOP":"RUN"})})})]},V.id)})]})]}),r.jsx("div",{className:"w-full relative transition-all duration-500",children:c?r.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-8 duration-500",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6 p-1.5 bg-black/40 backdrop-blur-xl rounded-2xl border border-white/10 w-fit",children:[r.jsxs("button",{onClick:()=>p("monitor"),className:`group relative px-5 py-3 rounded-xl transition-all duration-300 flex items-center gap-2 text-sm font-bold overflow-hidden ${m==="monitor"?"bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 text-white shadow-xl shadow-purple-500/40 scale-105":"text-slate-400 hover:bg-white/10 hover:text-white"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(ku,{size:16,className:`relative z-10 transition-all duration-300 ${m==="monitor"?"animate-bounce":"group-hover:rotate-12"}`}),r.jsx("span",{className:"relative z-10",children:"Dashboard"}),m==="monitor"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>p("history"),className:`group relative px-5 py-3 rounded-xl transition-all duration-300 flex items-center gap-2 text-sm font-bold overflow-hidden ${m==="history"?"bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-500 text-white shadow-xl shadow-blue-500/40 scale-105":"text-slate-400 hover:bg-white/10 hover:text-white"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(bw,{size:16,className:`relative z-10 transition-all duration-300 ${m==="history"?"animate-bounce":"group-hover:rotate-12"}`}),r.jsx("span",{className:"relative z-10",children:"Execution History"}),m==="history"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>p("queue"),className:`group relative px-5 py-3 rounded-xl transition-all duration-300 flex items-center gap-2 text-sm font-bold overflow-hidden ${m==="queue"?"bg-gradient-to-r from-yellow-600 via-yellow-500 to-orange-500 text-white shadow-xl shadow-yellow-500/40 scale-105":"text-slate-400 hover:bg-white/10 hover:text-white"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(Ji,{size:16,className:`relative z-10 transition-all duration-300 ${m==="queue"?"animate-bounce":"group-hover:rotate-12"}`}),r.jsx("span",{className:"relative z-10",children:"Content Queue"}),m==="queue"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]})]}),m==="monitor"&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6 text-green-400 text-sm font-bold uppercase tracking-wider pl-1",children:[r.jsx(ax,{size:16})," Editing Schedule: ",r.jsx("span",{className:"text-white",children:c.name})]}),r.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-xl border border-white/10 mb-8 backdrop-blur-sm shadow-xl relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),r.jsxs("div",{className:"flex flex-col gap-4 relative z-10",children:[r.jsxs("div",{className:"w-full bg-purple-500/5 border border-purple-500/20 rounded-xl p-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"text-xs text-purple-300 uppercase font-bold mb-2 flex items-center gap-2",children:[r.jsx(Ji,{size:14})," Select Execution Mode"]}),r.jsxs("div",{className:"glass-dropdown-wrapper w-full",children:[r.jsx(zs,{value:se,onChange:async V=>{if(W(V),c&&V){const Y=O.find(Se=>Se.id===V);if(Y)try{const Se=Be(fe,"users",e.uid,"projects",c.id);await Ps(Se,{executionMode:Y.name,executionModeId:Y.id}),console.log("Optimistic Update: Mode set to",Y.name)}catch(Se){console.error("Error updating mode:",Se)}}},options:O.length>0?O.map(V=>({value:V.id,label:V.name})):[{value:"",label:"No modes found",disabled:!0}],disabled:O.length===0,buttonClassName:"glass-dropdown w-full"}),r.jsx(tr,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none",size:16})]})]}),se&&(()=>{const V=O.find(Se=>Se.id===se),Y=V?(V.blocks||[]).reduce((Se,Ue)=>Se+(Ue.evolution?.length||0),0):0;return r.jsxs("div",{className:"flex items-start justify-between gap-4 pt-4 border-t border-purple-500/20",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-xs text-purple-300/70 uppercase font-bold mb-2 flex items-center gap-2",children:[r.jsx(Ji,{size:12})," Mode Info"]}),r.jsxs("p",{className:"text-sm text-white/80 mb-3 leading-relaxed",children:[" ",r.jsx("strong",{children:"Mode"}),' = ""    ']}),V?r.jsxs(r.Fragment,{children:[V.description&&r.jsx("p",{className:"text-sm text-white/60 mb-3 italic border-l-2 border-purple-500/30 pl-3",children:V.description}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("span",{className:"px-2 py-1 rounded-lg text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",title:"",children:[" ",(V.blocks||[]).length," "]}),r.jsxs("span",{className:"px-2 py-1 rounded-lg text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",title:"",children:[" ",Y," "]}),V.storyOverview?.tone&&r.jsxs("span",{className:"px-2 py-1 rounded-lg text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",title:"",children:[" ",V.storyOverview.tone]}),(V.characters||[]).length>0&&r.jsxs("span",{className:"px-2 py-1 rounded-lg text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30",title:"",children:[" ",V.characters.length," "]})]})]}):r.jsxs("p",{className:"text-yellow-400 text-sm",children:["  Mode... (ID: ",se,")"]})]}),V?.coverImage&&r.jsx("div",{className:"w-40 h-40 rounded-lg overflow-hidden border border-purple-500/30 shrink-0",children:r.jsx("img",{src:V.coverImage,alt:V.name,className:"w-full h-full object-cover"})})]})})()]}),r.jsxs("div",{className:"w-full bg-yellow-500/5 border border-yellow-500/20 rounded-xl p-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"text-xs text-yellow-300 uppercase font-bold mb-2 flex items-center gap-2",children:[r.jsx(bs,{size:14})," Select Expander"]}),r.jsxs("div",{className:"glass-dropdown-wrapper w-full",children:[r.jsx(zs,{value:A,onChange:async V=>{if(z(V),c)try{const Y=D.find(Ue=>Ue.id===V),Se=Be(fe,"users",e.uid,"projects",c.id);await Ps(Se,{expanderId:V||null,expanderName:Y?.name||null})}catch(Y){console.error("Error updating expander:",Y)}},options:[{value:"",label:" Expander"},...D.map(V=>({value:V.id,label:V.name}))],buttonClassName:"glass-dropdown w-full"}),r.jsx(tr,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none",size:16})]})]}),A&&(()=>{const V=D.find(Y=>Y.id===A);return!V||!V.blocks||V.blocks.length===0?null:r.jsxs("div",{className:"flex items-start justify-between gap-4 pt-4 border-t border-yellow-500/20",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-xs text-yellow-300/70 uppercase font-bold mb-2 flex items-center gap-2",children:[r.jsx(bs,{size:12})," Expander Blocks (",V.blocks.length,")"]}),r.jsxs("p",{className:"text-sm text-white/80 mb-3 leading-relaxed",children:[" ",r.jsx("strong",{children:"Expander"}),' = ""     ']}),V.description&&r.jsx("p",{className:"text-sm text-white/60 mb-3 italic border-l-2 border-yellow-500/30 pl-3",children:V.description}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:V.blocks.map((Y,Se)=>r.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-medium border ${Y.color||"bg-yellow-500/20"} border-yellow-500/30 text-yellow-200 flex items-center gap-1.5`,title:Y.description||Y.name,children:r.jsx("span",{children:Y.name})},Se))}),r.jsx("p",{className:"text-xs text-yellow-400/60",children:' AI  ""  Prompt  '})]}),V.thumbnail&&r.jsx("div",{className:"w-40 h-40 rounded-lg overflow-hidden border border-yellow-500/30 shrink-0",children:r.jsx("img",{src:V.thumbnail,alt:V.name,className:"w-full h-full object-cover"})})]})})()]}),r.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:is&&is.variables&&is.variables.map((V,Y)=>r.jsxs("div",{className:"w-full",children:[r.jsxs("label",{className:"text-xs text-blue-300 uppercase font-bold mb-2 flex items-center gap-2",children:[r.jsx(J3,{size:14})," ",V.name||`Input ${Y+1}`]}),r.jsx("input",{type:"text",value:re[V.name]||"",onChange:Se=>{const Ue=Se.target.value;me(Ke=>{const ht={...Ke,[V.name]:Ue};return e&&c&&(clearTimeout(window[`save_timers_${V.name}`]),window[`save_timers_${V.name}`]=setTimeout(async()=>{console.log(` Auto-saving input: ${V.name}`);const Wt=Be(fe,"users",e.uid,"projects",c.id);await cs(Wt,{variableValues:ht,lastUpdated:st()},{merge:!0})},1e3)),ht})},placeholder:`Enter ${V.name}...`,className:"w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-white outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/50 transition-all placeholder-white/20"})]},Y))})]}),c.status==="running"&&r.jsx("div",{className:"mt-8 border-t border-white/10 pt-8 animate-in fade-in slide-in-from-top-4",children:r.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch gap-4 mb-4 h-full min-h-[180px]",children:[r.jsxs("div",{className:"flex flex-col justify-between shrink-0 w-full lg:w-[480px] gap-2",children:[r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 px-4 py-3 rounded-lg flex items-center justify-center lg:justify-start gap-3 w-full h-[50px]",children:[r.jsx("div",{className:"w-2.5 h-2.5 bg-green-500 rounded-full animate-pulse shadow-[0_0_8px_rgba(34,197,94,1)]"}),r.jsx("span",{className:"text-green-400 font-bold uppercase tracking-widest text-sm",children:"Engine Active"})]}),r.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-2 text-gray-400 text-sm font-mono bg-white/5 px-4 py-2 rounded-lg border border-white/5 w-full h-[50px]",children:[r.jsx(ks,{size:14,className:"text-gray-500"}),r.jsx("span",{className:"text-gray-500",children:"Next Run:"}),r.jsx("span",{className:"text-white font-bold ml-1",children:lt||"Calculating..."})]}),r.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/5 w-full gap-1 h-[50px] items-center",children:[["ALL","TIKTOK","FACEBOOK","YOUTUBE"].map(V=>r.jsx("button",{onClick:()=>Ws(V),className:`flex-1 px-2 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all h-full ${Pt===V?"bg-white/10 text-white shadow-sm border border-white/10":"text-gray-600 hover:text-gray-400"}`,children:V},V)),r.jsx("div",{className:"w-[1px] h-6 bg-white/10 mx-1"}),r.jsxs("button",{onClick:Fe,title:"Clear Logs",className:"px-3 py-1.5 rounded-md bg-red-500/10 border border-red-500/20 text-red-500 hover:bg-red-500/20 transition-all h-full flex items-center gap-1.5 shrink-0",children:[r.jsx(xs,{size:14}),r.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider hidden sm:inline",children:"Clear"})]})]})]}),r.jsxs("div",{className:"flex-1 bg-[#0c0c0c] rounded-lg border border-white/10 shadow-inner overflow-hidden flex flex-col relative h-auto min-h-[160px]",children:[r.jsxs("div",{className:"absolute top-2 right-2 flex gap-1.5 opacity-50",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500/40"}),r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-500/40"}),r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500/40"})]}),r.jsx("div",{className:"flex-1 p-3 font-mono text-[11px] overflow-hidden flex flex-col justify-end",children:et?r.jsxs("div",{className:"flex items-center gap-2 text-gray-700 animate-pulse",children:[r.jsx(ot,{size:14,className:"animate-spin"})," Connecting to console..."]}):Z.length===0?r.jsx("div",{className:"text-gray-800 italic ml-2",children:"Waiting for system logs..."}):r.jsx("div",{className:"flex flex-col gap-1",children:Z.filter(V=>Pt==="ALL"||V.platform===Pt).slice(0,5).map(V=>r.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[r.jsxs("span",{className:"text-red-500 font-bold font-mono text-[10px] whitespace-nowrap",children:["[",V.timestamp,"]"]}),V.platform!=="SYSTEM"&&r.jsx("span",{className:`text-[10px] font-bold px-1 rounded uppercase tracking-wider ${V.platform==="TIKTOK"?"text-pink-500 bg-pink-500/10":V.platform==="FACEBOOK"?"text-blue-500 bg-blue-500/10":"text-red-500 bg-red-500/10"}`,children:V.platform}),r.jsx("span",{className:"truncate text-gray-300",children:V.message})]},V.id))})})]})]})})]}),(()=>{const V=O.find(Se=>Se.id===se),Y=V?(V.blocks||[]).reduce((Se,Ue)=>Se+(Ue.evolution?.length||0),0):null;return r.jsx(M8,{projectId:c.id,modeScenes:Y},`${c.id}-${Y}`)})(),r.jsxs("div",{className:"mt-8 bg-gradient-to-br from-purple-900/20 via-slate-900/40 to-indigo-900/20 backdrop-blur-xl rounded-2xl border border-purple-500/20 p-6 shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center shadow-lg shadow-purple-500/30",children:r.jsx(IA,{size:20,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:"Test Prompt Pipeline"}),r.jsx("p",{className:"text-xs text-purple-300/60",children:" Prompts  Mode + Expander "})]})]}),r.jsxs("button",{onClick:ze,disabled:$||!se,className:`group relative flex items-center gap-2 px-6 py-3 rounded-xl font-bold text-sm transition-all duration-300 overflow-hidden ${se?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:scale-105 shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50":"bg-gray-700/50 text-gray-500 cursor-not-allowed"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),$?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:18,className:"animate-spin"}),r.jsx("span",{children:"Generating..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ta,{size:18}),r.jsx("span",{children:"Generate Test"})]})]})]}),!se&&r.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 text-center",children:r.jsx("p",{className:"text-yellow-400 text-sm",children:"  Mode "})}),k&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[r.jsxs("div",{className:"flex items-center justify-between bg-green-500/10 border border-green-500/30 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ln,{size:24,className:"text-green-400"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-green-400 font-bold",children:["  ",k.prompts?.length||0," Prompts !"]}),r.jsxs("p",{className:"text-green-300/60 text-xs",children:["Mode: ",k.modeInfo?.name||k.modeName," | Scenes: ",k.modeInfo?.sceneCount||k.sceneCount]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:pt,className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 border border-green-500/30 text-green-400 rounded-lg hover:bg-green-500/30 transition-all text-sm font-bold",children:[_e==="all"?r.jsx(Ln,{size:16}):r.jsx(Xi,{size:16}),_e==="all"?"Copied!":"Copy All"]}),r.jsx("button",{onClick:()=>ue(null),className:"flex items-center gap-1 px-3 py-2 bg-white/5 border border-white/10 text-white/60 rounded-lg hover:bg-white/10 hover:text-white transition-all text-sm",title:"",children:r.jsx(Qs,{size:16})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-sm font-bold text-purple-300 uppercase tracking-wider flex items-center gap-2",children:[r.jsx(xg,{size:14})," Generated Prompts"]}),r.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:k.prompts?.map((V,Y)=>r.jsx("div",{className:"group bg-black/40 border border-white/10 rounded-xl p-4 hover:border-purple-500/30 transition-all",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:"px-2 py-0.5 bg-purple-500/20 text-purple-300 text-xs font-bold rounded",children:["Scene ",Y+1]}),V.audioDescription&&r.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-300 text-xs rounded",children:" Audio"})]}),r.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:V.englishPrompt}),V.audioDescription&&r.jsxs("p",{className:"text-blue-300/60 text-xs mt-2",children:[" ",V.audioDescription]})]}),r.jsx("button",{onClick:()=>nt(V.englishPrompt,Y),className:"shrink-0 p-2 bg-white/5 border border-white/10 rounded-lg hover:bg-purple-500/20 hover:border-purple-500/30 transition-all opacity-0 group-hover:opacity-100",title:"Copy Prompt",children:_e===Y?r.jsx(Ln,{size:16,className:"text-green-400"}):r.jsx(Xi,{size:16,className:"text-white/60"})})]})},Y))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-xl p-4",children:[r.jsxs("h4",{className:"text-sm font-bold text-orange-300 uppercase tracking-wider flex items-center gap-2 mb-3",children:[r.jsx(xg,{size:14})," Titles"]}),r.jsx("div",{className:"space-y-2",children:k.titles&&Object.entries(k.titles).map(([V,Y])=>r.jsxs("div",{className:"flex items-center justify-between gap-2 bg-white/5 rounded-lg p-2",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded uppercase ${V==="tiktok"?"bg-pink-500/20 text-pink-300":V==="facebook"?"bg-blue-500/20 text-blue-300":V==="instagram"?"bg-purple-500/20 text-purple-300":"bg-red-500/20 text-red-300"}`,children:V}),r.jsx("span",{className:"text-white/70 text-xs truncate",children:Y})]}),r.jsx("button",{onClick:()=>nt(Y,`title-${V}`),className:"p-1.5 hover:bg-white/10 rounded transition-all",children:_e===`title-${V}`?r.jsx(Ln,{size:12,className:"text-green-400"}):r.jsx(Xi,{size:12,className:"text-white/40"})})]},V))})]}),r.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-xl p-4",children:[r.jsxs("h4",{className:"text-sm font-bold text-cyan-300 uppercase tracking-wider flex items-center gap-2 mb-3",children:[r.jsx($A,{size:14})," Tags"]}),r.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:k.tags&&Object.entries(k.tags).map(([V,Y])=>r.jsxs("div",{className:"bg-white/5 rounded-lg p-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded uppercase ${V==="tiktok"?"bg-pink-500/20 text-pink-300":V==="facebook"?"bg-blue-500/20 text-blue-300":V==="instagram"?"bg-purple-500/20 text-purple-300":"bg-red-500/20 text-red-300"}`,children:[V," (",Y?.length||0,")"]}),r.jsx("button",{onClick:()=>nt(Y?.map(Se=>`#${Se}`).join(" ")||"",`tags-${V}`),className:"p-1 hover:bg-white/10 rounded transition-all",children:_e===`tags-${V}`?r.jsx(Ln,{size:12,className:"text-green-400"}):r.jsx(Xi,{size:12,className:"text-white/40"})})]}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[Y?.slice(0,10).map((Se,Ue)=>r.jsxs("span",{className:"px-1.5 py-0.5 bg-cyan-500/10 text-cyan-300/70 text-[10px] rounded",children:["#",Se]},Ue)),Y?.length>10&&r.jsxs("span",{className:"px-1.5 py-0.5 text-white/40 text-[10px]",children:["+",Y.length-10," more"]})]})]},V))})]})]})]}),c.lastPromptTest&&!k&&r.jsx("div",{onClick:()=>ue(c.lastPromptTest),className:"bg-white/5 border border-white/10 rounded-xl p-4 cursor-pointer hover:bg-white/10 hover:border-purple-500/30 transition-all group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[r.jsx(ks,{size:14}),r.jsxs("span",{children:["Last Test: ",c.lastPromptTest.testedAt?.toDate?.()?.toLocaleString()||"Unknown"]}),r.jsxs("span",{className:"text-purple-400",children:["(",c.lastPromptTest.sceneCount," scenes)"]})]}),r.jsx("span",{className:"text-purple-400 text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:" "})]})})]})]}),m==="history"&&r.jsx("div",{className:"animate-in fade-in slide-in-from-right-4 min-h-[500px]",children:r.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-xl border border-white/10 backdrop-blur-sm shadow-xl h-full",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6 text-blue-400 text-sm font-bold uppercase tracking-wider",children:[r.jsx(bw,{size:16})," Automation Logs & History"]}),r.jsx("div",{className:"h-[600px]",children:r.jsx(O8,{projectId:c.id})})]})}),m==="queue"&&r.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 min-h-[500px] space-y-6",children:[r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:[r.jsx("h4",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:" Episode Settings"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" Episode"}),r.jsxs("select",{value:c?.episodeSelection||"sequential",onChange:async V=>{!e||!c||await cs(Be(fe,"users",e.uid,"projects",c.id),{episodeSelection:V.target.value},{merge:!0})},className:"w-full px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm focus:border-yellow-500 outline-none",children:[r.jsx("option",{value:"sequential",children:" (1, 2, 3...)"}),r.jsx("option",{value:"random",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Auto-Refill"}),r.jsx("button",{onClick:async()=>{!e||!c||await cs(Be(fe,"users",e.uid,"projects",c.id),{autoRefillEnabled:!c?.autoRefillEnabled},{merge:!0})},className:`w-full px-3 py-2 rounded-lg text-sm font-medium transition-colors ${c?.autoRefillEnabled?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-white/5 text-gray-400 border border-white/10"}`,children:c?.autoRefillEnabled?" ":" "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" Episode "}),r.jsx("input",{type:"number",min:"1",max:"20",defaultValue:c?.autoRefillThreshold||5,onBlur:async V=>{if(!e||!c)return;const Y=parseInt(V.target.value)||5;Y!==c?.autoRefillThreshold&&await cs(Be(fe,"users",e.uid,"projects",c.id),{autoRefillThreshold:Y},{merge:!0})},className:"w-full px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm focus:border-yellow-500 outline-none"},`threshold-${c?.id}-${c?.autoRefillThreshold}`)]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" Episode"}),r.jsx("input",{type:"number",min:"5",max:"50",defaultValue:c?.autoRefillCount||10,onBlur:async V=>{if(!e||!c)return;const Y=parseInt(V.target.value)||10;Y!==c?.autoRefillCount&&await cs(Be(fe,"users",e.uid,"projects",c.id),{autoRefillCount:Y},{merge:!0})},className:"w-full px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm focus:border-yellow-500 outline-none"},`count-${c?.id}-${c?.autoRefillCount}`)]})]})]}),r.jsx(P8,{projectId:c.id})]})]}):r.jsxs("div",{className:"min-h-[400px] bg-black/20 rounded-2xl border-2 border-dashed border-white/10 flex flex-col items-center justify-center text-center p-8",children:[r.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-6 animate-pulse",children:r.jsx(ku,{size:40,className:"text-white/20"})}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Select a Project"}),r.jsx("p",{className:"text-gray-400 max-w-md",children:"Please select or create a project from the list above to manage its automation schedule."})]})})]}),Vs&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in",children:r.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 border border-white/10 rounded-2xl p-6 max-w-lg w-full mx-4 shadow-2xl",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-2 flex items-center gap-2",children:" Extension Key Generated"}),r.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Copy this key and paste it in your Extension. It will only be shown once!"}),r.jsx("div",{className:"bg-black/60 border border-white/10 rounded-lg p-4 font-mono text-xs text-green-400 break-all select-all mb-4",children:Vs}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Vs),alert("Key copied!")},className:"flex-1 px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/30 rounded-lg hover:bg-green-500/30 font-bold text-sm",children:" Copy"}),r.jsx("button",{onClick:()=>sr(null),className:"px-4 py-2 bg-white/5 text-gray-400 rounded-lg hover:bg-white/10 font-bold text-sm",children:"Close"})]})]})})]})}const dN=[{id:"all",label:"All Platforms"},{id:"facebook",label:"Facebook",icon:$u},{id:"tiktok",label:"TikTok",icon:rd},{id:"instagram",label:"Instagram",icon:wf},{id:"youtube",label:"YouTube",icon:Fu}],z8=({message:s,isVisible:e})=>e?r.jsxs("div",{className:"fixed bottom-8 right-8 bg-green-500 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-in fade-in slide-in-from-bottom-4 z-50",children:[r.jsx(Ln,{size:20}),r.jsx("span",{className:"font-bold",children:s})]}):null,V8=({account:s,userId:e,onRemove:t,onShowToast:a})=>{const[o,c]=N.useState(!1),[d,m]=N.useState(s.name),[p,g]=N.useState(!1),b=async()=>{if(d.trim()){g(!0);try{await Ps(Be(fe,"users",e,"accounts",s.id),{name:d}),c(!1),a("Account name updated successfully.")}catch(v){console.error("Error updating name:",v)}finally{g(!1)}}};return r.jsxs("div",{className:"group relative bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-xl border border-white/10 rounded-2xl p-6 hover:border-green-500/30 hover:shadow-2xl hover:shadow-green-500/10 transition-all duration-500 overflow-hidden hover:scale-[1.02]",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/0 via-green-500/5 to-green-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("div",{className:"flex items-start justify-between mb-4 relative",children:[r.jsxs("div",{className:"flex items-center gap-4 w-full",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:s.avatar,alt:s.name,className:"w-14 h-14 rounded-2xl border-2 border-green-500/30 shadow-lg shadow-green-500/20 group-hover:border-green-400/50 transition-all duration-300"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900 animate-pulse"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[o?r.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in duration-200",children:[r.jsx("input",{type:"text",value:d,onChange:v=>m(v.target.value),className:"w-full bg-white/10 border border-white/20 rounded-md px-3 py-1 text-white text-sm focus:outline-none focus:border-red-500 transition-colors placeholder-white/20",autoFocus:!0,placeholder:"Account Name"}),r.jsx("button",{onClick:b,disabled:p,className:"p-1.5 bg-green-500/10 hover:bg-green-500/20 text-green-400 hover:text-green-300 rounded-lg transition-all",title:"Save",children:r.jsx(_a,{size:16})}),r.jsx("button",{onClick:()=>{c(!1),m(s.name)},className:"p-1.5 hover:bg-red-500/10 text-red-400 hover:text-red-300 rounded-lg transition-all",title:"Cancel",children:r.jsx(Qs,{size:16})})]}):r.jsxs("div",{className:"flex items-center gap-2 group/edit",children:[r.jsx("h3",{className:"font-bold text-white text-lg truncate",children:s.name}),r.jsx("button",{onClick:()=>c(!0),className:"text-slate-400 hover:text-white transition-colors opacity-0 group-hover/edit:opacity-100 p-1.5 hover:bg-white/5 rounded-full",title:"Edit Name",children:r.jsx(nc,{size:14})})]}),r.jsxs("span",{className:"text-xs text-gray-400 capitalize flex items-center gap-1 mt-0.5",children:[s.platform," ",r.jsx(Ln,{size:12,className:"text-green-500"})]})]})]}),!o&&r.jsx("div",{className:`ml-2 px-3 py-1.5 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg ${s.status==="active"?"bg-gradient-to-r from-green-500/30 to-emerald-500/30 text-green-300 border border-green-500/30 shadow-green-500/20":"bg-gradient-to-r from-red-500/30 to-rose-500/30 text-red-300 border border-red-500/30 shadow-red-500/20"}`,children:s.status})]}),r.jsxs("button",{onClick:()=>t(s.id),className:"group/btn relative w-full mt-4 py-3 flex items-center justify-center gap-2 text-red-300 hover:text-white rounded-xl transition-all duration-300 text-sm font-bold overflow-hidden border border-red-500/20 hover:border-red-500/40 hover:bg-red-500/20 hover:shadow-lg hover:shadow-red-500/20",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/10 to-red-500/0 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-500"}),r.jsx(xs,{size:16,className:"group-hover/btn:rotate-12 transition-transform duration-300"})," Remove"]})]})};function U8(){const{t:s}=ed(),[e,t]=N.useState("all"),[a,o]=N.useState(null),[c,d]=N.useState([]),[m,p]=N.useState(!0),[g,b]=N.useState({message:"",isVisible:!1}),v=O=>{b({message:O,isVisible:!0}),setTimeout(()=>b({message:"",isVisible:!1}),3e3)};N.useEffect(()=>{const O=Ia(gn,L=>{if(o(L),L){const se=He(fe,"users",L.uid,"accounts"),W=Gt(se,re=>{const me=[];re.forEach(xe=>{me.push({id:xe.id,...xe.data()})}),d(me),p(!1)});return()=>W()}else d([]),p(!1)});return()=>O()},[]);const j=async O=>{if(!a)return;const L={platform:O,name:`${O.charAt(0).toUpperCase()+O.slice(1)} Account`,connectedAt:new Date().toISOString(),status:"active",avatar:`https://ui-avatars.com/api/?name=${O}&background=random`};try{await cs(Be(He(fe,"users",a.uid,"accounts")),L),v(`${L.name} label added successfully.`)}catch(se){console.error("Error connecting account:",se)}},I=async O=>{if(a)try{await Sn(Be(fe,"users",a.uid,"accounts",O)),v("Account label removed successfully.")}catch(L){console.error("Error removing account:",L)}},B=e==="all"?c:c.filter(O=>O.platform===e);return r.jsxs("div",{className:"p-8 max-w-6xl mx-auto relative",children:[r.jsx(z8,{message:g.message,isVisible:g.isVisible}),r.jsxs("header",{className:"mb-8 relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(si,{size:32,className:"text-white group-hover:rotate-12 transition-transform duration-300"})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900 flex items-center justify-center",children:r.jsx("span",{className:"text-[8px] font-bold text-black",children:c.length})})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:"Managed Accounts"}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"})," Label  Automation Agents"]})]})]})]}),r.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto pb-2 scrollbar-hide bg-black/30 backdrop-blur-xl p-2 rounded-2xl border border-white/10 w-fit",children:dN.map(O=>{const L=O.icon;return r.jsxs("button",{onClick:()=>t(O.id),className:Yt("group relative px-5 py-3 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap flex items-center gap-2",e===O.id?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-lg shadow-red-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white"),children:[L&&r.jsx(L,{size:18,className:`transition-transform duration-300 ${e===O.id?"animate-bounce":"group-hover:rotate-12"}`}),O.label,e===O.id&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]},O.id)})}),e!=="all"&&r.jsx("div",{className:"mb-8",children:r.jsxs("button",{onClick:()=>j(e),className:"group flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl font-bold shadow-lg shadow-red-500/30 hover:from-red-500 hover:to-red-400 transition-all hover:scale-105",children:[r.jsx(Vn,{size:20,className:"group-hover:rotate-90 transition-transform"}),"Add New ",dN.find(O=>O.id===e)?.label," Label"]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m?r.jsx("div",{className:"col-span-full text-center py-20 text-white/30",children:"Loading accounts..."}):B.length===0?r.jsxs("div",{className:"col-span-full relative flex flex-col items-center justify-center py-20 bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 border-dashed overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-red-500/10 rounded-full blur-3xl"}),r.jsx(Eu,{size:56,className:"text-white/20 mb-4"}),r.jsxs("p",{className:"text-slate-400 text-lg font-medium",children:["No ",e!=="all"?e:""," accounts added yet."]}),e==="all"&&r.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Select a platform tab to add an account label."})]}):B.map(O=>r.jsx(V8,{account:O,userId:a?.uid,onRemove:I,onShowToast:v},O.id))})]})}const B8=()=>{const[s,e]=N.useState(null),[t,a]=N.useState("dashboard"),[o,c]=N.useState("deposits"),[d,m]=N.useState([]),[p,g]=N.useState([]),[b,v]=N.useState([]),[j,I]=N.useState([]),[B,O]=N.useState(!1),[L,se]=N.useState(!1),[W,re]=N.useState(!1),[me,xe]=N.useState(!1),[Te,D]=N.useState(null),[T,A]=N.useState(null),[z,$]=N.useState(null),[q,k]=N.useState(""),[ue,_e]=N.useState(""),[P,M]=N.useState(!1),[F,Q]=N.useState(!1),[de,C]=N.useState([]),[J,te]=N.useState(!1),[ge,Ie]=N.useState(""),[De,Ce]=N.useState("all"),[qe,be]=N.useState("all"),[H,Me]=N.useState(null),[Le,We]=N.useState(!1),[Fe,Z]=N.useState(!1),[ve,et]=N.useState(""),[bt,lt]=N.useState([]),mt=U=>U?U.toLowerCase().includes("fxfarm.dashboard")?"Admin":U.split("@")[0]:"";N.useEffect(()=>{const U=Ia(gn,Ae=>{e(Ae)});return()=>U()},[]),N.useEffect(()=>{if(!s)return;O(!0);const U=ys(He(fe,"payment_requests"),en("createdAt","desc")),Ae=Gt(U,Ve=>{const ze=Ve.docs.map(nt=>({id:nt.id,...nt.data()}));m(ze),O(!1)},()=>O(!1));return()=>Ae()},[s]),N.useEffect(()=>{if(!s)return;se(!0);const U=ys(He(fe,"payment_logs"),en("createdAt","desc")),Ae=Gt(U,Ve=>{const ze=Ve.docs.map(nt=>({id:nt.id,...nt.data()}));g(ze),se(!1)},()=>se(!1));return()=>Ae()},[s]),N.useEffect(()=>{if(!s)return;re(!0);const U=ys(He(fe,"withdrawal_requests"),en("createdAt","desc")),Ae=Gt(U,Ve=>{const ze=Ve.docs.map(nt=>({id:nt.id,...nt.data()}));v(ze),re(!1)},()=>re(!1));return()=>Ae()},[s]),N.useEffect(()=>{if(!s)return;xe(!0),(async()=>{try{const Ae=await kn(He(fe,"users")),Ve=await Promise.all(Ae.docs.map(async ze=>{const nt={id:ze.id,...ze.data()};try{const pt=await Qr(Be(fe,"users",ze.id,"wallet","main"));nt.walletBalance=pt.exists()&&pt.data().balance||0}catch{nt.walletBalance=0}return nt}));I(Ve)}catch(Ae){console.error("Fetch users failed:",Ae)}finally{xe(!1)}})()},[s]),N.useEffect(()=>{if(!s)return;te(!0);const U=ys(He(fe,"admin_credit_logs"),en("createdAt","desc")),Ae=Gt(U,Ve=>{const ze=Ve.docs.map(nt=>({id:nt.id,...nt.data()}));C(ze),te(!1)},()=>te(!1));return()=>Ae()},[s]);const Pt=N.useMemo(()=>{const U=p.filter(K=>K.status==="approved"&&K.type!=="withdrawal"),Ae=b.filter(K=>K.status==="approved"),Ve=U.reduce((K,le)=>K+Math.abs(le.amount||0),0),ze=Ae.reduce((K,le)=>K+Math.abs(le.amount||0),0),nt=d.filter(K=>K.status==="pending").length,pt=b.filter(K=>K.status==="pending").length,Is=j.length,Lt=j.reduce((K,le)=>K+(le.walletBalance||0),0);return{totalDeposits:Ve,totalWithdrawals:ze,pendingDeposits:nt,pendingWithdrawals:pt,totalUsers:Is,totalBalance:Lt}},[p,b,d,j]),Ws=N.useMemo(()=>{let U=[...p];if(ge.trim()){const Ae=ge.toLowerCase();U=U.filter(Ve=>Ve.userEmail?.toLowerCase().includes(Ae)||Ve.reviewedByEmail?.toLowerCase().includes(Ae))}return De==="deposit"?U=U.filter(Ae=>Ae.type!=="withdrawal"):De==="withdrawal"&&(U=U.filter(Ae=>Ae.type==="withdrawal")),qe==="admin"?U=U.filter(Ae=>Ae.reviewedByEmail?.toLowerCase().includes("fxfarm.dashboard")):qe==="other"&&(U=U.filter(Ae=>!Ae.reviewedByEmail?.toLowerCase().includes("fxfarm.dashboard"))),U.slice(0,20)},[p,ge,De,qe]),Bn=async U=>{if(s&&confirm(` ${U.amount} TOKEN  ${U.userEmail}?`)){D(U.id);try{if((await Qr(Be(fe,"payment_requests",U.id))).data()?.status!=="pending"){alert(" "),D(null);return}await Ps(Be(fe,"payment_requests",U.id),{status:"approved",reviewedAt:st(),reviewedById:s.uid,reviewedByEmail:s.email||""}),await cs(Be(fe,"users",U.userId,"wallet","main"),{balance:zu(U.amount),updatedAt:st()},{merge:!0}),await ts(He(fe,"payment_logs"),{requestId:U.id,userId:U.userId,userEmail:U.userEmail||"",amount:U.amount,slipUrl:U.slipUrl||"",status:"approved",reviewedById:s.uid,reviewedByEmail:s.email||"",note:"",createdAt:st()})}catch(Ae){console.error("Approve payment failed:",Ae),alert(": "+Ae.message)}finally{D(null)}}},is=async U=>{if(!s)return;const Ae=prompt(" ()")||"";if(confirm(` ${U.amount} TOKEN?`)){D(U.id);try{if((await Qr(Be(fe,"payment_requests",U.id))).data()?.status!=="pending"){alert(" "),D(null);return}await Ps(Be(fe,"payment_requests",U.id),{status:"rejected",reviewedAt:st(),reviewedById:s.uid,reviewedByEmail:s.email||"",rejectReason:Ae}),await ts(He(fe,"payment_logs"),{requestId:U.id,userId:U.userId,userEmail:U.userEmail||"",amount:U.amount,slipUrl:U.slipUrl||"",status:"rejected",reviewedById:s.uid,reviewedByEmail:s.email||"",note:Ae,createdAt:st()})}catch(Ve){console.error("Reject payment failed:",Ve),alert(": "+Ve.message)}finally{D(null)}}},sn=async U=>{if(s&&confirm(` ${U.amount} TOKEN  ${U.userEmail}?
: ${U.bankName} ${U.accountNumber}`)){A(U.id);try{if((await Qr(Be(fe,"withdrawal_requests",U.id))).data()?.status!=="pending"){alert(" "),A(null);return}const Ve=await Qr(Be(fe,"users",U.userId,"wallet","main")),ze=Ve.exists()&&Ve.data().balance||0;if(ze<U.amount){alert(`  ( ${ze}  ${U.amount})`),A(null);return}await Ps(Be(fe,"withdrawal_requests",U.id),{status:"approved",reviewedAt:st(),reviewedById:s.uid,reviewedByEmail:s.email||""}),await cs(Be(fe,"users",U.userId,"wallet","main"),{balance:zu(-U.amount),updatedAt:st()},{merge:!0}),await ts(He(fe,"payment_logs"),{type:"withdrawal",requestId:U.id,userId:U.userId,userEmail:U.userEmail||"",amount:-U.amount,bankName:U.bankName,accountNumber:U.accountNumber,accountName:U.accountName,status:"approved",reviewedById:s.uid,reviewedByEmail:s.email||"",createdAt:st()}),alert(" ")}catch(Ae){console.error("Approve withdrawal failed:",Ae),alert(": "+Ae.message)}finally{A(null)}}},Rs=async U=>{if(!s)return;const Ae=prompt(" ()")||"";if(confirm(` ${U.amount} TOKEN?`)){A(U.id);try{if((await Qr(Be(fe,"withdrawal_requests",U.id))).data()?.status!=="pending"){alert(" "),A(null);return}await Ps(Be(fe,"withdrawal_requests",U.id),{status:"rejected",reviewedAt:st(),reviewedById:s.uid,reviewedByEmail:s.email||"",rejectReason:Ae}),await ts(He(fe,"payment_logs"),{type:"withdrawal",requestId:U.id,userId:U.userId,userEmail:U.userEmail||"",amount:U.amount,status:"rejected",reviewedById:s.uid,reviewedByEmail:s.email||"",note:Ae,createdAt:st()})}catch(Ve){console.error("Reject withdrawal failed:",Ve),alert(": "+Ve.message)}finally{A(null)}}},xn=async()=>{if(!s||!z)return;const U=parseInt(q);if(isNaN(U)||U===0){alert("");return}if(!ue.trim()){alert("");return}const Ae=U>0?"":"";if(confirm(`${Ae} ${Math.abs(U)} TOKEN  ${z.email}?`)){M(!0);try{if(U<0){const Ve=await Qr(Be(fe,"users",z.id,"wallet","main")),ze=Ve.exists()&&Ve.data().balance||0;if(ze+U<0){alert(`  ( ${ze}  ${Math.abs(U)})`),M(!1);return}}await cs(Be(fe,"users",z.id,"wallet","main"),{balance:zu(U),updatedAt:st()},{merge:!0}),await ts(He(fe,"admin_credit_logs"),{userId:z.id,userEmail:z.email||"",amount:U,reason:ue,adminId:s.uid,adminEmail:s.email||"",createdAt:st()}),I(Ve=>Ve.map(ze=>ze.id===z.id?{...ze,walletBalance:(ze.walletBalance||0)+U}:ze)),alert(` ${Ae} ${Math.abs(U)} TOKEN `),Q(!1),k(""),_e(""),$(null)}catch(Ve){console.error("Adjust credit failed:",Ve),alert(": "+Ve.message)}finally{M(!1)}}},Xt=U=>{const Ae=p.filter(pt=>pt.userId===U&&pt.status==="approved"&&pt.type!=="withdrawal"),Ve=p.filter(pt=>pt.userId===U&&pt.status==="approved"&&pt.type==="withdrawal"),ze=Ae.reduce((pt,Is)=>pt+Math.abs(Is.amount||0),0),nt=Ve.reduce((pt,Is)=>pt+Math.abs(Is.amount||0),0);return{totalDeposit:ze,totalWithdraw:nt,depositCount:Ae.length,withdrawCount:Ve.length}};N.useEffect(()=>{if(!s)return;(async()=>{try{const Ae=[],Ve=await kn(He(fe,"users"));for(const nt of Ve.docs){const pt=nt.data().email||nt.id;(await kn(He(fe,"users",nt.id,"projects"))).docs.forEach(Lt=>{Ae.push({id:Lt.id,userId:nt.id,name:Lt.data().name||Lt.id,userEmail:pt,label:`${Lt.data().name||Lt.id} (${pt.split("@")[0]})`})})}lt([{id:"all",userId:"all",name:" ",label:"  ()",isAll:!0},...Ae]),ve||et(JSON.stringify({userId:"all",projectId:"all"}))}catch(Ae){console.error("Fetch all projects error:",Ae)}})()},[s]);const $n=async()=>{if(ve){We(!0);try{const U=JSON.parse(ve),Ae=Pr(Lr,"getStorageStats");if(U.projectId==="all"){const Ve=bt.filter(nt=>!nt.isAll).map(nt=>({userId:nt.userId,projectId:nt.id})),ze=await Ae({allProjects:Ve});Me(ze.data)}else{const Ve=await Ae({projectId:U.projectId,userId:U.userId});Me(Ve.data)}}catch(U){console.error("Get storage stats error:",U),alert(": "+U.message)}finally{We(!1)}}},ds=async(U=["all"])=>{if(!ve)return;const Ae=JSON.parse(ve),Ve=Ae.projectId==="all",ze=Ve?`  (> 7 )   (${bt.length-1} )?`:` (> 7 )  ${U.join(", ")}?`;if(confirm(ze)){Z(!0);try{const nt=Pr(Lr,"manualCleanup");if(Ve){const pt=bt.filter(Lt=>!Lt.isAll).map(Lt=>({userId:Lt.userId,projectId:Lt.id})),Is=await nt({allProjects:pt,targets:U});alert(` ${Is.data.message}`)}else{const pt=await nt({projectId:Ae.projectId,userId:Ae.userId,targets:U});alert(` ${pt.data.message}`)}$n()}catch(nt){console.error("Manual cleanup error:",nt),alert(": "+nt.message)}finally{Z(!1)}}},Vs=[{id:"dashboard",label:"Dashboard",icon:sf},{id:"credit",label:"",icon:gg},{id:"storage",label:"Storage",icon:U0}],sr=[{id:"deposits",label:"",icon:ni},{id:"withdrawals",label:"",icon:qo},{id:"manager",label:"Credit Manager",icon:wa}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 text-white p-8 font-sans relative overflow-hidden",children:[r.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-red-900/10 via-transparent to-transparent"})]}),r.jsx("div",{className:"max-w-7xl mx-auto mb-8 relative",children:r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(sf,{className:"text-white",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:"Admin Command Center"}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),""]})]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto mb-8 relative",children:r.jsxs("div",{className:"bg-black/40 backdrop-blur-xl p-2 rounded-2xl border border-white/10 shadow-2xl shadow-black/50",children:[r.jsx("div",{className:"inline-flex flex-wrap gap-2",children:Vs.map(U=>{const Ae=U.icon,Ve=t===U.id,ze=U.id==="credit"?Pt.pendingDeposits+Pt.pendingWithdrawals:0;return r.jsxs("button",{onClick:()=>a(U.id),className:`group relative flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 whitespace-nowrap ${Ve?"bg-gradient-to-r from-red-600 to-orange-500 text-white shadow-lg shadow-red-500/40":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(Ae,{size:20,className:`transition-transform duration-300 ${Ve?"":"group-hover:rotate-12"}`}),U.label,ze>0&&r.jsx("span",{className:"bg-yellow-400 text-black text-xs font-black px-2.5 py-1 rounded-full animate-pulse shadow-lg shadow-yellow-500/50",children:ze}),Ve&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]},U.id)})}),t==="credit"&&r.jsx("div",{className:"mt-2 pt-2 border-t border-white/10",children:r.jsx("div",{className:"inline-flex gap-1 bg-white/5 p-1.5 rounded-xl",children:sr.map(U=>{const Ae=U.icon,Ve=o===U.id,ze=U.id==="deposits"?Pt.pendingDeposits:U.id==="withdrawals"?Pt.pendingWithdrawals:0;return r.jsxs("button",{onClick:()=>c(U.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${Ve?"bg-white/15 text-white border border-white/20":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[r.jsx(Ae,{size:16}),U.label,ze>0&&r.jsx("span",{className:"bg-yellow-400 text-black text-xs font-bold px-2 py-0.5 rounded-full",children:ze})]},U.id)})})})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto",children:[t==="dashboard"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[r.jsxs("div",{className:"group relative bg-gradient-to-br from-green-600/30 to-green-900/20 backdrop-blur-xl rounded-3xl border border-green-500/30 p-6 hover:scale-105 hover:shadow-2xl hover:shadow-green-500/20 transition-all duration-500 cursor-pointer overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/0 via-green-500/5 to-green-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-lg shadow-green-500/30 group-hover:animate-bounce",children:r.jsx(ZN,{className:"text-white",size:28})}),r.jsx("span",{className:"text-green-400 text-sm font-bold uppercase tracking-wider",children:""})]}),r.jsx("p",{className:"text-4xl font-black text-white mb-1 tracking-tight",children:Pt.totalDeposits.toLocaleString()}),r.jsx("p",{className:"text-sm text-green-300/80 font-medium",children:"TOKEN"})]}),r.jsxs("div",{className:"group relative bg-gradient-to-br from-red-600/30 to-red-900/20 backdrop-blur-xl rounded-3xl border border-red-500/30 p-6 hover:scale-105 hover:shadow-2xl hover:shadow-red-500/20 transition-all duration-500 cursor-pointer overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/5 to-red-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:animate-bounce",children:r.jsx(tC,{className:"text-white",size:28})}),r.jsx("span",{className:"text-red-400 text-sm font-bold uppercase tracking-wider",children:""})]}),r.jsx("p",{className:"text-4xl font-black text-white mb-1 tracking-tight",children:Pt.totalWithdrawals.toLocaleString()}),r.jsx("p",{className:"text-sm text-red-300/80 font-medium",children:"TOKEN"})]}),r.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600/30 to-blue-900/20 backdrop-blur-xl rounded-3xl border border-blue-500/30 p-6 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-500 cursor-pointer overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/0 via-blue-500/5 to-blue-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/30 group-hover:animate-bounce",children:r.jsx(wa,{className:"text-white",size:28})}),r.jsx("span",{className:"text-blue-400 text-sm font-bold uppercase tracking-wider",children:""})]}),r.jsx("p",{className:"text-4xl font-black text-white mb-1 tracking-tight",children:Pt.totalUsers}),r.jsx("p",{className:"text-sm text-blue-300/70",children:""})]}),r.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-600/30 to-purple-900/20 backdrop-blur-xl rounded-3xl border border-purple-500/30 p-6 hover:scale-105 hover:shadow-2xl hover:shadow-purple-500/20 transition-all duration-500 cursor-pointer overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/5 to-purple-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/30 group-hover:animate-bounce",children:r.jsx(rc,{className:"text-white",size:28})}),r.jsx("span",{className:"text-purple-400 text-sm font-bold uppercase tracking-wider",children:""})]}),r.jsx("p",{className:"text-4xl font-black text-white mb-1 tracking-tight",children:Pt.totalBalance.toLocaleString()}),r.jsx("p",{className:"text-sm text-purple-300/80 font-medium",children:"TOKEN"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"group relative bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 p-6 hover:bg-white/10 transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/10 rounded-full blur-2xl group-hover:bg-green-500/20 transition-all duration-500"}),r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:r.jsx(ni,{className:"text-green-400",size:18})})," - "]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-6xl font-black text-yellow-400 animate-pulse",children:Pt.pendingDeposits}),r.jsx("p",{className:"text-slate-400 mt-2 font-medium",children:""}),Pt.pendingDeposits>0&&r.jsx("button",{onClick:()=>a("deposits"),className:"mt-4 px-6 py-3 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 rounded-xl hover:from-yellow-500/30 hover:to-orange-500/30 transition-all font-semibold border border-yellow-500/30 hover:scale-105",children:" "})]})]}),r.jsxs("div",{className:"group relative bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 p-6 hover:bg-white/10 transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-500/10 rounded-full blur-2xl group-hover:bg-red-500/20 transition-all duration-500"}),r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-500/20 flex items-center justify-center",children:r.jsx(qo,{className:"text-red-400",size:18})})," - "]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-6xl font-black text-yellow-400 animate-pulse",children:Pt.pendingWithdrawals}),r.jsx("p",{className:"text-slate-400 mt-2 font-medium",children:""}),Pt.pendingWithdrawals>0&&r.jsx("button",{onClick:()=>a("withdrawals"),className:"mt-4 px-6 py-3 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-300 rounded-xl hover:from-yellow-500/30 hover:to-orange-500/30 transition-all font-semibold border border-yellow-500/30 hover:scale-105",children:" "})]})]})]}),r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 p-6 overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-purple-500 to-blue-500"}),r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-purple-600 flex items-center justify-center shadow-lg",children:r.jsx(ks,{className:"text-white",size:20})}),"",r.jsxs("span",{className:"ml-auto text-sm font-normal text-slate-400",children:[Ws.length," "]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 mb-5",children:[r.jsx("input",{type:"text",value:ge,onChange:U=>Ie(U.target.value),placeholder:"  email...",className:"flex-1 min-w-[200px] bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white text-sm focus:outline-none focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all"}),r.jsx(zs,{value:De,onChange:Ce,options:[{value:"all",label:""},{value:"deposit",label:""},{value:"withdrawal",label:""}],buttonClassName:"bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white text-sm focus:outline-none focus:border-red-500 cursor-pointer hover:bg-black/60 transition-all"}),r.jsx(zs,{value:qe,onChange:be,options:[{value:"all",label:""},{value:"admin",label:"Admin"},{value:"other",label:""}],buttonClassName:"bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white text-sm focus:outline-none focus:border-red-500 cursor-pointer hover:bg-black/60 transition-all"})]}),r.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto custom-scrollbar pr-2",children:[Ws.map((U,Ae)=>r.jsxs("div",{className:"group flex items-center justify-between bg-black/30 rounded-xl p-4 border border-white/5 hover:bg-black/50 hover:border-white/20 transition-all duration-300 hover:scale-[1.02]",style:{animationDelay:`${Ae*50}ms`},children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg transition-transform duration-300 group-hover:scale-110 ${U.type==="withdrawal"?"bg-gradient-to-br from-red-500 to-red-700":"bg-gradient-to-br from-green-500 to-green-700"}`,children:U.type==="withdrawal"?r.jsx(qo,{className:"text-white",size:20}):r.jsx(ni,{className:"text-white",size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-white",children:U.userEmail}),r.jsx("p",{className:"text-xs text-slate-500",children:U.createdAt?.toDate?.().toLocaleString("th-TH")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-bold ${U.type==="withdrawal"?"text-red-400":"text-green-400"}`,children:[U.type==="withdrawal"?"-":"+",Math.abs(U.amount)," TOKEN"]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[" ",r.jsx("span",{className:"text-purple-300",children:mt(U.reviewedByEmail)})]})]})]},U.id)),Ws.length===0&&r.jsx("p",{className:"text-slate-500 text-center py-4",children:""})]})]})]}),t==="credit"&&o==="deposits"&&r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-green-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"flex items-center gap-4 mb-8 relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-lg shadow-green-500/30 group-hover:animate-pulse",children:r.jsx(ni,{className:"text-white",size:32})}),d.filter(U=>U.status==="pending").length>0&&r.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center text-xs font-bold text-black animate-bounce",children:d.filter(U=>U.status==="pending").length})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-emerald-400",children:""}),r.jsx("p",{className:"text-slate-400 mt-1",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"xl:col-span-2 space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})," (",d.filter(U=>U.status==="pending").length,")"]}),B?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2 justify-center py-12",children:[r.jsx(ot,{size:24,className:"animate-spin"})," ..."]}):d.filter(U=>U.status==="pending").length===0?r.jsxs("div",{className:"text-slate-400 bg-black/30 rounded-2xl p-12 text-center border border-white/5",children:[r.jsx(Ln,{size:48,className:"mx-auto mb-3 text-green-500"}),r.jsx("p",{className:"font-medium",children:""})]}):d.filter(U=>U.status==="pending").map((U,Ae)=>r.jsx("div",{className:"group bg-black/40 border border-white/10 rounded-2xl p-5 hover:bg-black/60 hover:border-green-500/30 transition-all duration-300 hover:scale-[1.01]",style:{animationDelay:`${Ae*100}ms`},children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500 to-green-700 flex items-center justify-center shadow-lg",children:r.jsx(gg,{className:"text-white",size:24})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-semibold text-lg",children:U.userEmail||"Unknown User"}),r.jsxs("p",{className:"text-3xl font-black text-green-400 my-1",children:[U.amount," ",r.jsx("span",{className:"text-lg font-medium",children:"TOKEN"})]}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[r.jsx(ks,{size:12})," ",U.createdAt?.toDate?U.createdAt.toDate().toLocaleString("th-TH"):""]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[U.slipUrl&&r.jsxs("a",{href:U.slipUrl,target:"_blank",rel:"noopener noreferrer",className:"px-5 py-3 rounded-xl bg-white/10 text-slate-200 text-sm flex items-center gap-2 hover:bg-white/20 hover:scale-105 transition-all border border-white/10",children:["  ",r.jsx(Su,{size:14})]}),r.jsxs("button",{onClick:()=>Bn(U),disabled:Te===U.id,className:"px-5 py-3 rounded-xl bg-gradient-to-r from-green-600 to-green-500 text-white hover:from-green-500 hover:to-green-400 transition-all text-sm flex items-center gap-2 disabled:opacity-50 font-semibold shadow-lg shadow-green-500/30 hover:scale-105",children:[Te===U.id?r.jsx(ot,{size:16,className:"animate-spin"}):r.jsx(Ln,{size:16})," "]}),r.jsxs("button",{onClick:()=>is(U),disabled:Te===U.id,className:"px-5 py-3 rounded-xl bg-red-500/20 text-red-300 hover:bg-red-500 hover:text-white transition-all text-sm flex items-center gap-2 disabled:opacity-50 font-semibold border border-red-500/30 hover:scale-105",children:[r.jsx(xf,{size:16})," "]})]})]})},U.id))]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[r.jsx(ks,{size:18,className:"text-green-400"}),""]}),r.jsx("div",{className:"bg-black/40 border border-white/10 rounded-2xl p-4 max-h-[600px] overflow-y-auto custom-scrollbar space-y-3",children:L?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2 justify-center py-8",children:[r.jsx(ot,{size:20,className:"animate-spin"})," ..."]}):p.filter(U=>U.type!=="withdrawal").length===0?r.jsx("div",{className:"text-slate-500 text-sm text-center py-8",children:""}):p.filter(U=>U.type!=="withdrawal").map((U,Ae)=>r.jsxs("div",{className:"group border border-white/10 rounded-xl p-4 bg-black/30 hover:bg-black/50 hover:border-white/20 transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-white",children:U.userEmail}),r.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${U.status==="approved"?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:U.status==="approved"?" ":" "})]}),r.jsxs("p",{className:"text-xl font-black text-green-400",children:["+",U.amount," TOKEN"]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:U.createdAt?.toDate?.().toLocaleString("th-TH")}),r.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[": ",r.jsx("span",{className:"text-purple-300 font-medium",children:mt(U.reviewedByEmail)})]}),U.slipUrl&&r.jsxs("a",{href:U.slipUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-red-300 inline-flex items-center gap-1 mt-2 hover:text-red-200",children:["  ",r.jsx(Su,{size:10})]})]},U.id))})]})]})]}),t==="credit"&&o==="withdrawals"&&r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-yellow-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-red-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"flex items-center gap-4 mb-8 relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center shadow-lg shadow-red-500/30",children:r.jsx(qo,{className:"text-white",size:32})}),b.filter(U=>U.status==="pending").length>0&&r.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center text-xs font-bold text-black animate-bounce",children:b.filter(U=>U.status==="pending").length})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-300 to-orange-400",children:""}),r.jsx("p",{className:"text-slate-400 mt-1",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"xl:col-span-2 space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})," (",b.filter(U=>U.status==="pending").length,")"]}),W?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2 justify-center py-12",children:[r.jsx(ot,{size:24,className:"animate-spin"})," ..."]}):b.filter(U=>U.status==="pending").length===0?r.jsxs("div",{className:"text-slate-400 bg-black/30 rounded-2xl p-12 text-center border border-white/5",children:[r.jsx(Ln,{size:48,className:"mx-auto mb-3 text-green-500"}),r.jsx("p",{className:"font-medium",children:""})]}):b.filter(U=>U.status==="pending").map((U,Ae)=>r.jsx("div",{className:"group bg-black/40 border border-white/10 rounded-2xl p-5 hover:bg-black/60 hover:border-red-500/30 transition-all duration-300 hover:scale-[1.01]",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-lg",children:r.jsx(rc,{className:"text-white",size:24})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-semibold text-lg",children:U.userEmail||"Unknown User"}),r.jsxs("p",{className:"text-3xl font-black text-red-400 my-1",children:["-",U.amount," ",r.jsx("span",{className:"text-lg font-medium",children:"TOKEN"})]}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[r.jsx(ks,{size:12})," ",U.createdAt?.toDate?U.createdAt.toDate().toLocaleString("th-TH"):""]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-900/80 rounded-xl p-4 border border-blue-500/20 shadow-lg",children:[r.jsx("p",{className:"text-xs text-blue-300 mb-2 font-medium",children:" "}),r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Fo,{size:18,className:"text-blue-400"}),r.jsx("span",{className:"text-white font-bold",children:U.bankName})]}),r.jsx("p",{className:"text-xl font-mono text-white tracking-wider",children:U.accountNumber}),r.jsx("p",{className:"text-sm text-slate-300 mt-1",children:U.accountName})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-4 border-t border-white/10",children:[r.jsxs("button",{onClick:()=>sn(U),disabled:T===U.id,className:"px-5 py-3 rounded-xl bg-gradient-to-r from-green-600 to-green-500 text-white hover:from-green-500 hover:to-green-400 transition-all text-sm flex items-center gap-2 disabled:opacity-50 font-semibold shadow-lg shadow-green-500/30 hover:scale-105",children:[T===U.id?r.jsx(ot,{size:16,className:"animate-spin"}):r.jsx(Ln,{size:16}),"  ()"]}),r.jsxs("button",{onClick:()=>Rs(U),disabled:T===U.id,className:"px-5 py-3 rounded-xl bg-red-500/20 text-red-300 hover:bg-red-500 hover:text-white transition-all text-sm flex items-center gap-2 disabled:opacity-50 font-semibold border border-red-500/30 hover:scale-105",children:[r.jsx(xf,{size:16})," "]})]})]})},U.id))]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[r.jsx(ks,{size:18,className:"text-red-400"}),""]}),r.jsx("div",{className:"bg-black/40 border border-white/10 rounded-2xl p-4 max-h-[600px] overflow-y-auto custom-scrollbar space-y-3",children:b.filter(U=>U.status!=="pending").length===0?r.jsx("div",{className:"text-slate-500 text-sm text-center py-8",children:""}):b.filter(U=>U.status!=="pending").map(U=>r.jsxs("div",{className:"group border border-white/10 rounded-xl p-4 bg-black/30 hover:bg-black/50 hover:border-white/20 transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-semibold text-white",children:U.userEmail}),r.jsx("span",{className:`text-xs font-bold px-3 py-1 rounded-full ${U.status==="approved"?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:U.status==="approved"?" ":" "})]}),r.jsxs("p",{className:"text-xl font-black text-red-400",children:["-",U.amount," TOKEN"]}),r.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[U.bankName,"  ",U.accountNumber]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:U.reviewedAt?.toDate?.().toLocaleString("th-TH")}),r.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[": ",r.jsx("span",{className:"text-purple-300 font-medium",children:mt(U.reviewedByEmail)})]})]},U.id))})]})]})]}),t==="credit"&&o==="manager"&&r.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"xl:col-span-2 relative bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-red-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-purple-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"flex items-center gap-4 mb-8 relative",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center shadow-lg shadow-purple-500/30",children:r.jsx(wa,{className:"text-white",size:32})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-purple-300 to-pink-400",children:"Credit Manager"}),r.jsxs("p",{className:"text-slate-400 mt-1",children:["  ",j.length," "]})]})]}),me?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2 justify-center py-12",children:[r.jsx(ot,{size:24,className:"animate-spin"})," ..."]}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-white/20 bg-black/20",children:[r.jsx("th",{className:"text-left py-4 px-4 text-purple-300 font-bold",children:""}),r.jsx("th",{className:"text-right py-4 px-4 text-green-300 font-bold",children:""}),r.jsx("th",{className:"text-right py-4 px-4 text-red-300 font-bold",children:""}),r.jsx("th",{className:"text-right py-4 px-4 text-yellow-300 font-bold",children:""}),r.jsx("th",{className:"text-center py-4 px-4 text-slate-300 font-bold",children:""})]})}),r.jsx("tbody",{children:j.map((U,Ae)=>{const Ve=Xt(U.id),ze=U.email||p.find(nt=>nt.userId===U.id)?.userEmail||U.id;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[r.jsxs("td",{className:"py-4 px-4",children:[r.jsx("p",{className:"text-white font-medium",children:ze}),r.jsx("p",{className:"text-xs text-slate-500",children:U.displayName||""})]}),r.jsxs("td",{className:"py-4 px-4 text-right",children:[r.jsxs("p",{className:"text-green-400 font-medium",children:["+",Ve.totalDeposit.toLocaleString()]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[Ve.depositCount," "]})]}),r.jsxs("td",{className:"py-4 px-4 text-right",children:[r.jsxs("p",{className:"text-red-400 font-medium",children:["-",Ve.totalWithdraw.toLocaleString()]}),r.jsxs("p",{className:"text-xs text-slate-500",children:[Ve.withdrawCount," "]})]}),r.jsxs("td",{className:"py-4 px-4 text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-white",children:(U.walletBalance||0).toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-500",children:"TOKEN"})]}),r.jsx("td",{className:"py-4 px-4 text-center",children:r.jsxs("button",{onClick:()=>{$({...U,email:ze}),Q(!0)},className:"px-3 py-2 rounded-lg bg-purple-500/20 text-purple-300 hover:bg-purple-500 hover:text-white transition-all text-sm flex items-center gap-2 mx-auto",children:[r.jsx(Go,{size:14})," "]})})]},U.id)})})]}),j.length===0&&r.jsx("p",{className:"text-slate-500 text-center py-8",children:""})]})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(Go,{className:"text-purple-400",size:18}),""]}),J?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2",children:[r.jsx(ot,{size:16,className:"animate-spin"})," ..."]}):de.length===0?r.jsx("div",{className:"text-slate-500 text-sm text-center py-8",children:""}):r.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto custom-scrollbar",children:de.map(U=>{const Ae=U.amount>0,Ve=U.adminEmail?.includes("fxfarm.dashboard")?"Admin":U.adminEmail?.split("@")[0]||"Admin";return r.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-white",children:U.userEmail}),r.jsxs("span",{className:`text-lg font-bold ${Ae?"text-green-400":"text-red-400"}`,children:[Ae?"+":"",U.amount," TOKEN"]})]}),r.jsxs("p",{className:"text-xs text-slate-400 mb-2",children:[r.jsx("span",{className:"text-purple-300",children:":"})," ",U.reason||"-"]}),r.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500",children:[r.jsxs("span",{children:[": ",r.jsx("span",{className:"text-purple-300 font-medium",children:Ve})]}),r.jsx("span",{children:U.createdAt?.toDate?.().toLocaleString("th-TH")})]})]},U.id)})})]})]}),t==="storage"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center",children:r.jsx(xw,{className:"text-white",size:24})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Storage Dashboard"}),r.jsx("p",{className:"text-slate-400 text-sm",children:" Firestore"})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[r.jsx("select",{value:ve,onChange:U=>et(U.target.value),className:"bg-black/40 border border-white/20 rounded-xl px-4 py-2 text-white focus:outline-none focus:border-cyan-500 min-w-[200px]",children:bt.map(U=>r.jsx("option",{value:JSON.stringify({userId:U.userId,projectId:U.id}),children:U.label},`${U.userId}-${U.id}`))}),r.jsxs("button",{onClick:$n,disabled:Le,className:"flex items-center gap-2 px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded-xl transition-all disabled:opacity-50",children:[Le?r.jsx(ot,{size:18,className:"animate-spin"}):r.jsx(XN,{size:18}),""]})]})]})}),H&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-br from-green-600/20 to-green-900/10 backdrop-blur-xl rounded-2xl border border-green-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center",children:r.jsx(U0,{className:"text-green-400",size:16})}),r.jsx("span",{className:"text-green-400 text-xs font-bold uppercase",children:"Episodes"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.episodes.total}),r.jsxs("p",{className:"text-xs text-green-300",children:["Pending: ",H.stats.episodes.pending]}),r.jsxs("p",{className:"text-xs text-red-300",children:["Used: ",H.stats.episodes.used]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-900/10 backdrop-blur-xl rounded-2xl border border-blue-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:r.jsx(ks,{className:"text-blue-400",size:16})}),r.jsx("span",{className:"text-blue-400 text-xs font-bold uppercase",children:"History"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.episodeHistory.total}),r.jsxs("p",{className:"text-xs text-yellow-300",children:["Old (>7d): ",H.stats.episodeHistory.oldItems]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-purple-600/20 to-purple-900/10 backdrop-blur-xl rounded-2xl border border-purple-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center",children:r.jsx(sf,{className:"text-purple-400",size:16})}),r.jsx("span",{className:"text-purple-400 text-xs font-bold uppercase",children:"Logs"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.logs.total}),r.jsxs("p",{className:"text-xs text-yellow-300",children:["Old (>7d): ",H.stats.logs.oldItems]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-600/20 to-orange-900/10 backdrop-blur-xl rounded-2xl border border-orange-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center",children:r.jsx(Su,{className:"text-orange-400",size:16})}),r.jsx("span",{className:"text-orange-400 text-xs font-bold uppercase",children:"Test Logs"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.testLogs}),r.jsx("p",{className:"text-xs text-slate-400",children:"TTL: 7 days"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-pink-600/20 to-pink-900/10 backdrop-blur-xl rounded-2xl border border-pink-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-pink-500/20 flex items-center justify-center",children:r.jsx(Go,{className:"text-pink-400",size:16})}),r.jsx("span",{className:"text-pink-400 text-xs font-bold uppercase",children:"Prompts"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.readyPrompts}),r.jsx("p",{className:"text-xs text-slate-400",children:"Ready Prompts"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-cyan-600/20 to-cyan-900/10 backdrop-blur-xl rounded-2xl border border-cyan-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-cyan-500/20 flex items-center justify-center",children:r.jsx(ks,{className:"text-cyan-400",size:16})}),r.jsx("span",{className:"text-cyan-400 text-xs font-bold uppercase",children:"Slots"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.slots}),r.jsx("p",{className:"text-xs text-slate-400",children:"Time Slots"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-slate-600/20 to-slate-900/10 backdrop-blur-xl rounded-2xl border border-slate-500/20 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-500/20 flex items-center justify-center",children:r.jsx(xw,{className:"text-slate-400",size:16})}),r.jsx("span",{className:"text-slate-400 text-xs font-bold uppercase",children:"Backups"})]}),r.jsx("p",{className:"text-2xl font-black text-white",children:H.stats.deletedBackups}),r.jsx("p",{className:"text-xs text-slate-400",children:"Deleted Backups"})]})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(xs,{className:"text-red-400",size:20}),"Manual Cleanup ( 7 )"]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[r.jsxs("button",{onClick:()=>ds(["logs"]),disabled:Fe,className:"px-4 py-3 bg-purple-600/20 hover:bg-purple-600/40 border border-purple-500/30 text-purple-300 rounded-xl transition-all disabled:opacity-50 text-sm font-medium",children:[" Logs (",H.cleanupEstimate.logs,")"]}),r.jsxs("button",{onClick:()=>ds(["episodeHistory"]),disabled:Fe,className:"px-4 py-3 bg-blue-600/20 hover:bg-blue-600/40 border border-blue-500/30 text-blue-300 rounded-xl transition-all disabled:opacity-50 text-sm font-medium",children:[" History (",H.cleanupEstimate.episodeHistory,")"]}),r.jsxs("button",{onClick:()=>ds(["usedEpisodes"]),disabled:Fe,className:"px-4 py-3 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-300 rounded-xl transition-all disabled:opacity-50 text-sm font-medium",children:[" Used Episodes (",H.cleanupEstimate.usedEpisodes,")"]}),r.jsx("button",{onClick:()=>ds(["testLogs"]),disabled:Fe,className:"px-4 py-3 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-300 rounded-xl transition-all disabled:opacity-50 text-sm font-medium",children:" Test Logs"}),r.jsx("button",{onClick:()=>ds(["readyPrompts"]),disabled:Fe,className:"px-4 py-3 bg-pink-600/20 hover:bg-pink-600/40 border border-pink-500/30 text-pink-300 rounded-xl transition-all disabled:opacity-50 text-sm font-medium",children:" Prompts"}),r.jsxs("button",{onClick:()=>ds(["all"]),disabled:Fe,className:"px-4 py-3 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white rounded-xl transition-all disabled:opacity-50 text-sm font-bold flex items-center justify-center gap-2",children:[Fe?r.jsx(ot,{size:16,className:"animate-spin"}):r.jsx(xs,{size:16}),""]})]}),r.jsx("p",{className:"text-xs text-slate-500 mt-4",children:" episodeHistory  Backup  deletedBackups/  | Auto Clean  02:00-05:00 UTC"})]})]}),!H&&!Le&&r.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-12 text-center",children:[r.jsx(U0,{className:"text-slate-500 mx-auto mb-4",size:48}),r.jsx("p",{className:"text-slate-400",children:' Project  ""  Storage'})]})]})]}),F&&z&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-slate-900 border border-white/20 rounded-2xl p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:""}),r.jsxs("div",{className:"bg-black/40 rounded-xl p-4 mb-4",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:""}),r.jsx("p",{className:"text-white font-medium",children:z.email}),r.jsx("p",{className:"text-slate-400 text-sm mt-2",children:""}),r.jsxs("p",{className:"text-2xl font-bold text-white",children:[(z.walletBalance||0).toLocaleString()," TOKEN"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" (+  / - )"}),r.jsx("input",{type:"number",value:q,onChange:U=>k(U.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500",placeholder:" 100  -50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" *"}),r.jsx("input",{type:"text",value:ue,onChange:U=>_e(U.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-purple-500",placeholder:" , "})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>{Q(!1),$(null),k(""),_e("")},className:"flex-1 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all",children:""}),r.jsx("button",{onClick:xn,disabled:P,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-purple-500 text-white font-bold hover:from-purple-500 hover:to-purple-400 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:P?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:16,className:"animate-spin"})," ..."]}):""})]})]})})]})},$8=({stage:s,onUpdate:e,onRemove:t})=>r.jsxs("div",{className:"bg-slate-800 rounded-lg p-3 border border-white/5 shadow-lg relative group",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(t_,{size:12,className:"text-blue-400"}),r.jsxs("span",{className:"text-xs text-gray-400",children:["Step ",s.id?`#${s.id}`:""]}),r.jsx("span",{className:"text-[10px] text-green-400 bg-green-500/20 px-1.5 py-0.5 rounded",children:"Expander "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex flex-row items-center gap-2 min-w-fit",children:[r.jsx("span",{className:"text-sm font-bold text-gray-400 uppercase whitespace-nowrap",children:"STEP %"}),r.jsx("input",{type:"number",min:"0",max:"100",value:s.stepPercentage||0,onChange:a=>e("stepPercentage",parseInt(a.target.value)||0),className:"w-12 bg-gray-800 text-white text-sm text-center border border-gray-600 rounded py-1 focus:border-yellow-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),r.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),t()},className:"text-red-400 hover:text-red-300 transition-colors p-1.5 hover:bg-red-500/10 rounded-md",title:"Remove Step",children:r.jsx(xs,{size:14})})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(xg,{size:12,className:"text-orange-400"}),r.jsx("span",{className:"text-xs font-medium text-orange-300",children:"Scene Instruction ()"})]}),r.jsx("textarea",{value:s.sceneInstruction||"",onChange:a=>e("sceneInstruction",a.target.value),placeholder:"... :  wide shot   zoom ...",className:"w-full h-20 bg-black/30 border border-orange-500/20 rounded-lg px-3 py-2 text-sm text-white placeholder-slate-500 focus:border-orange-500/50 focus:bg-black/40 outline-none transition-colors resize-none"}),r.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"AI  Prompt "})]})]}),F8=({modeData:s,setModeData:e})=>{const[t,a]=N.useState(!1),[o,c]=N.useState("architect"),d=k=>k==="instruction"?{role:"assistant",content:`!  AI Scene Writer 

 ** (Scene Instruction)**  Mode 

?`}:{role:"assistant",content:`!  AI Story Director 

   

    Mode !`},[m,p]=N.useState([d("architect")]),[g,b]=N.useState(""),[v,j]=N.useState(!1),[I,B]=N.useState(null),[O,L]=N.useState(null),[se,W]=N.useState({}),[re,me]=N.useState([]),xe=o==="instruction"?{gradient:"from-orange-600 to-amber-600",bg:"bg-orange-600",bgHover:"hover:bg-orange-500",text:"text-orange-400",border:"border-orange-500/30",bgLight:"bg-orange-600/20",bgLightHover:"hover:bg-orange-600/40",textLight:"text-orange-300",shadow:"hover:shadow-[0_0_20px_rgba(249,115,22,0.6)]",ring:"focus:ring-orange-500/50"}:{gradient:"from-violet-600 to-fuchsia-600",bg:"bg-violet-600",bgHover:"hover:bg-violet-500",text:"text-violet-400",border:"border-violet-500/30",bgLight:"bg-violet-600/20",bgLightHover:"hover:bg-violet-600/40",textLight:"text-violet-300",shadow:"hover:shadow-[0_0_20px_rgba(168,85,247,0.6)]",ring:"focus:ring-violet-500/50"},Te=k=>{c(k),p([d(k)]),B(null),L(null),W({})},D=N.useRef(null),T=()=>{D.current?.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{T()},[m,I]);const A=async(k=null)=>{const ue=(typeof k=="string"?k:g).trim();if(!(!ue||v)){typeof k!="string"&&b(""),p(_e=>[..._e,{role:"user",content:ue}]),j(!0);try{const _e=Pr(Lr,"consultantChat"),P=m.map(C=>({role:C.role,content:(typeof C.content=="string"?C.content:JSON.stringify(C.content))+(C.role==="assistant"&&C.options&&C.options.length>0?`

[CONTEXT: I offered these options: ${JSON.stringify(C.options)}]`:"")}));console.log("[ModeConsultant] Sending to AI:",{message:ue,historyLength:P.length});const M=await _e({message:ue,history:P,currentModeData:s,aiMode:o});console.log("[ModeConsultant] AI Response:",M.data);const F=M.data,Q=F.reply||(F.name?` ** Mode !**

**${F.name}**
${F.description||""}

 Apply !`:" Mode !"),de=F.suggestedFix||(F.blocks?F:null);if(p(C=>[...C,{role:"assistant",content:Q,options:F.options||[],inputFields:F.inputFields||null}]),F.inputFields&&F.inputFields.length>0){L(F.inputFields);const C={};F.inputFields.forEach(J=>{C[J.id]=J.default||""}),W(C)}else L(null);de&&B({fix:de,logs:F.changeLog&&F.changeLog.length>0?F.changeLog:[" Mode : "+(de.name||"Template")]}),F.sceneInstructions&&F.sceneInstructions.length>0&&(console.log("[ModeConsultant] Applying Scene Instructions:",F.sceneInstructions),e(C=>{const J=[...C.blocks||[]];return F.sceneInstructions.forEach(({blockIndex:te,instruction:ge})=>{J[te]&&(J[te].evolution&&J[te].evolution.length>0?J[te].evolution[0]={...J[te].evolution[0],sceneInstruction:ge}:J[te].evolution=[{id:Date.now()+te,stepPercentage:100,sceneInstruction:ge}])}),{...C,blocks:J}}),p(C=>[...C,{role:"assistant",content:` **!**

 ${F.sceneInstructions.length} 

 **Save Mode** `,options:[]}]))}catch(_e){console.error(_e),p(P=>[...P,{role:"assistant",content:" "}])}finally{j(!1)}}},z=()=>{if(!I)return;me(_e=>[..._e.slice(-9),JSON.parse(JSON.stringify(s))]);const ue={...I.fix};delete ue.thumbnail,delete ue.image,delete ue.coverImage,ue.locations&&Array.isArray(ue.locations)&&(ue.locations=ue.locations.map((_e,P)=>({..._e,id:_e.id||Date.now()+P}))),ue.characters&&Array.isArray(ue.characters)&&(ue.characters=ue.characters.map((_e,P)=>({..._e,id:_e.id||Date.now()+P+100}))),e(_e=>({..._e,...ue,storyOverview:ue.storyOverview||_e.storyOverview||{},locations:ue.locations||_e.locations||[],characters:ue.characters||_e.characters||[],blocks:(ue.blocks&&ue.blocks.length>0?ue.blocks:_e.blocks||[]).map((P,M)=>{const F=ue.blocks?.find(C=>C.id===P.id)||ue.blocks?.[M],Q=_e.blocks?.find(C=>C.id===P.id)||_e.blocks?.[M]||{},de={...Q,...P,...F||{}};return de.id||(de.id=Q.id||Date.now()+M),de.type=de.type||Q.type||"dynamic_evolution",de.isExpanded=!0,de.title=de.title||Q.title||`Block ${M+1}`,de.sequencePercentage=parseInt(F?.sequencePercentage??P.sequencePercentage??Q.sequencePercentage??0,10),de.evolution=de.steps||de.evolution||[],de.evolution=de.evolution.map((C,J)=>{const te={...C};return te.id||(te.id=Date.now()+M*1e3+J),te.stepPercentage=parseInt(C.stepPercentage??C.percentage??100,10),C.visualPrompt&&(te.rawPrompt=C.visualPrompt),te.rawPrompt=te.rawPrompt||C.rawPrompt||"",te.audioInstruction=C.audioInstruction||"",te.cameraAngle=C.cameraAngle||"Wide Shot",te.locationId=C.locationId||null,te.timeOfDay=C.timeOfDay||"day",te.bgmMood=C.bgmMood||"epic",te.backgroundVoices=C.backgroundVoices||"",te.isExpanded=!0,C.dialogues&&Array.isArray(C.dialogues)?te.dialogues=C.dialogues.map((ge,Ie)=>({id:ge.id||Date.now()+M*1e4+J*100+Ie,characterId:ge.characterId||null,text:ge.text||"",timing:ge.timing||"start",type:ge.type||"main"})):te.dialogues=[],te}),de})})),p(_e=>[..._e,{role:"assistant",content:" !  Mode "}]),B(null)},$=()=>{B(null),p(k=>[...k,{role:"assistant",content:" "}])},q=()=>{if(re.length===0){p(ue=>[...ue,{role:"assistant",content:"  Undo "}]);return}const k=re[re.length-1];me(ue=>ue.slice(0,-1)),e(k),p(ue=>[...ue,{role:"assistant",content:" Undo ! "}])};return r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>a(!t),className:`fixed bottom-[20px] right-[20px] z-50 w-12 h-12 rounded-full flex items-center justify-center transition-all bg-gradient-to-br ${xe.gradient} hover:scale-110 active:scale-95 border-2 border-white/20 shadow-lg ${xe.shadow}`,children:t?r.jsx(Qs,{size:20,className:"text-white"}):r.jsx(tf,{size:24,className:"text-white animate-pulse"})}),t&&r.jsxs("div",{className:"fixed bottom-[20px] right-[80px] z-50 w-[400px] max-h-[80vh] h-[650px] bg-[#0f172a] rounded-2xl shadow-2xl border border-white/10 flex flex-col overflow-hidden backdrop-blur-xl bg-opacity-95 animate-in slide-in-from-right-10 fade-in duration-300",children:[r.jsxs("div",{className:"p-4 bg-slate-900/50 border-b border-white/5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full ${xe.bgLight} flex items-center justify-center transition-colors`,children:r.jsx(tf,{size:20,className:xe.text})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-bold text-lg",children:o==="instruction"?"AI Scene Writer":"AI Story Director"}),r.jsx("p",{className:"text-xs text-slate-400 font-mono",children:o==="instruction"?"":" AI "})]})]}),re.length>0&&r.jsx("button",{onClick:q,className:"px-3 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 text-orange-300 text-xs rounded-lg border border-orange-500/30 transition-all flex items-center gap-1",title:`Undo (${re.length} )`,children:" Undo"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>Te("architect"),className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1.5 ${o==="architect"?"bg-violet-600 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[r.jsx(bs,{size:14}),""]}),r.jsxs("button",{onClick:()=>Te("instruction"),className:`flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1.5 ${o==="instruction"?"bg-orange-600 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[r.jsx(tf,{size:14}),""]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[m.map((k,ue)=>r.jsxs("div",{className:`flex flex-col ${k.role==="user"?"items-end":"items-start"}`,children:[r.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl ${k.role==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-slate-800 text-slate-200 border border-white/5 rounded-tl-none"}`,children:r.jsx("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:k.content})}),k.role==="assistant"&&ue===m.length-1&&I&&r.jsxs("div",{className:"mt-3 animate-fade-in-up bg-slate-900/80 border border-yellow-500/30 rounded-xl p-4 w-full max-w-[95%]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(bs,{size:16,className:"text-yellow-400"}),r.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:"Proposed Changes"})]}),r.jsx("div",{className:"space-y-2 mb-4 max-h-[150px] overflow-y-auto custom-scrollbar",children:I.logs&&I.logs.map((_e,P)=>r.jsx("div",{className:"flex gap-2 text-xs text-slate-300 bg-black/20 p-2 rounded border border-white/5",children:r.jsx("span",{children:_e})},P))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:z,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[r.jsx(_a,{size:14})," Apply Fix"]}),r.jsx("button",{onClick:$,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-slate-300 py-2 rounded-lg text-sm font-bold transition-colors",children:"Cancel"})]})]}),k.role==="assistant"&&k.options&&k.options.length>0&&ue===m.length-1&&!O&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-2 max-w-[90%] animate-fade-in",children:k.options.map((_e,P)=>r.jsx("button",{onClick:()=>A(_e),disabled:v||I!==null,className:`px-3 py-1.5 ${xe.bgLight} ${xe.bgLightHover} ${xe.textLight} text-xs rounded-full border ${xe.border} transition-all hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed`,children:_e},P))})]},ue)),O&&O.length>0&&r.jsxs("div",{className:"bg-slate-900/80 border border-cyan-500/30 rounded-xl p-4 animate-fade-in",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(bs,{size:16,className:"text-cyan-400"}),r.jsx("span",{className:"text-cyan-400 font-bold text-sm",children:""})]}),r.jsx("div",{className:"space-y-3",children:O.map(k=>r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:k.label}),k.type==="textarea"?r.jsx("textarea",{value:se[k.id]||"",onChange:ue=>W(_e=>({..._e,[k.id]:ue.target.value})),placeholder:k.placeholder,className:"w-full h-16 bg-slate-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:border-cyan-500 outline-none resize-none"}):r.jsx("input",{type:k.type||"text",value:se[k.id]||"",onChange:ue=>W(_e=>({..._e,[k.id]:ue.target.value})),placeholder:k.placeholder,className:"w-full bg-slate-800 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-gray-600 focus:border-cyan-500 outline-none"})]},k.id))}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsxs("button",{onClick:()=>{const k=O.map(ue=>`${ue.label}: ${se[ue.id]||"()"}`).join(`
`);L(null),W({}),A(k)},disabled:v,className:"flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:[r.jsx(Nf,{size:14})," "]}),r.jsxs("button",{onClick:()=>{L(null),W({}),A("  AI  ()")},disabled:v,className:"flex-1 bg-violet-600 hover:bg-violet-500 text-white py-2 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:[r.jsx(bs,{size:14})," AI "]})]})]}),v&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-slate-800 p-3 rounded-2xl rounded-tl-none border border-white/5",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),r.jsx("div",{ref:D})]}),r.jsx("div",{className:"px-4 py-2 bg-gradient-to-r from-emerald-900/30 to-cyan-900/30 border-t border-emerald-500/20",children:r.jsxs("button",{onClick:()=>A("[[GENERATE_MODE]]"),disabled:v||I!==null||m.length<3,className:"w-full py-2.5 bg-gradient-to-r from-emerald-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-emerald-500/20",title:m.length<3?" AI ":" Mode ",children:[r.jsx(bs,{size:16})," Mode "]})}),r.jsx("div",{className:"p-4 bg-slate-900/50 border-t border-white/5",children:r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("button",{className:"text-slate-400 hover:text-white transition-colors",title:"Attach visual reference",children:r.jsx(w3,{size:20})}),r.jsxs("div",{className:"relative flex-1",children:[r.jsx("input",{type:"text",value:g,onChange:k=>b(k.target.value),onKeyDown:k=>k.key==="Enter"&&A(),placeholder:o==="instruction"?"...":"...",disabled:I!==null,className:`w-full bg-slate-800 text-white rounded-full pl-4 pr-10 py-3 text-sm focus:outline-none focus:ring-1 ${xe.ring} border border-white/10 disabled:opacity-50 disabled:cursor-not-allowed placeholder-slate-500`}),r.jsx("button",{onClick:()=>A(),disabled:!g.trim()||v||I!==null,className:`absolute right-1 top-1/2 -translate-y-1/2 p-2 ${xe.bg} rounded-full text-white ${xe.bgHover} disabled:bg-slate-700 disabled:text-slate-500 transition-colors`,children:r.jsx(Nf,{size:14})})]})]})})]})]})},H8=()=>{const[s,e]=N.useState({name:"Mode Template",category:"Cinematic / Movie",description:"",coverImage:"",systemInstruction:"",storyOverview:{synopsis:"",theme:"",tone:"epic",totalDuration:"3-5 min"},characters:[],blocks:[{id:1,type:"dynamic_evolution",title:"Cinematic Sequence A",isExpanded:!0,evolution:[{id:101,rawPrompt:"",stepPercentage:100,isExpanded:!0}]}]}),[t,a]=N.useState(!0),[o,c]=N.useState(!1),[d,m]=N.useState(!1),[p,g]=N.useState(null),b=N.useRef(!1),[v,j]=N.useState([]),[I,B]=N.useState(null),[O,L]=N.useState(!0),[se,W]=N.useState("library"),[re,me]=N.useState(!1),[xe,Te]=N.useState([]),[D,T]=N.useState(-1),[A,z]=N.useState(!0),[$,q]=N.useState(!1),[k,ue]=N.useState([]),[_e,P]=N.useState(!1),[M,F]=N.useState(""),[Q,de]=N.useState("all"),[C,J]=N.useState(""),[te,ge]=N.useState(null),Ie=N.useRef({past:[],future:[]}),De=N.useRef(null),Ce=N.useRef(!1),qe=N.useRef(null),[be,H]=N.useState(0);N.useEffect(()=>{Ie.current={past:[],future:[]},De.current=JSON.parse(JSON.stringify(s)),H(0)},[s.docId]),N.useEffect(()=>{if(Ce.current){Ce.current=!1;return}const K=setTimeout(()=>{if(!De.current)return;const le=JSON.stringify(s),V=JSON.stringify(De.current);le!==V&&(Ie.current.past.push(De.current),Ie.current.past.length>50&&Ie.current.past.shift(),Ie.current.future=[],De.current=JSON.parse(le),H(Y=>Y+1),console.log(" Snapshot saved to History"))},800);return()=>clearTimeout(K)},[s]);const Me=()=>{if(Ie.current.past.length===0)return;const K=Ie.current.past.pop();Ie.current.future.unshift(s),Ce.current=!0,e(K),De.current=K,H(le=>le+1),console.log(" Undo")},Le=()=>{if(Ie.current.future.length===0)return;const K=Ie.current.future.shift();Ie.current.past.push(s),Ce.current=!0,e(K),De.current=K,H(le=>le+1),console.log(" Redo")};N.useEffect(()=>{const K=le=>{(le.ctrlKey||le.metaKey)&&le.key==="z"&&!le.shiftKey&&(le.preventDefault(),Me()),(le.ctrlKey||le.metaKey)&&(le.key==="y"||le.shiftKey&&le.key==="z")&&(le.preventDefault(),Le())};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[s,Me,Le]);const[We,Fe]=N.useState(!1),[Z,ve]=N.useState(null);N.useEffect(()=>{if(!re||We)return;const K=setInterval(()=>{T(le=>le<xe.length-1?le+1:le)},800);return()=>clearInterval(K)},[re,We,xe.length]);const et=()=>{Fe(!We)},bt=()=>{const K=xe.join(`
`);navigator.clipboard.writeText(K).then(()=>{ve("copied"),setTimeout(()=>ve(null),2e3)})},lt=K=>{K&&(K.preventDefault(),K.stopPropagation()),console.log(" Closing Console & Stopping Audio"),qe.current&&(qe.current.pause(),qe.current.currentTime=0,qe.current=null),me(!1),T(-1)};N.useEffect(()=>{const K=Ia(gn,async le=>{if(g(le),le){const V=ys(He(fe,"users",le.uid,"modes"),en("updatedAt","desc")),Y=Gt(V,Se=>{const Ue=Se.docs.map(Ke=>({id:Ke.id,...Ke.data()}));j(Ue),a(!1)});return()=>{Y()}}else a(!1)});return()=>K()},[]);const mt={name:"",category:"Cinematic / Movie",description:"",coverImage:"",systemInstruction:"",variables:[],blocks:[],docId:null},Pt=()=>{a(!0),B(null),L(!0),W("editor");const K={name:"New Custom Mode",category:"Cinematic / Movie",description:"",coverImage:"",systemInstruction:"",variables:[],blocks:[{id:Date.now(),type:"dynamic_evolution",title:"Checkpoints",isExpanded:!0,evolution:[{id:Date.now()+1,stepPercentage:100,isExpanded:!0}]}],docId:null};e(K),setTimeout(()=>a(!1),300)},Ws=K=>{I!==K.id&&(B(K.id),L(!1),e({...K,docId:K.id}))},Bn=(K,le)=>{console.log(" Editing mode:",le.id),K.stopPropagation(),B(le.id),L(!0),W("editor"),b.current=!0,e({...le,docId:le.id})},is=async(K,le)=>{if(K.stopPropagation(),!!window.confirm("Are you sure you want to delete this mode?"))try{await Sn(Be(fe,"users",p.uid,"modes",le)),I===le&&Pt()}catch(V){console.error("Error deleting mode:",V)}};N.useEffect(()=>{if(t||b.current||!p){b.current=!1;return}if(!s.docId)return;const le=setTimeout(async()=>{c(!0);try{const V=Be(fe,"users",p.uid,"modes",s.docId);await cs(V,{...s,updatedAt:st()},{merge:!0})}catch(V){console.error("Error auto-saving mode:",V)}finally{setTimeout(()=>c(!1),500)}},2e3);return()=>clearTimeout(le)},[s,t,p]);const sn=K=>{if(K===0)return[];const le=Math.floor(100/K);let V=100-le*K;return Array(K).fill(le).map((Y,Se)=>Se<V?Y+1:Y)},Rs=()=>{const K=s.blocks,le=K.length+1,V=sn(le),Y=K.map((Ue,Ke)=>({...Ue,sequencePercentage:V[Ke]})),Se={id:Date.now(),type:"dynamic_evolution",title:`Cinematic Sequence ${le}`,isExpanded:!0,sequencePercentage:V[le-1],evolution:[{id:Date.now()+1,stepPercentage:100,isExpanded:!0}]};e({...s,blocks:[...Y,Se]})},xn=(K,le)=>{const V=s.blocks.map(Y=>Y.id===K?{...Y,title:le}:Y);e({...s,blocks:V})},Xt=(K,le)=>{const V=s.blocks.map(Y=>Y.id===K?{...Y,sequencePercentage:le}:Y);e({...s,blocks:V})},$n=K=>{const le=s.blocks.filter(Y=>Y.id!==K),V=le.length;if(V>0){const Y=sn(V),Se=le.map((Ue,Ke)=>({...Ue,sequencePercentage:Y[Ke]}));e({...s,blocks:Se})}else e({...s,blocks:[]})},ds=K=>{const le=s.blocks.map(V=>V.id===K?{...V,isExpanded:!V.isExpanded}:V);e({...s,blocks:le})},Vs=()=>{const le=!s.blocks.some(Y=>Y.isExpanded),V=s.blocks.map(Y=>({...Y,isExpanded:le}));e({...s,blocks:V})},sr=(K,le,V,Y)=>{const Se=s.blocks.map(Ue=>{if(Ue.id===K){const Ke=Ue.evolution.map(ht=>ht.id===le?{...ht,[V]:Y}:ht);return{...Ue,evolution:Ke}}return Ue});e({...s,blocks:Se})},U=(K,le)=>{const V=s.blocks.map(Y=>{if(Y.id===K){const Se=Y.evolution.map(Ue=>Ue.id===le?{...Ue,isExpanded:!Ue.isExpanded}:Ue);return{...Y,evolution:Se}}return Y});e({...s,blocks:V})},Ae=(K,le)=>{const V=s.blocks.map(Y=>{if(Y.id===K){const Se=Y.evolution.filter(Ke=>Ke.id!==le),Ue=Se.length;if(Ue>0){const Ke=sn(Ue),ht=Se.map((Wt,yt)=>({...Wt,stepPercentage:Ke[yt]}));return{...Y,evolution:ht}}else return{...Y,evolution:[]}}return Y});e({...s,blocks:V})},Ve=K=>{e({...s,characters:(s.characters||[]).filter(le=>le.id!==K)})},ze=async()=>{if(p){q(!0),P(!0);try{const K=ys(He(fe,"users",p.uid,"characters"),en("createdAt","desc")),le=Gt(K,V=>{const Y=V.docs.map(Se=>({id:Se.id,...Se.data()}));ue(Y),P(!1)});return()=>le()}catch(K){console.error("Error fetching characters:",K),P(!1)}}},nt=K=>{if((s.characters||[]).map(Se=>Se.id).includes(K.id)){alert(" Mode ");return}const V={id:K.id,name:K.name,description:K.personality||"",visualDescription:K.visualDescription||"",role:K.role||"main",voiceStyle:K.voiceStyle||"neutral",image:K.image||"",tags:K.tags||[],gender:K.gender||"",personality:K.personality||"",isFavorite:K.isFavorite||!1},Y={...s,characters:[...s.characters||[],V]};if(e(Y),s.docId&&p){const Se=Be(fe,"users",p.uid,"modes",s.docId);cs(Se,{...Y,updatedAt:st()},{merge:!0}).catch(Ue=>console.error("Error saving character:",Ue))}},pt=async K=>{const le=K.target.files[0];if(!le)return;const V=3*1024*1024;if(le.size>V){alert(" Image too large! Please select a file under 3MB."),K.target.value="";return}if(p){m(!0);try{const Y=`mode_thumbnails/${p.uid}/${Date.now()}_${le.name}`,Se=_d(jd,Y),Ue=await wd(Se,le),Ke=await Nd(Ue.ref);e(ht=>({...ht,coverImage:Ke})),console.log("Image uploaded:",Ke)}catch(Y){console.error("Error uploading image:",Y),alert(`Error: ${Y.message}`)}finally{m(!1)}}},Is=async()=>{if(p){c(!0);try{let K=[];if(s.blocks?.length>0)try{console.log(" Compiling prompts with AI...");const Ke=await Pr(Lr,"compilePrompts")({modeData:s,variableValues:{}});Ke.data?.success&&(K=Ke.data.compiledScenes||[],console.log(` AI compiled ${K.length} scenes`))}catch(Ue){console.warn(" AI compilation failed, saving without compiled prompts:",Ue)}const V=He(fe,"users",p.uid,"modes");let Y=s.docId;const Se={...s,compiledScenes:K,updatedAt:st()};Y&&Y!=="default-mode"?(await cs(Be(V,Y),Se,{merge:!0}),console.log("Mode updated:",Y)):(Se.createdAt=st(),Y=(await ts(V,Se)).id,e(Ke=>({...Ke,docId:Y})),console.log("New Mode created:",Y)),alert(K.length>0?`Mode saved! AI compiled ${K.length} scenes (THEN).`:"Mode saved successfully!"),W("library"),B(null),e(mt),L(!1)}catch(K){console.error("Error saving mode:",K),alert("Error saving mode. Please try again.")}finally{c(!1)}}},Lt=async()=>{if(!s.name||s.name==="Mode Template"){Te([" Please load or create a mode first!","Tip: Click a card in 'My Modes' or 'New Mode'."]),me(!1);return}if(!re){me(!0),T(-1),Te([" Connecting to Charon's Neural Network..."," Uploading Blueprint for Analysis..."]);try{let K="";const le=s.blocks||[];le.length>0?le.forEach((yt,hs)=>{K+=`Scene ${hs+1}: ${yt.title}
`,yt.evolution&&yt.evolution.length>0?yt.evolution.forEach((St,os)=>{K+=`  - Step ${os+1}: ${St.rawPrompt||"No visual prompt"} (Camera: ${St.cameraAngle||"Default"})
`,K+=`    Audio: ${St.audioInstruction||"No audio"}
`}):K+=`  (No steps in this scene)
`}):K="No scenes added yet.";const V=`
Title: ${s.name}
Description: ${s.description||"No description provided"}
System Instruction: ${s.systemInstruction||"No instruction provided"}

Scenes / Checkpoints:
${K}
            `.trim();console.log(" Sending to Charon:",V);const Se=await Pr(Lr,"analyzeMode")({promptText:V}),{script:Ue,audioContent:Ke,score:ht}=Se.data;console.log(" AI Analysis Result:",Se.data);const Wt=Ue.split(`
`).filter(yt=>yt.trim()!=="");if(Te(Wt),Ke){qe.current&&(qe.current.pause(),qe.current=null);const yt=new Audio(`data:audio/mp3;base64,${Ke}`);qe.current=yt,await new Promise(hs=>{yt.onended=()=>{hs(),qe.current=null},yt.play().catch(St=>{console.error("Audio playback error:",St),hs()})})}}catch(K){console.error("Analysis Failed:",K),Te(le=>[...le," Error: Could not verify mode with Charon Core.",`Details: ${K.message}`])}}};return t?r.jsx("div",{className:"h-full flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-4 text-white/50 animate-pulse",children:[r.jsx(ot,{size:48,className:"animate-spin"}),r.jsx("p",{children:"Loading modes..."})]})}):r.jsxs("div",{className:"min-h-screen p-8 space-y-6 overflow-auto",children:[r.jsxs("div",{className:"relative flex items-center justify-between border-white/10 transition-all duration-300 z-50 overflow-hidden bg-white/5 backdrop-blur-xl border p-4 rounded-2xl shadow-xl",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(bs,{className:"text-white group-hover:rotate-12 transition-transform duration-300",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900"})]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight flex items-center gap-3",children:[s.name,o&&r.jsxs("span",{className:"text-xs text-green-400 font-normal flex items-center gap-1 bg-green-500/20 px-2 py-1 rounded-full",children:[r.jsx(ot,{size:12,className:"animate-spin"})," Saving..."]})]}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"}),"Mode Creator Engine"]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:Vs,className:"p-2.5 bg-white/10 hover:bg-white/20 text-slate-300 hover:text-white rounded-xl transition-all border border-white/10 hover:scale-105",title:"Collapse/Expand All",children:r.jsx(oA,{size:18})}),r.jsx("div",{className:"w-px h-10 bg-white/10"}),r.jsxs("button",{onClick:Lt,disabled:re,className:`group relative flex items-center gap-2 px-6 py-3 rounded-2xl transition-all duration-300 font-bold overflow-hidden ${re?"bg-gradient-to-r from-orange-600 via-orange-500 to-yellow-500 animate-pulse text-white shadow-xl shadow-orange-500/40":"bg-black/40 backdrop-blur-xl border border-white/10 hover:border-orange-500/50 text-white hover:scale-105 hover:shadow-lg hover:shadow-orange-500/20"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-orange-500/10 to-orange-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),re?r.jsx(ot,{size:18,className:"animate-spin"}):r.jsx(Ta,{size:18,className:"relative z-10 group-hover:scale-110 group-hover:rotate-12 transition-all"}),r.jsx("span",{className:"relative z-10",children:re?"Running...":"Test Run"})]}),r.jsxs("button",{onClick:Is,disabled:o,className:"group relative flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-500 hover:from-emerald-500 hover:to-green-400 text-white rounded-2xl transition-all duration-300 shadow-lg shadow-emerald-500/30 disabled:opacity-50 disabled:cursor-not-allowed font-bold hover:scale-105 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),o?r.jsx(ot,{size:18,className:"animate-spin"}):r.jsx(Zf,{size:18,className:"relative z-10 group-hover:scale-110 group-hover:rotate-12 transition-all"}),r.jsx("span",{className:"relative z-10",children:o?"Saving...":"Save Mode"})]})]})]}),r.jsx("div",{className:"flex justify-between items-center w-full px-1 py-2 shrink-0",children:r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-black/40 backdrop-blur-xl rounded-2xl w-fit shrink-0 border border-white/10",children:[r.jsxs("button",{onClick:()=>W("library"),className:`group relative px-6 py-3 rounded-xl transition-all duration-300 flex items-center gap-2.5 font-bold overflow-hidden ${se==="library"?"bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 text-white shadow-xl shadow-orange-500/40":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(Ji,{size:18,className:`relative z-10 transition-all duration-300 ${se==="library"?"animate-pulse":"group-hover:rotate-12"}`}),r.jsx("span",{className:"relative z-10",children:"My Modes"}),v.length>0&&r.jsx("span",{className:"bg-yellow-400 text-black px-2.5 py-0.5 rounded-full text-xs font-bold animate-pulse",children:v.length}),se==="library"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>W("editor"),className:`group relative px-6 py-3 rounded-xl transition-all duration-300 flex items-center gap-2.5 font-bold overflow-hidden ${se==="editor"?"bg-gradient-to-r from-red-600 via-orange-500 to-yellow-500 text-white shadow-xl shadow-orange-500/40":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(bs,{size:18,className:`relative z-10 transition-all duration-300 ${se==="editor"?"animate-pulse":"group-hover:rotate-12"}`}),r.jsx("span",{className:"relative z-10",children:"Creator"}),se==="editor"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]})]})}),r.jsxs("div",{className:`flex-1 flex overflow-hidden transition-all duration-300 ease-in-out ${A?"gap-4":"gap-0"}`,children:[r.jsx("div",{className:`
                        flex-shrink-0 bg-white/5 backdrop-blur-xl border-white/10 rounded-2xl overflow-hidden flex flex-col transition-all duration-300 ease-in-out relative
                        ${A&&se==="editor"?"w-[400px] border opacity-100":"w-0 border-none opacity-0"}
                    `,children:r.jsx("div",{className:"w-[400px] p-6 flex flex-col gap-6 h-full overflow-y-auto",children:re?r.jsxs("div",{className:"absolute inset-0 z-20 bg-gray-950 flex flex-col overflow-hidden animate-in fade-in slide-in-from-left-4 duration-300",children:[r.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between bg-black/40",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${We?"bg-yellow-500":"bg-red-500"} animate-pulse shadow-[0_0_10px_rgba(239,68,68,0.5)]`}),r.jsx("span",{className:"text-red-500 font-mono text-xs uppercase tracking-widest leading-none",children:We?"SIMULATION PAUSED":"SIMULATION ACTIVE"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:et,className:`p-1.5 rounded hover:bg-white/10 transition-colors ${We?"text-green-400":"text-yellow-400"}`,title:We?"Resume Simulation":"Pause Simulation",children:We?r.jsx(Ta,{size:16,fill:"currentColor"}):r.jsx(_3,{size:16,fill:"currentColor"})}),r.jsxs("button",{onClick:bt,disabled:re&&!We&&xe.length<4,className:"p-1.5 rounded hover:bg-white/10 text-blue-400 hover:text-white transition-colors disabled:opacity-30 disabled:cursor-not-allowed group relative",title:"Copy Log to Clipboard",children:[Z==="copied"?r.jsx(_a,{size:16}):r.jsx(Xi,{size:16}),Z==="copied"&&r.jsx("span",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 bg-green-500 text-white text-[10px] px-2 py-0.5 rounded shadow-lg animate-in fade-in zoom-in-95",children:"Copied!"})]}),r.jsx("button",{type:"button",onClick:lt,className:"text-gray-500 hover:text-white transition-colors z-50 relative p-2",title:"Stop Test & Close",children:r.jsx(xs,{size:16})})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 flex flex-col gap-3 font-mono text-sm",children:[r.jsx("div",{className:"flex items-end gap-1 h-8 opacity-50 mb-4",children:[...Array(8)].map((K,le)=>r.jsx("div",{className:"w-1 bg-orange-500 rounded-t animate-[bounce_0.8s_infinite]",style:{animationDelay:`${le*.1}s`,height:`${Math.random()*100}%`}},le))}),xe.map((K,le)=>r.jsxs("div",{className:`p-3 rounded-r-lg border-l-2 animate-in slide-in-from-bottom-2 fade-in duration-300 transition-colors ${le===D?"bg-orange-500/20 border-orange-400 text-white shadow-[0_0_15px_rgba(249,115,22,0.2)]":le<D?"bg-gray-800/50 border-gray-600 text-gray-400 opacity-60":"bg-orange-500/5 border-orange-500/30 text-orange-200/70"}`,children:[r.jsx("span",{className:`mr-2 ${le===D?"text-orange-400 animate-pulse":"opacity-30"}`,children:">"}),K]},le)),xe.length===0&&r.jsx("div",{className:"text-gray-600 italic",children:"Initializing Charon Neural Core..."})]}),r.jsxs("div",{className:"p-4 border-t border-gray-800 bg-black/40 flex justify-between items-center text-xs text-gray-500 font-mono",children:[r.jsxs("span",{children:["PID: ",Date.now().toString().slice(-6)]}),r.jsxs("span",{className:xe.length>=4?"text-green-500":"text-yellow-500",children:["STATUS: ",xe.length>=4?"COMPLETE":"RUNNING"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-red-200 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(JN,{size:16})," Configuration"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Mode Thumbnail"}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-20 h-20 bg-black/40 rounded-lg border border-white/10 flex items-center justify-center overflow-hidden shrink-0 group relative",children:s.coverImage?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:s.coverImage,alt:"Mode Thumbnail",className:"w-full h-full object-cover"}),r.jsx("button",{onClick:()=>e({...s,coverImage:""}),className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-red-400 hover:text-red-300",disabled:!O,children:r.jsx(xs,{size:16})})]}):r.jsx("div",{className:"flex items-center justify-center w-full h-full text-gray-600",children:d?r.jsx(ot,{size:24,className:"animate-spin text-blue-400"}):r.jsx(ix,{size:24})})}),r.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:pt,disabled:!O||o||d,className:"text-sm text-slate-300 file:mr-3 file:py-2.5 file:px-5 file:rounded-xl file:border file:border-amber-400/50 file:text-sm file:font-bold file:bg-amber-500/30 file:text-amber-200 hover:file:bg-amber-500/50 hover:file:border-amber-400/70 hover:file:text-white file:transition-all file:duration-300 file:shadow-lg file:shadow-amber-500/20 file:cursor-pointer cursor-pointer disabled:opacity-50"}),r.jsx("p",{className:"text-[10px] text-slate-500",children:"Max size: 3MB. Formats: JPG, PNG, WEBP."})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-400 mb-2 block uppercase tracking-wider",children:"Mode Name"}),r.jsx("input",{type:"text",value:s.name,onChange:K=>e({...s,name:K.target.value}),disabled:!O,className:"w-full bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 text-white focus:border-red-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-red-500/10 outline-none transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed placeholder-slate-500",placeholder:"Mode Template"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-400 mb-2 block uppercase tracking-wider",children:"Category"}),r.jsxs("div",{className:"glass-dropdown-wrapper w-full",children:[r.jsx(zs,{value:s.category||"Cinematic / Movie",onChange:K=>e({...s,category:K}),disabled:!O,options:["Cinematic / Movie","Short Film / Story","Product Showcase / Commercial","Real Estate / Architecture","Vlog / Lifestyle","Time-lapse / Hyper-lapse","Documentary / News","How-to / Tutorial","Relaxation / Lo-fi / ASMR"].map(K=>({value:K,label:K})),buttonClassName:"glass-dropdown w-full disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx(tr,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-400 mb-2 block uppercase tracking-wider",children:"Description"}),r.jsx("textarea",{className:"w-full h-20 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 text-white focus:border-red-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-red-500/10 outline-none transition-all duration-300 resize-none disabled:opacity-50 disabled:cursor-not-allowed placeholder-slate-500",placeholder:"What does this mode do?",value:s.description,onChange:K=>e({...s,description:K.target.value}),disabled:!O})]}),r.jsxs("div",{className:"border-t border-white/10 pt-4 mt-2",children:[r.jsx("h3",{className:"text-sm font-bold text-orange-200 uppercase tracking-widest mb-3 flex items-center gap-2",children:" Story Overview ()"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Synopsis ()"}),r.jsx("textarea",{className:"w-full h-24 bg-black/20 border border-orange-500/20 rounded-lg px-3 py-2 text-white focus:border-orange-500/50 outline-none transition-colors resize-none disabled:opacity-50",placeholder:" : ...",value:s.storyOverview?.synopsis||"",onChange:K=>handleUpdateStoryOverview("synopsis",K.target.value),disabled:!O})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Theme ()"}),r.jsx("input",{type:"text",className:"w-full bg-black/20 border border-orange-500/20 rounded-lg px-3 py-2 text-white focus:border-orange-500/50 outline-none disabled:opacity-50",placeholder:": , ",value:s.storyOverview?.theme||"",onChange:K=>handleUpdateStoryOverview("theme",K.target.value),disabled:!O})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Tone ()"}),r.jsx("div",{className:"glass-dropdown-wrapper w-full",children:r.jsx(zs,{value:s.storyOverview?.tone||"epic",onChange:K=>handleUpdateStoryOverview("tone",K),disabled:!O,options:[{value:"epic",label:" Epic ()"},{value:"dark",label:" Dark ()"},{value:"romantic",label:" Romantic ()"},{value:"comedy",label:" Comedy ()"},{value:"horror",label:" Horror ()"},{value:"action",label:" Action ()"},{value:"drama",label:" Drama ()"}],buttonClassName:"glass-dropdown w-full disabled:opacity-50"})})]}),r.jsxs("div",{className:"w-1/3",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Duration"}),r.jsxs("div",{className:"bg-black/20 border border-orange-500/20 rounded-lg px-3 py-2 text-center",children:[r.jsx("div",{className:"text-lg font-bold text-orange-300",children:(()=>{const le=(s.blocks||[]).reduce((Se,Ue)=>Se+(Ue.evolution?.length||0),0)*8,V=Math.floor(le/60),Y=le%60;return V>0?`${V}:${Y.toString().padStart(2,"0")}`:`${Y}s`})()}),r.jsxs("div",{className:"text-[10px] text-gray-500",children:[(s.blocks||[]).reduce((K,le)=>K+(le.evolution?.length||0),0)," scenes"]})]})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"System Instruction (The Brain)"}),r.jsx("textarea",{className:"w-full h-32 bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-white focus:border-red-500/50 outline-none transition-colors resize-none font-mono text-xs disabled:opacity-50 disabled:cursor-not-allowed",placeholder:"You are an expert video director...",value:s.systemInstruction,onChange:K=>e({...s,systemInstruction:K.target.value}),disabled:!O})]})]})]}),r.jsxs("div",{className:"border-t border-white/10 pt-6",children:[r.jsx("h3",{className:"text-sm font-bold text-cyan-200 uppercase tracking-widest mb-4 flex items-center gap-2",children:" Characters ()"}),r.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"  "}),r.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:(s.characters||[]).map(K=>r.jsxs("div",{className:"relative group bg-cyan-500/5 border border-cyan-500/20 rounded-xl overflow-hidden animate-in slide-in-from-left-2",children:[r.jsxs("div",{className:"aspect-square bg-slate-800 relative",children:[K.image?r.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-3xl",children:""}),r.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-[10px] rounded-full ${K.role==="main"?"bg-yellow-500/80 text-yellow-900":K.role==="villain"?"bg-red-500/80 text-white":"bg-blue-500/80 text-white"}`,children:K.role==="main"?"":K.role==="villain"?"":""}),r.jsx("button",{onClick:()=>Ve(K.id),disabled:!O,className:"absolute top-2 left-2 p-1.5 bg-red-500/20 hover:bg-red-500/50 rounded-lg opacity-0 group-hover:opacity-100 transition-all disabled:opacity-0",children:r.jsx(xs,{size:12,className:"text-red-400"})})]}),r.jsxs("div",{className:"p-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-1",children:[r.jsx("h4",{className:"font-medium text-white text-xs truncate flex-1",children:K.name}),r.jsx("button",{onClick:()=>ge(K),className:"p-1 bg-cyan-500/20 hover:bg-cyan-500/40 rounded-lg transition-colors flex-shrink-0",title:"",children:r.jsx(vf,{size:14,className:"text-cyan-400"})})]}),K.tags?.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[K.tags.slice(0,2).map(le=>r.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 text-slate-400 text-[9px] rounded",children:le},le)),K.tags.length>2&&r.jsxs("span",{className:"text-[9px] text-slate-500",children:["+",K.tags.length-2]})]})]})]},K.id))}),r.jsx("button",{onClick:ze,disabled:!O,className:"w-full text-center p-4 border border-dashed border-yellow-500/30 rounded-lg text-yellow-500/50 text-sm hover:bg-yellow-500/5 cursor-pointer transition-colors active:scale-95 select-none disabled:opacity-50 disabled:cursor-not-allowed disabled:pointer-events-none",children:"  Library"})]})]})})}),r.jsxs("div",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ${A?"gap-4":"gap-0"}`,children:[se==="library"&&r.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 p-1 animate-in fade-in zoom-in-95 duration-300",children:r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 pb-4",children:[r.jsxs("div",{onClick:Pt,className:"relative group h-full min-h-[180px] rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-[0_0_20px_rgba(34,197,94,0.2)]",children:[r.jsx("div",{className:"absolute inset-[-50%] bg-[conic-gradient(from_0deg,transparent_0deg,transparent_90deg,#22c55e_180deg,transparent_360deg)] animate-spin opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-0"}),r.jsx("div",{className:"absolute inset-[2px] bg-gray-900 rounded-xl z-10 flex flex-col items-center justify-center transition-colors",children:r.jsxs("div",{className:"flex flex-col items-center justify-center transition-transform duration-300 group-hover:scale-110",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-3 group-hover:bg-green-500/20 transition-colors duration-300",children:r.jsx(Vn,{size:32,className:"text-gray-600 group-hover:text-green-400 transition-all duration-300"})}),r.jsx("h3",{className:"text-gray-500 font-medium mt-2 group-hover:text-green-100 transition-colors duration-300",children:"New Mode"})]})})]}),v.map(K=>{const le=I===K.id,V=s.docId===K.id&&O;return r.jsxs("div",{onClick:()=>Ws(K),className:`
                                            aspect-[4/3] rounded-2xl p-4 flex flex-col justify-between relative group cursor-pointer border transition-all
                                            ${le?"bg-gray-800/80 border-green-500 shadow-[0_0_20px_rgba(34,197,94,0.15)] ring-1 ring-green-500/50":"bg-gray-800/40 border-white/5 hover:border-white/20 hover:bg-gray-800/60"}
                                        `,children:[r.jsx("div",{className:"h-28 bg-white/5 rounded-xl flex items-center justify-center relative mb-3 group-hover:bg-white/10 transition-colors overflow-hidden",children:K.coverImage?r.jsx("img",{src:K.coverImage,alt:K.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:`p-3 rounded-full ${le?"bg-green-500/20 text-green-400":"bg-white/5 text-gray-500"}`,children:r.jsx(Ji,{size:32})})}),r.jsxs("div",{className:"flex flex-col gap-1 min-w-0",children:[r.jsx("div",{className:"flex items-center justify-between gap-2",children:r.jsx("h3",{className:`font-bold truncate text-sm ${le?"text-white":"text-gray-200"}`,children:K.name})}),r.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 h-8 leading-4",children:K.description||"No description provided."}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 pt-3 border-t border-white/5",children:[r.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white/5 rounded-md border border-white/5",children:[r.jsx(t_,{size:10,className:"text-purple-400"}),r.jsx("span",{className:"text-[10px] text-gray-400 font-mono",children:K.variables?.length||0})]}),r.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white/5 rounded-md border border-white/5",children:[r.jsx(Ji,{size:10,className:"text-blue-400"}),r.jsx("span",{className:"text-[10px] text-gray-400 font-mono",children:K.blocks?.length||0})]})]})]}),r.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-30 pointer-events-none group-hover:pointer-events-auto",children:[r.jsx("button",{onClick:Y=>Bn(Y,K),className:`p-1.5 rounded-lg transition-all ${V?"bg-green-500 text-white shadow-lg":"bg-black/50 hover:bg-white text-white/70 hover:text-black backdrop-blur-sm"}`,title:"Edit Mode",children:r.jsx(nc,{size:14})}),r.jsx("button",{onClick:Y=>is(Y,K.id),className:"p-1.5 bg-black/50 hover:bg-red-500 text-white/70 hover:text-white rounded-lg backdrop-blur-sm transition-all",title:"Delete Mode",children:r.jsx(xs,{size:14})})]}),r.jsxs("div",{className:"absolute inset-0 z-20 bg-slate-900/95 backdrop-blur-md border border-blue-500/20 h-full w-full flex flex-col p-5 overflow-y-auto custom-scrollbar opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none group-hover:pointer-events-auto rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 border-b border-blue-500/20 pb-3 mb-3 shrink-0",children:[r.jsx("div",{className:"p-1.5 bg-blue-500/10 rounded-lg text-blue-400",children:r.jsx(bs,{size:14})}),r.jsx("h4",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Mode Details"})]}),r.jsxs("div",{className:"flex flex-col gap-2 mb-4 shrink-0",children:[r.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-bold flex items-center gap-1",children:" Brain Instruction"}),r.jsx("p",{className:"text-sm text-slate-300 font-mono leading-relaxed whitespace-pre-wrap",children:K.systemInstruction||"No specific system instructions provided."})]})]})]},K.id)})]})}),se==="editor"&&r.jsxs("div",{className:"flex-1 bg-gray-900/40 backdrop-blur-md border border-white/5 rounded-2xl shadow-xl relative overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-300",children:[r.jsxs("div",{className:"p-4 border-b border-white/10 bg-black/20 flex justify-between items-center backdrop-blur-sm z-10",children:[r.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[r.jsx("button",{onClick:()=>z(!A),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors mr-2 border border-transparent hover:border-white/10",title:A?"Collapse Sidebar":"Expand Sidebar",children:A?r.jsx(nA,{size:16}):r.jsx(ju,{size:16})}),r.jsx(pw,{size:18,className:"text-red-400"})," Logic Canvas"]}),O?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex items-center bg-white/5 rounded-lg border border-white/5 p-1 mr-2",children:[r.jsx("button",{onClick:Me,disabled:Ie.current.past.length===0,className:"p-1.5 rounded hover:bg-white/10 text-gray-400 hover:text-white disabled:opacity-30 disabled:hover:bg-transparent transition-colors",title:`Undo (Ctrl+Z) - ${Ie.current.past.length} steps`,children:r.jsx(WN,{size:16})}),r.jsx("button",{onClick:Le,disabled:Ie.current.future.length===0,className:"p-1.5 rounded hover:bg-white/10 text-gray-400 hover:text-white disabled:opacity-30 disabled:hover:bg-transparent transition-colors",title:`Redo (Ctrl+Y) - ${Ie.current.future.length} steps`,children:r.jsx(O3,{size:16})})]}),r.jsxs("button",{onClick:Rs,className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-1.5 rounded-lg text-sm flex items-center gap-2 transition-colors shadow-lg shadow-purple-900/20",children:[r.jsx(Vn,{size:16})," Add Block"]})]}):r.jsx("span",{className:"text-xs text-yellow-400 font-mono",children:"READ ONLY (Click Pencil to Edit)"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pb-96 relative scroll-smooth",children:[r.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:"20px 20px"}}),r.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-full relative z-10",children:[s.blocks.length===0&&O&&r.jsxs("div",{className:"text-center py-20 text-white/20",children:[r.jsx(pw,{size:48,className:"mx-auto mb-4 opacity-50"}),r.jsx("p",{children:'No blocks added. Click "Add Block" to start.'})]}),s.blocks.length===0&&!O&&r.jsxs("div",{className:"text-center py-20 text-white/20",children:[r.jsx("div",{className:"inline-block p-4 rounded-full bg-white/5 mb-4",children:r.jsx(nc,{size:32,className:"opacity-50"})}),r.jsxs("p",{children:["Select a mode and click the ",r.jsx("strong",{className:"text-white",children:"Pencil Icon"})," to edit."]})]}),s.blocks.map(K=>r.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-md border border-white/10 rounded-xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"p-4 border-b border-white/10 bg-white/5 flex items-center justify-between cursor-pointer hover:bg-white/10 transition-colors",onClick:()=>ds(K.id),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{onClick:le=>le.stopPropagation(),children:r.jsx(Tu,{size:20,className:"text-gray-500 cursor-move"})}),r.jsx("div",{className:"bg-purple-500/10 p-1.5 rounded-lg border border-purple-500/20",children:r.jsx(nf,{size:18,className:"text-purple-400"})}),r.jsx("input",{type:"text",value:K.title,onChange:le=>xn(K.id,le.target.value),onClick:le=>le.stopPropagation(),placeholder:"Untitled Sequence",disabled:!O,className:"bg-transparent border-none text-white font-bold text-lg outline-none placeholder-gray-500 w-full min-w-[200px] disabled:opacity-50"}),r.jsxs("div",{className:"flex flex-row items-center gap-2 mr-2 min-w-fit",children:[r.jsx("span",{className:"text-sm font-bold text-gray-400 uppercase whitespace-nowrap",children:"SEQ %"}),r.jsx("input",{type:"number",min:"0",max:"100",value:K.sequencePercentage||0,onChange:le=>Xt(K.id,parseInt(le.target.value)||0),onClick:le=>le.stopPropagation(),disabled:!O,className:"w-12 bg-gray-800 text-white text-sm text-center border border-gray-600 rounded py-1 focus:border-purple-500 outline-none [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})]}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-500/20 text-purple-300 rounded border border-purple-500/30 font-medium whitespace-nowrap flex-shrink-0",children:"Dynamic Evolution"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[K.isExpanded?r.jsx(pg,{size:20,className:"text-gray-500"}):r.jsx(tr,{size:20,className:"text-gray-500"}),r.jsx("div",{className:"w-px h-6 bg-white/10 mx-2"}),r.jsx("button",{onClick:le=>{le.stopPropagation(),$n(K.id)},disabled:!O,className:"text-red-400 hover:text-red-300 hover:bg-red-500/10 p-2 rounded-lg transition-colors group disabled:opacity-0",title:"Delete Sequence",children:r.jsx(xs,{size:18,className:"group-hover:scale-110 transition-transform"})})]})]}),K.isExpanded&&r.jsx("div",{className:"p-4 space-y-4 animate-in slide-in-from-top-4 duration-200",children:(K.evolution||[]).map((le,V)=>r.jsxs("div",{className:"border border-white/10 rounded-lg bg-black/20 transition-all",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-white/5",onClick:()=>U(K.id,le.id),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"w-6 h-6 rounded-full bg-white/10 text-xs flex items-center justify-center font-mono text-gray-400",children:V+1}),r.jsx("span",{className:"text-sm text-gray-300 font-medium truncate max-w-md",children:le.rawPrompt||"New Cinematic Step"})]}),r.jsx("div",{className:"flex items-center gap-2",children:le.isExpanded?r.jsx(pg,{size:16,className:"text-gray-500"}):r.jsx(tr,{size:16,className:"text-gray-500"})})]}),le.isExpanded&&r.jsx("div",{className:"p-4 pt-0 border-t border-white/5 animate-in slide-in-from-top-2",children:r.jsx($8,{stage:le,onUpdate:(Y,Se)=>sr(K.id,le.id,Y,Se),onRemove:()=>Ae(K.id,le.id)})})]},le.id))})]},K.id))]})]})]})]})]}),r.jsx(F8,{modeData:s,setModeData:e}),$&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-slate-900 border border-white/20 rounded-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[r.jsx("h2",{className:"text-lg font-bold text-white",children:" Character Library"}),r.jsx("button",{onClick:()=>q(!1),className:"p-1 hover:bg-white/10 rounded-lg transition-colors text-slate-400 hover:text-white",children:""})]}),r.jsxs("div",{className:"p-4 border-b border-white/10 space-y-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[r.jsx(nd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),r.jsx("input",{type:"text",value:M,onChange:K=>F(K.target.value),placeholder:"...",className:"w-full pl-9 pr-3 py-2 bg-white/5 border border-white/10 rounded-xl text-white text-sm placeholder-slate-500 focus:outline-none focus:border-red-500"})]}),r.jsx("div",{className:"glass-dropdown-wrapper",children:r.jsx(zs,{value:Q,onChange:de,options:[{value:"all",label:" "},{value:"main",label:" "},{value:"villain",label:" "},{value:"supporting",label:" "}],buttonClassName:"glass-dropdown"})}),r.jsx("div",{className:"glass-dropdown-wrapper",children:r.jsx(zs,{value:C,onChange:J,placeholder:"  Tag",options:[{value:"",label:"  Tag"},...[...new Set(k.flatMap(K=>K.tags||[]))].map(K=>({value:K,label:K}))],buttonClassName:"glass-dropdown"})})]}),r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("button",{onClick:()=>de("all"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1 ${Q==="all"?"bg-red-500/20 text-red-400 border border-red-500/50":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"}`,children:" "}),r.jsx("button",{onClick:()=>de("main"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1 ${Q==="main"?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"}`,children:" "}),r.jsx("button",{onClick:()=>de("villain"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1 ${Q==="villain"?"bg-red-500/20 text-red-400 border border-red-500/50":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"}`,children:" "}),r.jsx("button",{onClick:()=>de("supporting"),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all flex items-center gap-1 ${Q==="supporting"?"bg-blue-500/20 text-blue-400 border border-blue-500/50":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"}`,children:" "})]})]}),r.jsx("div",{className:"p-4 overflow-y-auto max-h-[50vh]",children:_e?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ot,{className:"w-8 h-8 animate-spin mx-auto text-cyan-500"}),r.jsx("p",{className:"text-slate-400 mt-2",children:"..."})]}):k.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-slate-400 mb-4",children:" Library"}),r.jsx("a",{href:"/characters",className:"px-4 py-2 bg-cyan-500/20 text-cyan-400 rounded-lg hover:bg-cyan-500/30 transition-colors",children:" "})]}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:k.filter(K=>Q==="all"||K.role===Q).filter(K=>!M||K.name?.toLowerCase().includes(M.toLowerCase())).filter(K=>!C||(K.tags||[]).includes(C)).map(K=>{const le=(s.characters||[]).some(V=>V.id===K.id);return r.jsxs("div",{className:`relative bg-white/5 border rounded-xl overflow-hidden transition-all ${le?"border-green-500/50 opacity-60":"border-white/10 hover:border-cyan-500/50 cursor-pointer"}`,onClick:()=>!le&&nt(K),children:[r.jsxs("div",{className:"aspect-square bg-slate-800 relative",children:[K.image?r.jsx("img",{src:K.image,alt:K.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-2xl",children:""}),le&&r.jsx("div",{className:"absolute top-2 right-2 px-2 py-0.5 bg-green-500/80 text-white text-[10px] rounded-full",children:""})]}),r.jsxs("div",{className:"p-2",children:[r.jsx("h4",{className:"font-medium text-white text-xs truncate",children:K.name}),K.tags?.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:K.tags.slice(0,2).map(V=>r.jsx("span",{className:"px-1 py-0.5 bg-white/10 text-slate-400 text-[9px] rounded",children:V},V))})]})]},K.id)})})}),r.jsx("div",{className:"flex justify-end p-4 border-t border-white/10",children:r.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors",children:""})})]})}),te&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[60] p-4",onClick:()=>ge(null),children:r.jsxs("div",{className:"bg-slate-900 border border-white/20 rounded-2xl w-full max-w-md overflow-hidden",onClick:K=>K.stopPropagation(),children:[r.jsxs("div",{className:"aspect-video bg-gradient-to-br from-slate-700 to-slate-800 relative",children:[te.image?r.jsx("img",{src:te.image,alt:te.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500 text-5xl",children:""}),r.jsx("span",{className:`absolute top-3 right-3 px-3 py-1 text-sm font-medium rounded-full ${te.role==="main"?"bg-yellow-500/80 text-yellow-900":te.role==="villain"?"bg-red-500/80 text-white":"bg-blue-500/80 text-white"}`,children:te.role==="main"?" ":te.role==="villain"?" ":" "})]}),r.jsxs("div",{className:"p-5 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:te.name}),te.gender&&r.jsx("span",{className:"text-sm text-slate-400",children:te.gender})]}),te.personality&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-cyan-300 mb-1",children:""}),r.jsx("p",{className:"text-sm text-white",children:te.personality})]}),te.visualDescription&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-cyan-300 mb-1",children:" / (!)"}),r.jsx("p",{className:"text-sm text-cyan-200 leading-relaxed bg-black/20 border border-cyan-500/30 rounded-lg p-2",children:te.visualDescription})]}),te.tags?.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:te.tags.map(K=>r.jsxs("span",{className:"px-2 py-1 bg-white/10 text-slate-300 text-xs rounded-lg",children:[" ",K]},K))}),r.jsx("div",{className:"flex justify-end pt-3 border-t border-white/10",children:r.jsx("button",{onClick:()=>ge(null),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl transition-colors",children:""})})]})]})})]})},q8=[{id:"all",name:"",icon:""},{id:"Cinematic / Movie",name:"Cinematic / Movie",icon:""},{id:"Short Film / Story",name:"Short Film / Story",icon:""},{id:"Product Showcase / Commercial",name:"Product Showcase / Commercial",icon:""},{id:"Real Estate / Architecture",name:"Real Estate / Architecture",icon:""},{id:"Vlog / Lifestyle",name:"Vlog / Lifestyle",icon:""},{id:"Time-lapse / Hyper-lapse",name:"Time-lapse / Hyper-lapse",icon:""},{id:"Documentary / News",name:"Documentary / News",icon:""},{id:"How-to / Tutorial",name:"How-to / Tutorial",icon:""},{id:"Relaxation / Lo-fi / ASMR",name:"Relaxation / Lo-fi / ASMR",icon:""}],hN=[{id:"free_cinematic_001",name:"Basic Cinematic Starter",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.5,downloads:15e3,description:"Expander  Cinematic ! ",coverImage:"https://images.unsplash.com/photo-1478720568477-152d9b164e26?q=80&w=2070&auto=format&fit=crop",tags:["Cinematic","Starter","Free"],category:"Cinematic / Movie",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_cinematic",name:" Cinematic",color:"bg-purple-500",instruction:"Use cinematic camera angles and movements."},{id:"block_widescreen",name:" Widescreen",color:"bg-slate-500",instruction:"21:9 aspect ratio cinematic bars."}]},{id:"free_cinematic_002",name:"Movie Trailer Basics",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.6,downloads:12500,description:" Trailer   Expander !",coverImage:"https://images.unsplash.com/photo-1440404653325-ab127d49abc1?q=80&w=2070&auto=format&fit=crop",tags:["Trailer","Movie","Free"],category:"Cinematic / Movie",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_dramatic",name:" Dramatic",color:"bg-red-500",instruction:"Dramatic pacing and tension."},{id:"block_bgm_epic",name:" BGM Epic",color:"bg-orange-500",instruction:"Epic trailer music."}]},{id:"free_story_001",name:"Simple Story Maker",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.4,downloads:18e3,description:"  Expander   Short Film",coverImage:"https://images.unsplash.com/photo-1485846234645-a62644f84728?q=80&w=2070&auto=format&fit=crop",tags:["Story","Simple","Free"],category:"Short Film / Story",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_narrative",name:" Narrative",color:"bg-blue-500",instruction:"Focus on storytelling and narrative."},{id:"block_emotional",name:" Emotional",color:"bg-pink-500",instruction:"Emotional character moments."}]},{id:"free_story_002",name:"Mini Documentary",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.5,downloads:14e3,description:"Expander  Mini Documentary ",coverImage:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?q=80&w=2071&auto=format&fit=crop",tags:["Documentary","Mini","Free"],category:"Short Film / Story",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_interview",name:" Interview",color:"bg-teal-500",instruction:"Interview style shots."},{id:"block_broll",name:" B-Roll",color:"bg-indigo-500",instruction:"Supporting B-roll footage."}]},{id:"free_product_001",name:"Product Showcase Lite",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.7,downloads:22e3,description:" Expander !",coverImage:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?q=80&w=1999&auto=format&fit=crop",tags:["Product","Showcase","Free"],category:"Product Showcase / Commercial",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_product",name:" Product Focus",color:"bg-amber-500",instruction:"Clean product shots on white background."},{id:"block_rotate",name:" 360 Rotate",color:"bg-cyan-500",instruction:"360 degree product rotation."}]},{id:"free_product_002",name:"Simple Commercial",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.6,downloads:19e3,description:" ",coverImage:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=2051&auto=format&fit=crop",tags:["Commercial","Simple","Free"],category:"Product Showcase / Commercial",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_lifestyle",name:" Lifestyle",color:"bg-rose-500",instruction:"Product in lifestyle context."},{id:"block_cta",name:" Call to Action",color:"bg-green-500",instruction:"Clear call to action ending."}]},{id:"free_realestate_001",name:"Property Tour Basic",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.5,downloads:16e3,description:"Expander / ",coverImage:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?q=80&w=2075&auto=format&fit=crop",tags:["Property","Tour","Free"],category:"Real Estate / Architecture",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_walkthrough",name:" Walkthrough",color:"bg-blue-500",instruction:"Smooth walking tour through property."},{id:"block_wide",name:" Wide Shots",color:"bg-slate-500",instruction:"Wide angle room shots."}]},{id:"free_realestate_002",name:"Architecture Highlight",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.4,downloads:11e3,description:"",coverImage:"https://images.unsplash.com/photo-1487958449943-2429e8be8625?q=80&w=2070&auto=format&fit=crop",tags:["Architecture","Design","Free"],category:"Real Estate / Architecture",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_detail",name:" Detail Shots",color:"bg-amber-500",instruction:"Close-up architectural details."},{id:"block_symmetry",name:" Symmetry",color:"bg-purple-500",instruction:"Symmetrical compositions."}]},{id:"free_vlog_001",name:"Daily Vlog Starter",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.8,downloads:35e3,description:" Vlog   Expander !",coverImage:"https://images.unsplash.com/photo-1611162616305-c69b3fa7fbe0?q=80&w=1974&auto=format&fit=crop",tags:["Vlog","Daily","Free"],category:"Vlog / Lifestyle",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_talking",name:" Talking Head",color:"bg-blue-500",instruction:"Person talking to camera."},{id:"block_broll",name:" B-Roll",color:"bg-indigo-500",instruction:"Lifestyle B-roll footage."}]},{id:"free_vlog_002",name:"Travel Vlog Lite",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.7,downloads:28e3,description:"Expander  Travel Vlog ",coverImage:"https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=2021&auto=format&fit=crop",tags:["Travel","Vlog","Free"],category:"Vlog / Lifestyle",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_scenic",name:" Scenic",color:"bg-green-500",instruction:"Beautiful scenic shots."},{id:"block_pov",name:" POV",color:"bg-cyan-500",instruction:"Point of view walking shots."}]},{id:"free_timelapse_001",name:"Basic Time-lapse",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.6,downloads:2e4,description:" Time-lapse ",coverImage:"https://images.unsplash.com/photo-1477959858617-67f85cf4f1df?q=80&w=2044&auto=format&fit=crop",tags:["Timelapse","City","Free"],category:"Time-lapse / Hyper-lapse",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_timelapse",name:" Time-lapse",color:"bg-orange-500",instruction:"Time-lapse effect."},{id:"block_static",name:" Static",color:"bg-slate-500",instruction:"Fixed camera position."}]},{id:"free_timelapse_002",name:"Sunset Time-lapse",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.7,downloads:17e3,description:" Time-lapse",coverImage:"https://images.unsplash.com/photo-1495616811223-4d98c6e9c869?q=80&w=2032&auto=format&fit=crop",tags:["Sunset","Nature","Free"],category:"Time-lapse / Hyper-lapse",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_golden",name:" Golden Hour",color:"bg-amber-500",instruction:"Golden hour lighting."},{id:"block_smooth",name:" Smooth",color:"bg-purple-500",instruction:"Smooth motion interpolation."}]},{id:"free_documentary_001",name:"News Report Basic",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.5,downloads:13e3,description:"Expander ",coverImage:"https://images.unsplash.com/photo-1495020689067-958852a7765e?q=80&w=2069&auto=format&fit=crop",tags:["News","Report","Free"],category:"Documentary / News",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_anchor",name:" Anchor",color:"bg-red-500",instruction:"News anchor style presentation."},{id:"block_graphics",name:" Graphics",color:"bg-blue-500",instruction:"News graphics and lower thirds."}]},{id:"free_documentary_002",name:"Interview Setup",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.4,downloads:1e4,description:"",coverImage:"https://images.unsplash.com/photo-1559523161-0fc0d8b38a7a?q=80&w=2071&auto=format&fit=crop",tags:["Interview","Professional","Free"],category:"Documentary / News",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_twoshot",name:" Two Shot",color:"bg-teal-500",instruction:"Two person interview framing."},{id:"block_lighting",name:" Soft Light",color:"bg-yellow-500",instruction:"Soft interview lighting."}]},{id:"free_tutorial_001",name:"Tutorial Starter",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.8,downloads:42e3,description:"Expander !",coverImage:"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?q=80&w=2070&auto=format&fit=crop",tags:["Tutorial","Education","Free"],category:"How-to / Tutorial",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_screen",name:" Screen Record",color:"bg-blue-500",instruction:"Screen recording with voiceover."},{id:"block_steps",name:" Step by Step",color:"bg-green-500",instruction:"Clear numbered steps."}]},{id:"free_tutorial_002",name:"Cooking Tutorial",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.6,downloads:25e3,description:"",coverImage:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?q=80&w=2070&auto=format&fit=crop",tags:["Cooking","Food","Free"],category:"How-to / Tutorial",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_overhead",name:" Overhead",color:"bg-amber-500",instruction:"Top-down cooking shots."},{id:"block_closeup",name:" Close-up",color:"bg-rose-500",instruction:"Close-up food details."}]},{id:"free_lofi_001",name:"Lo-fi Study Vibes",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.9,downloads:5e4,description:"Expander !  Lo-fi ",coverImage:"https://images.unsplash.com/photo-1519682577862-22b62b24e493?q=80&w=2070&auto=format&fit=crop",tags:["Lofi","Study","Free"],category:"Relaxation / Lo-fi / ASMR",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_lofi",name:" Lo-fi BGM",color:"bg-purple-500",instruction:"Lo-fi hip hop background music."},{id:"block_cozy",name:" Cozy",color:"bg-amber-500",instruction:"Cozy room atmosphere."}]},{id:"free_lofi_002",name:"Rain & Chill",author:"Content Auto Post",sellerName:"Content Auto Post",rating:4.8,downloads:38e3,description:"  Relaxation",coverImage:"https://images.unsplash.com/photo-1515694346937-94d85e41e6f0?q=80&w=2070&auto=format&fit=crop",tags:["Rain","Relaxation","Free"],category:"Relaxation / Lo-fi / ASMR",price:0,isFree:!0,allowTrial:!1,blocks:[{id:"block_rain",name:" Rain Sound",color:"bg-blue-500",instruction:"Gentle rain ambient sound."},{id:"block_ambient",name:" Ambient",color:"bg-teal-500",instruction:"Peaceful ambient atmosphere."}]}],G8=()=>{const[s,e]=N.useState("browse"),[t,a]=N.useState(""),[o,c]=N.useState("all"),[d,m]=N.useState(!1),[p,g]=N.useState(!1),[b,v]=N.useState(!1),[j,I]=N.useState(null),[B,O]=N.useState(null),[L,se]=N.useState(null),[W,re]=N.useState([]),[me,xe]=N.useState(!1),[Te,D]=N.useState([]),[T,A]=N.useState(!1),[z,$]=N.useState([]),[q,k]=N.useState({}),[ue,_e]=N.useState(null),[P,M]=N.useState([]),[F,Q]=N.useState(null),[de,C]=N.useState(0),[J,te]=N.useState(!1),ge=async()=>{A(!0),console.log(" Starting to fetch marketplace_expanders...");try{const H=He(fe,"marketplace_expanders");console.log(" Collection ref:",H.path);const Me=await kn(H);console.log(" Marketplace expanders found:",Me.docs.length),Me.docs.length===0&&console.log(" No expanders in marketplace_expanders collection");const Le=Me.docs.filter(We=>{const Fe=We.data(),Z=Fe.status==="active"||!Fe.status;return console.log(` ${Fe.name}: status=${Fe.status}, isActive=${Z}`),Z}).map(We=>{const Fe=We.data();return console.log(" Expander raw data:",We.id,Fe),{id:We.id,...Fe,author:Fe.sellerName||"Unknown",rating:Fe.rating||4.5,downloads:Fe.downloads||0,coverImage:Fe.thumbnail||"https://images.unsplash.com/photo-1485846234645-a62644f84728?q=80&w=2070&auto=format&fit=crop",tags:[Fe.categoryId?.split(" ")[0]||Fe.category?.split(" ")[0]||"Custom"],category:Fe.categoryId||Fe.category||"Custom",price:Fe.price||0,allowTrial:Fe.allowTrial??Fe.trialDays>0,trialDays:Fe.trialDays||0,trialFee:Fe.trialFee||0}});console.log(" Final expanders to display:",Le.length,Le),D(Le)}catch(H){console.error(" Error fetching marketplace expanders:",H),console.error("Error code:",H.code),console.error("Error message:",H.message)}finally{A(!1)}};N.useEffect(()=>{ge()},[]),N.useEffect(()=>{const H=()=>Q(null);return document.addEventListener("click",H),()=>document.removeEventListener("click",H)},[]),N.useEffect(()=>{const H=Ia(gn,Me=>{se(Me),Me&&(Ie(Me.uid),s==="history"&&De(Me.uid))});return()=>H()},[s]);const Ie=async H=>{try{const Le=(await kn(He(fe,"users",H,"purchasedExpanders"))).docs.map(lt=>lt.data().originalId||lt.id);$(Le);const We=await kn(He(fe,"users",H,"trialHistory")),Fe={};We.docs.forEach(lt=>{const mt=lt.data(),Pt=new Date,Ws=mt.expiresAt?.toDate()||new Date(0);Fe[lt.id]={...mt,status:Ws>Pt?"active":"expired",daysLeft:Math.max(0,Math.ceil((Ws-Pt)/(1e3*60*60*24)))}}),k(Fe);const ve=(await kn(He(fe,"users",H,"canceledTrials"))).docs.map(lt=>lt.id);M(ve),te(!0);const et=Be(fe,"users",H,"wallet","main"),bt=await Qr(et);bt.exists()?C(bt.data()?.balance||0):(await cs(et,{balance:0,updatedAt:st()}),C(0))}catch(Me){console.error("Error fetching user data:",Me)}finally{te(!1)}},De=async H=>{xe(!0);try{const Me=ys(He(fe,"users",H,"transactions"),en("date","desc")),We=(await kn(Me)).docs.map(Fe=>({id:Fe.id,...Fe.data()}));re(We)}catch(Me){console.error("Error fetching history:",Me)}finally{xe(!1)}},Ce=H=>{const Me=H.originalId||H.id;return H.sellerId===L?.uid?"own_listing":z.includes(Me)?"owned":q[Me]?.status==="active"?"trialing":q[Me]?.status==="expired"?"trial_expired":"available"},qe=async H=>{if(!L)return alert("");const Me=H.price||0;if(Me>0&&de<Me){alert("  ");return}if(!(Me>0&&!confirm(` "${H.name}"  ${Me} TOKEN?`))){I(H.id);try{const Le=Math.floor(Me*.1),We=Me-Le,Fe={...H,originalId:H.originalId||H.id,purchasedAt:st(),price:Me};if(H.sellerId&&(Fe.fromSellerId=H.sellerId),await cs(Be(fe,"users",L.uid,"purchasedExpanders",H.originalId||H.id),Fe),await ts(He(fe,"users",L.uid,"transactions"),{type:Me>0?"purchase":"free",itemName:H.name,coverImage:H.coverImage||H.thumbnail||"",expanderId:H.originalId||H.id,amount:Me,sellerId:H.sellerId||"system",sellerName:H.sellerName||H.author||"Content Auto Post",date:st()}),Me>0&&await ts(He(fe,"transactions"),{type:"purchase",buyerId:L.uid,buyerName:L.displayName||L.email,sellerId:H.sellerId||"system",sellerName:H.sellerName||H.author||"Content Auto Post",expanderId:H.originalId||H.id,expanderName:H.name,amount:Me,platformFee:Le,sellerReceived:We,createdAt:st()}),H.sellerId)try{await Ps(Be(fe,"marketplace_expanders",H.id),{downloads:zu(1)})}catch{console.log("Could not update download count")}const Z=H.blocks||[];if(await ts(He(fe,"users",L.uid,"expanders"),{name:H.name,description:H.description||"",categoryId:H.categoryId||H.category||"Custom",blocks:Z,thumbnail:H.thumbnail||H.coverImage||"",videoUrls:H.videoUrls||[],fromMarketplace:!0,receivedFree:H.isFree||Me===0,originalExpanderId:H.originalId||H.id,originalAuthor:H.author||H.sellerName||"Content Auto Post",originalBlocks:Z,purchasedAt:st(),createdAt:st(),updatedAt:st()}),Me>0){const et=Be(fe,"users",L.uid,"wallet","main");await Gg(fe,async bt=>{const lt=await bt.get(et),mt=lt.exists()&&lt.data()?.balance||0;if(mt<Me)throw new Error("");bt.set(et,{balance:mt-Me,updatedAt:st()},{merge:!0})})}await Ie(L.uid);const ve=Me>0?`  "${H.name}" !`:`  "${H.name}" !`;alert(`${ve}

 Expander Creator > My Expander `)}catch(Le){console.error("Purchase failed:",Le),alert(": "+Le.message)}finally{I(null)}}},be=async H=>{if(!L)return alert("");const Me=H.originalId||H.id,Le=H.trialFee||0,We=H.trialDays||3;if(Le>0&&de<Le){alert("  ");return}if(!(Le>0&&!confirm(` "${H.name}" ${We}   ${Le} TOKEN?`))){O(H.id),_e(null);try{const Fe=new Date;if(Fe.setDate(Fe.getDate()+We),await cs(Be(fe,"users",L.uid,"trialHistory",Me),{...H,originalId:Me,startedAt:st(),expiresAt:Fe,feePaid:Le,sellerId:H.sellerId}),await ts(He(fe,"users",L.uid,"expanders"),{name:H.name,description:H.description,categoryId:H.categoryId||H.category,blocks:H.blocks||[],thumbnail:H.thumbnail||H.coverImage,videoUrls:H.videoUrls||[],isTrial:!0,trialExpiresAt:Fe,trialFromSellerId:H.sellerId,trialFromSellerName:H.sellerName,originalExpanderId:Me,createdAt:st(),updatedAt:st()}),await ts(He(fe,"users",L.uid,"transactions"),{type:"trial",itemName:H.name,coverImage:H.coverImage||H.thumbnail||"",expanderId:Me,amount:Le,trialDays:We,sellerId:H.sellerId||"system",sellerName:H.sellerName||"Content Auto Post",date:st()}),Le>0){await ts(He(fe,"transactions"),{type:"trial",buyerId:L.uid,sellerId:H.sellerId,expanderId:Me,expanderName:H.name,amount:Le,trialDays:We,createdAt:st()});const Z=Be(fe,"users",L.uid,"wallet","main");await Gg(fe,async ve=>{const et=await ve.get(Z),bt=et.exists()&&et.data()?.balance||0;if(bt<Le)throw new Error("");ve.set(Z,{balance:bt-Le,updatedAt:st()},{merge:!0})})}await Ie(L.uid),alert(`  "${H.name}" !  ${We} 

 Expander > My Expander `)}catch(Fe){console.error("Trial failed:",Fe),alert(": "+Fe.message)}finally{O(null)}}};return r.jsxs("div",{className:"min-h-screen flex flex-col p-8 gap-8 bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 text-white font-sans overflow-hidden",children:[r.jsx("div",{className:"fixed top-0 left-0 w-full h-full pointer-events-none overflow-hidden z-0",children:r.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-red-600/5 rounded-full blur-[100px]"})}),r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden z-10",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(em,{className:"text-white",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:"Expander Marketplace"}),r.jsx("p",{className:"text-base text-slate-400 font-light mt-1",children:" Expander  Prompt  Premium Quality"})]})]}),r.jsxs("div",{className:"flex bg-black/40 backdrop-blur-xl p-2 rounded-2xl border border-white/10 gap-2",children:[r.jsxs("button",{onClick:()=>e("browse"),className:`group relative px-5 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${s==="browse"?"bg-gradient-to-r from-red-600 to-orange-500 text-white shadow-lg shadow-red-500/40":"text-slate-300 hover:text-white hover:bg-white/10"}`,children:[r.jsx(ku,{size:18,className:`transition-transform duration-300 ${s==="browse"?"":"group-hover:rotate-12"}`})," Browse Store",s==="browse"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10"})]}),r.jsxs("button",{onClick:()=>e("history"),className:`group relative px-5 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${s==="history"?"bg-gradient-to-r from-red-600 to-orange-500 text-white shadow-lg shadow-red-500/40":"text-slate-300 hover:text-white hover:bg-white/10"}`,children:[r.jsx(yg,{size:18,className:`transition-transform duration-300 ${s==="history"?"":"group-hover:rotate-12"}`})," My History",s==="history"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10"})]})]})]})]}),r.jsxs("div",{className:"flex-1 min-h-0 relative z-10 bg-white/5 backdrop-blur-md rounded-3xl border border-white/10 shadow-2xl overflow-hidden p-1",children:[s==="browse"&&r.jsxs("div",{className:"h-full flex flex-col animate-fade-in-up",children:[r.jsx("div",{className:"p-6 border-b border-white/5 bg-black/20",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"inline-flex gap-2 items-center bg-black/40 backdrop-blur-xl p-2 rounded-2xl border border-white/10",children:[r.jsxs("button",{onClick:()=>{c("all"),m(!1),g(!1),v(!1)},className:`group relative px-5 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${o==="all"&&!d&&!p&&!b?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-lg shadow-red-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(ku,{size:18,className:`transition-transform duration-300 ${o==="all"&&!d&&!p&&!b?"animate-bounce":"group-hover:rotate-12"}`}),"",o==="all"&&!d&&!p&&!b&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>{v(!b),m(!1),g(!1),c("all")},className:`group relative px-5 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${b?"bg-gradient-to-r from-emerald-500 via-green-500 to-teal-500 text-white shadow-lg shadow-green-500/40 scale-105":"text-emerald-400 hover:bg-emerald-500/20"}`,children:[r.jsx(ql,{size:18,className:`transition-transform duration-300 ${b?"animate-bounce":"group-hover:rotate-12"}`}),"FREE EXPANDER",b&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>{m(!d),g(!1),v(!1),c("all")},className:`group relative px-5 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${d?"bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(Au,{size:18,className:`transition-transform duration-300 ${d?"animate-bounce":"group-hover:rotate-12"}`}),"",d&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>{g(!p),m(!1),v(!1),c("all")},className:`group relative px-5 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${p?"bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-400 text-white shadow-lg shadow-yellow-500/40 scale-105":"text-yellow-400 hover:bg-yellow-500/20"}`,children:[r.jsx(ql,{size:18,className:`transition-transform duration-300 ${p?"animate-bounce":"group-hover:rotate-12"}`}),"",p&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]})]}),r.jsxs("div",{className:"group relative px-5 py-3 rounded-2xl text-sm font-bold bg-gradient-to-r from-purple-600/30 to-pink-600/30 backdrop-blur-xl text-purple-200 border border-purple-500/30 shadow-lg shadow-purple-500/20 flex items-center gap-2",children:[r.jsx(rc,{size:18,className:"text-purple-400"}),J?"...":`${de} TOKEN`]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(nd,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),r.jsx("input",{type:"text",placeholder:" Expander...",value:t,onChange:H=>a(H.target.value),className:"w-full pl-12 pr-4 py-3 bg-black/40 border border-white/10 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:border-red-500 transition-all"})]}),r.jsxs("div",{className:"glass-dropdown-wrapper min-w-[200px]",children:[r.jsx(zs,{value:o==="all"?"":o,onChange:H=>{c(H||"all"),m(!1),g(!1)},options:[{value:"",label:" Category"},...q8.filter(H=>H.id!=="all").map(H=>({value:H.id,label:`${H.icon} ${H.name}`}))],buttonClassName:"glass-dropdown pr-10 w-full"}),r.jsx(tr,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none"})]})]})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-6",children:(b?hN:[...Te,...hN]).filter(H=>{if(t&&!H.name.toLowerCase().includes(t.toLowerCase())||o!=="all"&&H.category!==o)return!1;if(b)return H.isFree===!0;const Me=Ce(H);return d?Me==="own_listing"&&!H.isFree:p?Me==="own_listing"&&H.isFree===!0:!0}).map((H,Me)=>{const Le=Ce(H),We=H.originalId||H.id,Fe=H.price||0,Z=H.allowTrial&&H.trialDays>0;return r.jsxs("div",{className:"group bg-black/40 border border-white/10 rounded-2xl overflow-hidden hover:border-red-500/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(220,38,38,0.15)] flex flex-col",children:[r.jsxs("div",{className:"h-48 bg-gray-900 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent z-10"}),r.jsx("img",{src:H.coverImage,alt:H.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-90 group-hover:opacity-100"}),r.jsxs("div",{className:"absolute top-3 right-3 z-20 flex items-center gap-2",children:[H.videoUrls?.length>0&&r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:ve=>{ve.stopPropagation(),Q(F===H.id?null:H.id)},className:"bg-purple-500/80 backdrop-blur-md p-1.5 rounded-lg text-white border border-purple-400/30 shadow-xl hover:bg-purple-500 transition-all",title:"",children:r.jsx(Ta,{size:14,fill:"currentColor"})}),F===H.id&&r.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-slate-900/95 backdrop-blur-md border border-white/20 rounded-xl shadow-2xl p-2 min-w-[200px] z-50",children:[r.jsxs("p",{className:"text-xs text-slate-400 px-2 pb-2 border-b border-white/10 mb-2",children:["  (",H.videoUrls.length,")"]}),H.videoUrls.map((ve,et)=>r.jsxs("a",{href:ve,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-white/10 text-sm text-white transition-all group",onClick:bt=>bt.stopPropagation(),children:[r.jsx(Ta,{size:14,className:"text-purple-400 group-hover:text-purple-300"}),r.jsxs("span",{className:"flex-1 truncate",children:["VDO ",et+1]}),r.jsx(Su,{size:12,className:"text-slate-500 group-hover:text-white"})]},et))]})]}),r.jsxs("div",{className:"bg-black/60 backdrop-blur-md px-2.5 py-1 rounded-lg flex items-center gap-1.5 text-xs font-bold text-yellow-400 border border-white/10 shadow-xl",children:[r.jsx(_f,{size:12,fill:"currentColor"})," ",H.rating]})]}),Le==="trialing"&&r.jsxs("div",{className:"absolute top-3 left-3 z-20 bg-blue-500 px-2 py-1 rounded-lg text-xs font-bold text-white flex items-center gap-1",children:[r.jsx(ks,{size:12}),"  ",q[We]?.daysLeft," "]}),H.isFree&&r.jsxs("div",{className:"absolute top-3 left-3 z-20 bg-gradient-to-r from-emerald-500 to-green-600 px-3 py-1.5 rounded-lg text-xs font-black text-white flex items-center gap-1.5 shadow-lg shadow-green-500/30 border border-green-400/30",children:[" FREE",H.freeUntil&&(()=>{const ve=new Date,bt=(H.freeUntil.seconds?new Date(H.freeUntil.seconds*1e3):new Date(H.freeUntil))-ve;if(bt<=0)return null;const lt=Math.floor(bt/(1e3*60*60*24)),mt=Math.floor(bt%(1e3*60*60*24)/(1e3*60*60));return r.jsxs("span",{className:"ml-1 font-mono",children:[lt,"D ",mt,"H"]})})()]}),Le==="owned"&&!H.isFree&&r.jsx("div",{className:"absolute top-3 left-3 z-20 bg-gradient-to-r from-amber-500 to-orange-500 px-3 py-1.5 rounded-lg text-xs font-bold text-white flex items-center gap-1.5 shadow-lg shadow-orange-500/30 border border-orange-400/30",children:" "})]}),r.jsxs("div",{className:"p-5 flex flex-col gap-4 flex-1",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-[10px] uppercase tracking-widest text-red-300 font-extrabold bg-red-900/30 px-2 py-1 rounded border border-red-500/20",children:H.tags?.[0]||H.category?.split("/")[0]||"Custom"}),r.jsxs("span",{className:"text-xs text-slate-500 font-medium flex items-center gap-1",children:[r.jsx(yf,{size:14})," ",(H.downloads||0).toLocaleString()]})]}),r.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-red-400 transition-colors leading-tight mb-2",children:H.name}),r.jsx("p",{className:"text-sm text-slate-400 line-clamp-2 leading-relaxed opacity-80",children:H.description})]}),r.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-lg font-bold text-white flex items-center gap-1",children:Fe>0?r.jsxs(r.Fragment,{children:[r.jsx(bf,{size:18,className:"text-yellow-400"})," ",Fe," TOKEN"]}):"Free"}),H.sellerName&&r.jsxs("span",{className:"text-xs text-slate-500",children:["by ",H.sellerName]})]}),r.jsx("div",{className:"flex gap-2",children:Le==="own_listing"?H.isFree?r.jsxs("span",{className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium bg-gradient-to-r from-amber-500/20 to-yellow-500/20 text-yellow-400 flex items-center justify-center gap-2 border border-yellow-500/30",children:[r.jsx(ql,{size:16})," "]}):r.jsxs("span",{className:"flex-1 px-4 py-2.5 rounded-xl text-sm font-medium bg-green-500/20 text-green-400 flex items-center justify-center gap-2 border border-green-500/30",children:[r.jsx(Au,{size:16})," "]}):r.jsxs(r.Fragment,{children:[Z&&Le==="available"&&!P.includes(We)&&r.jsxs("button",{onClick:()=>_e(H),className:"flex-1 px-3 py-2.5 rounded-xl text-sm font-bold bg-blue-500/20 text-blue-400 hover:bg-blue-500 hover:text-white transition-all flex items-center justify-center gap-2",children:[r.jsx(ql,{size:16}),"  ",H.trialDays," "]}),Z&&Le==="available"&&P.includes(We)&&r.jsxs("span",{className:"flex-1 px-3 py-2.5 rounded-xl text-sm font-medium bg-slate-700/50 text-slate-500 flex items-center justify-center gap-2",children:[r.jsx(Eu,{size:16})," "]}),Le==="trial_expired"&&r.jsxs("span",{className:"flex-1 px-3 py-2.5 rounded-xl text-sm font-medium bg-slate-700/50 text-slate-500 flex items-center justify-center gap-2",children:[r.jsx(Eu,{size:16})," "]}),Le==="trialing"&&r.jsxs("span",{className:"flex-1 px-3 py-2.5 rounded-xl text-sm font-medium bg-blue-500/20 text-blue-400 flex items-center justify-center gap-2",children:[r.jsx(ks,{size:16})," "]}),r.jsx("button",{onClick:()=>qe(H),disabled:j===H.id,className:`flex-1 px-4 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg flex items-center justify-center gap-2 ${j===H.id?"bg-slate-700 text-slate-300 cursor-wait":"bg-gradient-to-r from-yellow-500 to-orange-500 text-black hover:from-yellow-400 hover:to-orange-400"}`,children:j===H.id?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:16,className:"animate-spin"})," ..."]}):r.jsxs(r.Fragment,{children:[r.jsx(H3,{size:16})," ",Fe>0?"":""]})})]})})]})]})]},`${H.id}-${Me}`)})})})]}),s==="history"&&r.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in-up",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Installation History"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Review your past Expander acquisitions."})]}),me?r.jsxs("div",{className:"flex-1 flex items-center justify-center text-slate-500 flex-col gap-4",children:[r.jsx(ot,{size:40,className:"animate-spin text-red-500"}),r.jsx("p",{children:"Retrieving transaction logs..."})]}):W.length>0?r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:r.jsx("div",{className:"space-y-3",children:W.map(H=>{const Le=(()=>{switch(H.type){case"purchase":return{bg:"bg-blue-500/10",text:"text-blue-400",border:"border-blue-500/20",icon:"",label:` ${H.amount||0} TOKEN`};case"free":return{bg:"bg-emerald-500/10",text:"text-emerald-400",border:"border-emerald-500/20",icon:"",label:""};case"trial":return{bg:"bg-purple-500/10",text:"text-purple-400",border:"border-purple-500/20",icon:"",label:` ${H.trialDays||3} `};case"publish_free":return{bg:"bg-yellow-500/10",text:"text-yellow-400",border:"border-yellow-500/20",icon:"",label:` ${H.freeDays||3} `};case"publish_sale":return{bg:"bg-orange-500/10",text:"text-orange-400",border:"border-orange-500/20",icon:"",label:` ${H.price||0} TOKEN`};case"sale_success":return{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/20",icon:"",label:` +${H.amount||0} TOKEN`};case"cancel_sale":return{bg:"bg-red-500/10",text:"text-red-400",border:"border-red-500/20",icon:"",label:""};case"cancel_free":return{bg:"bg-slate-500/10",text:"text-slate-400",border:"border-slate-500/20",icon:"",label:""};default:return{bg:"bg-green-500/10",text:"text-green-400",border:"border-green-500/20",icon:"",label:"Installed"}}})();return r.jsxs("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between hover:bg-black/40 hover:border-red-500/20 transition-all group",children:[r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-900 overflow-hidden border border-white/10 shadow-lg group-hover:scale-105 transition-transform",children:H.coverImage&&r.jsx("img",{src:H.coverImage,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-lg text-white group-hover:text-red-300 transition-colors",children:H.itemName}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2 mt-1",children:[r.jsx(ks,{size:12})," ",H.date?new Date(H.date.seconds*1e3).toLocaleString("th-TH"):"Just now",H.sellerName&&r.jsxs("span",{className:"text-slate-600",children:[" by ",H.sellerName]})]})]})]}),r.jsxs("div",{className:`px-4 py-1.5 ${Le.bg} ${Le.text} text-sm font-bold rounded-lg border ${Le.border} flex items-center gap-2`,children:[r.jsx("span",{children:Le.icon})," ",Le.label]})]},H.id)})})}):r.jsxs("div",{className:"flex-1 flex items-center justify-center text-slate-600 flex-col gap-6",children:[r.jsx("div",{className:"p-8 bg-white/5 rounded-full border border-white/5",children:r.jsx(yg,{size:64,className:"opacity-40"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-bold text-slate-400 mb-2",children:"No history found"}),r.jsx("p",{className:"text-sm text-slate-600 max-w-xs mx-auto mb-6",children:"You haven't installed any Expanders yet. Visit the store to discover new prompt expanders."}),r.jsx("button",{onClick:()=>e("browse"),className:"px-6 py-2 bg-red-600/10 text-red-400 hover:bg-red-600 hover:text-white rounded-xl border border-red-500/20 transition-all font-bold",children:"Browse Store"})]})]})]})]}),ue&&r.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(ql,{className:"text-blue-400"})," "]}),r.jsx("button",{onClick:()=>_e(null),className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white",children:r.jsx(Qs,{size:20})})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 mb-4",children:[r.jsx("h3",{className:"font-bold text-white mb-2",children:ue.name}),r.jsx("p",{className:"text-sm text-slate-400 mb-3",children:ue.description}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:":"}),r.jsxs("span",{className:"text-blue-400 font-bold",children:[ue.trialDays," "]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-400",children:":"}),r.jsx("span",{className:`font-bold ${ue.trialFee>0?"text-yellow-400":"text-green-400"}`,children:ue.trialFee>0?`${ue.trialFee} TOKEN`:""})]})]})]}),r.jsx("div",{className:"bg-slate-800/50 rounded-xl p-3 mb-4",children:r.jsxs("p",{className:"text-xs text-slate-400",children:[r.jsx(Eu,{size:14,className:"inline mr-1"})," Expander  ",r.jsx("strong",{className:"text-white",children:"1 "}),"  "]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>_e(null),className:"flex-1 px-4 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-medium transition-all",children:""}),r.jsxs("button",{onClick:()=>be(ue),disabled:B,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:[B?r.jsx(ot,{size:18,className:"animate-spin"}):r.jsx(ql,{size:18}),""]})]})]})})]})},fN={skinTone:{label:"",options:["","","","","","",""]},eyeColor:{label:"",options:["","","","","","","",""]},eyeShape:{label:"",options:["","","","","",""]},eyebrows:{label:"",options:["","","","","",""]},hairColor:{label:"",options:["","","","","","","","","",""]},hairStyle:{label:"",options:["","","","","","","","",""]},facialHair:{label:"",options:["","","","","",""]},outfit:{label:"",options:["","","","","","","","",""]},accessories:{label:"",options:["","","","","","","","",""]}},K8=["","",""],ag=["","","","","","","","","","","","",""],Q8=()=>{const[s,e]=N.useState([]),[t,a]=N.useState("list"),[o,c]=N.useState(null),[d,m]=N.useState(null),[p,g]=N.useState(!0),[b,v]=N.useState(!1),[j,I]=N.useState(!1),[B,O]=N.useState("all"),[L,se]=N.useState({}),[W,re]=N.useState({}),[me,xe]=N.useState([]),[Te,D]=N.useState(""),[T,A]=N.useState(""),[z,$]=N.useState("latest"),[q,k]=N.useState(""),[ue,_e]=N.useState(null),P=N.useRef(null),[M,F]=N.useState({name:"",image:"",gender:"",personality:"",role:"main",voiceStyle:"normal",tags:[],isFavorite:!1,appearance:{skinTone:"",eyeColor:"",eyeShape:"",eyebrows:"",hairColor:"",hairStyle:"",facialHair:"",outfit:"",accessories:""},customDescription:""}),Q=gn.currentUser;N.useEffect(()=>{if(!Q){g(!1);return}const Z=ys(He(fe,"users",Q.uid,"characters"),en("createdAt","desc")),ve=Gt(Z,et=>{const bt=et.docs.map(lt=>({id:lt.id,...lt.data()}));e(bt),g(!1)});return()=>ve()},[Q]);const de=()=>{F({name:"",image:"",gender:"",personality:"",role:"main",voiceStyle:"normal",tags:[],isFavorite:!1,appearance:{skinTone:"",eyeColor:"",eyeShape:"",eyebrows:"",hairColor:"",hairStyle:"",facialHair:"",outfit:"",accessories:""},customDescription:""}),c(null)},C=()=>{de(),a("create")},J=Z=>{F({name:Z.name||"",image:Z.image||"",gender:Z.gender||"",personality:Z.personality||"",role:Z.role||"main",voiceStyle:Z.voiceStyle||"normal",tags:Z.tags||[],isFavorite:Z.isFavorite||!1,appearance:Z.appearance||{skinTone:"",eyeColor:"",eyeShape:"",eyebrows:"",hairColor:"",hairStyle:"",facialHair:"",outfit:"",accessories:""},customDescription:Z.customDescription||""}),c(Z),a("edit")},te=async Z=>{if(Q)try{const ve={...Z,name:`${Z.name} ()`,createdAt:new Date,updatedAt:new Date};delete ve.id,await ts(He(fe,"users",Q.uid,"characters"),ve)}catch(ve){console.error("Error duplicating character:",ve)}},ge=async Z=>{if(Q)try{await Ps(Be(fe,"users",Q.uid,"characters",Z.id),{isFavorite:!Z.isFavorite})}catch(ve){console.error("Error toggling favorite:",ve)}},Ie=Z=>{const ve=M.tags||[];ve.includes(Z)?F({...M,tags:ve.filter(et=>et!==Z)}):F({...M,tags:[...ve,Z]})},De=()=>{const Z=[],{appearance:ve}=M;return M.gender&&Z.push(M.gender),ve.skinTone&&Z.push(`${ve.skinTone}`),ve.eyeColor&&Z.push(`${ve.eyeColor}`),ve.eyeShape&&Z.push(`${ve.eyeShape}`),ve.eyebrows&&Z.push(`${ve.eyebrows}`),ve.hairColor&&ve.hairStyle?Z.push(`${ve.hairStyle}${ve.hairColor}`):ve.hairColor?Z.push(`${ve.hairColor}`):ve.hairStyle&&Z.push(`${ve.hairStyle}`),ve.facialHair&&ve.facialHair!==""&&Z.push(`${ve.facialHair}`),ve.outfit&&Z.push(`${ve.outfit}`),ve.accessories&&ve.accessories!==""&&Z.push(`${ve.accessories}`),M.customDescription&&Z.push(M.customDescription),Z.join(" ")},Ce=async Z=>{const ve=Z.target.files?.[0];if(!(!ve||!Q)){v(!0);try{const et=`${Date.now()}_${ve.name}`,bt=_d(jd,`users/${Q.uid}/characters/${et}`);await wd(bt,ve);const lt=await Nd(bt);F({...M,image:lt})}catch(et){console.error("Error uploading image:",et),alert("")}finally{v(!1)}}},qe=async()=>{if(!(!Q||!M.name.trim())){I(!0);try{const Z=De(),ve={...M,visualDescription:Z,updatedAt:new Date};o?await Ps(Be(fe,"users",Q.uid,"characters",o.id),ve):await ts(He(fe,"users",Q.uid,"characters"),{...ve,createdAt:new Date}),a("list"),de()}catch(Z){console.error("Error saving character:",Z),alert("")}finally{I(!1)}}},be=async Z=>{if(!(!Q||!window.confirm("?")))try{await Sn(Be(fe,"users",Q.uid,"characters",Z))}catch(ve){console.error("Error deleting character:",ve)}},H=(Z,ve)=>{F({...M,appearance:{...M.appearance,[Z]:ve}})},Me=Z=>{const ve=fN[Z]?.options||[],et=L[Z]||[];return[...ve,...et]},Le=s.filter(Z=>B==="all"||Z.role===B).filter(Z=>!T||Z.name?.toLowerCase().includes(T.toLowerCase())).filter(Z=>!q||(Z.tags||[]).includes(q)).sort((Z,ve)=>{if(Z.isFavorite&&!ve.isFavorite)return-1;if(!Z.isFavorite&&ve.isFavorite)return 1;if(z==="name")return(Z.name||"").localeCompare(ve.name||"");if(z==="role")return(Z.role||"").localeCompare(ve.role||"");const et=Z.createdAt?.toDate?.()||new Date(0);return(ve.createdAt?.toDate?.()||new Date(0))-et}),We=[...new Set(s.flatMap(Z=>Z.tags||[]))],Fe={main:"",supporting:"",villain:""};return Q?t==="create"||t==="edit"?r.jsxs("div",{className:"min-h-screen p-6 pb-64",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("button",{onClick:()=>{a("list"),de()},className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:r.jsx(Dk,{size:24,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:t==="edit"?"":""}),r.jsx("p",{className:"text-slate-400 text-sm",children:" AI Video"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-cyan-200 uppercase tracking-widest mb-4",children:""}),r.jsx("div",{className:"aspect-square bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl border-2 border-dashed border-white/20 hover:border-emerald-500/50 transition-colors cursor-pointer overflow-hidden relative group",onClick:()=>P.current?.click(),children:M.image?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:M.image,alt:"Preview",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx(jf,{size:32,className:"text-white"})})]}):r.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-400",children:b?r.jsx(ot,{size:48,className:"animate-spin text-emerald-500"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-500/20 flex items-center justify-center mb-3",children:r.jsx(Vn,{size:32,className:"text-emerald-500"})}),r.jsx("p",{className:"text-sm",children:""}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" URL "})]})})}),r.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:Ce,className:"hidden"}),r.jsx("div",{className:"mt-3",children:r.jsx("input",{type:"text",value:M.image,onChange:Z=>F({...M,image:Z.target.value}),placeholder:" URL ...",className:"w-full px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white text-sm placeholder-slate-500 focus:outline-none focus:border-emerald-500"})})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 space-y-4",children:[r.jsx("h3",{className:"text-sm font-bold text-cyan-200 uppercase tracking-widest",children:""}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2 uppercase tracking-wider",children:" *"}),r.jsx("input",{type:"text",value:M.name,onChange:Z=>F({...M,name:Z.target.value}),placeholder:" , , ",className:"w-full px-4 py-3 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-emerald-500/10 transition-all duration-300"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2 uppercase tracking-wider",children:""}),r.jsx("input",{type:"text",value:M.personality,onChange:Z=>F({...M,personality:Z.target.value}),placeholder:"   ",className:"w-full px-4 py-3 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-emerald-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-emerald-500/10 transition-all duration-300"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2 uppercase tracking-wider",children:""}),r.jsx("div",{className:"glass-dropdown-wrapper w-full",children:r.jsx(zs,{value:M.gender,onChange:Z=>F({...M,gender:Z}),options:[{value:"",label:"--  --"},...K8.map(Z=>({value:Z,label:Z}))],buttonClassName:"glass-dropdown w-full"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2 uppercase tracking-wider",children:""}),r.jsx("div",{className:"glass-dropdown-wrapper w-full",children:r.jsx(zs,{value:M.role,onChange:Z=>F({...M,role:Z}),options:[{value:"main",label:" "},{value:"supporting",label:" "},{value:"villain",label:" "}],buttonClassName:"glass-dropdown w-full"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-slate-400 mb-2 uppercase tracking-wider",children:""}),r.jsx("div",{className:"glass-dropdown-wrapper w-full",children:r.jsx(zs,{value:M.voiceStyle,onChange:Z=>F({...M,voiceStyle:Z}),options:[{value:"normal",label:""},{value:"heroic",label:""},{value:"gentle",label:""},{value:"villain",label:""},{value:"comic",label:""}],buttonClassName:"glass-dropdown w-full"})})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-red-300 uppercase tracking-widest mb-4",children:" "}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(fN).map(([Z,{label:ve}])=>r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:ve}),r.jsx(zs,{value:M.appearance[Z]||"",onChange:et=>H(Z,et),options:[{value:"",label:"--  --"},...Me(Z).map(et=>({value:et,label:et}))],buttonClassName:"w-full px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white text-sm focus:outline-none focus:border-red-500",onAddNew:et=>{se(bt=>({...bt,[Z]:[...bt[Z]||[],et]}))},addNewPlaceholder:`${ve}...`}),M.appearance[Z]&&r.jsx("div",{className:"flex items-center gap-1 mt-1",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-emerald-500/20 text-emerald-300 text-xs rounded-full",children:[M.appearance[Z],r.jsx("button",{type:"button",onClick:()=>H(Z,""),className:"hover:text-white",title:"",children:r.jsx(Qs,{size:12})})]})})]},Z))})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 mb-96",children:[r.jsx("h3",{className:"text-sm font-bold text-red-300 uppercase tracking-widest mb-4",children:" Tags ()"}),r.jsxs("div",{className:"flex gap-2 mb-4",children:[r.jsx("input",{type:"text",value:Te,onChange:Z=>D(Z.target.value),onKeyDown:Z=>{if(Z.key==="Enter"&&Te.trim()){const ve=Te.trim();!me.includes(ve)&&!ag.includes(ve)&&xe(et=>[...et,ve]),(M.tags||[]).includes(ve)||F(et=>({...et,tags:[...et.tags||[],ve]})),D("")}},placeholder:" tag ...",className:"flex-1 px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white text-sm placeholder-slate-500 focus:outline-none focus:border-green-500"}),r.jsx("button",{type:"button",onClick:()=>{if(Te.trim()){const Z=Te.trim();!me.includes(Z)&&!ag.includes(Z)&&xe(ve=>[...ve,Z]),(M.tags||[]).includes(Z)||F(ve=>({...ve,tags:[...ve.tags||[],Z]})),D("")}},disabled:!Te.trim(),className:"flex-shrink-0 w-10 h-10 flex items-center justify-center bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx(Vn,{size:18})})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:[...ag,...me].map(Z=>r.jsx("button",{type:"button",onClick:()=>Ie(Z),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${(M.tags||[]).includes(Z)?"bg-red-500/30 text-red-300 border border-red-500/50":"bg-white/5 text-slate-400 border border-white/10 hover:bg-white/10"}`,children:Z},Z))}),M.tags?.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[r.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:[": ",M.tags.length," tags"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:M.tags.map(Z=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-500/20 text-red-300 text-sm rounded-lg",children:[Z,r.jsx("button",{type:"button",onClick:()=>F(ve=>({...ve,tags:ve.tags.filter(et=>et!==Z)})),className:"hover:text-white ml-1",children:r.jsx(Qs,{size:14})})]},Z))})]})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-cyan-200 uppercase tracking-widest mb-4",children:" "}),r.jsx("textarea",{value:M.customDescription,onChange:Z=>F({...M,customDescription:Z.target.value}),placeholder:"  , , ...",rows:3,className:"w-full px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:border-red-500 resize-none"})]}),r.jsxs("div",{className:"bg-emerald-500/10 backdrop-blur-md border border-emerald-500/30 rounded-2xl p-4",children:[r.jsx("h3",{className:"text-sm font-bold text-emerald-400 uppercase tracking-widest mb-2",children:"  (AI )"}),r.jsx("p",{className:"text-white text-sm leading-relaxed",children:De()||r.jsx("span",{className:"text-slate-500 italic",children:"..."})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 mt-24",children:[r.jsxs("button",{onClick:()=>{a("list"),de()},className:"group relative px-6 py-3.5 bg-gradient-to-r from-red-500/20 via-red-500/10 to-orange-500/20 backdrop-blur-md border border-red-500/40 text-red-200 hover:text-white hover:border-red-400/60 rounded-2xl transition-all duration-300 shadow-lg shadow-red-500/20 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/20 to-orange-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),""]}),r.jsxs("button",{onClick:qe,disabled:!M.name.trim()||j,className:"group relative flex items-center gap-2 px-8 py-3.5 bg-gradient-to-r from-red-600 via-red-500 to-orange-500 hover:from-red-500 hover:via-orange-500 hover:to-amber-500 disabled:from-slate-600 disabled:to-slate-600 disabled:cursor-not-allowed text-white rounded-2xl font-bold transition-all duration-300 shadow-xl shadow-red-500/40 hover:shadow-orange-500/60 hover:scale-105 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),j?r.jsx(ot,{size:20,className:"animate-spin relative z-10"}):r.jsx(Zf,{size:20,className:"relative z-10 group-hover:rotate-12 transition-transform duration-300"}),r.jsx("span",{className:"relative z-10",children:t==="edit"?"":""})]})]})]})]})]}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden mb-8",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(wa,{className:"text-white group-hover:rotate-12 transition-transform duration-300",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900 flex items-center justify-center",children:r.jsx("span",{className:"text-[8px] font-bold text-black",children:s.length})})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:"Characters Library"}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"})," Mode"]})]})]})})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-md group",children:[r.jsx(nd,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-red-400 transition-colors"}),r.jsx("input",{type:"text",value:T,onChange:Z=>A(Z.target.value),placeholder:"...",className:"w-full pl-12 pr-4 py-3 bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:border-red-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-red-500/10 transition-all duration-300"})]}),r.jsxs("div",{className:"glass-dropdown-wrapper",children:[r.jsx(zs,{value:z,onChange:$,options:[{value:"latest",label:" "},{value:"name",label:"  A-Z"},{value:"role",label:" "}],buttonClassName:"glass-dropdown pr-10"}),r.jsx(tr,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none"})]}),We.length>0&&r.jsxs("div",{className:"glass-dropdown-wrapper",children:[r.jsx(zs,{value:q,onChange:k,placeholder:"  Tag",options:[{value:"",label:"  Tag"},...We.map(Z=>({value:Z,label:Z}))],buttonClassName:"glass-dropdown pr-10"}),r.jsx(tr,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none"})]})]}),r.jsxs("div",{className:"inline-flex flex-wrap gap-2 bg-black/40 backdrop-blur-xl p-2 rounded-2xl border border-white/10 shadow-2xl shadow-black/50 mb-6",children:[r.jsxs("button",{onClick:()=>O("all"),className:`group relative flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 ${B==="all"?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-lg shadow-red-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white hover:scale-102"}`,children:[r.jsx(lx,{size:18,className:`transition-transform duration-300 ${B==="all"?"animate-bounce":"group-hover:rotate-12"}`}),"",B==="all"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>O("main"),className:`group relative flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 ${B==="main"?"bg-gradient-to-r from-yellow-500 via-amber-500 to-orange-500 text-white shadow-lg shadow-yellow-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white hover:scale-102"}`,children:[r.jsx(_f,{size:18,className:`transition-transform duration-300 ${B==="main"?"animate-bounce":"group-hover:rotate-12"}`}),"",B==="main"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>O("villain"),className:`group relative flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 ${B==="villain"?"bg-gradient-to-r from-red-600 via-rose-500 to-pink-500 text-white shadow-lg shadow-red-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white hover:scale-102"}`,children:[r.jsx(G3,{size:18,className:`transition-transform duration-300 ${B==="villain"?"animate-bounce":"group-hover:rotate-12"}`}),"",B==="villain"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>O("supporting"),className:`group relative flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 ${B==="supporting"?"bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white hover:scale-102"}`,children:[r.jsx(mA,{size:18,className:`transition-transform duration-300 ${B==="supporting"?"animate-bounce":"group-hover:rotate-12"}`}),"",B==="supporting"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]})]}),p?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ot,{size:32,className:"animate-spin mx-auto text-red-500"}),r.jsx("p",{className:"text-slate-400 mt-4",children:"..."})]}):r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[r.jsxs("div",{onClick:C,className:"relative group aspect-[3/4] rounded-2xl overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-[0_0_25px_rgba(239,68,68,0.3)]",children:[r.jsx("div",{className:"absolute inset-[-50%] bg-[conic-gradient(from_0deg,transparent_0deg,transparent_90deg,#ef4444_180deg,transparent_360deg)] animate-spin opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-0"}),r.jsx("div",{className:"absolute inset-[2px] bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl z-10 flex flex-col items-center justify-center border border-dashed border-red-500/30 group-hover:border-transparent transition-colors",children:r.jsxs("div",{className:"flex flex-col items-center justify-center transition-transform duration-300 group-hover:scale-110",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mb-4 group-hover:bg-red-500/30 transition-colors",children:r.jsx(Vn,{size:32,className:"text-red-500 group-hover:text-red-400"})}),r.jsx("p",{className:"text-slate-400 font-medium group-hover:text-white transition-colors",children:""})]})})]}),Le.map(Z=>r.jsxs("div",{className:"relative group bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl overflow-hidden hover:border-red-500/50 hover:shadow-[0_0_15px_rgba(239,68,68,0.15)] transition-all cursor-pointer",onClick:()=>J(Z),onMouseEnter:()=>m(Z.id),onMouseLeave:()=>m(null),children:[r.jsxs("div",{className:"aspect-square bg-gradient-to-br from-slate-700 to-slate-800 relative",children:[Z.image?r.jsx("img",{src:Z.image,alt:Z.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(wa,{size:48,className:"text-slate-500"})}),Z.isFavorite&&r.jsx("div",{className:"absolute top-2 left-2 p-1 bg-pink-500/80 rounded-full",children:r.jsx($0,{size:12,className:"text-white fill-white"})}),r.jsx("span",{className:`absolute top-2 right-2 px-2 py-0.5 text-xs rounded-full ${Z.role==="main"?"bg-yellow-500/80 text-yellow-900":Z.role==="villain"?"bg-red-500/80 text-white":"bg-blue-500/80 text-white"}`,children:Fe[Z.role]||Z.role})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("h3",{className:"font-medium text-white truncate",children:Z.name}),r.jsx("p",{className:"text-xs text-slate-400 truncate",children:Z.personality||""}),Z.tags?.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[Z.tags.slice(0,2).map(ve=>r.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 text-slate-400 text-[10px] rounded",children:ve},ve)),Z.tags.length>2&&r.jsxs("span",{className:"text-[10px] text-slate-500",children:["+",Z.tags.length-2]})]})]}),r.jsxs("div",{className:"absolute bottom-3 right-3 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-20",children:[r.jsx("button",{onClick:ve=>{ve.stopPropagation(),_e(Z)},className:"p-1.5 bg-cyan-500/20 hover:bg-cyan-500/40 rounded-lg transition-colors",title:"",children:r.jsx(vf,{size:14,className:"text-cyan-400"})}),r.jsx("button",{onClick:ve=>{ve.stopPropagation(),ge(Z)},className:`p-1.5 rounded-lg transition-colors ${Z.isFavorite?"bg-pink-500/40 text-pink-400":"bg-white/20 hover:bg-white/30 text-white"}`,title:Z.isFavorite?"":"",children:r.jsx($0,{size:14,className:Z.isFavorite?"fill-current":""})}),r.jsx("button",{onClick:ve=>{ve.stopPropagation(),te(Z)},className:"p-1.5 bg-green-500/20 hover:bg-green-500/40 rounded-lg transition-colors",title:"",children:r.jsx(Xi,{size:14,className:"text-green-400"})}),r.jsx("button",{onClick:ve=>{ve.stopPropagation(),J(Z)},className:"p-1.5 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",title:"",children:r.jsx(yw,{size:14,className:"text-white"})}),r.jsx("button",{onClick:ve=>{ve.stopPropagation(),be(Z.id)},className:"p-1.5 bg-red-500/20 hover:bg-red-500/40 rounded-lg transition-colors",title:"",children:r.jsx(xs,{size:14,className:"text-red-400"})})]}),d===Z.id&&r.jsxs("div",{className:"absolute left-0 right-0 bottom-full mb-2 mx-2 p-3 bg-slate-900/95 backdrop-blur-md border border-red-500/30 rounded-xl z-10 shadow-xl",children:[Z.gender&&r.jsxs("p",{className:"text-xs text-red-300 mb-1",children:[": ",r.jsx("span",{className:"text-white",children:Z.gender})]}),Z.personality&&r.jsxs("p",{className:"text-xs text-red-300 mb-1",children:[": ",r.jsx("span",{className:"text-white",children:Z.personality})]}),Z.visualDescription&&r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-xs text-red-300 mb-1",children:":"}),r.jsx("p",{className:"text-xs text-slate-300 leading-relaxed",children:Z.visualDescription})]}),!Z.gender&&!Z.personality&&!Z.visualDescription&&r.jsx("p",{className:"text-xs text-slate-500 italic",children:""})]})]},Z.id))]}),ue&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>_e(null),children:r.jsxs("div",{className:"bg-slate-900 border border-white/20 rounded-2xl w-full max-w-lg overflow-hidden",onClick:Z=>Z.stopPropagation(),children:[r.jsxs("div",{className:"aspect-video bg-gradient-to-br from-slate-700 to-slate-800 relative",children:[ue.image?r.jsx("img",{src:ue.image,alt:ue.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(wa,{size:64,className:"text-slate-500"})}),ue.isFavorite&&r.jsx("div",{className:"absolute top-3 left-3 p-1.5 bg-pink-500/80 rounded-full",children:r.jsx($0,{size:16,className:"text-white fill-white"})}),r.jsx("span",{className:`absolute top-3 right-3 px-3 py-1 text-sm font-medium rounded-full ${ue.role==="main"?"bg-yellow-500/80 text-yellow-900":ue.role==="villain"?"bg-red-500/80 text-white":"bg-blue-500/80 text-white"}`,children:Fe[ue.role]||ue.role})]}),r.jsxs("div",{className:"p-5 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:ue.name}),ue.gender&&r.jsx("span",{className:"text-sm text-slate-400",children:ue.gender})]}),ue.personality&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-300 mb-1",children:""}),r.jsx("p",{className:"text-sm text-white",children:ue.personality})]}),ue.visualDescription&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-red-300 mb-1",children:""}),r.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:ue.visualDescription})]}),ue.tags?.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:ue.tags.map(Z=>r.jsxs("span",{className:"px-2 py-1 bg-white/10 text-slate-300 text-xs rounded-lg",children:[" ",Z]},Z))}),r.jsxs("div",{className:"flex gap-2 pt-3 border-t border-white/10",children:[r.jsxs("button",{onClick:()=>{_e(null),J(ue)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-xl transition-colors",children:[r.jsx(yw,{size:16}),""]}),r.jsxs("button",{onClick:()=>{te(ue),_e(null)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-xl transition-colors",children:[r.jsx(Xi,{size:16}),""]}),r.jsx("button",{onClick:()=>_e(null),className:"px-4 py-2 text-slate-400 hover:text-white transition-colors",children:""})]})]})]})})]}):r.jsx("div",{className:"p-8",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 text-center",children:[r.jsx(wa,{size:48,className:"mx-auto mb-4 text-red-400"}),r.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:""}),r.jsx("p",{className:"text-slate-400",children:""})]})})},mN=[{id:"default_language",name:" ",icon:"",isDefault:!0,blocks:[{id:"block_th",name:"",flag:"th",instruction:"All spoken dialogue and narration must be in Thai language. Use natural Thai expressions."},{id:"block_en",name:"",flag:"gb",instruction:"All spoken dialogue and narration must be in English. Use natural English expressions."},{id:"block_jp",name:"",flag:"jp",instruction:"All spoken dialogue must be in Japanese. Use natural Japanese expressions and honorifics."},{id:"block_kr",name:"",flag:"kr",instruction:"All spoken dialogue must be in Korean. Use natural Korean expressions."},{id:"block_cn",name:"",flag:"cn",instruction:"All spoken dialogue must be in Mandarin Chinese. Use natural Chinese expressions."},{id:"block_isan",name:"",icon:"",instruction:"All spoken dialogue must be in Isan dialect. Use authentic Isan expressions and vocabulary."}]},{id:"default_style",name:" ",icon:"",isDefault:!0,blocks:[{id:"block_cinematic",name:" Cinematic",instruction:"Use cinematic camera angles: Wide shots, Close-ups, Slow motion. Include lens flares and depth of field."},{id:"block_anime",name:" Anime Style",instruction:"Anime visual style: expressive eyes, dramatic reactions, speed lines, sparkle effects."},{id:"block_realistic",name:" Realistic",instruction:"Photorealistic style with natural lighting and real-world textures."},{id:"block_vintage",name:" Vintage/Retro",instruction:"Vintage film look: grain, muted colors, vignette, old film aesthetics."},{id:"block_cartoon",name:" Cartoon",instruction:"Cartoon/Animation style with bold colors and exaggerated expressions."},{id:"block_noir",name:" Film Noir",instruction:"Black and white, high contrast, dramatic shadows, detective movie style."}]},{id:"default_mood",name:" ",icon:"",isDefault:!0,blocks:[{id:"block_emotional",name:" Emotional",instruction:"Focus on character emotions: tears, smiles, detailed facial expressions."},{id:"block_happy",name:" Happy/Cheerful",instruction:"Bright, joyful atmosphere. Characters smiling, laughing, celebrating."},{id:"block_sad",name:" Sad/Melancholy",instruction:"Melancholic mood. Tears, rain, muted colors, slow movements."},{id:"block_tense",name:" Tense/Suspense",instruction:"Build tension and suspense. Quick cuts, dramatic music, shadows."},{id:"block_romantic",name:" Romantic",instruction:"Romantic atmosphere. Soft lighting, warm colors, intimate moments."},{id:"block_horror",name:" Horror/Scary",instruction:"Horror atmosphere. Dark shadows, jump scares, eerie sounds."}]},{id:"default_lighting",name:" ",icon:"",isDefault:!0,blocks:[{id:"block_golden",name:" Golden Hour",instruction:"Warm golden sunlight. Soft shadows, orange and yellow tones."},{id:"block_night",name:" Night Scene",instruction:"Night time. Cool blue tones, moonlight, city lights."},{id:"block_rain",name:" ",instruction:"Rainy scene. Wet surfaces, reflections, rain sounds."},{id:"block_neon",name:" Neon/Cyberpunk",instruction:"Neon lights, cyberpunk aesthetic, pink/blue/purple colors."},{id:"block_studio",name:" Studio Lighting",instruction:"Professional studio lighting. Clean, well-lit, no harsh shadows."},{id:"block_natural",name:" Natural Light",instruction:"Natural daylight. Realistic outdoor lighting."}]},{id:"default_audio",name:" ",icon:"",isDefault:!0,blocks:[{id:"block_bgm_soft",name:" BGM Soft",instruction:"Soft piano, gentle strings, acoustic guitar. Emotional soundtrack."},{id:"block_bgm_epic",name:" BGM Epic",instruction:"Orchestral, dramatic drums, powerful brass. Epic soundtrack."},{id:"block_ambient",name:" Ambient",instruction:"Ambient sounds: wind, rain, city noise, nature sounds."},{id:"block_silence",name:" Silence",instruction:"No background music. Only dialogue and essential sounds."},{id:"block_lofi",name:" Lo-fi/Chill",instruction:"Lo-fi hip hop beats, relaxing chill music."},{id:"block_rock",name:" Rock/Action",instruction:"Rock music, electric guitars, energetic drums."}]},{id:"default_camera",name:" ",icon:"",isDefault:!0,blocks:[{id:"block_closeup",name:" Close-up",instruction:"Close-up shots focusing on face and expressions."},{id:"block_wide",name:" Wide Shot",instruction:"Wide establishing shots showing full scene and environment."},{id:"block_pov",name:" POV/First Person",instruction:"First person point of view, seeing through character eyes."},{id:"block_drone",name:" Drone/Aerial",instruction:"Aerial drone shots, bird eye view, sweeping landscapes."},{id:"block_slowmo",name:" Slow Motion",instruction:"Slow motion for dramatic moments and action scenes."},{id:"block_timelapse",name:" Time-lapse",instruction:"Time-lapse showing passage of time, clouds moving, sun setting."}]}],Y8=["Cinematic / Movie","Short Film / Story","Product Showcase / Commercial","Real Estate / Architecture","Vlog / Lifestyle","Time-lapse / Hyper-lapse","Documentary / News","How-to / Tutorial","Relaxation / Lo-fi / ASMR"],X8=()=>{const[s,e]=N.useState(null),t=N.useRef(null),[a,o]=N.useState(""),[c,d]=N.useState(""),[m,p]=N.useState("Cinematic / Movie"),[g,b]=N.useState([]),[v,j]=N.useState([]),[I,B]=N.useState({language:!0,style:!0,lighting:!0,audio:!0}),[O,L]=N.useState([]),[se,W]=N.useState(!1),[re,me]=N.useState(""),[xe,Te]=N.useState(""),[D,T]=N.useState(!1),[A,z]=N.useState(null),[$,q]=N.useState(!1),[k,ue]=N.useState(null),[_e,P]=N.useState(null),[M,F]=N.useState({top:0,left:0}),[Q,de]=N.useState(null),[C,J]=N.useState(null),[te,ge]=N.useState(""),[Ie,De]=N.useState(!1),Ce=N.useRef(null),[qe,be]=N.useState(!1),[H,Me]=N.useState([{role:"assistant",content:'!  (Block)    ""'}]),[Le,We]=N.useState(""),[Fe,Z]=N.useState(!1),[ve,et]=N.useState(!1),[bt,lt]=N.useState(!1),[mt,Pt]=N.useState(""),[Ws,Bn]=N.useState(""),[is,sn]=N.useState(!1),[Rs,xn]=N.useState([]),[Xt,$n]=N.useState(null),[ds,Vs]=N.useState("myExpander"),[sr,U]=N.useState(!1),[Ae,Ve]=N.useState(null),[ze,nt]=N.useState(10),[pt,Is]=N.useState(!0),[Lt,K]=N.useState(3),[le,V]=N.useState(0),[Y,Se]=N.useState(!1),[Ue,Ke]=N.useState(!1),[ht,Wt]=N.useState(null),[yt,hs]=N.useState(!1),[St,os]=N.useState(""),[ns,cn]=N.useState(!1),[nr,Us]=N.useState(null),[ls,It]=N.useState(null),[Bt,Bs]=N.useState(3),[Ma,cl]=N.useState(!1),[sa,Ur]=N.useState([]),[bn,Br]=N.useState(""),[rr,yn]=N.useState(""),[vn,ar]=N.useState(null),[_s,fo]=N.useState(""),[mo,vr]=N.useState(""),[wr,po]=N.useState("");N.useEffect(()=>{const E=gn.onAuthStateChanged(e);return()=>E()},[]),N.useEffect(()=>{const E=()=>{P(null),ar(null)};return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[]),N.useEffect(()=>{s&&(Fn(),go(),bo())},[s]);const Fn=async()=>{if(s)try{const E=ys(He(fe,"users",s.uid,"expanders")),ee=await kn(E),Re=new Date,$e=[];for(const Nt of ee.docs){const _t=Nt.data();if(_t.isTrial&&_t.trialExpiresAt&&(_t.trialExpiresAt.seconds?new Date(_t.trialExpiresAt.seconds*1e3):new Date(_t.trialExpiresAt))<Re){await Sn(Be(fe,"users",s.uid,"expanders",Nt.id)),console.log(`  Trial Expander "${_t.name}" `);continue}$e.push({id:Nt.id,..._t})}xn($e)}catch(E){console.error("Error loading expanders:",E)}},go=async()=>{if(s)try{const E=ys(He(fe,"users",s.uid,"customBlocks")),Re=(await kn(E)).docs.map($e=>({id:$e.id,...$e.data(),isCustom:!0}));j(Re)}catch(E){console.error("Error loading custom blocks:",E)}},xo=E=>!E||E.length===0?"":E.map(ee=>ee.id).sort().join("|"),Oa=()=>{if(!bn.trim()){alert(" URL ");return}try{new URL(bn)}catch{alert("URL ");return}if(sa.includes(bn.trim())){alert("URL ");return}Ur(E=>[...E,bn.trim()]),Br("")},Rn=E=>{Ur(ee=>ee.filter(Re=>Re!==E))},js=E=>rr?xo(E)!==rr:!1,$s=async E=>{if(!s)return null;try{return(await ts(He(fe,"users",s.uid,"customBlocks"),{...E,createdAt:st()})).id}catch(ee){return console.error("Error saving custom block:",ee),null}},na=async E=>{if(s)try{await Sn(Be(fe,"users",s.uid,"customBlocks",E)),j(ee=>ee.filter(Re=>Re.id!==E))}catch(ee){console.error("Error deleting custom block:",ee)}},bo=async()=>{if(s)try{const E=ys(He(fe,"users",s.uid,"customGroups")),Re=(await kn(E)).docs.map($e=>({id:$e.id,...$e.data()}));if(Re.length===0){console.log("Creating default groups for new user...");const $e=[];for(const Nt of mN){const _t={name:Nt.name,icon:Nt.icon,blocks:Nt.blocks,isDefault:!0,createdAt:st()},Es=await ts(He(fe,"users",s.uid,"customGroups"),_t);$e.push({..._t,id:Es.id})}L($e),console.log("Default groups created successfully!")}else L(Re)}catch(E){console.error("Error loading custom groups:",E),L([...mN])}},$t=async E=>{if(!s)return null;try{return(await ts(He(fe,"users",s.uid,"customGroups"),{...E,createdAt:st()})).id}catch(ee){return console.error("Error saving custom group:",ee),null}},Pa=async()=>{if(!re.trim())return;const E={name:`${xe} ${re}`,icon:xe,blocks:[]},ee=await $t(E);ee&&(L(Re=>[...Re,{...E,id:ee}]),me(""),Te(""),W(!1))},Nr=async E=>{if(!(!s||!confirm(" Group ?")))try{await Sn(Be(fe,"users",s.uid,"customGroups",E)),L(ee=>ee.filter(Re=>Re.id!==E))}catch(ee){console.error("Error deleting custom group:",ee)}},ra=(E,ee=null)=>{z({...E,fromGroupId:ee}),T(!0)},wn=E=>{ue(E),q(!0)},pi=async()=>{if(!A||!k)return;const E=k;let ee=[...O];if(A.fromGroupId){const Es=ee.findIndex(zt=>zt.id===A.fromGroupId);if(Es!==-1){const zt=ee[Es],Gn=(zt.blocks||[]).filter(_n=>_n.id!==A.id);s&&await Ps(Be(fe,"users",s.uid,"customGroups",A.fromGroupId),{blocks:Gn}),ee[Es]={...zt,blocks:Gn}}}const Re={...A};delete Re.fromGroupId,delete Re.isCustom;const $e=ee.findIndex(Es=>Es.id===E.id),_t=[...$e!==-1?ee[$e].blocks||[]:[],Re];s&&await Ps(Be(fe,"users",s.uid,"customGroups",E.id),{blocks:_t}),$e!==-1&&(ee[$e]={...ee[$e],blocks:_t}),L(ee),A.isCustom&&!A.fromGroupId&&s&&(await Sn(Be(fe,"users",s.uid,"customBlocks",A.id)),j(Es=>Es.filter(zt=>zt.id!==A.id))),q(!1),T(!1),z(null),ue(null)},ul=async(E,ee)=>{const Re=O.find(Nt=>Nt.id===E);if(!Re)return;const $e=(Re.blocks||[]).filter(Nt=>Nt.id!==ee);s&&await Ps(Be(fe,"users",s.uid,"customGroups",E),{blocks:$e}),L(Nt=>Nt.map(_t=>_t.id===E?{..._t,blocks:$e}:_t))},yo=(E,ee)=>{de(ee),E.dataTransfer.effectAllowed="move"},aa=(E,ee)=>{if(E.preventDefault(),Q===null||Q===ee)return;const Re=[...g],$e=Re[Q];Re.splice(Q,1),Re.splice(ee,0,$e),b(Re),de(ee)},dl=()=>{de(null)},ia=E=>{if(E===0)return;const ee=[...g];[ee[E-1],ee[E]]=[ee[E],ee[E-1]],b(ee)},Nn=E=>{if(E===g.length-1)return;const ee=[...g];[ee[E],ee[E+1]]=[ee[E+1],ee[E]],b(ee)},vo=async E=>{Wt(E),os(""),Ke(!0),cn(!0);try{const Re=await Pr(Lr,"translateBlockToThai")({blockName:E.name,instruction:E.instruction});os(Re.data.thaiDescription)}catch(ee){console.error("Translation error:",ee),os(` "${E.name}" - ${E.instruction}`)}finally{cn(!1)}},gi=async()=>{if(yt){const E=document.getElementById("tts-audio");E&&(E.pause(),E.remove()),hs(!1);return}if(St){hs(!0);try{const ee=await Pr(Lr,"textToSpeechThai")({text:St}),Re=`data:${ee.data.mimeType};base64,${ee.data.audioBase64}`,$e=new Audio(Re);$e.id="tts-audio",$e.onended=()=>hs(!1),$e.onerror=()=>hs(!1),$e.play()}catch(E){console.error("TTS Error:",E),hs(!1)}}},xi=(E,ee)=>{E.dataTransfer.setData("block",JSON.stringify(ee))},bi=E=>{E.preventDefault();const ee=E.dataTransfer.getData("block");if(ee){const Re=JSON.parse(ee);if(!g.find($e=>$e.id===Re.id)){if(Re.type==="language"&&g.find(Nt=>Nt.type==="language")){alert(" ! ");return}b([...g,{...Re,order:g.length}])}}},hl=E=>{E.preventDefault()},oa=E=>{b(g.filter(ee=>ee.id!==E))},yi=E=>{const ee=E.target.files[0];if(!ee)return;if(!["image/jpeg","image/png","image/webp"].includes(ee.type)){alert(" JPG, PNG  WEBP ");return}if(ee.size>3*1024*1024){alert(" 3MB");return}J(ee);const Re=new FileReader;Re.onloadend=()=>{ge(Re.result)},Re.readAsDataURL(ee)},Hn=async E=>{if(!C||!s)return null;try{De(!0);const ee=C.name.split(".").pop(),Re=`expanders/${s.uid}/${E}_${Date.now()}.${ee}`,$e=_d(jd,Re);return await wd($e,C),await Nd($e)}catch(ee){return console.error("Error uploading thumbnail:",ee),null}finally{De(!1)}},la=()=>{J(null),ge(""),Ce.current&&(Ce.current.value="")},In=async()=>{if(!Le.trim()||Fe)return;const E=Le.trim();We(""),Me(ee=>[...ee,{role:"user",content:E}]),Z(!0);try{const $e=(await Pr(Lr,"generateBlock")({message:E})).data,Nt={:"th",thai:"th",thailand:"th",:"gb",english:"gb",uk:"gb",british:"gb",:"jp",japanese:"jp",japan:"jp",:"kr",korean:"kr",korea:"kr",:"cn",chinese:"cn",china:"cn",mandarin:"cn",:"la",lao:"la",laos:"la",:"vn",vietnamese:"vn",vietnam:"vn",:"mm",myanmar:"mm",burmese:"mm",:"kh",cambodian:"kh",khmer:"kh",cambodia:"kh",:"my",malay:"my",malaysia:"my",:"id",indonesian:"id",indonesia:"id",:"ph",filipino:"ph",philippines:"ph",tagalog:"ph",:"in",hindi:"in",india:"in",:"fr",french:"fr",france:"fr",:"de",german:"de",germany:"de",:"es",spanish:"es",spain:"es",:"it",italian:"it",italy:"it",:"pt",portuguese:"pt",portugal:"pt",:"ru",russian:"ru",russia:"ru",:"sa",arabic:"sa",arab:"sa"};let _t=null;const Es=($e.name||"").toLowerCase();for(const[_n,Sr]of Object.entries(Nt))if(Es.includes(_n.toLowerCase())){_t=Sr;break}const zt={...$e,isCustom:!0,type:"custom",..._t&&{flag:_t}},Gn=await $s(zt);if(Gn){const _n={...zt,id:Gn};j(Sr=>[...Sr,_n]),Me(Sr=>[...Sr,{role:"assistant",content:` "${$e.name}" ! 

  Expander `}])}else throw new Error("Failed to save block")}catch(ee){console.error("Error generating block:",ee),Me(Re=>[...Re,{role:"assistant",content:"  "}])}finally{Z(!1)}},ca=async()=>{if(!s){alert("");return}if(!a.trim()){alert(" Expander");return}if(g.length===0){alert(" 1 ");return}et(!0);try{let E=sa;const ee=Xt&&js(g),Re=Xt&&a!==_s,$e=Xt&&m!==mo,Nt=Xt&&c!==wr;if(ee||Re||$e||Nt){E=[],Ur([]);const zt=[];ee&&zt.push("Blocks"),Re&&zt.push(""),$e&&zt.push("Category"),Nt&&zt.push(""),console.log(` ${zt.join(", ")} changed - Video URLs cleared`)}const _t={name:a,description:c,categoryId:m,blocks:g,customBlocks:v.filter(zt=>g.find(Gn=>Gn.id===zt.id)),videoUrls:E,createdAt:st(),updatedAt:st()};let Es;if(Xt){if(C){const zt=await Hn(Xt.id);zt&&(_t.thumbnail=zt)}else te&&(_t.thumbnail=te);await Ps(Be(fe,"users",s.uid,"expanders",Xt.id),_t)}else if(Es=await ts(He(fe,"users",s.uid,"expanders"),_t),C){const zt=await Hn(Es.id);zt&&await Ps(Es,{thumbnail:zt})}await Fn(),alert(" Expander ! "),o(""),d(""),b([]),$n(null),la(),Ur([]),yn(""),Br("")}catch(E){console.error("Error saving expander:",E),alert("")}finally{et(!1)}},_r=async()=>{if(g.length===0){alert(" 1 ");return}if(!mt.trim()){alert(" Prompt ");return}lt(!0),Bn("");try{const ee=await Pr(Lr,"expandPrompt")({simplePrompt:mt,blocks:g});Bn(ee.data.expandedPrompt)}catch(E){console.error("Error testing expander:",E),Bn(": "+E.message)}finally{lt(!1)}},jr=E=>{$n(E),o(E.name),d(E.description||""),p(E.categoryId),b(E.blocks||[]),E.customBlocks&&j(ee=>[...ee,...E.customBlocks]),E.thumbnail?ge(E.thumbnail):la(),Ur(E.videoUrls||[]),yn(xo(E.blocks||[])),fo(E.name),vr(E.categoryId),po(E.description||"")},$r=async E=>{if(confirm(" Expander ?"))try{await Sn(Be(fe,"users",s.uid,"expanders",E)),await Fn()}catch(ee){console.error("Error deleting expander:",ee)}},ua=async E=>{try{await Sn(Be(fe,"users",s.uid,"expanders",E.id)),await Sn(Be(fe,"users",s.uid,"trialHistory",E.originalExpanderId)),await cs(Be(fe,"users",s.uid,"canceledTrials",E.originalExpanderId),{expanderName:E.name,canceledAt:st(),originalExpanderId:E.originalExpanderId,sellerId:E.trialFromSellerId}),await Fn(),Us(null),alert(` 

 Marketplace `)}catch(ee){console.error("Error canceling trial:",ee),alert(": "+ee.message)}},ir=async()=>{if(!(!Ae||!s)){Se(!0);try{const E=Math.floor(ze*.1),ee=ze-E;await ts(He(fe,"marketplace_expanders"),{...Ae,originalId:Ae.id,originalCreatorId:s.uid,sellerId:s.uid,sellerName:s.displayName||s.email,price:ze,platformFee:E,sellerReceives:ee,videoUrls:Ae.videoUrls||[],allowTrial:pt,trialDays:pt?Lt:0,trialFee:pt?le:0,status:"active",downloads:0,rating:0,reviews:0,publishedAt:st()}),await Ps(Be(fe,"users",s.uid,"expanders",Ae.id),{isPublished:!0,marketplacePrice:ze,trialDays:pt?Lt:0,trialFee:pt?le:0}),await ts(He(fe,"users",s.uid,"transactions"),{type:"publish_sale",itemName:Ae.name,coverImage:Ae.thumbnail||"",expanderId:Ae.id,price:ze,date:st()}),await Fn(),U(!1),Ve(null),nt(10),Is(!0),K(3),V(0),alert("  Marketplace !")}catch(E){console.error("Error publishing to marketplace:",E),alert(": "+E.message)}finally{Se(!1)}}},qn=E=>{if((E.videoUrls||[]).length===0){alert(`  URL  1 

1.  ""   URL  ""
2.  " Expander" 
3.  ""`);return}Ve(E),nt(E.marketplacePrice||10),Is(E.trialDays>0||!0),K(E.trialDays||3),V(E.trialFee||0),U(!0)},La=async E=>{if(!(!s||!E)&&confirm(` "${E.name}"?`))try{const ee=ys(He(fe,"marketplace_expanders"),Qi("originalId","==",E.id),Qi("sellerId","==",s.uid)),Re=await kn(ee);for(const $e of Re.docs)await Sn(Be(fe,"marketplace_expanders",$e.id));await Ps(Be(fe,"users",s.uid,"expanders",E.id),{isPublished:!1,marketplacePrice:null}),await ts(He(fe,"users",s.uid,"transactions"),{type:"cancel_sale",itemName:E.name,coverImage:E.thumbnail||"",expanderId:E.id,date:st()}),await Fn(),alert(" !")}catch(ee){console.error("Error canceling sale:",ee),alert(": "+ee.message)}},qt=async()=>{if(!s||!ls)return;const E=ls;cl(!0);try{const ee=new Date;ee.setDate(ee.getDate()+Bt);const Re={originalId:E.id,name:E.name,description:E.description||"",categoryId:E.categoryId||m,blocks:E.blocks||[],thumbnail:E.thumbnail||"",videoUrls:E.videoUrls||[],sellerId:s.uid,sellerName:s.displayName||s.email?.split("@")[0]||"Anonymous",sellerEmail:s.email||"",price:0,isFree:!0,freeUntil:ee,freeDays:Bt,allowTrial:!1,trialDays:0,trialFee:0,downloads:0,rating:0,ratingCount:0,createdAt:st()};await ts(He(fe,"marketplace_expanders"),Re),await Ps(Be(fe,"users",s.uid,"expanders",E.id),{isPublishedFree:!0,freeUntil:ee,freeExpiresAt:ee,freeDays:Bt}),await ts(He(fe,"users",s.uid,"transactions"),{type:"publish_free",itemName:E.name,coverImage:E.thumbnail||"",expanderId:E.id,freeDays:Bt,date:st()}),await Fn(),It(null),Bs(3),alert(`  ${Bt} !`)}catch(ee){console.error("Error publishing free:",ee),alert(": "+ee.message)}finally{cl(!1)}},Er=async E=>{if(!(!s||!E)&&confirm(` "${E.name}"?`))try{const ee=ys(He(fe,"marketplace_expanders"),Qi("originalId","==",E.id),Qi("sellerId","==",s.uid),Qi("isFree","==",!0)),Re=await kn(ee);for(const $e of Re.docs)await Sn(Be(fe,"marketplace_expanders",$e.id));await Ps(Be(fe,"users",s.uid,"expanders",E.id),{isPublishedFree:!1,freeUntil:null,freeExpiresAt:null,freeDays:null}),await ts(He(fe,"users",s.uid,"transactions"),{type:"cancel_free",itemName:E.name,coverImage:E.thumbnail||"",expanderId:E.id,date:st()}),await Fn(),alert(" !")}catch(ee){console.error("Error canceling free:",ee),alert(": "+ee.message)}},wo=async()=>{if(Ws)try{await navigator.clipboard.writeText(Ws),sn(!0),setTimeout(()=>sn(!1),2e3)}catch(E){console.error("Copy failed:",E)}},za=E=>{B(ee=>({...ee,[E]:!ee[E]}))},No=E=>{if(!E.receivedFree||!E.originalBlocks)return!0;const ee=(E.blocks||[]).map($e=>$e.id).sort().join(","),Re=(E.originalBlocks||[]).map($e=>$e.id).sort().join(",");return ee!==Re},da=E=>E.receivedFree&&E.originalBlocks&&!No(E);return N.useEffect(()=>{t.current?.scrollIntoView({behavior:"smooth"})},[H]),r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 p-6 relative",children:[r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8 relative bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(bs,{className:"text-white group-hover:rotate-12 transition-transform duration-300",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900 flex items-center justify-center",children:r.jsx("span",{className:"text-[8px] font-bold text-black",children:Rs.length})})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:"Expander Creator"}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"})," Expander  Prompt  Premium Quality"]})]})]}),r.jsxs("div",{className:"inline-flex gap-2 bg-black/30 backdrop-blur-xl p-2 rounded-2xl border border-white/10",children:[r.jsxs("button",{onClick:()=>Vs("myExpander"),className:`group relative px-5 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 ${ds==="myExpander"?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-lg shadow-red-500/40":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(Gl,{size:18,className:`transition-transform duration-300 ${ds==="myExpander"?"":"group-hover:rotate-12"}`})," My Expander",Rs.length>0&&r.jsx("span",{className:"bg-amber-400 text-black px-2.5 py-0.5 rounded-full text-xs font-bold",children:Rs.length}),ds==="myExpander"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10"})]}),r.jsxs("button",{onClick:()=>Vs("creator"),className:`group relative px-5 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2 ${ds==="creator"?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-lg shadow-red-500/40":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(Go,{size:18,className:`transition-transform duration-300 ${ds==="creator"?"":"group-hover:rotate-12"}`})," Creator",ds==="creator"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10"})]})]})]}),ds==="myExpander"&&r.jsx("div",{className:"space-y-6",children:Rs.length===0?r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/10 rounded-xl p-12 text-center",children:[r.jsx(Gl,{size:48,className:"mx-auto text-slate-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:" Expander"}),r.jsx("p",{className:"text-slate-400 mb-4",children:" Expander "}),r.jsx("button",{onClick:()=>Vs("creator"),className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-medium",children:" Expander"})]}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("button",{onClick:()=>{$n(null),o(""),d(""),b([]),Ur([]),yn(""),Br(""),la(),Vs("creator")},className:"bg-slate-800/50 border-2 border-dashed border-red-500/30 hover:border-red-500/60 rounded-2xl overflow-hidden transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(220,38,38,0.15)] flex flex-col items-center justify-center min-h-[320px] group",children:[r.jsx("div",{className:"w-16 h-16 bg-red-600/20 group-hover:bg-red-600/40 rounded-full flex items-center justify-center mb-4 transition-all",children:r.jsx(Vn,{size:32,className:"text-red-400"})}),r.jsx("span",{className:"text-slate-300 group-hover:text-white font-medium transition-colors",children:" Expander "})]}),Rs.map(E=>r.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-2xl overflow-hidden group hover:border-red-500/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-[0_0_30px_rgba(220,38,38,0.15)] flex flex-col",children:[r.jsxs("div",{className:"h-48 bg-gradient-to-br from-red-600/30 via-purple-600/30 to-orange-600/30 relative overflow-hidden",children:[E.thumbnail?r.jsx("img",{src:E.thumbnail,alt:E.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(bs,{size:40,className:"text-white/30"})}),r.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1 flex-wrap max-w-[90%]",children:[E.blocks?.slice(0,4).map((ee,Re)=>r.jsx("span",{className:"bg-white/20 backdrop-blur-sm border border-white/20 px-2 py-0.5 rounded text-xs text-white",children:ee.name?.split(" ")[0]},Re)),E.blocks?.length>4&&r.jsxs("span",{className:"bg-black/50 backdrop-blur-sm px-2 py-0.5 rounded text-xs text-white",children:["+",E.blocks.length-4]})]}),E.videoUrls?.length>0&&r.jsxs("div",{className:"absolute top-2 left-2 z-20",children:[r.jsx("button",{onClick:ee=>{ee.stopPropagation(),ar(vn===E.id?null:E.id)},className:"bg-purple-500/80 backdrop-blur-md p-1.5 rounded-lg text-white border border-purple-400/30 shadow-xl hover:bg-purple-500 transition-all",title:"",children:r.jsx(Ta,{size:14,fill:"currentColor"})}),vn===E.id&&r.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-slate-900/95 backdrop-blur-md border border-white/20 rounded-xl shadow-2xl p-2 min-w-[200px] z-50",children:[r.jsxs("p",{className:"text-xs text-slate-400 px-2 pb-2 border-b border-white/10 mb-2",children:["  (",E.videoUrls.length,")"]}),E.videoUrls.map((ee,Re)=>r.jsxs("a",{href:ee,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-white/10 text-sm text-white transition-all group",onClick:$e=>$e.stopPropagation(),children:[r.jsx(Ta,{size:14,className:"text-purple-400 group-hover:text-purple-300"}),r.jsxs("span",{className:"flex-1 truncate",children:["VDO ",Re+1]}),r.jsx(Su,{size:12,className:"text-slate-500 group-hover:text-white"})]},Re))]})]}),E.isTrial&&r.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 px-2 py-0.5 rounded text-xs text-white flex items-center gap-1",children:" "}),E.isPublished&&!E.isTrial&&!E.fromMarketplace&&!E.isPublishedFree&&r.jsxs("div",{className:"absolute top-2 right-2 bg-green-500 px-2 py-0.5 rounded text-xs text-white flex items-center gap-1",children:[r.jsx(Au,{size:10})," On Sale"]}),E.isPublishedFree&&!E.isTrial&&r.jsxs("div",{className:"absolute top-2 right-2 bg-gradient-to-r from-emerald-500 to-green-600 px-2 py-1 rounded-lg text-xs text-white flex items-center gap-1 font-bold shadow-lg",children:["  ",E.freeDays||3,"D",E.freeExpiresAt&&r.jsxs("span",{className:"text-[10px] opacity-80",children:["(",(()=>{const $e=(E.freeExpiresAt?.seconds?new Date(E.freeExpiresAt.seconds*1e3):new Date(E.freeExpiresAt))-new Date;if($e<=0)return"";const Nt=Math.floor($e/(1e3*60*60*24)),_t=Math.floor($e%(1e3*60*60*24)/(1e3*60*60));return`${Nt}D ${_t}H`})(),")"]})]}),da(E)&&!E.isTrial&&!E.isPublishedFree&&r.jsx("div",{className:"absolute top-2 right-2 bg-purple-500 px-2 py-0.5 rounded text-xs text-white flex items-center gap-1",children:" FREE"})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:E.name}),r.jsx("p",{className:"text-sm text-slate-400 mb-2 line-clamp-2",children:E.description||""}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-4 flex-wrap",children:[r.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded",children:E.categoryId}),r.jsxs("span",{children:[E.blocks?.length||0," blocks"]}),E.videoUrls?.length>0&&r.jsxs("span",{className:"bg-purple-500/20 text-purple-400 px-2 py-0.5 rounded flex items-center gap-1",children:[" ",E.videoUrls.length," VDO"]})]}),r.jsx("div",{className:"flex gap-2 relative group/trial",children:E.isTrial?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg text-sm font-medium flex items-center justify-center gap-1 group-hover/trial:hidden",children:["  ( ",E.trialFromSellerName||"",")"]}),r.jsxs("div",{className:"px-3 py-2 bg-slate-700/50 text-slate-400 rounded-lg text-xs flex items-center gap-1 group-hover/trial:hidden",children:[" ",E.trialExpiresAt?new Date(E.trialExpiresAt.seconds?E.trialExpiresAt.seconds*1e3:E.trialExpiresAt).toLocaleDateString("th-TH"):"N/A"]}),r.jsxs("button",{onClick:()=>Us(E),className:"hidden group-hover/trial:flex flex-1 px-3 py-2 bg-red-500/20 backdrop-blur-sm border border-red-500/30 hover:bg-red-500/30 text-red-400 rounded-lg text-sm font-medium items-center justify-center gap-1 transition-all",children:[r.jsx(xs,{size:14})," "]})]}):E.isPublishedFree?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{jr(E),Vs("creator")},className:"flex-1 px-3 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[r.jsx(Go,{size:14})," "]}),r.jsx("button",{onClick:()=>$r(E.id),className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg",children:r.jsx(xs,{size:14})}),r.jsxs("button",{onClick:()=>Er(E),className:"px-3 py-2 bg-emerald-500/20 hover:bg-red-500/30 text-emerald-400 hover:text-red-400 rounded-lg flex items-center gap-1 text-sm transition-all group",title:"",children:[r.jsx(Gl,{size:14,className:"group-hover:hidden"}),r.jsx(Qs,{size:14,className:"hidden group-hover:block"}),r.jsxs("span",{className:"group-hover:hidden",children:["FREE ",E.freeDays,"D"]}),r.jsx("span",{className:"hidden group-hover:block",children:""})]})]}):da(E)?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{jr(E),Vs("creator")},className:"flex-1 px-3 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[r.jsx(Go,{size:14})," "]}),r.jsx("button",{onClick:()=>$r(E.id),className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg",children:r.jsx(xs,{size:14})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{jr(E),Vs("creator")},className:"flex-1 px-3 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[r.jsx(Go,{size:14})," "]}),r.jsx("button",{onClick:()=>$r(E.id),className:"px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg",children:r.jsx(xs,{size:14})}),!E.isPublished&&r.jsxs("button",{onClick:()=>It(E),className:"px-3 py-2 bg-emerald-500/20 hover:bg-emerald-500/30 text-emerald-400 rounded-lg flex items-center gap-1",children:[r.jsx(Gl,{size:14})," FREE"]}),E.isPublished?r.jsxs("button",{onClick:()=>La(E),className:"px-3 py-2 bg-green-500/20 hover:bg-red-500/30 text-green-400 hover:text-red-400 rounded-lg flex items-center gap-1 text-sm transition-all group",title:"",children:[r.jsx(bf,{size:14,className:"group-hover:hidden"}),r.jsx(Qs,{size:14,className:"hidden group-hover:block"}),r.jsxs("span",{className:"group-hover:hidden",children:[E.marketplacePrice," TOKEN"]}),r.jsx("span",{className:"hidden group-hover:block",children:""})]}):r.jsxs("button",{onClick:()=>qn(E),className:"px-3 py-2 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 rounded-lg flex items-center gap-1",children:[r.jsx(Au,{size:14})," "]})]})})]})]},E.id))]})}),ds==="creator"&&r.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[r.jsx("div",{className:"col-span-3 space-y-3",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:[r.jsx("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:" "}),r.jsxs("div",{className:"space-y-3 max-h-[500px] overflow-y-auto overflow-x-visible pr-1",style:{overflow:"visible auto"},children:[O.map(E=>r.jsxs("div",{className:`bg-white/5 backdrop-blur-sm border ${E.isDefault?"border-white/10":"border-red-500/20"} rounded-lg`,children:[r.jsxs("button",{onClick:()=>za(E.id),className:"w-full flex items-center justify-between px-3 py-2 text-white hover:bg-white/5",children:[r.jsx("span",{className:"font-medium text-sm flex items-center gap-2",children:E.name}),r.jsxs("div",{className:"flex items-center gap-1",children:[!E.isDefault&&r.jsx("span",{onClick:ee=>{ee.stopPropagation(),Nr(E.id)},className:"p-1 hover:bg-red-500/20 rounded text-red-400",children:r.jsx(xs,{size:12})}),I[E.id]!==!1?r.jsx(pg,{size:14}):r.jsx(tr,{size:14})]})]}),I[E.id]!==!1&&r.jsxs("div",{className:"px-2 pb-2 space-y-1",children:[(E.blocks||[]).map(ee=>r.jsxs("div",{draggable:!0,onDragStart:Re=>xi(Re,{...ee,type:"custom",groupId:E.id}),className:"bg-white/10 backdrop-blur-sm border border-white/10 px-3 py-2 rounded-lg cursor-grab active:cursor-grabbing flex items-center gap-2 text-white text-sm font-medium hover:bg-white/20 transition-all group/block relative",children:[r.jsx(Tu,{size:14,className:"opacity-50 shrink-0"}),ee.flag?r.jsx("img",{src:`https://flagcdn.com/20x15/${ee.flag}.png`,alt:ee.name,className:"w-5 h-4 object-cover rounded-sm shrink-0"}):ee.icon?r.jsx("span",{className:"text-base shrink-0",children:ee.icon}):null,r.jsx("span",{className:"flex-1 truncate mr-1",children:ee.name}),r.jsx("button",{onClick:Re=>{if(Re.stopPropagation(),_e===ee.id)P(null);else{const $e=Re.currentTarget.getBoundingClientRect();F({top:$e.bottom+4,left:$e.right-140}),P(ee.id)}},className:"p-1 hover:bg-white/20 rounded text-slate-400 hover:text-white shrink-0",children:r.jsx(EA,{size:14})})]},ee.id)),(!E.blocks||E.blocks.length===0)&&r.jsx("p",{className:"text-slate-500 text-xs text-center py-2",children:" Block"})]})]},E.id)),v.length>0&&r.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-violet-500/20 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-3 py-2 text-white font-medium text-sm",children:" Custom Blocks"}),r.jsx("div",{className:"px-2 pb-2 space-y-1",children:v.map(E=>r.jsxs("div",{draggable:!0,onDragStart:ee=>xi(ee,{...E,type:"custom"}),className:"bg-white/10 backdrop-blur-sm border border-white/10 px-3 py-2 rounded-lg cursor-grab active:cursor-grabbing flex items-center gap-2 text-white text-sm font-medium hover:bg-white/20 transition-all group",children:[r.jsx(Tu,{size:14,className:"opacity-50 shrink-0"}),E.flag?r.jsx("img",{src:`https://flagcdn.com/20x15/${E.flag}.png`,alt:E.name,className:"w-5 h-4 object-cover rounded-sm shrink-0"}):E.icon?r.jsx("span",{className:"text-base shrink-0",children:E.icon}):null,r.jsx("span",{className:"flex-1 truncate",children:E.name}),r.jsx("span",{className:"text-xs bg-violet-500/30 px-1 rounded shrink-0",children:"AI"}),r.jsx("button",{onClick:ee=>{ee.stopPropagation(),vo(E)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-white/20 rounded transition-opacity",title:"",children:r.jsx(vf,{size:12})}),r.jsx("button",{onClick:ee=>{ee.stopPropagation(),ra({...E,isCustom:!0})},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-blue-500/30 rounded transition-opacity text-blue-300",title:" Group",children:r.jsx(Bh,{size:12})}),r.jsx("button",{onClick:ee=>{ee.stopPropagation(),na(E.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-red-500/30 rounded transition-opacity text-red-300",title:"",children:r.jsx(xs,{size:12})})]},E.id))})]}),r.jsxs("button",{onClick:()=>W(!0),className:"w-full py-2 bg-white/5 hover:bg-white/10 border border-dashed border-white/20 rounded-lg text-slate-400 hover:text-white text-sm flex items-center justify-center gap-2 transition-all",children:[r.jsx(B0,{size:14}),"  Group "]})]})]})}),r.jsxs("div",{className:"col-span-6 space-y-4",children:[r.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-2xl",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-400 mb-2 block uppercase tracking-wider",children:" Expander"}),r.jsx("input",{type:"text",value:a,onChange:E=>o(E.target.value),placeholder:" Thai Drama Pro",className:"w-full bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-red-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-red-500/10 transition-all duration-300"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-400 mb-2 block uppercase tracking-wider",children:"Category"}),r.jsxs("div",{className:"glass-dropdown-wrapper w-full",children:[r.jsx(zs,{value:m,onChange:p,options:Y8.map(E=>({value:E,label:E})),buttonClassName:"glass-dropdown w-full"}),r.jsx(tr,{size:14,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white/60 pointer-events-none"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-semibold text-slate-400 mb-2 block uppercase tracking-wider",children:""}),r.jsx("input",{type:"text",value:c,onChange:E=>d(E.target.value),placeholder:"  Expander ",className:"w-full bg-black/40 backdrop-blur-xl border border-white/10 rounded-2xl px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-red-500/50 focus:bg-black/60 focus:shadow-lg focus:shadow-red-500/10 transition-all duration-300"})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"text-slate-300 text-sm mb-2 block",children:"Expander Thumbnail"}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{onClick:()=>Ce.current?.click(),className:"w-24 h-24 bg-black/30 border border-white/10 rounded-xl flex items-center justify-center cursor-pointer hover:border-red-500/50 transition-colors overflow-hidden",children:te?r.jsx("img",{src:te,alt:"Thumbnail",className:"w-full h-full object-cover"}):r.jsx(ix,{className:"text-slate-500",size:32})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{ref:Ce,type:"file",accept:"image/jpeg,image/png,image/webp",onChange:yi,className:"hidden"}),r.jsx("button",{type:"button",onClick:()=>Ce.current?.click(),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-sm font-medium transition-colors",children:"Choose file"}),r.jsx("span",{className:"ml-2 text-slate-400 text-sm",children:C?C.name:"No file chosen"}),r.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Max size: 3MB. Formats: JPG, PNG, WEBP."}),te&&r.jsx("button",{type:"button",onClick:la,className:"mt-2 text-xs text-red-400 hover:text-red-300",children:""})]})]})]})]}),r.jsxs("div",{onDrop:bi,onDragOver:hl,className:"bg-white/10 backdrop-blur-md border-2 border-dashed border-red-500/30 rounded-xl p-4 min-h-[180px]",children:[r.jsxs("h3",{className:"text-white font-bold mb-3",children:[" Expander  ",r.jsx("span",{className:"text-xs font-normal text-slate-400",children:"()"})]}),g.length===0?r.jsx("div",{className:"text-center text-slate-400 py-8",children:r.jsx("p",{children:""})}):r.jsx("div",{className:"space-y-2",children:g.map((E,ee)=>r.jsxs("div",{draggable:!0,onDragStart:Re=>yo(Re,ee),onDragOver:Re=>aa(Re,ee),onDragEnd:dl,className:`bg-white/10 backdrop-blur-sm border border-white/20 px-3 py-2 rounded-lg flex items-center gap-2 text-white text-sm font-medium cursor-grab active:cursor-grabbing hover:bg-white/20 transition-all ${Q===ee?"opacity-50 border-red-500":""}`,children:[r.jsx(Tu,{size:14,className:"opacity-50"}),r.jsx("span",{className:"bg-red-500/30 px-1.5 py-0.5 rounded text-xs font-bold",children:ee+1}),r.jsx("span",{className:"flex-1",children:E.name}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>ia(ee),disabled:ee===0,className:"p-1 hover:bg-white/20 rounded disabled:opacity-30",title:"",children:r.jsx(Lk,{size:12})}),r.jsx("button",{onClick:()=>Nn(ee),disabled:ee===g.length-1,className:"p-1 hover:bg-white/20 rounded disabled:opacity-30",title:"",children:r.jsx(Rk,{size:12})}),r.jsx("button",{onClick:()=>oa(E.id),className:"p-1 hover:bg-red-500/30 rounded text-red-300",title:"",children:r.jsx(Qs,{size:12})})]})]},E.id))})]}),!Xt?.fromMarketplace&&r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:[r.jsxs("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:[" ",r.jsx("span",{className:"text-xs text-slate-400 font-normal",children:"( 1 URL )"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"url",value:bn,onChange:E=>Br(E.target.value),placeholder:"https://youtube.com/watch?v=...",className:"flex-1 bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-red-500 text-sm",onKeyDown:E=>E.key==="Enter"&&Oa()}),r.jsxs("button",{onClick:Oa,className:"group relative px-5 py-2.5 bg-gradient-to-r from-purple-600 via-purple-500 to-pink-500 hover:from-purple-500 hover:via-purple-400 hover:to-pink-400 rounded-xl text-white text-sm font-bold flex items-center gap-2 shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 hover:scale-105 transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),r.jsx(Vn,{size:14,className:"relative z-10 group-hover:rotate-90 transition-transform duration-300"}),r.jsx("span",{className:"relative z-10",children:"Add VDO"})]})]}),sa.length>0?r.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:sa.map((E,ee)=>r.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-purple-400 text-sm",children:""}),r.jsx("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"flex-1 text-slate-300 text-sm truncate hover:text-purple-400",children:E}),r.jsx("button",{onClick:()=>Rn(E),className:"p-1 hover:bg-red-500/30 rounded text-red-400",children:r.jsx(Qs,{size:14})})]},ee))}):r.jsx("p",{className:"text-slate-500 text-xs text-center py-2",children:" URL "}),Xt&&sa.length>0&&r.jsx("p",{className:"text-amber-400 text-xs flex items-center gap-1",children:" / Block  URL "})]})]}),r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:[r.jsxs("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:[r.jsx(vw,{size:18,className:"text-green-400"})," Expander"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-slate-300 text-sm mb-1 block",children:"Prompt  ()"}),r.jsx("input",{type:"text",value:mt,onChange:E=>Pt(E.target.value),placeholder:" Prompt ",className:"w-full bg-black/20 border border-white/10 rounded-lg px-3 py-2 text-white placeholder-slate-500 focus:outline-none focus:border-red-500"})]}),r.jsxs("button",{onClick:_r,disabled:bt,className:"group relative w-full py-3 bg-gradient-to-r from-emerald-600 via-teal-500 to-cyan-500 hover:from-emerald-500 hover:via-teal-400 hover:to-cyan-400 rounded-2xl text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50 shadow-xl shadow-emerald-500/30 hover:shadow-emerald-500/50 hover:scale-[1.02] transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),bt?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:16,className:"animate-spin relative z-10"}),r.jsx("span",{className:"relative z-10",children:"..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(vw,{size:16,className:"relative z-10 group-hover:rotate-12 transition-transform duration-300"}),r.jsx("span",{className:"relative z-10",children:" Expand"})]})]}),Ws&&r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3 relative",children:[r.jsxs("button",{onClick:wo,className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-500 rounded-lg text-white flex items-center gap-1 text-xs font-bold",children:[is?r.jsx(_a,{size:14}):r.jsx(Xi,{size:14}),is?"!":""]}),r.jsx("p",{className:"text-slate-200 text-sm whitespace-pre-wrap pr-24",children:Ws})]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:ca,disabled:ve,className:"group relative flex-1 py-4 bg-gradient-to-r from-violet-600 via-purple-500 to-fuchsia-500 hover:from-violet-500 hover:via-purple-400 hover:to-fuchsia-400 rounded-2xl text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50 shadow-xl shadow-purple-500/40 hover:shadow-purple-500/60 hover:scale-[1.02] transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),ve?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:18,className:"animate-spin relative z-10"}),r.jsx("span",{className:"relative z-10",children:"..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Zf,{size:18,className:"relative z-10 group-hover:rotate-12 transition-transform duration-300"}),r.jsx("span",{className:"relative z-10",children:Xt?" Expander":" Expander"})]})]}),r.jsxs("button",{className:"group relative px-8 py-4 bg-gradient-to-r from-amber-500 via-orange-400 to-rose-400 hover:from-amber-400 hover:via-orange-300 hover:to-rose-300 rounded-2xl text-white font-bold flex items-center gap-2 shadow-xl shadow-amber-500/40 hover:shadow-amber-500/60 hover:scale-105 transition-all duration-300 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-500"}),r.jsx(jf,{size:18,className:"relative z-10 group-hover:rotate-12 group-hover:-translate-y-1 transition-all duration-300"}),r.jsx("span",{className:"relative z-10",children:""})]})]})]}),r.jsx("div",{className:"col-span-3",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/10 rounded-xl p-4",children:[r.jsx("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:" Expander "}),Rs.length===0?r.jsx("p",{className:"text-slate-400 text-sm text-center py-4",children:" Expander "}):r.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:Rs.map(E=>r.jsx("div",{className:"bg-black/20 border border-white/10 rounded-lg p-3 hover:bg-white/5 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-medium",children:E.name}),r.jsx("p",{className:"text-slate-400 text-xs",children:E.categoryId}),r.jsxs("p",{className:"text-slate-500 text-xs mt-1",children:[E.blocks?.length||0," blocks"]})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>jr(E),className:"p-1 text-slate-400 hover:text-white hover:bg-white/10 rounded",title:"",children:""}),r.jsx("button",{onClick:()=>$r(E.id),className:"p-1 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded",title:"",children:r.jsx(xs,{size:14})})]})]})},E.id))})]})})]})]}),sr&&Ae&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Au,{className:"text-yellow-400"}),"  Expander"]}),r.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white",children:r.jsx(Qs,{size:20})})]}),r.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-500 rounded-lg flex items-center justify-center",children:r.jsx(bs,{className:"text-white",size:24})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-white",children:Ae.name}),r.jsx("p",{className:"text-sm text-slate-400",children:Ae.categoryId}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Ae.blocks?.length||0," blocks"]})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" (TOKEN)"}),r.jsxs("div",{className:"relative",children:[r.jsx(bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-yellow-400",size:20}),r.jsx("input",{type:"number",min:"1",max:"1000",value:ze,onChange:E=>nt(Math.max(1,parseInt(E.target.value)||1)),className:"w-full bg-black/40 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white text-xl font-bold focus:outline-none focus:border-yellow-500"})]}),r.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[" ",ze," TOKEN  Expander "]})]}),r.jsx("div",{className:"flex gap-2 mb-6",children:[5,10,25,50,100].map(E=>r.jsx("button",{onClick:()=>nt(E),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${ze===E?"bg-yellow-500 text-black":"bg-white/10 text-white hover:bg-white/20"}`,children:E},E))}),r.jsxs("div",{className:"mb-6 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:[r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer mb-3",children:[r.jsx("input",{type:"checkbox",checked:pt,onChange:E=>Is(E.target.checked),className:"w-5 h-5 rounded bg-black/40 border-white/20 text-blue-500 focus:ring-blue-500"}),r.jsx("span",{className:"text-white font-medium",children:" "})]}),pt&&r.jsxs("div",{className:"space-y-3 pl-8",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("label",{className:"text-sm text-slate-300 w-24",children:":"}),r.jsx("input",{type:"number",min:"1",max:"30",value:Lt,onChange:E=>K(Math.max(1,Math.min(30,parseInt(E.target.value)||1))),className:"w-20 bg-black/40 border border-white/10 rounded-lg px-3 py-2 text-white text-center focus:outline-none focus:border-blue-500"}),r.jsx("span",{className:"text-slate-400 text-sm",children:""})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("label",{className:"text-sm text-slate-300 w-24",children:":"}),r.jsx("input",{type:"number",min:"0",max:"100",value:le,onChange:E=>V(Math.max(0,parseInt(E.target.value)||0)),className:"w-20 bg-black/40 border border-white/10 rounded-lg px-3 py-2 text-white text-center focus:outline-none focus:border-blue-500"}),r.jsxs("span",{className:"text-slate-400 text-sm",children:["TOKEN ",le===0&&"()"]})]})]})]}),r.jsxs("div",{className:"mb-6 p-3 bg-slate-800/50 rounded-lg border border-white/5",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[r.jsx("span",{className:"text-slate-400",children:""}),r.jsxs("span",{className:"text-white",children:[ze," TOKEN"]})]}),r.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[r.jsx("span",{className:"text-slate-400",children:"Platform Fee (10%)"}),r.jsxs("span",{className:"text-red-400",children:["-",Math.floor(ze*.1)," TOKEN"]})]}),r.jsxs("div",{className:"flex justify-between text-sm font-bold border-t border-white/10 pt-2 mt-2",children:[r.jsx("span",{className:"text-slate-300",children:""}),r.jsxs("span",{className:"text-green-400",children:[ze-Math.floor(ze*.1)," TOKEN"]})]})]}),r.jsx("button",{onClick:ir,disabled:Y,className:"w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 rounded-xl text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:Y?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:18,className:"animate-spin"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx(jf,{size:18})," Marketplace"]})})]})}),ls&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Gl,{className:"text-emerald-400"})," "]}),r.jsx("button",{onClick:()=>It(null),className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white",children:r.jsx(Qs,{size:20})})]}),r.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg flex items-center justify-center",children:r.jsx(bs,{className:"text-white",size:24})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-white",children:ls.name}),r.jsx("p",{className:"text-sm text-slate-400",children:ls.categoryId}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[ls.blocks?.length||0," blocks"]})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" ()"}),r.jsx("div",{className:"glass-dropdown-wrapper w-full",children:r.jsx(zs,{value:Bt,onChange:E=>Bs(Number(E)),options:[1,2,3,5,7,14,30].map(E=>({value:E,label:`${E} `})),buttonClassName:"glass-dropdown w-full text-center text-xl font-bold"})}),r.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:[" Expander  ",Bt,"   Marketplace"]})]}),r.jsx("div",{className:"flex gap-2 mb-6",children:[1,3,7,14,30].map(E=>r.jsxs("button",{onClick:()=>Bs(E),className:`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${Bt===E?"bg-emerald-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,children:[E,"D"]},E))}),r.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-4 mb-6",children:r.jsxs("p",{className:"text-sm text-emerald-300",children:[" ",r.jsx("strong",{children:":"}),"  Expander   blocks "]})}),r.jsx("button",{onClick:()=>{confirm(` Expander "${ls.name}"  ${Bt} ?`)&&qt()},disabled:Ma,className:"w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-500 hover:to-teal-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 disabled:opacity-50 transition-all",children:Ma?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:18,className:"animate-spin"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Gl,{size:18})," ",Bt," "]})})]})}),Ue&&ht&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-lg shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:"  Block"}),r.jsx("button",{onClick:()=>Ke(!1),className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white",children:r.jsx(Qs,{size:20})})]}),r.jsxs("div",{className:`${ht.color||"bg-violet-500"} px-4 py-3 rounded-xl mb-4 flex items-center gap-3`,children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:r.jsx(bs,{className:"text-white",size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-white text-lg",children:ht.name}),r.jsx("p",{className:"text-white/70 text-sm",children:ht.isCustom?" AI Generated":` ${ht.type||"Default"}`})]})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-4",children:[r.jsx("h4",{className:"text-sm text-slate-400 mb-2 font-medium",children:" "}),ns?r.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[r.jsx(ot,{size:16,className:"animate-spin"}),r.jsx("span",{children:"..."})]}):r.jsx("p",{className:"text-white text-sm leading-relaxed",children:St})]}),r.jsxs("details",{className:"bg-black/20 border border-white/10 rounded-xl p-3 mb-6",children:[r.jsx("summary",{className:"text-xs text-slate-500 cursor-pointer",children:" Instruction  (EN)"}),r.jsx("p",{className:"text-slate-400 text-xs mt-2 leading-relaxed",children:ht.instruction})]}),r.jsx("button",{onClick:()=>gi(),disabled:ns||!St,className:`w-full py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${yt?"bg-red-500 text-white":ns||!St?"bg-slate-700 text-slate-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-500 text-white hover:from-blue-400 hover:to-purple-400"}`,children:yt?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:18,className:"animate-spin"}),"... ()"]}):r.jsx(r.Fragment,{children:" "})}),r.jsx("p",{className:"text-xs text-slate-500 text-center mt-3",children:" Block "})]})}),se&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(B0,{className:"text-red-400"}),"  Group "]}),r.jsx("button",{onClick:()=>W(!1),className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white",children:r.jsx(Qs,{size:20})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:""}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["","","","","","","","","","","",""].map(E=>r.jsx("button",{onClick:()=>Te(E),className:`w-10 h-10 rounded-lg text-xl flex items-center justify-center transition-all ${xe===E?"bg-red-500/30 border-2 border-red-500":"bg-white/5 border border-white/10 hover:bg-white/10"}`,children:E},E))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" Group"}),r.jsx("input",{type:"text",value:re,onChange:E=>me(E.target.value),placeholder:" Block ",className:"w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-red-500"})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 mb-6",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:":"}),r.jsxs("p",{className:"text-white font-medium",children:[xe," ",re||" Group"]})]}),r.jsxs("button",{onClick:Pa,disabled:!re.trim(),className:"w-full py-3 bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 rounded-xl text-white font-bold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Vn,{size:18}),"  Group"]})]})}),D&&A&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx(Bh,{className:"text-blue-400"}),"  Block  Group"]}),r.jsx("button",{onClick:()=>{T(!1),z(null)},className:"p-2 hover:bg-white/10 rounded-lg text-slate-400 hover:text-white",children:r.jsx(Qs,{size:20})})]}),r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-3 mb-6",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Block :"}),r.jsx("p",{className:"text-white font-medium",children:A.name})]}),r.jsxs("div",{className:"space-y-2 max-h-[350px] overflow-y-auto",children:[r.jsx("p",{className:"text-slate-400 text-xs mb-2",children:" Group :"}),O.filter(E=>E.id!==A?.fromGroupId).map(E=>r.jsxs("button",{onClick:()=>wn(E),className:"w-full p-3 bg-white/5 hover:bg-red-500/20 border border-white/10 hover:border-red-500/30 rounded-xl text-left transition-all flex items-center gap-3",children:[r.jsx("span",{className:"text-xl",children:E.icon}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:E.name}),r.jsxs("p",{className:"text-slate-400 text-xs",children:[(E.blocks||[]).length," blocks"]})]})]},E.id))]}),r.jsxs("button",{onClick:()=>{T(!1),W(!0)},className:"w-full mt-4 p-3 bg-gradient-to-r from-red-600/20 to-orange-600/20 hover:from-red-600/30 hover:to-orange-600/30 border border-red-500/30 rounded-xl text-red-400 font-medium flex items-center justify-center gap-2 transition-all",children:[r.jsx(B0,{size:16}),"  Group "]})]})}),$&&A&&k&&r.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[60]",children:r.jsxs("div",{className:"bg-slate-900 border border-white/10 rounded-2xl p-6 w-full max-w-sm shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Bh,{size:32,className:"text-white"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:""}),r.jsxs("p",{className:"text-slate-300",children:[" ",r.jsxs("span",{className:"text-yellow-400 font-semibold",children:['"',A.name,'"']})]}),r.jsxs("p",{className:"text-slate-300",children:[" Group ",r.jsxs("span",{className:"text-green-400 font-semibold",children:['"',k.name,'"']})," ?"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{q(!1),ue(null)},className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all",children:""}),r.jsx("button",{onClick:pi,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white rounded-xl font-medium transition-all",children:" "})]})]})}),_e&&r.jsxs("div",{className:"fixed bg-slate-800 border border-white/20 rounded-lg shadow-2xl min-w-[140px] py-1",style:{top:M.top,left:M.left,zIndex:99999},onClick:E=>E.stopPropagation(),children:[r.jsxs("button",{onClick:E=>{E.stopPropagation();const ee=O.flatMap(Re=>Re.blocks||[]).find(Re=>Re.id===_e);ee&&vo(ee),P(null)},className:"w-full px-3 py-2 text-left text-sm text-white hover:bg-white/10 flex items-center gap-2",children:[r.jsx(vf,{size:14})," "]}),r.jsxs("button",{onClick:E=>{E.stopPropagation(),O.flatMap(Re=>Re.blocks||[]).find(Re=>Re.id===_e)&&gi(),P(null)},className:"w-full px-3 py-2 text-left text-sm text-blue-300 hover:bg-blue-500/20 flex items-center gap-2",children:[r.jsx(hC,{size:14})," "]}),r.jsxs("button",{onClick:E=>{E.stopPropagation();const ee=O.find($e=>($e.blocks||[]).some(Nt=>Nt.id===_e)),Re=ee?.blocks?.find($e=>$e.id===_e);Re&&ee&&ra(Re,ee.id),P(null)},className:"w-full px-3 py-2 text-left text-sm text-green-300 hover:bg-green-500/20 flex items-center gap-2",children:[r.jsx(Bh,{size:14}),"  Group"]}),r.jsxs("button",{onClick:E=>{E.stopPropagation();const ee=O.find(Re=>(Re.blocks||[]).some($e=>$e.id===_e));ee&&ul(ee.id,_e),P(null)},className:"w-full px-3 py-2 text-left text-sm text-red-300 hover:bg-red-500/20 flex items-center gap-2",children:[r.jsx(xs,{size:14})," "]})]}),nr&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-slate-900/95 border border-white/10 rounded-2xl p-6 max-w-md w-full mx-4 shadow-2xl",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(xs,{size:32,className:"text-red-400"})}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"?"}),r.jsxs("p",{className:"text-slate-400 text-sm",children:["",r.jsx("br",{}),r.jsxs("span",{className:"text-white font-medium",children:['"',nr.name,'"']})]}),r.jsx("p",{className:"text-red-400 text-sm mt-3 bg-red-500/10 px-3 py-2 rounded-lg",children:"  Expander "})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>Us(null),className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-all",children:""}),r.jsxs("button",{onClick:()=>ua(nr),className:"flex-1 px-4 py-3 bg-red-500/20 backdrop-blur-sm border border-red-500/30 hover:bg-red-500/40 text-red-400 rounded-xl font-medium transition-all flex items-center justify-center gap-2",children:[r.jsx(xs,{size:16})," "]})]})]})}),r.jsx("button",{onClick:()=>be(!qe),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 rounded-full shadow-lg flex items-center justify-center text-white z-40",children:qe?r.jsx(Qs,{size:24}):r.jsx(d3,{size:24})}),qe&&r.jsxs("div",{className:"fixed bottom-24 right-6 w-96 h-[500px] bg-slate-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl flex flex-col z-50 overflow-hidden",children:[r.jsx("div",{className:"p-4 bg-gradient-to-r from-red-900/50 to-orange-900/50 border-b border-white/10",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-orange-500 rounded-full flex items-center justify-center",children:r.jsx(Bk,{size:20,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-white",children:"AI Block Generator"}),r.jsx("p",{className:"text-xs text-slate-400",children:" AI"})]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[H.map((E,ee)=>r.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm ${E.role==="assistant"?"bg-slate-800 text-white rounded-tl-none":"bg-red-600 text-white rounded-tr-none"}`,children:E.content})},ee)),Fe&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-slate-800 p-3 rounded-2xl rounded-tl-none",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),r.jsx("div",{ref:t})]}),r.jsx("div",{className:"p-4 bg-slate-900/50 border-t border-white/5",children:r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:Le,onChange:E=>We(E.target.value),onKeyDown:E=>E.key==="Enter"&&In(),placeholder:"...",className:"w-full bg-slate-800 text-white rounded-full pl-4 pr-12 py-3 text-sm focus:outline-none focus:ring-1 focus:ring-red-500/50 border border-white/10 placeholder-slate-500"}),r.jsx("button",{onClick:In,disabled:!Le.trim()||Fe,className:"absolute right-1 top-1/2 -translate-y-1/2 p-2 bg-red-600 rounded-full text-white hover:bg-red-500 disabled:bg-slate-700 disabled:text-slate-500 transition-colors",children:r.jsx(Nf,{size:14})})]})})]})]})},W8="0986967282",pN="098-***-7282",J8=`https://promptpay.io/${W8}.png`,gN=[{code:"kbank",name:"",color:"#138f2d"},{code:"scb",name:"",color:"#4e2a84"},{code:"ktb",name:"",color:"#1ba5e0"},{code:"bbl",name:"",color:"#1e4598"},{code:"bay",name:"",color:"#fec43b"},{code:"tmb",name:" (TTB)",color:"#1279be"},{code:"gsb",name:"",color:"#eb198d"},{code:"promptpay",name:"PromptPay",color:"#1c4b9c"}],Z8=()=>{const[s,e]=N.useState(null),[t,a]=N.useState("deposit"),[o,c]=N.useState(0),[d,m]=N.useState(!1),[p,g]=N.useState(""),[b,v]=N.useState(null),[j,I]=N.useState(""),[B,O]=N.useState(!1),[L,se]=N.useState([]),[W,re]=N.useState(!1),[me,xe]=N.useState(""),[Te,D]=N.useState([]),[T,A]=N.useState(!1),[z,$]=N.useState(!1),[q,k]=N.useState([]),[ue,_e]=N.useState(!1),[P,M]=N.useState(""),[F,Q]=N.useState(!1),[de,C]=N.useState({bankCode:"",accountNumber:"",accountName:""}),[J,te]=N.useState(!1);N.useEffect(()=>{const be=Ia(gn,H=>{e(H)});return()=>be()},[]),N.useEffect(()=>{if(!s)return;m(!0);const be=Gt(Be(fe,"users",s.uid,"wallet","main"),H=>{c(H.exists()&&H.data().balance||0),m(!1)},()=>m(!1));return()=>be()},[s]),N.useEffect(()=>{if(!s)return;_e(!0);const be=ys(He(fe,"users",s.uid,"bank_accounts"),en("createdAt","desc")),H=Gt(be,Me=>{const Le=Me.docs.map(We=>({id:We.id,...We.data()}));k(Le),Le.length>0&&!P&&M(Le[0].id),_e(!1)},()=>_e(!1));return()=>H()},[s]),N.useEffect(()=>{if(!b){I("");return}const be=URL.createObjectURL(b);return I(be),()=>URL.revokeObjectURL(be)},[b]),N.useEffect(()=>{if(!s){se([]);return}re(!0);const be=ys(He(fe,"payment_requests"),Qi("userId","==",s.uid),en("createdAt","desc")),H=Gt(be,Me=>{const Le=Me.docs.map(We=>({id:We.id,...We.data()}));se(Le),re(!1)},()=>re(!1));return()=>H()},[s]),N.useEffect(()=>{if(!s){D([]);return}A(!0);const be=ys(He(fe,"withdrawal_requests"),Qi("userId","==",s.uid),en("createdAt","desc")),H=Gt(be,Me=>{const Le=Me.docs.map(We=>({id:We.id,...We.data()}));D(Le),A(!1)},()=>A(!1));return()=>H()},[s]);const ge=N.useMemo(()=>({pending:{label:"Pending",className:"bg-yellow-500/20 text-yellow-300 border-yellow-400/30",icon:ks},approved:{label:"Approved",className:"bg-green-500/20 text-green-300 border-green-400/30",icon:Ln},rejected:{label:"Rejected",className:"bg-red-500/20 text-red-300 border-red-400/30",icon:xf}}),[]),Ie=async()=>{if(!s){alert("");return}const be=Number(p);if(!be||be<=0){alert("");return}if(!b){alert("");return}O(!0);try{const H=b.name.replace(/\s+/g,"_"),Me=`users/${s.uid}/payment_slips/${Date.now()}_${H}`,Le=_d(jd,Me);await wd(Le,b);const We=await Nd(Le);await ts(He(fe,"payment_requests"),{userId:s.uid,userEmail:s.email||"",amount:be,slipUrl:We,slipPath:Me,status:"pending",method:"promptpay",promptpayMasked:pN,createdAt:st(),updatedAt:st()}),g(""),v(null),alert("  ")}catch(H){console.error("Payment request failed:",H),alert(": "+H.message)}finally{O(!1)}},De=async()=>{if(s){if(!de.bankCode||!de.accountNumber||!de.accountName){alert("");return}if(de.accountNumber.length<10){alert(" 10 ");return}te(!0);try{const be=gN.find(H=>H.code===de.bankCode);await ts(He(fe,"users",s.uid,"bank_accounts"),{bankCode:de.bankCode,bankName:be?.name||de.bankCode,accountNumber:de.accountNumber,accountName:de.accountName,createdAt:st()}),C({bankCode:"",accountNumber:"",accountName:""}),Q(!1),alert(" ")}catch(be){console.error("Add bank failed:",be),alert(": "+be.message)}finally{te(!1)}}},Ce=async be=>{if(confirm("?"))try{await Sn(Be(fe,"users",s.uid,"bank_accounts",be)),P===be&&M("")}catch(H){console.error("Delete bank failed:",H),alert(": "+H.message)}},qe=async()=>{if(!s){alert("");return}const be=Number(me);if(!be||be<=0){alert("");return}if(be>o){alert(` ( ${o} TOKEN)`);return}if(!P){alert("");return}const H=q.find(Me=>Me.id===P);if(!H){alert("");return}if(confirm(` ${be} TOKEN 
${H.bankName}
${H.accountNumber}
${H.accountName}?`)){$(!0);try{await ts(He(fe,"withdrawal_requests"),{userId:s.uid,userEmail:s.email||"",amount:be,bankId:P,bankCode:H.bankCode,bankName:H.bankName,accountNumber:H.accountNumber,accountName:H.accountName,status:"pending",createdAt:st()}),xe(""),alert("  ")}catch(Me){console.error("Withdrawal request failed:",Me),alert(": "+Me.message)}finally{$(!1)}}};return r.jsxs("div",{className:"min-h-screen flex flex-col p-8 gap-6 bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 text-white font-sans overflow-hidden relative",children:[r.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-red-900/10 via-transparent to-transparent"})]}),r.jsxs("div",{className:"relative z-10 bg-white/5 backdrop-blur-xl border border-white/10 p-4 rounded-2xl shadow-xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-red-500 via-orange-500 to-amber-500"}),r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500 to-orange-600 flex items-center justify-center shadow-lg shadow-red-500/30 group-hover:scale-110 transition-transform duration-300",children:r.jsx(rc,{className:"text-white",size:32})}),r.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-900"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-red-100 to-orange-200 tracking-tight",children:""}),r.jsxs("p",{className:"text-base text-slate-400 font-light flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full"})," - "]})]})]}),r.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-600/20 to-red-900/20 backdrop-blur-xl rounded-2xl border border-orange-500/30 p-5 flex items-center gap-5 hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[r.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center shadow-lg shadow-orange-500/30",children:r.jsx(rc,{className:"text-white",size:28})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-orange-300 text-sm font-medium uppercase tracking-wider",children:""}),r.jsxs("p",{className:"text-3xl font-black text-white tracking-tight",children:[d?r.jsx(ot,{size:24,className:"animate-spin"}):o.toLocaleString(),r.jsx("span",{className:"text-base font-medium text-orange-300 ml-2",children:"TOKEN"})]})]})]})]})]}),r.jsxs("div",{className:"relative z-10 inline-flex gap-2 bg-black/40 backdrop-blur-xl p-2 rounded-2xl border border-white/10 shadow-2xl shadow-black/50",children:[r.jsxs("button",{onClick:()=>a("deposit"),className:`group relative flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${t==="deposit"?"bg-gradient-to-r from-green-600 via-green-500 to-emerald-500 text-white shadow-lg shadow-green-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(ni,{size:20,className:`transition-transform duration-300 ${t==="deposit"?"animate-bounce":"group-hover:rotate-12"}`})," ",t==="deposit"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>a("withdraw"),className:`group relative flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${t==="withdraw"?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-lg shadow-red-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(qo,{size:20,className:`transition-transform duration-300 ${t==="withdraw"?"animate-bounce":"group-hover:rotate-12"}`})," ",t==="withdraw"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]}),r.jsxs("button",{onClick:()=>a("banks"),className:`group relative flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${t==="banks"?"bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-500 text-white shadow-lg shadow-blue-500/40 scale-105":"text-slate-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(Fo,{size:20,className:`transition-transform duration-300 ${t==="banks"?"animate-bounce":"group-hover:rotate-12"}`})," ",t==="banks"&&r.jsx("span",{className:"absolute inset-0 rounded-xl bg-white/10 animate-pulse"})]})]}),t==="deposit"&&r.jsxs("div",{className:"relative z-10 grid grid-cols-1 lg:grid-cols-5 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 relative bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-green-500/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-lg shadow-green-500/30 text-2xl",children:""}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-emerald-400",children:"PromptPay QR"}),r.jsxs("p",{className:"text-sm text-slate-400",children:[": ",pN]})]})]}),r.jsxs("div",{className:"bg-black/40 rounded-2xl border border-green-500/20 p-5 flex flex-col items-center group hover:border-green-500/40 transition-all duration-300",children:[r.jsx("img",{src:J8,alt:"PromptPay QR",className:"w-56 h-56 rounded-xl border-2 border-green-500/30 shadow-lg group-hover:scale-105 transition-transform duration-300"}),r.jsx("p",{className:"text-xs text-slate-400 mt-4",children:""})]}),r.jsxs("div",{className:"mt-6 p-5 bg-gradient-to-br from-green-600/10 to-green-900/10 border border-green-500/20 rounded-2xl text-sm text-slate-300 leading-relaxed",children:[r.jsx("p",{className:"font-bold text-green-300 mb-3 flex items-center gap-2",children:" :"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[r.jsx("li",{children:" QR "}),r.jsx("li",{children:" + "}),r.jsx("li",{children:""})]})]})]}),r.jsxs("div",{className:"lg:col-span-3 relative bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 via-green-500 to-lime-500"}),r.jsxs("h2",{className:"text-2xl font-black text-transparent bg-clip-text bg-gradient-to-r from-green-300 to-emerald-400 mb-6 flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500 to-green-700 flex items-center justify-center shadow-lg",children:r.jsx(ni,{className:"text-white",size:22})}),""]}),r.jsxs("div",{className:"grid grid-cols-1 gap-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-green-300 mb-2 block font-medium",children:" (TOKEN)"}),r.jsx("input",{type:"number",min:"1",value:p,onChange:be=>g(be.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-4 text-white text-lg font-bold focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all",placeholder:" 500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-green-300 mb-2 block font-medium",children:""}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("label",{className:"group flex items-center justify-center gap-3 px-6 py-5 rounded-xl border-2 border-dashed border-white/20 bg-black/30 cursor-pointer hover:border-green-400 hover:bg-green-500/5 transition-all duration-300",children:[r.jsx(jf,{size:24,className:"text-green-300 group-hover:animate-bounce"}),r.jsx("span",{className:"text-sm text-slate-300 font-medium",children:""}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:be=>v(be.target.files?.[0]||null)})]}),j&&r.jsx("div",{className:"relative bg-black/40 rounded-2xl border border-green-500/20 p-4 group",children:r.jsx("img",{src:j,alt:"Slip preview",className:"w-full max-h-48 object-contain rounded-xl group-hover:scale-105 transition-transform duration-300"})}),!j&&r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[r.jsx(KA,{size:14})," "]})]})]}),r.jsx("button",{onClick:Ie,disabled:B,className:`w-full py-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 text-lg hover:scale-[1.02] ${B?"bg-slate-700 text-slate-300 cursor-wait":"bg-gradient-to-r from-green-600 to-green-500 text-white hover:from-green-500 hover:to-green-400 shadow-lg shadow-green-500/30"}`,children:B?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:20,className:"animate-spin"})," ..."]}):" "})]}),r.jsxs("div",{className:"mt-8",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(ks,{size:18,className:"text-green-400"}),""]}),W?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2",children:[r.jsx(ot,{size:16,className:"animate-spin"})," ..."]}):L.length===0?r.jsx("div",{className:"text-slate-500 text-sm",children:""}):r.jsx("div",{className:"space-y-3 max-h-52 overflow-y-auto pr-2 custom-scrollbar",children:L.map(be=>{const H=ge[be.status]||ge.pending,Me=H.icon;return r.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-3 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-white font-semibold",children:["+",be.amount," TOKEN"]}),r.jsx("p",{className:"text-xs text-slate-500",children:be.createdAt?.toDate?be.createdAt.toDate().toLocaleString("th-TH"):""})]}),r.jsxs("span",{className:`text-xs font-semibold px-3 py-1 rounded-full border flex items-center gap-1 ${H.className}`,children:[r.jsx(Me,{size:12})," ",H.label]})]},be.id)})})]})]})]}),t==="withdraw"&&r.jsxs("div",{className:"relative z-10 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl",children:[r.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx(qo,{className:"text-red-400"})," "]}),r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[r.jsx("p",{className:"text-slate-400 text-sm",children:""}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:[o.toLocaleString()," ",r.jsx("span",{className:"text-lg font-normal text-slate-400",children:"TOKEN"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" (TOKEN)"}),r.jsx("input",{type:"number",min:"1",max:o,value:me,onChange:be=>xe(be.target.value),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-red-500",placeholder:" 100"}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[[50,100,500,1e3].map(be=>r.jsx("button",{onClick:()=>xe(String(Math.min(be,o))),className:"px-3 py-1 text-xs bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:be},be)),r.jsx("button",{onClick:()=>xe(String(o)),className:"px-3 py-1 text-xs bg-red-500/20 text-red-300 rounded-lg hover:bg-red-500/30 transition-all",children:""})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:""}),ue?r.jsx("div",{className:"text-slate-400 flex items-center gap-2",children:r.jsx(ot,{size:16,className:"animate-spin"})}):q.length===0?r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 text-center",children:[r.jsx("p",{className:"text-yellow-300 text-sm mb-2",children:""}),r.jsx("button",{onClick:()=>a("banks"),className:"text-yellow-400 underline text-sm",children:"+ "})]}):r.jsx("div",{className:"space-y-2",children:q.map(be=>r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${P===be.id?"bg-blue-500/20 border-blue-500/50":"bg-black/30 border-white/10 hover:border-white/30"}`,children:[r.jsx("input",{type:"radio",name:"bank",value:be.id,checked:P===be.id,onChange:()=>M(be.id),className:"hidden"}),r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:r.jsx(Fo,{className:"text-blue-400",size:18})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-white font-medium text-sm",children:be.bankName}),r.jsxs("p",{className:"text-slate-400 text-xs",children:[be.accountNumber,"  ",be.accountName]})]}),P===be.id&&r.jsx(Ln,{className:"text-blue-400",size:18})]},be.id))})]}),r.jsx("button",{onClick:qe,disabled:z||q.length===0,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${z||q.length===0?"bg-slate-700 text-slate-300 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-red-500 text-white hover:from-red-500 hover:to-red-400"}`,children:z?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:18,className:"animate-spin"})," ..."]}):" "})]})]}),r.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:""}),T?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2",children:[r.jsx(ot,{size:16,className:"animate-spin"})," ..."]}):Te.length===0?r.jsx("div",{className:"text-slate-500 text-sm text-center py-8",children:""}):r.jsx("div",{className:"space-y-3 max-h-[450px] overflow-y-auto pr-2 custom-scrollbar",children:Te.map(be=>{const H=ge[be.status]||ge.pending,Me=H.icon;return r.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("p",{className:"text-lg font-bold text-red-400",children:["-",be.amount," TOKEN"]}),r.jsxs("span",{className:`text-xs font-semibold px-3 py-1 rounded-full border flex items-center gap-1 ${H.className}`,children:[r.jsx(Me,{size:12})," ",H.label]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[r.jsx(Fo,{size:14})," ",be.bankName,"  ",be.accountNumber]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:be.createdAt?.toDate?be.createdAt.toDate().toLocaleString("th-TH"):""}),be.status==="rejected"&&be.rejectReason&&r.jsxs("p",{className:"text-xs text-red-400 mt-2",children:[": ",be.rejectReason]})]},be.id)})})]})]}),t==="banks"&&r.jsx("div",{className:"relative z-10 max-w-2xl",children:r.jsxs("div",{className:"bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-6 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[r.jsx(Fo,{className:"text-blue-400"})," "]}),r.jsxs("button",{onClick:()=>Q(!0),className:"px-4 py-2 bg-blue-500/20 text-blue-300 rounded-xl hover:bg-blue-500/30 transition-all flex items-center gap-2",children:[r.jsx(Vn,{size:18})," "]})]}),ue?r.jsxs("div",{className:"text-slate-400 flex items-center gap-2 justify-center py-8",children:[r.jsx(ot,{size:20,className:"animate-spin"})," ..."]}):q.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Fo,{className:"text-slate-600 mx-auto mb-4",size:48}),r.jsx("p",{className:"text-slate-400",children:""}),r.jsx("button",{onClick:()=>Q(!0),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-xl",children:"+ "})]}):r.jsx("div",{className:"space-y-3",children:q.map(be=>r.jsxs("div",{className:"bg-black/40 border border-white/10 rounded-xl p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500/20 flex items-center justify-center",children:r.jsx(Fo,{className:"text-blue-400",size:24})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-medium",children:be.bankName}),r.jsx("p",{className:"text-lg font-mono text-slate-300",children:be.accountNumber}),r.jsx("p",{className:"text-sm text-slate-400",children:be.accountName})]})]}),r.jsx("button",{onClick:()=>Ce(be.id),className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition-all",children:r.jsx(xs,{size:18})})]},be.id))})]})}),F&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-slate-900 border border-white/20 rounded-2xl p-6 w-full max-w-md",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx(gg,{className:"text-blue-400"})," "]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:""}),r.jsx("div",{className:"glass-dropdown-wrapper w-full",children:r.jsx(zs,{value:de.bankCode,onChange:be=>C(H=>({...H,bankCode:be})),options:[{value:"",label:"--  --"},...gN.map(be=>({value:be.code,label:be.name}))],buttonClassName:"glass-dropdown w-full"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:""}),r.jsx("input",{type:"text",value:de.accountNumber,onChange:be=>C(H=>({...H,accountNumber:be.target.value.replace(/\D/g,"")})),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500 font-mono",placeholder:"1234567890",maxLength:15})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-slate-300 mb-2 block",children:" ()"}),r.jsx("input",{type:"text",value:de.accountName,onChange:be=>C(H=>({...H,accountName:be.target.value})),className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-500",placeholder:" "})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>{Q(!1),C({bankCode:"",accountNumber:"",accountName:""})},className:"flex-1 py-3 rounded-xl border border-white/20 text-white hover:bg-white/10 transition-all",children:""}),r.jsx("button",{onClick:De,disabled:J,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold hover:from-blue-500 hover:to-blue-400 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:J?r.jsxs(r.Fragment,{children:[r.jsx(ot,{size:16,className:"animate-spin"})," ..."]}):" "})]})]})})]})};function e9(){const s=[{icon:vg,title:" Podcast ",desc:"AI ",color:"purple"},{icon:cx,title:"",desc:"Spotify, Apple Podcasts, Google Podcasts ",color:"green"},{icon:ZN,title:" Marketplace",desc:" Podcast Template ",color:"yellow"},{icon:tm,title:"",desc:" ",color:"cyan"}],e=["   50+ "," AI  Studio"," Sound Effect "," Trending"];return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 bg-gradient-to-br from-purple-900 via-slate-900 to-slate-950 text-white font-sans overflow-auto relative",children:[r.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-pink-500/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-purple-900/20 via-transparent to-transparent"})]}),r.jsxs("div",{className:"relative z-10 max-w-4xl w-full text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600/30 to-pink-600/30 backdrop-blur-xl rounded-full border border-purple-500/30 mb-8 animate-bounce",children:[r.jsx(ks,{size:18,className:"text-purple-300 animate-pulse"}),r.jsx("span",{className:"text-purple-200 font-bold text-sm tracking-widest uppercase",children:"Coming Soon"}),r.jsx(bs,{size:18,className:"text-pink-300 animate-pulse"})]}),r.jsxs("div",{className:"relative mx-auto w-32 h-32 mb-8",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-pink-600 rounded-3xl blur-2xl opacity-50 animate-pulse"}),r.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-purple-500 via-purple-600 to-pink-600 rounded-3xl flex items-center justify-center shadow-2xl shadow-purple-500/40 animate-[spin_10s_linear_infinite]",style:{animationDirection:"reverse"},children:r.jsx(vg,{size:56,className:"text-white"})}),r.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg animate-bounce",children:r.jsx(KN,{size:16,className:"text-white"})})]}),r.jsx("h1",{className:"text-5xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-purple-100 to-pink-200 drop-shadow-2xl tracking-tight mb-4",children:"Podcast Creator"}),r.jsx("p",{className:"text-xl text-purple-200/80 mb-4 max-w-2xl mx-auto",children:"!  Podcast "}),r.jsx("p",{className:"text-lg text-slate-400 mb-12 max-w-xl mx-auto",children:" Podcast  "}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-12",children:s.map((t,a)=>{const o=t.icon;return r.jsxs("div",{className:`group relative bg-gradient-to-br from-${t.color}-900/30 to-slate-900/50 backdrop-blur-xl rounded-2xl border border-white/10 p-5 hover:border-${t.color}-500/50 transition-all duration-500 hover:scale-[1.02] overflow-hidden text-left`,children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-${t.color}-500/0 via-${t.color}-500/10 to-${t.color}-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000`}),r.jsxs("div",{className:"flex items-start gap-4 relative",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br from-${t.color}-400 to-${t.color}-600 flex items-center justify-center shadow-lg shadow-${t.color}-500/30 group-hover:scale-110 group-hover:rotate-6 transition-all duration-300`,children:r.jsx(o,{size:24,className:"text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:t.title}),r.jsx("p",{className:"text-sm text-slate-400",children:t.desc})]})]})]},a)})}),r.jsxs("div",{className:"relative bg-gradient-to-br from-purple-900/40 to-slate-900/60 backdrop-blur-xl rounded-3xl border border-purple-500/20 p-8 mb-12 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/0 via-purple-500/5 to-purple-500/0 animate-pulse"}),r.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center justify-center gap-3",children:[r.jsx(C3,{size:24,className:"text-purple-400"}),""]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((t,a)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all",children:[r.jsx(ox,{size:20,className:"text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-slate-300",children:t})]},a))})]}),r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("p",{className:"text-slate-500 text-sm",children:" "}),r.jsxs("button",{className:"group inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-2xl font-bold shadow-xl shadow-purple-500/30 hover:shadow-purple-500/50 hover:scale-105 transition-all duration-300 cursor-not-allowed opacity-70",children:[r.jsx("span",{children:""}),r.jsx(ax,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]})}function t9(){const s=[{icon:g3,title:" AI",desc:"",color:"pink"},{icon:em,title:"Marketplace ",desc:" ",color:"yellow"},{icon:cx,title:"",desc:"     ",color:"cyan"},{icon:tm,title:" 100%",desc:"  ",color:"green"}],e=[{name:"",icon:""},{name:"",icon:""},{name:"Pop",icon:""},{name:"Rock",icon:""},{name:"EDM",icon:""},{name:"Jazz",icon:""},{name:"Classical",icon:""},{name:"Hip-Hop",icon:""}],t=[" Studio  24-bit"," 100% "," Marketplace"," 50+ ","AI "," Spotify, YouTube Music "];return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-8 bg-gradient-to-br from-pink-900 via-slate-900 to-slate-950 text-white font-sans overflow-auto relative",children:[r.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-pink-500/20 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-yellow-500/15 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),r.jsx("div",{className:"absolute top-1/2 left-1/2 w-64 h-64 bg-cyan-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}}),r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-pink-900/20 via-transparent to-transparent"})]}),r.jsxs("div",{className:"relative z-10 max-w-4xl w-full text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-pink-600/30 to-yellow-600/30 backdrop-blur-xl rounded-full border border-pink-500/30 mb-8 animate-bounce",children:[r.jsx(ks,{size:18,className:"text-pink-300 animate-pulse"}),r.jsx("span",{className:"text-pink-200 font-bold text-sm tracking-widest uppercase",children:"Coming Soon"}),r.jsx(bs,{size:18,className:"text-yellow-300 animate-pulse"})]}),r.jsxs("div",{className:"relative mx-auto w-32 h-32 mb-8",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pink-500 to-yellow-600 rounded-full blur-2xl opacity-50 animate-pulse"}),r.jsx("div",{className:"relative w-full h-full bg-gradient-to-br from-pink-500 via-rose-600 to-yellow-500 rounded-full flex items-center justify-center shadow-2xl shadow-pink-500/40 animate-[spin_8s_linear_infinite]",children:r.jsx(NA,{size:56,className:"text-white animate-[spin_3s_linear_infinite]",style:{animationDirection:"reverse"}})}),r.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center shadow-lg animate-bounce",children:r.jsx(Ta,{size:14,className:"text-white ml-0.5"})})]}),r.jsx("h1",{className:"text-5xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-pink-100 to-yellow-200 drop-shadow-2xl tracking-tight mb-4",children:"Music Creator"}),r.jsx("p",{className:"text-xl text-pink-200/80 mb-4 max-w-2xl mx-auto",children:"! "}),r.jsx("p",{className:"text-lg text-slate-400 mb-8 max-w-xl mx-auto",children:" Studio  AI  Marketplace "}),r.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:e.map((a,o)=>r.jsxs("div",{className:"px-4 py-2 bg-white/5 backdrop-blur-sm rounded-full border border-white/10 hover:bg-white/10 hover:border-pink-500/30 transition-all duration-300 cursor-pointer hover:scale-105",children:[r.jsx("span",{className:"mr-2",children:a.icon}),r.jsx("span",{className:"text-sm text-slate-300",children:a.name})]},o))}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-12",children:s.map((a,o)=>{const c=a.icon;return r.jsxs("div",{className:`group relative bg-gradient-to-br from-${a.color}-900/30 to-slate-900/50 backdrop-blur-xl rounded-2xl border border-white/10 p-5 hover:border-${a.color}-500/50 transition-all duration-500 hover:scale-[1.02] overflow-hidden text-left`,children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-r from-${a.color}-500/0 via-${a.color}-500/10 to-${a.color}-500/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000`}),r.jsxs("div",{className:"flex items-start gap-4 relative",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br from-${a.color}-400 to-${a.color}-600 flex items-center justify-center shadow-lg shadow-${a.color}-500/30 group-hover:scale-110 group-hover:rotate-6 transition-all duration-300`,children:r.jsx(c,{size:24,className:"text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:a.title}),r.jsx("p",{className:"text-sm text-slate-400",children:a.desc})]})]})]},o)})}),r.jsxs("div",{className:"relative bg-gradient-to-br from-pink-900/40 to-slate-900/60 backdrop-blur-xl rounded-3xl border border-pink-500/20 p-8 mb-12 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500/0 via-pink-500/5 to-pink-500/0 animate-pulse"}),r.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center justify-center gap-3",children:[r.jsx(KN,{size:24,className:"text-pink-400"}),""]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((a,o)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all",children:[r.jsx(ox,{size:20,className:"text-green-400 flex-shrink-0"}),r.jsx("span",{className:"text-slate-300",children:a})]},o))})]}),r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("p",{className:"text-slate-500 text-sm",children:" "}),r.jsxs("button",{className:"group inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-pink-600 to-yellow-600 text-white rounded-2xl font-bold shadow-xl shadow-pink-500/30 hover:shadow-pink-500/50 hover:scale-105 transition-all duration-300 cursor-not-allowed opacity-70",children:[r.jsx("span",{children:""}),r.jsx(ax,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]})}const Xg="1.0.0",xN="/downloads/content-auto-post-extension.zip",bN=[{id:"extension",label:" Extension",icon:YN}],Jh={extension:[{id:"getting-started",title:" ",icon:Ta,content:[{type:"heading",text:" Content Auto Post!"},{type:"text",text:""},{type:"steps",items:[" Extension"," Extension  Key"," Project ","!"]}]},{id:"extension-install",title:"  Extension",icon:yf,content:[{type:"heading",text:" Chrome Extension"},{type:"steps",items:[" Extension (.zip) "," ZIP  ( Desktop)"," Chrome  chrome://extensions/  URL",' "Developer mode" ()',' "Load unpacked" ',"Extension ! "]},{type:"tip",text:" Pin Extension "},{type:"download",label:" Extension",version:Xg}]},{id:"extension-update",title:"  Extension",icon:XN,content:[{type:"heading",text:" Extension "},{type:"alert",variant:"info",text:" Update  Extension "},{type:"steps",items:[" Extension "," ZIP  (Overwrite )"," Chrome  chrome://extensions/",' "Content Auto Post Agent"   (Reload)',"! Extension "]},{type:"download",label:" Extension ",version:Xg}]},{id:"connect-project",title:"  Project",icon:t3,content:[{type:"heading",text:" Extension  Project"},{type:"text",text:" Extension   Project "},{type:"steps",items:[" Extension "," Key  Admin (  Admin)",' "Connect" '," Project ",' "Connected" ']},{type:"alert",variant:"info",text:" Extension  Schedule "}]},{id:"using-extension",title:"  Extension",icon:YN,content:[{type:"heading",text:" Extension "},{type:"text",text:" Extension  Schedule  Admin "},{type:"steps",items:[" Chrome  Extension ",' "Connected"  Projects'," Jobs  Jobs",""," Log  Logs ()"]},{type:"tip",text:"!  Extension  "}]}]};function s9(){const[s]=xk(),[e,t]=N.useState("extension"),[a,o]=N.useState("getting-started"),c=Jh[e]||[];N.useEffect(()=>{const p=s.get("tab"),g=s.get("section");if(p&&Jh[p]&&t(p),g){for(const[b,v]of Object.entries(Jh))if(v.find(j=>j.id===g)){t(b),o(g);break}window.scrollTo(0,0)}},[s]);const d=c.find(p=>p.id===a),m=p=>p.map((g,b)=>{switch(g.type){case"heading":return r.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:g.text},b);case"text":return r.jsx("p",{className:"text-gray-300 mb-4",children:g.text},b);case"steps":return r.jsx("ol",{className:"space-y-3 mb-6",children:g.items.map((v,j)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full bg-gradient-to-r from-red-600 to-orange-500 flex items-center justify-center text-white text-sm font-bold",children:j+1}),r.jsx("span",{className:"text-gray-200 pt-0.5",children:v})]},j))},b);case"download":return r.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-blue-600/20 border border-purple-500/30 rounded-xl p-4 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-white font-bold",children:g.label}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",g.version]})]}),r.jsxs("a",{href:xN,download:!0,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-xl font-bold shadow-lg shadow-purple-500/30 transition-all hover:scale-105",children:[r.jsx(yf,{size:18}),""]})]})},b);case"alert":return r.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl mb-4 ${g.variant==="info"?"bg-blue-500/20 border border-blue-500/30":g.variant==="warning"?"bg-yellow-500/20 border border-yellow-500/30":"bg-green-500/20 border border-green-500/30"}`,children:[r.jsx(Eu,{className:`flex-shrink-0 ${g.variant==="info"?"text-blue-400":g.variant==="warning"?"text-yellow-400":"text-green-400"}`,size:20}),r.jsx("p",{className:"text-gray-200",children:g.text})]},b);case"tip":return r.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-xl mb-4 bg-green-500/20 border border-green-500/30",children:[r.jsx(Ln,{className:"flex-shrink-0 text-green-400",size:20}),r.jsx("p",{className:"text-gray-200",children:g.text})]},b);case"faq":return r.jsx("div",{className:"space-y-4 mb-4",children:g.items.map((v,j)=>r.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:[r.jsxs("p",{className:"text-white font-bold mb-2",children:[" ",v.q]}),r.jsxs("p",{className:"text-gray-300 text-sm",children:[" ",v.a]})]},j))},b);default:return null}});return r.jsx("div",{className:"min-h-screen p-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-red-200 mb-2",children:" "}),r.jsx("p",{className:"text-gray-400",children:" Content Auto Post"})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-2 inline-flex gap-2",children:[bN.map(p=>r.jsxs("button",{onClick:()=>{t(p.id),o(Jh[p.id]?.[0]?.id||"getting-started")},className:`flex items-center gap-2 px-5 py-2.5 rounded-xl font-bold text-sm transition-all ${e===p.id?"bg-gradient-to-r from-red-600 to-orange-500 text-white shadow-lg":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(p.icon,{size:18}),p.label]},p.id)),r.jsxs("div",{className:"flex items-center gap-2 px-5 py-2.5 rounded-xl text-gray-500 text-sm cursor-not-allowed opacity-50",children:[r.jsx(tm,{size:18})," Automation ()"]})]})}),r.jsxs("div",{className:"flex gap-8",children:[r.jsx("div",{className:"w-72 flex-shrink-0",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-4 sticky top-8",children:[r.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider mb-3 px-2",children:bN.find(p=>p.id===e)?.label||""}),r.jsx("nav",{className:"space-y-1",children:c.map(p=>r.jsxs("button",{onClick:()=>o(p.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-left transition-all ${a===p.id?"bg-gradient-to-r from-red-600 to-orange-500 text-white shadow-lg":"text-gray-300 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(p.icon,{size:18}),r.jsx("span",{className:"text-sm font-medium",children:p.title}),a===p.id&&r.jsx(ju,{size:16,className:"ml-auto"})]},p.id))}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10",children:[r.jsxs("a",{href:xN,download:!0,className:"flex items-center justify-center gap-2 w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-xl font-bold text-sm shadow-lg transition-all hover:scale-[1.02]",children:[r.jsx(yf,{size:16})," Extension"]}),r.jsxs("p",{className:"text-center text-gray-500 text-xs mt-2",children:["v",Xg]})]})]})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8",children:[d&&m(d.content),r.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-white/10",children:[c.findIndex(p=>p.id===a)>0&&r.jsxs("button",{onClick:()=>o(c[c.findIndex(p=>p.id===a)-1].id),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:[r.jsx(ju,{size:16,className:"rotate-180"}),""]}),r.jsx("div",{className:"flex-1"}),c.findIndex(p=>p.id===a)<c.length-1&&r.jsxs("button",{onClick:()=>o(c[c.findIndex(p=>p.id===a)+1].id),className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors",children:["",r.jsx(ju,{size:16})]})]})]})})]})]})})}const n9=()=>r.jsx("div",{className:"p-8",children:r.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 text-white",children:r.jsx("h1",{className:"text-3xl font-bold",children:"Settings"})})});function $o({to:s,icon:e,label:t}){const o=Vr().pathname===s;return r.jsxs(Xo,{to:s,className:`group relative flex items-center gap-3 px-4 py-3.5 rounded-2xl transition-all duration-300 overflow-hidden ${o?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-xl shadow-red-500/40 scale-[1.03]":"text-red-100 hover:bg-white/10 hover:text-white hover:scale-[1.02] hover:shadow-lg"}`,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx(e,{size:20,className:`relative z-10 transition-all duration-300 ${o?"animate-bounce":"group-hover:rotate-12 group-hover:scale-110"}`}),r.jsx("span",{className:"relative z-10 font-semibold",children:t}),o&&r.jsx("span",{className:"absolute inset-0 rounded-2xl bg-white/10 animate-pulse"})]})}function yN({icon:s,label:e,children:t,childPaths:a=[]}){const[o,c]=N.useState(!1),d=Vr(),m=a.includes(d.pathname);return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>c(!o),className:`group relative w-full flex items-center justify-between gap-3 px-4 py-3.5 rounded-2xl transition-all duration-300 overflow-hidden ${m?"bg-gradient-to-r from-red-600 via-red-500 to-orange-500 text-white shadow-xl shadow-red-500/40 scale-[1.03]":"text-red-100 hover:bg-white/10 hover:text-white hover:scale-[1.02] hover:shadow-lg"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(s,{size:20,className:`relative z-10 transition-all duration-300 ${m?"animate-pulse":"group-hover:rotate-12 group-hover:scale-110"}`}),r.jsx("span",{className:"relative z-10 font-semibold",children:e})]}),r.jsx(tr,{size:16,className:`transition-transform duration-300 ${o?"rotate-180":""}`})]}),r.jsx("div",{className:`overflow-hidden transition-all duration-300 ${o?"max-h-96 opacity-100 mt-1":"max-h-0 opacity-0"}`,children:r.jsx("div",{className:"pl-4 space-y-1 py-1",children:t})})]})}function Ql({to:s,icon:e,label:t}){const o=Vr().pathname===s;return r.jsxs(Xo,{to:s,className:`group relative flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-300 overflow-hidden ${o?"bg-white/20 text-white shadow-lg":"text-red-200/80 hover:bg-white/10 hover:text-white"}`,children:[r.jsx(e,{size:16,className:`relative z-10 transition-all duration-300 ${o?"":"group-hover:scale-110"}`}),r.jsx("span",{className:"relative z-10 text-sm font-medium",children:t})]})}function r9(){const{t:s}=ed(),[e,t]=N.useState(null),[a,o]=N.useState(!0),[c,d]=N.useState(!1);N.useEffect(()=>{console.log("Setting up auth listener");let g=!0;const b=Ia(gn,async v=>{if(g){if(console.log("Current User:",v),t(v),v)try{const I=(await Qr(Be(fe,"users",v.uid))).data()?.role;g&&d(I==="admin")}catch(j){console.error("Failed to load user role:",j),g&&d(!1)}else d(!1);g&&o(!1)}});return()=>{g=!1,b()}},[]);const m=async()=>{console.log("Login clicked");try{const g=new ya;await H_(gn,g)}catch(g){console.error("Login failed:",g)}},p=async()=>{try{await $I(gn)}catch(g){console.error("Logout failed:",g)}};return a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 border-4 border-red-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-white text-lg",children:"Loading..."})]})}):e?r.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-red-900 via-slate-900 to-slate-950 text-white overflow-hidden relative",children:[r.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-red-500/10 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),r.jsxs("aside",{className:"relative w-64 bg-black/30 backdrop-blur-2xl border-r border-white/10 flex flex-col shadow-2xl z-10",children:[r.jsx("div",{className:"h-16 px-4 border-b border-white/10 flex items-center",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center shadow-lg shadow-red-500/30",children:r.jsx(bs,{className:"text-white",size:20})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white to-red-200 tracking-tight",children:"Auto Post"}),r.jsx("p",{className:"text-[10px] text-red-300/60 font-medium",children:"Content Automation"})]})]})}),r.jsxs("nav",{className:"flex-1 p-3 space-y-1.5 overflow-y-auto custom-scrollbar",children:[r.jsx($o,{to:"/",icon:QN,label:s("common.dashboard")}),r.jsxs(yN,{icon:rd,label:"VDO Creator",childPaths:["/projects","/mode-creator","/expander","/characters"],children:[r.jsx(Ql,{to:"/projects",icon:bg,label:"Projects"}),r.jsx(Ql,{to:"/mode-creator",icon:s_,label:"Mode System"}),r.jsx(Ql,{to:"/expander",icon:bs,label:"Expander"}),r.jsx(Ql,{to:"/characters",icon:wa,label:"Characters"})]}),r.jsx($o,{to:"/marketplace",icon:em,label:"Marketplace"}),r.jsx($o,{to:"/platforms",icon:si,label:s("common.platforms","Platforms")}),r.jsx($o,{to:"/payments",icon:bf,label:"Payments"}),c&&r.jsx($o,{to:"/admin",icon:wg,label:"Admin Panel"}),r.jsx($o,{to:"/settings",icon:JN,label:s("common.settings")}),r.jsxs(yN,{icon:ks,label:"Coming Soon",childPaths:["/podcast-creator","/music-creator"],children:[r.jsx(Ql,{to:"/podcast-creator",icon:vg,label:"Podcast Creator"}),r.jsx(Ql,{to:"/music-creator",icon:b3,label:"Music Creator"})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:r.jsx($o,{to:"/learn",icon:Vk,label:""})})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0 relative z-10",children:[r.jsxs("header",{className:"h-16 bg-black/20 backdrop-blur-xl border-b border-white/10 flex items-center justify-between px-8 shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),r.jsx("h2",{className:"text-lg font-semibold text-transparent bg-clip-text bg-gradient-to-r from-white to-red-200",children:"Studio Dashboard"})]}),r.jsx("div",{className:"flex items-center gap-4",children:e?r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"group flex items-center gap-3 px-4 py-2 bg-white/10 rounded-xl border border-white/10 hover:bg-white/20 hover:border-white/20 transition-all duration-300 cursor-pointer",children:[e.photoURL?r.jsx("img",{src:e.photoURL,alt:e.displayName,className:"w-8 h-8 rounded-lg border-2 border-white/20 group-hover:scale-110 transition-transform"}):r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center",children:r.jsx(lC,{size:16})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-white",children:e.displayName||"User"}),r.jsx("p",{className:"text-[10px] text-slate-400",children:e.email?.split("@")[0]})]})]}),r.jsx("button",{onClick:p,className:"p-2.5 bg-red-500/20 hover:bg-red-500 rounded-xl transition-all duration-300 text-red-300 hover:text-white hover:scale-110 border border-red-500/30",title:s("common.logout"),children:r.jsx(o3,{size:18})})]}):r.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-red-600 to-red-500 text-white rounded-xl font-bold shadow-lg shadow-red-500/30 hover:from-red-500 hover:to-red-400 transition-all hover:scale-105",children:[r.jsx(a3,{size:18}),s("common.login")]})})]}),r.jsx("main",{className:"flex-1 overflow-auto scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent",children:r.jsxs(BT,{children:[r.jsx(Pn,{path:"/",element:r.jsx(T8,{})}),r.jsx(Pn,{path:"/projects",element:r.jsx(L8,{})}),r.jsx(Pn,{path:"/platforms",element:r.jsx(U8,{})}),r.jsx(Pn,{path:"/mode-creator",element:r.jsx(H8,{})}),r.jsx(Pn,{path:"/expander",element:r.jsx(X8,{})}),r.jsx(Pn,{path:"/characters",element:r.jsx(Q8,{})}),r.jsx(Pn,{path:"/marketplace",element:r.jsx(G8,{})}),r.jsx(Pn,{path:"/payments",element:r.jsx(Z8,{})}),r.jsx(Pn,{path:"/podcast-creator",element:r.jsx(e9,{})}),r.jsx(Pn,{path:"/music-creator",element:r.jsx(t9,{})}),c&&r.jsx(Pn,{path:"/admin",element:r.jsx(B8,{})}),r.jsx(Pn,{path:"/settings",element:r.jsx(n9,{})}),r.jsx(Pn,{path:"/learn",element:r.jsx(s9,{})}),r.jsx(Pn,{path:"*",element:r.jsx(VT,{to:"/",replace:!0})})]})})]})]}):r.jsx(VL,{})}function a9(){return r.jsx(hk,{children:r.jsx(r9,{})})}HS.createRoot(document.getElementById("root")).render(r.jsx(N.StrictMode,{children:r.jsx(a9,{})}));
